--- python2.7-2.7.1.orig/debian/mkbinfmt.py
+++ python2.7-2.7.1/debian/mkbinfmt.py
@@ -0,0 +1,17 @@
+# mkbinfmt.py
+import imp, sys, string, os.path
+
+magic = string.join(["\\x%.2x" % ord(c) for c in imp.get_magic()],"")
+
+name = sys.argv[1]
+ 
+binfmt = '''\
+package %s
+interpreter /usr/bin/%s
+magic %s\
+''' % (name, name, magic)
+
+#filename = '/usr/share/binfmts/' + name
+#open(filename,'w+').write(binfmt)
+
+print binfmt
--- python2.7-2.7.1.orig/debian/PVER-minimal.preinst.in
+++ python2.7-2.7.1/debian/PVER-minimal.preinst.in
@@ -0,0 +1,39 @@
+#!/bin/sh
+
+set -e
+
+syssite=/usr/lib/@PVER@/site-packages
+oldsite=/usr/lib/@PVER@/old-site-packages
+localsite=/usr/local/lib/@PVER@/dist-packages
+syslink=../../${localsite#/usr/*}
+
+case "$1" in
+    install)
+	if [ -z "$2" ] && [ -d $syssite ] && [ ! -h $syssite ]; then
+	    echo "new installation of @PVER@-minimal; $syssite is a directory"
+	    echo "which is expected a symlink to $localsite."
+	    echo "please find the package shipping files in $syssite and"
+	    echo "file a bug report to ship these in /usr/lib/@PVER@/dist-packages instead"
+	    echo "aborting installation of @PVER@-minimal"
+	    exit 1
+	fi
+
+	# remember newly installed runtime
+	mkdir -p /var/lib/python
+	touch /var/lib/python/@PVER@_installed
+    ;;
+    upgrade)
+    ;;
+
+    abort-upgrade)
+    ;;
+
+    *)
+        echo "preinst called with unknown argument \`$1'" >&2
+        exit 1
+    ;;
+esac
+
+#DEBHELPER#
+
+exit 0
--- python2.7-2.7.1.orig/debian/README.idle-PVER.in
+++ python2.7-2.7.1/debian/README.idle-PVER.in
@@ -0,0 +1,14 @@
+
+  The Python IDLE package for Debian
+  ----------------------------------
+
+This package contains Python @VER@'s Integrated DeveLopment Environment, IDLE.
+
+IDLE is included in the Python @VER@ upstream distribution (Tools/idle) and
+depends on Tkinter (available as @PVER@-tk package).
+
+I have written a simple man page.
+
+
+    06/16/1999
+    Gregor Hoffleit <flight@debian.org>
--- python2.7-2.7.1.orig/debian/pyhtml2devhelp.py
+++ python2.7-2.7.1/debian/pyhtml2devhelp.py
@@ -0,0 +1,222 @@
+#! /usr/bin/python
+
+import formatter, htmllib
+import os, sys, re
+
+class PyHTMLParser(htmllib.HTMLParser):
+    pages_to_include = set(('whatsnew/index.html', 'tutorial/index.html', 'using/index.html',
+                            'reference/index.html', 'library/index.html', 'howto/index.html',
+                            'extending/index.html', 'c-api/index.html', 'install/index.html',
+                            'distutils/index.html', 'documenting/index.html'))
+
+    def __init__(self, formatter, basedir, fn, indent, parents=set()):
+        htmllib.HTMLParser.__init__(self, formatter)
+        self.basedir = basedir
+        self.dir, self.fn = os.path.split(fn)
+        self.data = ''
+        self.parents = parents
+        self.link = {}
+        self.indent = indent
+        self.last_indent = indent - 1
+        self.sub_indent = 0
+        self.sub_count = 0
+        self.next_link = False
+
+    def process_link(self):
+        new_href = os.path.join(self.dir, self.link['href'])
+        text = self.link['text']
+        indent = self.indent + self.sub_indent
+        if self.last_indent == indent:
+            print '%s</sub>' % ('  ' * self.last_indent)
+            self.sub_count -= 1
+        print '%s<sub link="%s" name="%s">' % ('  ' * indent, new_href, text)
+        self.sub_count += 1
+        self.last_indent = self.indent + self.sub_indent
+
+    def start_li(self, attrs):
+        self.sub_indent += 1
+        self.next_link = True
+
+    def end_li(self):
+        indent = self.indent + self.sub_indent
+        if self.sub_count > 0:
+            print '%s</sub>' % ('  ' * self.last_indent)
+            self.sub_count -= 1
+            self.last_indent -= 1
+        self.sub_indent -= 1
+
+    def start_a(self, attrs):
+        self.link = {}
+        for attr in attrs:
+            self.link[attr[0]] = attr[1]
+        self.data = ''
+        
+    def end_a(self):
+        process = False
+        text = self.data.replace('\t', '').replace('\n', ' ').replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;')
+        self.link['text'] = text
+        # handle a tag without href attribute
+        try:
+            href = self.link['href']
+        except KeyError:
+            return
+
+        abs_href = os.path.join(self.basedir, href)
+        if abs_href in self.parents:
+            return
+        if href.startswith('..') or href.startswith('http:') \
+               or href.startswith('mailto:') or href.startswith('news:'):
+            return
+        if href in ('', 'about.html', 'modindex.html', 'genindex.html', 'glossary.html',
+                    'search.html', 'contents.html', 'download.html', 'bugs.html',
+                    'license.html', 'copyright.html'):
+            return
+
+        if self.link.has_key('class'):
+            if self.link['class'] in ('biglink'):
+                process = True
+            if self.link['class'] in ('reference external'):
+                if self.next_link:
+                    process = True
+                    next_link = False
+
+        if process == True:
+            self.process_link()
+            if href in self.pages_to_include:
+                self.parse_file(os.path.join(self.dir, href))
+
+    def finish(self):
+        if self.sub_count > 0:
+            print '%s</sub>' % ('  ' * self.last_indent)
+
+    def handle_data(self, data):
+        self.data += data
+
+    def parse_file(self, href):
+        # TODO basedir bestimmen
+        parent = os.path.join(self.basedir, self.fn)
+        self.parents.add(parent)
+        parser = PyHTMLParser(formatter.NullFormatter(),
+                              self.basedir, href, self.indent + 1,
+                              self.parents)
+        text = file(self.basedir + '/' + href).read()
+        parser.feed(text)
+        parser.finish()
+        parser.close()
+        if parent in self.parents:
+            self.parents.remove(parent)
+
+class PyIdxHTMLParser(htmllib.HTMLParser):
+    def __init__(self, formatter, basedir, fn, indent):
+        htmllib.HTMLParser.__init__(self, formatter)
+        self.basedir = basedir
+        self.dir, self.fn = os.path.split(fn)
+        self.data = ''
+        self.link = {}
+        self.indent = indent
+        self.active = False
+        self.indented = False
+        self.nolink = False
+        self.header = ''
+        self.last_letter = 'Z'
+        self.last_text = ''
+
+    def process_link(self):
+        new_href = os.path.join(self.dir, self.link['href'])
+        text = self.link['text']
+        if not self.active:
+            return
+        if text.startswith('['):
+            return
+        if self.link.get('rel', None) in ('prev', 'parent', 'next', 'contents', 'index'):
+            return
+        if self.indented:
+            text = self.last_text + ' ' + text
+        else:
+            # Save it in case we need it again
+            self.last_text = re.sub(' \([\w\-\.\s]+\)', '', text)
+        indent = self.indent
+        print '%s<function link="%s" name="%s"/>' % ('  ' * indent, new_href, text)
+
+    def start_dl(self, attrs):
+        if self.last_text:
+            # Looks like we found the second part to a command
+            self.indented = True
+
+    def end_dl(self):
+        self.indented = False
+
+    def start_dt(self, attrs):
+        self.data = ''
+        self.nolink = True
+
+    def end_dt(self):
+        if not self.active:
+            return
+        if self.nolink == True:
+            # Looks like we found the first part to a command
+            self.last_text = re.sub(' \([\w\-\.\s]+\)', '', self.data)
+            self.nolink = False
+
+    def start_h2(self, attrs):
+        for k, v in attrs:
+            if k == 'id':
+                self.header = v
+                if v == '_':
+                    self.active = True
+
+    def start_td(self, attrs):
+        self.indented = False
+        self.last_text = ''
+
+    def start_table(self, attrs):
+        pass
+
+    def end_table(self):
+        if self.header == self.last_letter:
+            self.active = False
+
+    def start_a(self, attrs):
+        self.nolink = False
+        self.link = {}
+        for attr in attrs:
+            self.link[attr[0]] = attr[1]
+        self.data = ''
+        
+    def end_a(self):
+        text = self.data.replace('\t', '').replace('\n', ' ').replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;')
+        self.link['text'] = text
+        # handle a tag without href attribute
+        try:
+            href = self.link['href']
+        except KeyError:
+            return
+        self.process_link()
+
+    def handle_data(self, data):
+        self.data += data
+
+def main():
+    base = sys.argv[1]
+    fn = sys.argv[2]
+    version = sys.argv[3]
+
+    parser = PyHTMLParser(formatter.NullFormatter(), base, fn, indent=0)
+    print '<?xml version="1.0" encoding="iso-8859-1"?>'
+    print '<book title="Python %s Documentation" name="Python" version="%s" link="index.html">' % (version, version)
+    print '<chapters>'
+    parser.parse_file(fn)
+    print '</chapters>'
+
+    print '<functions>'
+
+    fn = 'genindex-all.html'
+    parser = PyIdxHTMLParser(formatter.NullFormatter(), base, fn, indent=1)
+    text = file(base + '/' + fn).read()
+    parser.feed(text)
+    parser.close()
+
+    print '</functions>'
+    print '</book>'
+
+main()
--- python2.7-2.7.1.orig/debian/pymindeps.py
+++ python2.7-2.7.1/debian/pymindeps.py
@@ -0,0 +1,174 @@
+#! /usr/bin/python
+
+# Matthias Klose
+# Modified to only exclude module imports from a given module.
+
+# Copyright 2004 Toby Dickenson
+#
+# Permission is hereby granted, free of charge, to any person obtaining
+# a copy of this software and associated documentation files (the
+# "Software"), to deal in the Software without restriction, including
+# without limitation the rights to use, copy, modify, merge, publish,
+# distribute, sublicense, and/or sell copies of the Software, and to
+# permit persons to whom the Software is furnished to do so, subject
+# to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+# IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
+# CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+# TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+# SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+import os, sys, pprint
+import modulefinder
+import imp
+
+class mymf(modulefinder.ModuleFinder):
+    def __init__(self,*args,**kwargs):
+        self._depgraph = {}
+        self._types = {}
+        self._last_caller = None
+        modulefinder.ModuleFinder.__init__(self, *args, **kwargs)
+        
+    def import_hook(self, name, caller=None, fromlist=None, level=-1):
+        old_last_caller = self._last_caller
+        try:
+            self._last_caller = caller
+            return modulefinder.ModuleFinder.import_hook(self, name, caller,
+                                                         fromlist, level)
+        finally:
+            self._last_caller = old_last_caller
+            
+    def import_module(self, partnam, fqname, parent):
+        m = modulefinder.ModuleFinder.import_module(self,
+                                                    partnam, fqname, parent)
+        if m is not None and self._last_caller:
+            caller = self._last_caller.__name__
+            if '.' in caller:
+                caller = caller[:caller.index('.')]
+            callee =  m.__name__
+            if '.' in callee:
+                callee = callee[:callee.index('.')]
+            #print "XXX last_caller", caller, "MOD", callee
+            #self._depgraph.setdefault(self._last_caller.__name__,{})[r.__name__] = 1
+            #if caller in ('pdb', 'doctest') or callee in ('pdb', 'doctest'):
+            #    print caller, "-->", callee
+            if caller != callee:
+                self._depgraph.setdefault(caller,{})[callee] = 1
+        return m
+    
+    def find_module(self, name, path, parent=None):
+        if parent is not None:
+            # assert path is not None
+            fullname = parent.__name__+'.'+name
+        elif name == "__init__":
+            fullname = os.path.basename(path[0])
+        else:
+            fullname = name
+        if self._last_caller:
+            caller = self._last_caller.__name__
+            if fullname in excluded_imports.get(caller, []):
+                #self.msgout(3, "find_module -> Excluded", fullname)
+                raise ImportError, name
+
+        if fullname in self.excludes:
+            #self.msgout(3, "find_module -> Excluded", fullname)
+            raise ImportError, name
+
+        if path is None:
+            if name in sys.builtin_module_names:
+                return (None, None, ("", "", imp.C_BUILTIN))
+
+            path = self.path
+        return imp.find_module(name, path)
+
+    def load_module(self, fqname, fp, pathname, file_info):
+        suffix, mode, type = file_info
+        m = modulefinder.ModuleFinder.load_module(self, fqname,
+                                                  fp, pathname, file_info)
+        if m is not None:
+            self._types[m.__name__] = type
+        return m
+
+    def load_package(self, fqname, pathname):
+        m = modulefinder.ModuleFinder.load_package(self, fqname,pathname)
+        if m is not None:
+            self._types[m.__name__] = imp.PKG_DIRECTORY
+        return m
+ 
+def reduce_depgraph(dg):
+    pass
+
+# guarded imports, which don't need to be included in python-minimal
+excluded_imports = {
+    'codecs': set(('encodings',)),
+    'collections': set(('doctest', 'dummy_thread', 'cPickle')),
+    'copy': set(('reprlib',)),
+    'difflib': set(('doctest',)),
+    'hashlib': set(('logging',)),
+    #'hashlib': set(('_hashlib', '_md5', '_sha', '_sha256','_sha512',)),
+    'heapq': set(('doctest',)),
+    'inspect': set(('compiler',)),
+    'os': set(('nt', 'ntpath', 'os2', 'os2emxpath', 'mac', 'macpath',
+               'riscos', 'riscospath', 'riscosenviron')),
+    'optparse': set(('gettext',)),
+    'pickle': set(('doctest',)),
+    'platform': set(('plistlib', 'tempfile')),
+    #'socket': set(('_ssl', 'ssl')),
+    'tempfile': set(('dummy_thread',)),
+    'subprocess': set(('threading',)),
+    'shutil': set(('distutils', 'tarfile', 'zipfile')),
+    }
+
+def main(argv):
+    # Parse command line
+    import getopt
+    try:
+        opts, args = getopt.getopt(sys.argv[1:], "dmp:qx:")
+    except getopt.error as msg:
+        print(msg)
+        return
+
+    # Process options
+    debug = 1
+    domods = 0
+    addpath = []
+    exclude = []
+    for o, a in opts:
+        if o == '-d':
+            debug = debug + 1
+        if o == '-m':
+            domods = 1
+        if o == '-p':
+            addpath = addpath + a.split(os.pathsep)
+        if o == '-q':
+            debug = 0
+        if o == '-x':
+            exclude.append(a)
+
+    path = sys.path[:]
+    path = addpath + path
+
+    if debug > 1:
+        print("version:", sys.version)
+        print("path:")
+        for item in path:
+            print("   ", repr(item))
+
+    #exclude = ['__builtin__', 'sys', 'os']
+    exclude = []
+    mf = mymf(path, debug, exclude)
+    for arg in args:
+        mf.run_script(arg)
+
+    depgraph = reduce_depgraph(mf._depgraph)
+    
+    pprint.pprint({'depgraph':mf._depgraph, 'types':mf._types})
+    
+if __name__=='__main__':
+    main(sys.argv[1:])
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-tut.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-tut.in
@@ -0,0 +1,13 @@
+Document: @PVER@-tut
+Title: Python Tutorial (v@VER@)
+Author: Guido van Rossum, Fred L. Drake, Jr., editor
+Abstract: This tutorial introduces the reader informally to the basic
+ concepts and features of the Python language and system.  It helps
+ to have a Python interpreter handy for hands-on experience, but
+ all examples are self-contained, so the tutorial can be read
+ off-line as well.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/tutorial/index.html
+Files: /usr/share/doc/@PVER@/html/tutorial/*.html
--- python2.7-2.7.1.orig/debian/pydoc.1.in
+++ python2.7-2.7.1/debian/pydoc.1.in
@@ -0,0 +1,53 @@
+.TH PYDOC@VER@ 1
+.SH NAME
+pydoc@VER@ \- the Python documentation tool
+.SH SYNOPSIS
+.PP
+.B pydoc@VER@
+.I name
+.PP
+.B pydoc@VER@ -k
+.I keyword
+.PP
+.B pydoc@VER@ -p
+.I port
+.PP
+.B pydoc@VER@ -g
+.PP
+.B pydoc@VER@ -w
+.I module [...]
+.SH DESCRIPTION
+.PP
+.B pydoc@VER@
+.I name
+Show text documentation on something.
+.I name
+may be the name of a
+Python keyword, topic, function, module, or package, or a dotted
+reference to a class or function within a module or module in a
+package.  If
+.I name
+contains a '/', it is used as the path to a
+Python source file to document. If name is 'keywords', 'topics',
+or 'modules', a listing of these things is displayed.
+.PP
+.B pydoc@VER@ -k
+.I keyword
+Search for a keyword in the synopsis lines of all available modules.
+.PP
+.B pydoc@VER@ -p
+.I port
+Start an HTTP server on the given port on the local machine.
+.PP
+.B pydoc@VER@ -g
+Pop up a graphical interface for finding and serving documentation.
+.PP
+.B pydoc@VER@ -w
+.I name [...]
+Write out the HTML documentation for a module to a file in the current
+directory.  If
+.I name
+contains a '/', it is treated as a filename; if
+it names a directory, documentation is written for all the contents.
+.SH AUTHOR
+Moshe Zadka, based on "pydoc --help"
--- python2.7-2.7.1.orig/debian/dh_doclink
+++ python2.7-2.7.1/debian/dh_doclink
@@ -0,0 +1,28 @@
+#! /bin/sh
+
+pkg=`echo $1 | sed 's/^-p//'`
+target=$2
+
+ln -sf $target debian/$pkg/usr/share/doc/$pkg
+
+f=debian/$pkg.postinst.debhelper
+if [ ! -e $f ] || [ "`grep -c '^# dh_doclink' $f`" -eq 0 ]; then
+cat >> $f <<EOF
+# dh_doclink
+if [ "\$1" = "configure" ]; then
+  if [ -d /usr/doc -a ! -e /usr/doc/$pkg -a -d /usr/share/doc/$pkg ]; then
+    ln -sf ../share/doc/$pkg /usr/doc/$pkg
+  fi
+fi
+EOF
+fi
+
+f=debian/$pkg.prerm.debhelper
+if [ ! -e $f ] || [ "`grep -c '^# dh_doclink' $f`" -eq 0 ]; then
+cat >> $f <<EOF
+# dh_doclink
+if [ \( "\$1" = "upgrade" -o "\$1" = "remove" \) -a -L /usr/doc/$pkg ]; then
+  rm -f /usr/doc/$pkg
+fi
+EOF
+fi
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-dist.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-dist.in
@@ -0,0 +1,13 @@
+Document: @PVER@-dist
+Title: Distributing Python Modules (v@VER@)
+Author: Greg Ward
+Abstract: This document describes the Python Distribution Utilities
+ (``Distutils'') from the module developer's point-of-view, describing
+ how to use the Distutils to make Python modules and extensions easily
+ available to a wider audience with very little overhead for
+ build/release/install mechanics.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/distutils/index.html
+Files: /usr/share/doc/@PVER@/html/distutils/*.html
--- python2.7-2.7.1.orig/debian/PVER-minimal.README.Debian.in
+++ python2.7-2.7.1/debian/PVER-minimal.README.Debian.in
@@ -0,0 +1,145 @@
+Contents of the @PVER@-minimal package
+-----------------------------------------
+
+@PVER@-minimal consists of a minimum set of modules which may be needed
+for python scripts used during the boot process.  If other packages
+are needed in these scripts, don't work around the missing module, but
+file a bug report against this package. The modules in this package
+are:
+
+  __builtin__		builtin
+  __future__		module
+  _abcoll		module
+  _bisect		extension
+  _bytesio		extension
+  _codecs		builtin
+  _collections		extension
+  _fileio		extension
+  _functools		extension
+  _hashlib		extension
+  _heapq		extension
+  _locale		extension
+  _random		extension
+  _socket		extension
+  _sre			builtin
+  _ssl			extension
+  _struct		extension
+  _symtable		builtin
+  _types		builtin
+  _warnings		builtin
+  _weakref		extension
+  _weakrefset		module
+  abc			module
+  atexit		module
+  ConfigParser		module
+  StringIO		module
+  UserDict		module
+  cPickle		extension
+  cStringIO		extension
+  array			extension
+  base64		module
+  binascii		extension
+  bisect		module
+  cmath			extension
+  codecs		module
+  collections		module
+  compileall		module
+  copy			module
+  copy_reg		module
+  dis			module
+  errno			builtin
+  exceptions		builtin
+  fcntl			extension
+  fnmatch		module
+  functools		module
+  gc			builtin
+  genericpath		module
+  getopt		module
+  glob			module
+  grp			extension
+  hashlib		module
+  heapq			module
+  imp			builtin
+  inspect		module
+  itertools		extension
+  keyword		module
+  linecache		module
+  logging		package
+  marshal		builtin
+  math			extension
+  md5			module
+  opcode		module
+  operator		extension
+  optparse		module
+  os			module
+  pickle		module
+  platform		module
+  popen2		module
+  posix			builtin
+  posixpath		module
+  pkgutil		module
+  pwd			builtin
+  py_compile		module
+  random		module
+  re			module
+  repr			module
+  runpy			module
+  select		extension
+  sha			module
+  shutil		module
+  signal		builtin
+  socket		module
+  spwd			extension
+  sre			module
+  sre_compile		module
+  sre_constants		module
+  sre_parse		module
+  ssl			module
+  stat			module
+  string		module
+  strop			extension
+  struct		module
+  subprocess		module
+  sys			builtin
+  syslog		extension
+  sysconfig		module
+  tempfile		module
+  textwrap		module
+  time			extension
+  token			module
+  thread		builtin
+  token			module
+  tokenize		module
+  traceback		module
+  types			module
+  unicodedata		extension
+  weakref		module
+  warnings		module
+  zipimport		extension
+  zlib			extension
+
+Included are as well the codecs and stringprep modules, and the encodings
+modules for all encodings except the multibyte encodings and the bz2 codec.
+
+The following modules are excluded, their import is guarded from the
+importing module:
+
+  Used in       Excluded
+  ------------  ------------------------------------
+  os		nt ntpath os2 os2emxpath mac macpath
+		riscos riscospath riscosenviron
+  optparse	gettext
+  pickle	doctest
+  subprocess	threading
+
+This list was derived by looking at the modules in the perl-base package,
+then adding python specific "core modules".
+
+TODO's
+------
+
+- time.strptime cannot be used. The required _strptime module is not
+  included in the -minimal package yet. _strptime, locale, _locale and
+  calendar have to be added.
+
+- modules used very often in the testsuite: copy, cPickle, operator.
--- python2.7-2.7.1.orig/debian/idle-PVER.menu.in
+++ python2.7-2.7.1/debian/idle-PVER.menu.in
@@ -0,0 +1,5 @@
+?package(idle-@PVER@):needs="X11" section="Applications/Programming"\
+	title="IDLE (Python v@VER@)"\
+	icon="/usr/share/pixmaps/@PVER@.xpm"\
+	command="/usr/bin/idle-@PVER@ -n" \
+	hints="Environments"
--- python2.7-2.7.1.orig/debian/README.PVER.in
+++ python2.7-2.7.1/debian/README.PVER.in
@@ -0,0 +1,95 @@
+
+  Python @VER@ for Debian
+  ---------------------
+
+This is Python @VER@ packaged for Debian.
+
+This document contains information specific to the Debian packages of
+Python @VER@.
+
+
+
+   [TODO: This document is not yet up-to-date with the packages.]
+
+Currently, it features those two main topics:
+
+  1. Release notes for the Debian packages:
+  2. Notes for developers using the Debian Python packages:
+
+Release notes and documentation from the upstream package are installed
+in /usr/share/doc/@PVER@/.
+
+There's a mailing list for discussion of issues related to Python on Debian
+systems: debian-python@lists.debian.org. The list is not intended for
+general Python problems, but as a forum for maintainers of Python-related
+packages and interested third parties.
+
+
+
+1. Release notes for the Debian packages:
+
+
+Results of the regression test:
+------------------------------
+
+The package does successfully run the regression tests for all included
+modules. Seven packages are skipped since they are platform-dependent and
+can't be used with Linux.
+
+
+2. Notes for developers using the Debian python packages:
+
+See the draft of the Debian Python policy in /usr/share/doc/python.
+
+distutils can be found in the @PVER@-dev package. Development files
+like the python library or Makefiles can be found in the @PVER@-dev
+package in /usr/lib/@PVER@/config. Therefore, if you need to install 
+a pure python extension, you only need @PVER@. On the other hand, to 
+install a C extension, you need @PVER@-dev.
+
+a) Locally installed Python add-ons
+
+    /usr/local/lib/@PVER@/site-packages/
+    /usr/local/lib/site-python/ (version-independent modules)
+
+b) Python add-ons packaged for Debian
+
+    /usr/lib/@PVER@/site-packages/
+    /usr/lib/site-python/ (version-independent modules)
+
+Note that no package must install files directly into /usr/lib/@PVER@/
+or /usr/local/lib/@PVER@/. Only the site-packages directory is allowed
+for third-party extensions.
+
+Use of the new `package' scheme is strongly encouraged. The `ni' interface
+is obsolete in python 1.5.
+
+Header files for extensions go into /usr/include/@PVER@/.
+
+
+Installing extensions for local use only:
+----------------------------------------
+
+Consider using distutils ...
+
+Most extensions use Python's Makefile.pre.in. Note that Makefile.pre.in
+by default will install files into /usr/lib/, not into /usr/local/lib/,
+which is not allowed for local extensions. You'll have to change the
+Makefile accordingly. Most times, "make prefix=/usr/local install" will
+work.
+
+
+Packaging python extensions for Debian:
+--------------------------------------
+
+Maintainers of Python extension packages should read
+
+	/usr/share/doc/python/python-policy.txt.gz
+
+ 
+
+
+    03/09/98
+    Gregor Hoffleit <flight@debian.org>
+
+Last change: 2001-12-14
--- python2.7-2.7.1.orig/debian/PVER.desktop.in
+++ python2.7-2.7.1/debian/PVER.desktop.in
@@ -0,0 +1,10 @@
+[Desktop Entry]
+Name=Python (v@VER@)
+Comment=Python Interpreter (v@VER@)
+Exec=/usr/bin/@PVER@
+Icon=/usr/share/pixmaps/@PVER@.xpm
+Terminal=true
+Type=Application
+Categories=Development;
+StartupNotify=true
+NoDisplay=true
--- python2.7-2.7.1.orig/debian/sitecustomize.py.in
+++ python2.7-2.7.1/debian/sitecustomize.py.in
@@ -0,0 +1,7 @@
+# install the apport exception handler if available
+try:
+    import apport_python_hook
+except ImportError:
+    pass
+else:
+    apport_python_hook.install()
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-lib.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-lib.in
@@ -0,0 +1,15 @@
+Document: @PVER@-lib
+Title: Python Library Reference (v@VER@)
+Author: Guido van Rossum
+Abstract: This library reference manual documents Python's standard library,
+ as well as many optional library modules (which may or may not be
+ available, depending on whether the underlying platform supports
+ them and on the configuration choices made at compile time).  It
+ also documents the standard types of the language and its built-in
+ functions and exceptions, many of which are not or incompletely
+ documented in the Reference Manual.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/library/index.html
+Files: /usr/share/doc/@PVER@/html/library/*.html
--- python2.7-2.7.1.orig/debian/pylogo.xpm
+++ python2.7-2.7.1/debian/pylogo.xpm
@@ -0,0 +1,351 @@
+/* XPM */
+static char * pylogo_xpm[] = {
+"32 32 316 2",
+"  	c None",
+". 	c #8DB0CE",
+"+ 	c #6396BF",
+"@ 	c #4985B7",
+"# 	c #4181B5",
+"$ 	c #417EB2",
+"% 	c #417EB1",
+"& 	c #4D83B0",
+"* 	c #6290B6",
+"= 	c #94B2CA",
+"- 	c #70A1C8",
+"; 	c #3D83BC",
+"> 	c #3881BD",
+", 	c #387DB6",
+"' 	c #387CB5",
+") 	c #387BB3",
+"! 	c #3779B0",
+"~ 	c #3778AE",
+"{ 	c #3776AB",
+"] 	c #3776AA",
+"^ 	c #3775A9",
+"/ 	c #4A7FAC",
+"( 	c #709FC5",
+"_ 	c #3A83BE",
+": 	c #5795C7",
+"< 	c #94B9DB",
+"[ 	c #73A4CE",
+"} 	c #3D80B7",
+"| 	c #387CB4",
+"1 	c #377AB2",
+"2 	c #377AB0",
+"3 	c #3777AC",
+"4 	c #3774A7",
+"5 	c #3773A5",
+"6 	c #3C73A5",
+"7 	c #4586BB",
+"8 	c #4489C1",
+"9 	c #A7C7E1",
+"0 	c #F7F9FD",
+"a 	c #E1E9F1",
+"b 	c #4C89BC",
+"c 	c #3779AF",
+"d 	c #3778AD",
+"e 	c #3873A5",
+"f 	c #4B7CA4",
+"g 	c #3982BE",
+"h 	c #4389C1",
+"i 	c #A6C6E1",
+"j 	c #F6F9FC",
+"k 	c #D6E4F0",
+"l 	c #4A88BB",
+"m 	c #3773A6",
+"n 	c #366F9F",
+"o 	c #366E9D",
+"p 	c #376E9C",
+"q 	c #4A8BC0",
+"r 	c #79A7CD",
+"s 	c #548EBD",
+"t 	c #387AB0",
+"u 	c #3773A4",
+"v 	c #366D9C",
+"w 	c #387FBA",
+"x 	c #387DB7",
+"y 	c #387BB4",
+"z 	c #3775A8",
+"A 	c #366FA0",
+"B 	c #4981AF",
+"C 	c #427BAA",
+"D 	c #3772A4",
+"E 	c #376B97",
+"F 	c #77A3C8",
+"G 	c #4586BC",
+"H 	c #3882BE",
+"I 	c #3B76A7",
+"J 	c #3B76A6",
+"K 	c #366E9E",
+"L 	c #376B98",
+"M 	c #376B96",
+"N 	c #5681A3",
+"O 	c #F5EEB8",
+"P 	c #FFED60",
+"Q 	c #FFE85B",
+"R 	c #FFE659",
+"S 	c #FDE55F",
+"T 	c #5592C4",
+"U 	c #3A83BF",
+"V 	c #3882BD",
+"W 	c #387FB9",
+"X 	c #3779AE",
+"Y 	c #366F9E",
+"Z 	c #366C98",
+"` 	c #376A94",
+" .	c #5D85A7",
+"..	c #F5EDB7",
+"+.	c #FFEA5D",
+"@.	c #FFE75A",
+"#.	c #FFE354",
+"$.	c #FDDD56",
+"%.	c #669DC8",
+"&.	c #3885C3",
+"*.	c #3884C2",
+"=.	c #387EB8",
+"-.	c #387CB6",
+";.	c #377AB1",
+">.	c #3772A3",
+",.	c #366D9B",
+"'.	c #F5EBB5",
+").	c #FFE557",
+"!.	c #FFE455",
+"~.	c #FFDF50",
+"{.	c #FFDB4C",
+"].	c #FAD862",
+"^.	c #8EB4D2",
+"/.	c #3C86C1",
+"(.	c #3883C0",
+"_.	c #3882BF",
+":.	c #3881BC",
+"<.	c #3880BB",
+"[.	c #3775AA",
+"}.	c #F5EAB3",
+"|.	c #FFE051",
+"1.	c #FFDE4F",
+"2.	c #FFDA4A",
+"3.	c #FED446",
+"4.	c #F5DF9D",
+"5.	c #77A5CA",
+"6.	c #3885C2",
+"7.	c #387BB2",
+"8.	c #6B8EA8",
+"9.	c #F8E7A1",
+"0.	c #FFE153",
+"a.	c #FFDD4E",
+"b.	c #FFDB4B",
+"c.	c #FFD746",
+"d.	c #FFD645",
+"e.	c #FFD342",
+"f.	c #F6DB8D",
+"g.	c #508DBE",
+"h.	c #3771A3",
+"i.	c #376A95",
+"j.	c #3D6F97",
+"k.	c #C3CBC2",
+"l.	c #FBD964",
+"m.	c #FFDC4D",
+"n.	c #FFD544",
+"o.	c #FFD040",
+"p.	c #F9CF58",
+"q.	c #3F83BB",
+"r.	c #376B95",
+"s.	c #3A6C95",
+"t.	c #4E7BA0",
+"u.	c #91AABC",
+"v.	c #F6E4A3",
+"w.	c #FFDA4B",
+"x.	c #FFD646",
+"y.	c #FFD443",
+"z.	c #FFD241",
+"A.	c #FFCE3D",
+"B.	c #FFCC3B",
+"C.	c #FCC83E",
+"D.	c #3880BC",
+"E.	c #3C79AC",
+"F.	c #5F8DB4",
+"G.	c #7AA0C0",
+"H.	c #82A6C3",
+"I.	c #82A3BF",
+"J.	c #82A2BE",
+"K.	c #82A1BB",
+"L.	c #82A1B9",
+"M.	c #8BA4B5",
+"N.	c #C1C5AE",
+"O.	c #F2E19F",
+"P.	c #FDD74C",
+"Q.	c #FFD94A",
+"R.	c #FFD343",
+"S.	c #FFCE3E",
+"T.	c #FFCB39",
+"U.	c #FFC937",
+"V.	c #FEC636",
+"W.	c #3D79AB",
+"X.	c #9DB6C6",
+"Y.	c #D0CFA2",
+"Z.	c #EFE598",
+"`.	c #F8EE9B",
+" +	c #F8EB97",
+".+	c #F8E996",
+"++	c #F8E894",
+"@+	c #FAE489",
+"#+	c #FCDB64",
+"$+	c #FFDA4D",
+"%+	c #FFCF3E",
+"&+	c #FFCB3A",
+"*+	c #FFC734",
+"=+	c #FFC532",
+"-+	c #3F82B7",
+";+	c #387EB9",
+">+	c #9EB9D0",
+",+	c #F2E287",
+"'+	c #FDEB69",
+")+	c #FEEC60",
+"!+	c #FFEB5E",
+"~+	c #FFE254",
+"{+	c #FFE152",
+"]+	c #FFD747",
+"^+	c #FFC633",
+"/+	c #FCC235",
+"(+	c #578FBE",
+"_+	c #6996BC",
+":+	c #DED9A8",
+"<+	c #FEEC62",
+"[+	c #FFE658",
+"}+	c #FFDF51",
+"|+	c #FFDE50",
+"1+	c #FFD03F",
+"2+	c #FFCD3C",
+"3+	c #FFC431",
+"4+	c #FFBF2C",
+"5+	c #FAC244",
+"6+	c #85AACA",
+"7+	c #A1BBD2",
+"8+	c #F7E47C",
+"9+	c #FFE456",
+"0+	c #FFC735",
+"a+	c #FFBC29",
+"b+	c #F7D280",
+"c+	c #9DBAD2",
+"d+	c #3B7CB2",
+"e+	c #ABC2D6",
+"f+	c #FDEB7B",
+"g+	c #FFC12E",
+"h+	c #FDBD30",
+"i+	c #F4DEA8",
+"j+	c #5F91BA",
+"k+	c #ABC1D4",
+"l+	c #FDEE7E",
+"m+	c #FFE253",
+"n+	c #FFCC3C",
+"o+	c #FFBA27",
+"p+	c #FAC75B",
+"q+	c #4A82B0",
+"r+	c #3877AB",
+"s+	c #3774A6",
+"t+	c #AAC0D4",
+"u+	c #FDEE7D",
+"v+	c #FFEC5F",
+"w+	c #FFE255",
+"x+	c #FFD848",
+"y+	c #FFD444",
+"z+	c #FFCF3F",
+"A+	c #FFBC2A",
+"B+	c #FFBB28",
+"C+	c #FDBA32",
+"D+	c #447AA8",
+"E+	c #4379A7",
+"F+	c #FFE95C",
+"G+	c #FFE558",
+"H+	c #FFE355",
+"I+	c #FED84B",
+"J+	c #FCD149",
+"K+	c #FBCE47",
+"L+	c #FBCD46",
+"M+	c #FBC840",
+"N+	c #FBC63E",
+"O+	c #FBC037",
+"P+	c #FAC448",
+"Q+	c #FDD44C",
+"R+	c #FCD14E",
+"S+	c #FFC836",
+"T+	c #FFC22F",
+"U+	c #FFC02D",
+"V+	c #FFE052",
+"W+	c #FFC636",
+"X+	c #FFCF5C",
+"Y+	c #FFD573",
+"Z+	c #FFC33E",
+"`+	c #FEBD2D",
+" @	c #FFDB4D",
+".@	c #FFD949",
+"+@	c #FFD545",
+"@@	c #FFD140",
+"#@	c #FFCB48",
+"$@	c #FFF7E4",
+"%@	c #FFFCF6",
+"&@	c #FFE09D",
+"*@	c #FFBA2E",
+"=@	c #FDBE2F",
+"-@	c #FFD748",
+";@	c #FFCA38",
+">@	c #FFC844",
+",@	c #FFF2D7",
+"'@	c #FFF9EC",
+")@	c #FFDB94",
+"!@	c #FFB92D",
+"~@	c #FAC54D",
+"{@	c #FDD54E",
+"]@	c #FFBD2D",
+"^@	c #FFC858",
+"/@	c #FFD174",
+"(@	c #FFBF3E",
+"_@	c #FCBD3C",
+":@	c #FAD66A",
+"<@	c #FECD3F",
+"[@	c #FFC330",
+"}@	c #FFBD2A",
+"|@	c #FFB724",
+"1@	c #FFB521",
+"2@	c #FFB526",
+"3@	c #FBC457",
+"4@	c #F7E09E",
+"5@	c #F8D781",
+"6@	c #FAC349",
+"7@	c #FCC134",
+"8@	c #FEBE2C",
+"9@	c #FBBE3F",
+"0@	c #F7CF79",
+"a@	c #F5D795",
+"                      . + @ # $ % % & * =                       ",
+"                  - ; > > , ' ) ! ~ { ] ^ /                     ",
+"                ( _ : < [ } | 1 2 ~ 3 4 5 5 6                   ",
+"                7 8 9 0 a b 2 c d 3 { 5 5 5 e f                 ",
+"                g h i j k l c ~ { { m 5 5 n o p                 ",
+"                > > q r s t c c d 4 5 u n v v v                 ",
+"                w x ' y 2 c d d z 5 u A v v v v                 ",
+"                              B C 5 D v v v v E                 ",
+"      F G H H H x ' ) c c c d I J 5 K v v L M N O P Q R S       ",
+"    T U H V V W ' ) c c X ~ 5 5 5 Y v v Z ` `  ...+.@.#.#.$.    ",
+"  %.&.*.> w W =.-.;.c 3 { ^ 5 5 >.o v ,.E ` `  .'.).!.#.~.{.].  ",
+"^./.(._.:.<., ' ) ;.X d [.5 5 >.K v ,.E ` ` `  .}.#.|.1.{.2.3.4.",
+"5.6.(.H H x ' 7.c c 3 3 4 5 D K v v ,.` ` ` ` 8.9.0.a.b.c.d.e.f.",
+"g._.> <.w ' ' | 2 3 { z 5 5 h.v v v i.` ` ` j.k.l.m.{.d.n.e.o.p.",
+"q.> > :.-.' 1 c c c ] 5 5 >.v v ,.r.` ` s.t.u.v.{.w.x.y.z.A.B.C.",
+"D.D.w -.' 1 c c c E.F.G.H.I.J.J.K.L.L.L.M.N.O.P.Q.c.R.S.B.T.U.V.",
+"D.D.=.' ' 1 c c W.X.Y.Z.`.`.`.`.`. +.+++@+#+$+Q.d.R.%+B.&+*+=+=+",
+"-+;+-.' ;.2 c c >+,+'+)+P P P !+Q R ~+{+1.{.]+d.y.%+B.&+^+=+=+/+",
+"(+' ' ;.c X X _+:+<+P P P P !+R [+~+}+|+{.]+n.R.1+2+&+^+=+3+4+5+",
+"6+' ) ! ~ { { 7+8+P P P P !+R 9+#.{+{.w.]+y.z.S.&+0+=+=+3+4+a+b+",
+"c+d+7.! d 3 z e+f+P P P !+R 9+#.{+m.{.]+y.1+B.&+0+=+=+g+4+a+h+i+",
+"  j+c d 3 { 4 k+l+P P !+@.9+m+1.m.{.]+y.1+n+B.*+=+=+g+a+a+o+p+  ",
+"    q+r+{ s+m t+u+v+@.R w+{+}+{.x+d.y+z+n+B.0+=+=+g+A+a+B+C+    ",
+"      * D+E+E+  +.F+G+H+}+}+{.I+J+K+L+M+M+M+M+N+O+O+O+O+P+      ",
+"                ).).#.{+a.{.x+Q+R+                              ",
+"                #.m+1.a.{.x+y.o.2+B.S+=+=+T+U+O+                ",
+"                0.V+{.{.x+n.o.2+B.B.W+X+Y+Z+a+`+                ",
+"                 @{..@+@n.@@B.B.S+^+#@$@%@&@*@=@                ",
+"                ].-@x.y.o.%+;@S+=+=+>@,@'@)@!@~@                ",
+"                  {@z.z+2+U.=+=+=+T+]@^@/@(@_@                  ",
+"                    :@<@U.=+=+[@4+}@|@1@2@3@                    ",
+"                      4@5@6@7@8@a+a+9@0@a@                      "};
--- python2.7-2.7.1.orig/debian/PVER.overrides.in
+++ python2.7-2.7.1/debian/PVER.overrides.in
@@ -0,0 +1,11 @@
+# idlelib images
+@PVER@ binary: image-file-in-usr-lib
+
+# yes, we have to
+@PVER@ binary: depends-on-python-minimal
+
+@PVER@ binary: desktop-command-not-in-package
+@PVER@ binary: menu-command-not-in-package
+
+# license file referred by the standard library
+@PVER@ binary: extra-license-file
--- python2.7-2.7.1.orig/debian/idle-PVER.prerm.in
+++ python2.7-2.7.1/debian/idle-PVER.prerm.in
@@ -0,0 +1,15 @@
+#! /bin/sh -e
+#
+# sample prerm script for the Debian idle-@PVER@ package.
+# Written 1998 by Gregor Hoffleit <flight@debian.org>.
+#
+
+PACKAGE=`basename $0 .prerm`
+
+dpkg --listfiles $PACKAGE |
+	awk '$0~/\.py$/ {print $0"c\n" $0"o"}' |
+	xargs rm -f >&2
+
+#DEBHELPER#
+
+exit 0
--- python2.7-2.7.1.orig/debian/PVER.menu.in
+++ python2.7-2.7.1/debian/PVER.menu.in
@@ -0,0 +1,4 @@
+?package(@PVER@):needs="text" section="Applications/Programming"\
+	title="Python (v@VER@)"\
+	icon="/usr/share/pixmaps/@PVER@.xpm"\
+	command="/usr/bin/python@VER@"
--- python2.7-2.7.1.orig/debian/PVER-dbg.symbols.in
+++ python2.7-2.7.1/debian/PVER-dbg.symbols.in
@@ -0,0 +1,32 @@
+libpython@VER@_d.so.1.0 python@VER@-dbg #MINVER#
+ Py_InitModule4TraceRefs@Base @VER@
+#include "libpython.symbols"
+ _PyDict_Dummy@Base @VER@
+ _PyMem_DebugFree@Base @VER@
+ _PyMem_DebugMalloc@Base @VER@
+ _PyMem_DebugRealloc@Base @VER@
+ _PyObject_DebugCheckAddress@Base @VER@
+ _PyObject_DebugCheckAddressApi@Base @VER@
+ _PyObject_DebugDumpAddress@Base @VER@
+ _PyObject_DebugFree@Base @VER@
+ _PyObject_DebugFreeApi@Base @VER@
+ _PyObject_DebugMalloc@Base @VER@
+ _PyObject_DebugMallocApi@Base @VER@
+ _PyObject_DebugMallocStats@Base @VER@
+ _PyObject_DebugRealloc@Base @VER@
+ _PyObject_DebugReallocApi@Base @VER@
+ _PySet_Dummy@Base @VER@
+ _Py_AddToAllObjects@Base @VER@
+ _Py_Dealloc@Base @VER@
+ _Py_ForgetReference@Base @VER@
+ _Py_GetObjects@Base @VER@
+ _Py_GetRefTotal@Base @VER@
+ _Py_NegativeRefcount@Base @VER@
+ _Py_NewReference@Base @VER@
+ _Py_PrintReferenceAddresses@Base @VER@
+ _Py_PrintReferences@Base @VER@
+ _Py_RefTotal@Base @VER@
+ _Py_dumptree@Base @VER@
+ _Py_printtree@Base @VER@
+ _Py_showtree@Base @VER@
+ _Py_tok_dump@Base @VER@
--- python2.7-2.7.1.orig/debian/compat
+++ python2.7-2.7.1/debian/compat
@@ -0,0 +1 @@
+5
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-new.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-new.in
@@ -0,0 +1,10 @@
+Document: @PVER@-new
+Title: What's new in Python @VER@
+Author: A.M. Kuchling
+Abstract: This documents lists new features and changes worth mentioning
+ in Python @VER@.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/whatsnew/@VER@.html
+Files: /usr/share/doc/@PVER@/html/whatsnew/@VER@.html
--- python2.7-2.7.1.orig/debian/PVER-minimal.postinst.in
+++ python2.7-2.7.1/debian/PVER-minimal.postinst.in
@@ -0,0 +1,76 @@
+#! /bin/sh
+
+set -e
+
+if [ ! -f /etc/@PVER@/sitecustomize.py ]; then
+    cat <<-EOF
+	# Empty sitecustomize.py to avoid a dangling symlink
+EOF
+fi
+
+syssite=/usr/lib/@PVER@/site-packages
+localsite=/usr/local/lib/@PVER@/dist-packages
+syslink=../../${localsite#/usr/*}
+
+case "$1" in
+    configure)
+        # Create empty directories in /usr/local
+        if [ ! -e /usr/local/lib/@PVER@ ]; then
+            mkdir -p /usr/local/lib/@PVER@ 2> /dev/null || true
+            chmod 2775 /usr/local/lib/@PVER@ 2> /dev/null || true
+            chown root:staff /usr/local/lib/@PVER@ 2> /dev/null || true
+        fi
+        if [ ! -e $localsite ]; then
+            mkdir -p $localsite 2> /dev/null || true
+            chmod 2775 $localsite 2> /dev/null || true
+            chown root:staff $localsite 2> /dev/null || true
+        fi
+	#if [ ! -h $syssite ]; then
+	#    ln -s $syslink $syssite
+	#fi
+
+	if which update-binfmts >/dev/null; then
+	    update-binfmts --import @PVER@
+	fi
+
+    ;;
+esac
+
+if [ "$1" = configure ]; then
+    (
+    files=$(dpkg -L @PVER@-minimal | sed -n '/^\/usr\/lib\/@PVER@\/.*\.py$/p')
+	@PVER@ /usr/lib/@PVER@/py_compile.py $files
+	if grep -sq '^byte-compile[^#]*optimize' /etc/python/debian_config; then
+	    @PVER@ -O /usr/lib/@PVER@/py_compile.py $files
+	fi
+    )
+    bc=no
+    if [ -z "$2" ] || dpkg --compare-versions "$2" lt 2.7-9 \
+        || [ -f /var/lib/python/@PVER@_installed ]; then
+    	bc=yes
+    fi
+    if grep -sq '^unsupported-versions[^#]*@PVER@' /usr/share/python/debian_defaults
+    then
+	# FIXME: byte compile anyway?
+	bc=no
+    fi
+    if [ "$bc" = yes ]; then
+	# new installation or installation of first version with hook support
+	if [ "$DEBIAN_FRONTEND" != noninteractive ]; then
+	    echo "Linking and byte-compiling packages for runtime @PVER@..."
+	fi
+	version=$(dpkg -s @PVER@-minimal | awk '/^Version:/ {print $2}')
+	for hook in /usr/share/python/runtime.d/*.rtinstall; do
+	    [ -x $hook ] || continue
+	    $hook rtinstall @PVER@ "$2" "$version"
+	done
+	if [ -f /var/lib/python/@PVER@_installed ]; then
+	    rm -f /var/lib/python/@PVER@_installed
+	    rmdir --ignore-fail-on-non-empty /var/lib/python 2>/dev/null
+	fi
+    fi
+fi
+
+#DEBHELPER#
+
+exit 0
--- python2.7-2.7.1.orig/debian/README.dbm
+++ python2.7-2.7.1/debian/README.dbm
@@ -0,0 +1,72 @@
+
+ Python and dbm modules on Debian
+ --------------------------------
+
+This file documents the configuration of the dbm modules for Debian. It
+gives hints at the preferred use of the dbm modules.
+
+
+The preferred way to access dbm databases in Python is the anydbm module.
+dbm databases behave like mappings (dictionaries).
+
+Since there exist several dbm database formats, we choose the following
+layout for Python on Debian:
+
+  * creating a new database with anydbm will create a Berkeley DB 2.X Hash
+    database file. This is the standard format used by libdb starting
+    with glibc 2.1.
+
+  * opening an existing database with anydbm will try to guess the format
+    of the file (using whichdb) and then load it using one of the bsddb,
+    bsddb1, gdbm or dbm (only if the python-gdbm package is installed)
+    or dumbdbm modules.
+
+  * The modules use the following database formats:
+
+    - bsddb:   Berkeley DB 2.X Hash (as in libc6 >=2.1 or libdb2)
+    - bsddb1:  Berkeley DB 1.85 Hash (as in libc6 >=2.1 or libdb2)
+    - gdbm:    GNU dbm 1.x or ndbm
+    - dbm:     " (nearly the same as the gdbm module for us)
+    - dumbdbm: a hand-crafted format only used in this module
+
+    That means that all usual formats should be readable with anydbm.
+
+  * If you want to create a database in a format different from DB 2.X,
+    you can still directly use the specified module.
+
+  * I.e. bsddb is the preferred module, and DB 2.X is the preferred format.
+
+  * Note that the db1hash and bsddb1 modules are Debian specific. anydbm
+    and whichdb have been modified to support DB 2.X Hash files (see
+    below for details).
+    
+
+
+For experts only:
+----------------
+
+Although bsddb employs the new DB 2.X format and uses the new Sleepycat
+DB 2 library as included with glibc >= 2.1, it's still using the old
+DB 1.85 API (which is still supported by DB 2).
+
+A more recent version 1.1 of the BSD DB module (available from
+http://starship.skyport.net/robind/python/) directly uses the DB 2.X API.
+It has a richer set of features.
+
+
+On a glibc 2.1 system, bsddb is linked with -ldb, bsddb1 is linked with
+-ldb1 and gdbm as well as dbm are linked with -lgdbm.
+
+On a glibc 2.0 system (e.g. potato for m68k or slink), bsddb will be
+linked with -ldb2 while bsddb1 will be linked with -ldb (therefore
+python-base here depends on libdb2).
+
+
+db1hash and bsddb1 nearly completely identical to dbhash and bsddb. The
+only difference is that bsddb is linked with the real DB 2 library, while
+bsddb1 is linked with an library which provides compatibility with legacy
+DB 1.85 databases.
+
+
+    July 16, 1999
+    Gregor Hoffleit <flight@debian.org>
--- python2.7-2.7.1.orig/debian/README.Debian.in
+++ python2.7-2.7.1/debian/README.Debian.in
@@ -0,0 +1,8 @@
+The documentation for this package is in /usr/share/doc/@PVER@/.
+
+A draft of the "Debian Python Policy" can be found in
+
+        /usr/share/doc/python
+
+Sometime it will be moved to /usr/share/doc/debian-policy in the
+debian-policy package.
--- python2.7-2.7.1.orig/debian/PVER-minimal.postrm.in
+++ python2.7-2.7.1/debian/PVER-minimal.postrm.in
@@ -0,0 +1,27 @@
+#! /bin/sh -e
+
+if [ "$1" = "remove" ]; then
+
+    (find /usr/lib/@PVER@ -name '*.py[co]' | xargs rm -f {}) 2>/dev/null || true
+
+    for d in `find /usr/lib/@PVER@ -depth -type d -empty 2> /dev/null`; do \
+        while rmdir $d 2> /dev/null; do d=`dirname $d`; done; \
+    done
+
+    if [ -f /var/lib/python/@PVER@_installed ]; then
+	rm -f /var/lib/python/@PVER@_installed
+	rmdir --ignore-fail-on-non-empty /var/lib/python 2>/dev/null
+    fi
+fi
+
+if [ "$1" = "purge" ]; then
+    for d in `find /usr/lib/@PVER@ -depth -type d -empty 2> /dev/null`; do \
+        while rmdir $d 2> /dev/null; do d=`dirname $d`; done; \
+    done
+    rm -f /etc/@PVER@/site.py /etc/@PVER@/sitecustomize.py
+    rmdir --ignore-fail-on-non-empty /etc/@PVER@ 2>/dev/null
+fi
+
+#DEBHELPER#
+
+exit 0
--- python2.7-2.7.1.orig/debian/watch
+++ python2.7-2.7.1/debian/watch
@@ -0,0 +1,3 @@
+version=3
+opts=dversionmangle=s/.*\+//,uversionmangle=s/([abcr]+[1-9])$/~$1/ \
+  http://www.python.org/ftp/python/2\.7(\.\d)?/Python-(2\.7[.\dabcr]*)\.tgz
--- python2.7-2.7.1.orig/debian/libpython.symbols.in
+++ python2.7-2.7.1/debian/libpython.symbols.in
@@ -0,0 +1,1255 @@
+ PyAST_Check@Base @VER@
+ PyAST_Compile@Base @VER@
+ PyAST_FromNode@Base @VER@
+ PyAST_mod2obj@Base @VER@
+ PyAST_obj2mod@Base @VER@
+ PyArena_AddPyObject@Base @VER@
+ PyArena_Free@Base @VER@
+ PyArena_Malloc@Base @VER@
+ PyArena_New@Base @VER@
+ PyArg_Parse@Base @VER@
+ PyArg_ParseTuple@Base @VER@
+ PyArg_ParseTupleAndKeywords@Base @VER@
+ PyArg_UnpackTuple@Base @VER@
+ PyArg_VaParse@Base @VER@
+ PyArg_VaParseTupleAndKeywords@Base @VER@
+ PyBaseObject_Type@Base @VER@
+ PyBaseString_Type@Base @VER@
+ PyBool_FromLong@Base @VER@
+ PyBool_Type@Base @VER@
+ PyBuffer_FillContiguousStrides@Base @VER@
+ PyBuffer_FillInfo@Base @VER@
+ PyBuffer_FromContiguous@Base @VER@
+ PyBuffer_FromMemory@Base @VER@
+ PyBuffer_FromObject@Base @VER@
+ PyBuffer_FromReadWriteMemory@Base @VER@
+ PyBuffer_FromReadWriteObject@Base @VER@
+ PyBuffer_GetPointer@Base @VER@
+ PyBuffer_IsContiguous@Base @VER@
+ PyBuffer_New@Base @VER@
+ PyBuffer_Release@Base @VER@
+ PyBuffer_ToContiguous@Base @VER@
+ PyBuffer_Type@Base @VER@
+ PyByteArrayIter_Type@Base @VER@
+ PyByteArray_AsString@Base @VER@
+ PyByteArray_Concat@Base @VER@
+ PyByteArray_Fini@Base @VER@
+ PyByteArray_FromObject@Base @VER@
+ PyByteArray_FromStringAndSize@Base @VER@
+ PyByteArray_Init@Base @VER@
+ PyByteArray_Resize@Base @VER@
+ PyByteArray_Size@Base @VER@
+ PyByteArray_Type@Base @VER@
+ PyCFunction_Call@Base @VER@
+ PyCFunction_ClearFreeList@Base @VER@
+ PyCFunction_Fini@Base @VER@
+ PyCFunction_GetFlags@Base @VER@
+ PyCFunction_GetFunction@Base @VER@
+ PyCFunction_GetSelf@Base @VER@
+ PyCFunction_New@Base @VER@
+ PyCFunction_NewEx@Base @VER@
+ PyCFunction_Type@Base @VER@
+ PyCObject_AsVoidPtr@Base @VER@
+ PyCObject_FromVoidPtr@Base @VER@
+ PyCObject_FromVoidPtrAndDesc@Base @VER@
+ PyCObject_GetDesc@Base @VER@
+ PyCObject_Import@Base @VER@
+ PyCObject_SetVoidPtr@Base @VER@
+ PyCObject_Type@Base @VER@
+ PyCallIter_New@Base @VER@
+ PyCallIter_Type@Base @VER@
+ PyCallable_Check@Base @VER@
+ PyCapsule_GetContext@Base @VER@
+ PyCapsule_GetDestructor@Base @VER@
+ PyCapsule_GetName@Base @VER@
+ PyCapsule_GetPointer@Base @VER@
+ PyCapsule_Import@Base @VER@
+ PyCapsule_IsValid@Base @VER@
+ PyCapsule_New@Base @VER@
+ PyCapsule_SetContext@Base @VER@
+ PyCapsule_SetDestructor@Base @VER@
+ PyCapsule_SetName@Base @VER@
+ PyCapsule_SetPointer@Base @VER@
+ PyCapsule_Type@Base @VER@
+ PyCell_Get@Base @VER@
+ PyCell_New@Base @VER@
+ PyCell_Set@Base @VER@
+ PyCell_Type@Base @VER@
+ PyClassMethod_New@Base @VER@
+ PyClassMethod_Type@Base @VER@
+ PyClass_IsSubclass@Base @VER@
+ PyClass_New@Base @VER@
+ PyClass_Type@Base @VER@
+ PyCode_Addr2Line@Base @VER@
+ PyCode_New@Base @VER@
+ PyCode_NewEmpty@Base @VER@
+ PyCode_Optimize@Base @VER@
+ PyCode_Type@Base @VER@
+ PyCodec_BackslashReplaceErrors@Base @VER@
+ PyCodec_Decode@Base @VER@
+ PyCodec_Decoder@Base @VER@
+ PyCodec_Encode@Base @VER@
+ PyCodec_Encoder@Base @VER@
+ PyCodec_IgnoreErrors@Base @VER@
+ PyCodec_IncrementalDecoder@Base @VER@
+ PyCodec_IncrementalEncoder@Base @VER@
+ PyCodec_LookupError@Base @VER@
+ PyCodec_Register@Base @VER@
+ PyCodec_RegisterError@Base @VER@
+ PyCodec_ReplaceErrors@Base @VER@
+ PyCodec_StreamReader@Base @VER@
+ PyCodec_StreamWriter@Base @VER@
+ PyCodec_StrictErrors@Base @VER@
+ PyCodec_XMLCharRefReplaceErrors@Base @VER@
+ PyComplex_AsCComplex@Base @VER@
+ PyComplex_FromCComplex@Base @VER@
+ PyComplex_FromDoubles@Base @VER@
+ PyComplex_ImagAsDouble@Base @VER@
+ PyComplex_RealAsDouble@Base @VER@
+ PyComplex_Type@Base @VER@
+ PyDescr_NewClassMethod@Base @VER@
+ PyDescr_NewGetSet@Base @VER@
+ PyDescr_NewMember@Base @VER@
+ PyDescr_NewMethod@Base @VER@
+ PyDescr_NewWrapper@Base @VER@
+ PyDictItems_Type@Base @VER@
+ PyDictIterItem_Type@Base @VER@
+ PyDictIterKey_Type@Base @VER@
+ PyDictIterValue_Type@Base @VER@
+ PyDictKeys_Type@Base @VER@
+ PyDictProxy_New@Base @VER@
+ PyDictProxy_Type@Base @VER@
+ PyDictValues_Type@Base @VER@
+ PyDict_Clear@Base @VER@
+ PyDict_Contains@Base @VER@
+ PyDict_Copy@Base @VER@
+ PyDict_DelItem@Base @VER@
+ PyDict_DelItemString@Base @VER@
+ PyDict_Fini@Base @VER@
+ PyDict_GetItem@Base @VER@
+ PyDict_GetItemString@Base @VER@
+ PyDict_Items@Base @VER@
+ PyDict_Keys@Base @VER@
+ PyDict_Merge@Base @VER@
+ PyDict_MergeFromSeq2@Base @VER@
+ PyDict_New@Base @VER@
+ PyDict_Next@Base @VER@
+ PyDict_SetItem@Base @VER@
+ PyDict_SetItemString@Base @VER@
+ PyDict_Size@Base @VER@
+ PyDict_Type@Base @VER@
+ PyDict_Update@Base @VER@
+ PyDict_Values@Base @VER@
+ PyEllipsis_Type@Base @VER@
+ PyEnum_Type@Base @VER@
+ PyErr_BadArgument@Base @VER@
+ PyErr_BadInternalCall@Base @VER@
+ PyErr_CheckSignals@Base @VER@
+ PyErr_Clear@Base @VER@
+ PyErr_Display@Base @VER@
+ PyErr_ExceptionMatches@Base @VER@
+ PyErr_Fetch@Base @VER@
+ PyErr_Format@Base @VER@
+ PyErr_GivenExceptionMatches@Base @VER@
+ PyErr_NewException@Base @VER@
+ PyErr_NewExceptionWithDoc@Base @VER@
+ PyErr_NoMemory@Base @VER@
+ PyErr_NormalizeException@Base @VER@
+ PyErr_Occurred@Base @VER@
+ PyErr_Print@Base @VER@
+ PyErr_PrintEx@Base @VER@
+ PyErr_ProgramText@Base @VER@
+ PyErr_Restore@Base @VER@
+ PyErr_SetFromErrno@Base @VER@
+ PyErr_SetFromErrnoWithFilename@Base @VER@
+ PyErr_SetFromErrnoWithFilenameObject@Base @VER@
+ PyErr_SetInterrupt@Base @VER@
+ PyErr_SetNone@Base @VER@
+ PyErr_SetObject@Base @VER@
+ PyErr_SetString@Base @VER@
+ PyErr_SyntaxLocation@Base @VER@
+ PyErr_Warn@Base @VER@
+ PyErr_WarnEx@Base @VER@
+ PyErr_WarnExplicit@Base @VER@
+ PyErr_WriteUnraisable@Base @VER@
+ PyEval_AcquireLock@Base @VER@
+ PyEval_AcquireThread@Base @VER@
+ PyEval_CallFunction@Base @VER@
+ PyEval_CallMethod@Base @VER@
+ PyEval_CallObjectWithKeywords@Base @VER@
+ PyEval_EvalCode@Base @VER@
+ PyEval_EvalCodeEx@Base @VER@
+ PyEval_EvalFrame@Base @VER@
+ PyEval_EvalFrameEx@Base @VER@
+ PyEval_GetBuiltins@Base @VER@
+ PyEval_GetCallStats@Base @VER@
+ PyEval_GetFrame@Base @VER@
+ PyEval_GetFuncDesc@Base @VER@
+ PyEval_GetFuncName@Base @VER@
+ PyEval_GetGlobals@Base @VER@
+ PyEval_GetLocals@Base @VER@
+ PyEval_GetRestricted@Base @VER@
+ PyEval_InitThreads@Base @VER@
+ PyEval_MergeCompilerFlags@Base @VER@
+ PyEval_ReInitThreads@Base @VER@
+ PyEval_ReleaseLock@Base @VER@
+ PyEval_ReleaseThread@Base @VER@
+ PyEval_RestoreThread@Base @VER@
+ PyEval_SaveThread@Base @VER@
+ PyEval_SetProfile@Base @VER@
+ PyEval_SetTrace@Base @VER@
+ PyEval_ThreadsInitialized@Base @VER@
+ PyExc_ArithmeticError@Base @VER@
+ PyExc_AssertionError@Base @VER@
+ PyExc_AttributeError@Base @VER@
+ PyExc_BaseException@Base @VER@
+ PyExc_BufferError@Base @VER@
+ PyExc_BytesWarning@Base @VER@
+ PyExc_DeprecationWarning@Base @VER@
+ PyExc_EOFError@Base @VER@
+ PyExc_EnvironmentError@Base @VER@
+ PyExc_Exception@Base @VER@
+ PyExc_FloatingPointError@Base @VER@
+ PyExc_FutureWarning@Base @VER@
+ PyExc_GeneratorExit@Base @VER@
+ PyExc_IOError@Base @VER@
+ PyExc_ImportError@Base @VER@
+ PyExc_ImportWarning@Base @VER@
+ PyExc_IndentationError@Base @VER@
+ PyExc_IndexError@Base @VER@
+ PyExc_KeyError@Base @VER@
+ PyExc_KeyboardInterrupt@Base @VER@
+ PyExc_LookupError@Base @VER@
+ PyExc_MemoryError@Base @VER@
+ PyExc_MemoryErrorInst@Base @VER@
+ PyExc_NameError@Base @VER@
+ PyExc_NotImplementedError@Base @VER@
+ PyExc_OSError@Base @VER@
+ PyExc_OverflowError@Base @VER@
+ PyExc_PendingDeprecationWarning@Base @VER@
+ PyExc_RecursionErrorInst@Base @VER@
+ PyExc_ReferenceError@Base @VER@
+ PyExc_RuntimeError@Base @VER@
+ PyExc_RuntimeWarning@Base @VER@
+ PyExc_StandardError@Base @VER@
+ PyExc_StopIteration@Base @VER@
+ PyExc_SyntaxError@Base @VER@
+ PyExc_SyntaxWarning@Base @VER@
+ PyExc_SystemError@Base @VER@
+ PyExc_SystemExit@Base @VER@
+ PyExc_TabError@Base @VER@
+ PyExc_TypeError@Base @VER@
+ PyExc_UnboundLocalError@Base @VER@
+ PyExc_UnicodeDecodeError@Base @VER@
+ PyExc_UnicodeEncodeError@Base @VER@
+ PyExc_UnicodeError@Base @VER@
+ PyExc_UnicodeTranslateError@Base @VER@
+ PyExc_UnicodeWarning@Base @VER@
+ PyExc_UserWarning@Base @VER@
+ PyExc_ValueError@Base @VER@
+ PyExc_Warning@Base @VER@
+ PyExc_ZeroDivisionError@Base @VER@
+ PyFile_AsFile@Base @VER@
+ PyFile_DecUseCount@Base @VER@
+ PyFile_FromFile@Base @VER@
+ PyFile_FromString@Base @VER@
+ PyFile_GetLine@Base @VER@
+ PyFile_IncUseCount@Base @VER@
+ PyFile_Name@Base @VER@
+ PyFile_SetBufSize@Base @VER@
+ PyFile_SetEncoding@Base @VER@
+ PyFile_SetEncodingAndErrors@Base @VER@
+ PyFile_SoftSpace@Base @VER@
+ PyFile_Type@Base @VER@
+ PyFile_WriteObject@Base @VER@
+ PyFile_WriteString@Base @VER@
+ PyFloat_AsDouble@Base @VER@
+ PyFloat_AsReprString@Base @VER@
+ PyFloat_AsString@Base @VER@
+ PyFloat_ClearFreeList@Base @VER@
+ PyFloat_Fini@Base @VER@
+ PyFloat_FromDouble@Base @VER@
+ PyFloat_FromString@Base @VER@
+ PyFloat_GetInfo@Base @VER@
+ PyFloat_GetMax@Base @VER@
+ PyFloat_GetMin@Base @VER@
+ PyFloat_Type@Base @VER@
+ PyFrame_BlockPop@Base @VER@
+ PyFrame_BlockSetup@Base @VER@
+ PyFrame_ClearFreeList@Base @VER@
+ PyFrame_FastToLocals@Base @VER@
+ PyFrame_Fini@Base @VER@
+ PyFrame_GetLineNumber@Base @VER@
+ PyFrame_LocalsToFast@Base @VER@
+ PyFrame_New@Base @VER@
+ PyFrame_Type@Base @VER@
+ PyFrozenSet_New@Base @VER@
+ PyFrozenSet_Type@Base @VER@
+ PyFunction_GetClosure@Base @VER@
+ PyFunction_GetCode@Base @VER@
+ PyFunction_GetDefaults@Base @VER@
+ PyFunction_GetGlobals@Base @VER@
+ PyFunction_GetModule@Base @VER@
+ PyFunction_New@Base @VER@
+ PyFunction_SetClosure@Base @VER@
+ PyFunction_SetDefaults@Base @VER@
+ PyFunction_Type@Base @VER@
+ PyFuture_FromAST@Base @VER@
+ PyGC_Collect@Base @VER@
+ PyGILState_Ensure@Base @VER@
+ PyGILState_GetThisThreadState@Base @VER@
+ PyGILState_Release@Base @VER@
+ PyGen_NeedsFinalizing@Base @VER@
+ PyGen_New@Base @VER@
+ PyGen_Type@Base @VER@
+ PyGetSetDescr_Type@Base @VER@
+ PyGrammar_AddAccelerators@Base @VER@
+ PyGrammar_FindDFA@Base @VER@
+ PyGrammar_LabelRepr@Base @VER@
+ PyGrammar_RemoveAccelerators@Base @VER@
+ PyImport_AddModule@Base @VER@
+ PyImport_AppendInittab@Base @VER@
+ PyImport_Cleanup@Base @VER@
+ PyImport_ExecCodeModule@Base @VER@
+ PyImport_ExecCodeModuleEx@Base @VER@
+ PyImport_ExtendInittab@Base @VER@
+ PyImport_FrozenModules@Base @VER@
+ PyImport_GetImporter@Base @VER@
+ PyImport_GetMagicNumber@Base @VER@
+ PyImport_GetModuleDict@Base @VER@
+ PyImport_Import@Base @VER@
+ PyImport_ImportFrozenModule@Base @VER@
+ PyImport_ImportModule@Base @VER@
+ PyImport_ImportModuleLevel@Base @VER@
+ PyImport_ImportModuleNoBlock@Base @VER@
+ PyImport_Inittab@Base @VER@
+ PyImport_ReloadModule@Base @VER@
+ PyInstance_New@Base @VER@
+ PyInstance_NewRaw@Base @VER@
+ PyInstance_Type@Base @VER@
+ PyInt_AsLong@Base @VER@
+ PyInt_AsSsize_t@Base @VER@
+ PyInt_AsUnsignedLongLongMask@Base @VER@
+ PyInt_AsUnsignedLongMask@Base @VER@
+ PyInt_ClearFreeList@Base @VER@
+ PyInt_Fini@Base @VER@
+ PyInt_FromLong@Base @VER@
+ PyInt_FromSize_t@Base @VER@
+ PyInt_FromSsize_t@Base @VER@
+ PyInt_FromString@Base @VER@
+ PyInt_FromUnicode@Base @VER@
+ PyInt_GetMax@Base @VER@
+ PyInt_Type@Base @VER@
+ PyInterpreterState_Clear@Base @VER@
+ PyInterpreterState_Delete@Base @VER@
+ PyInterpreterState_Head@Base @VER@
+ PyInterpreterState_New@Base @VER@
+ PyInterpreterState_Next@Base @VER@
+ PyInterpreterState_ThreadHead@Base @VER@
+ PyIter_Next@Base @VER@
+ PyListIter_Type@Base @VER@
+ PyListRevIter_Type@Base @VER@
+ PyList_Append@Base @VER@
+ PyList_AsTuple@Base @VER@
+ PyList_Fini@Base @VER@
+ PyList_GetItem@Base @VER@
+ PyList_GetSlice@Base @VER@
+ PyList_Insert@Base @VER@
+ PyList_New@Base @VER@
+ PyList_Reverse@Base @VER@
+ PyList_SetItem@Base @VER@
+ PyList_SetSlice@Base @VER@
+ PyList_Size@Base @VER@
+ PyList_Sort@Base @VER@
+ PyList_Type@Base @VER@
+ PyLong_AsDouble@Base @VER@
+ PyLong_AsLong@Base @VER@
+ PyLong_AsLongAndOverflow@Base @VER@
+ PyLong_AsLongLong@Base @VER@
+ PyLong_AsLongLongAndOverflow@Base @VER@
+ PyLong_AsSsize_t@Base @VER@
+ PyLong_AsUnsignedLong@Base @VER@
+ PyLong_AsUnsignedLongLong@Base @VER@
+ PyLong_AsUnsignedLongLongMask@Base @VER@
+ PyLong_AsUnsignedLongMask@Base @VER@
+ PyLong_AsVoidPtr@Base @VER@
+ PyLong_FromDouble@Base @VER@
+ PyLong_FromLong@Base @VER@
+ PyLong_FromLongLong@Base @VER@
+ PyLong_FromSize_t@Base @VER@
+ PyLong_FromSsize_t@Base @VER@
+ PyLong_FromString@Base @VER@
+ PyLong_FromUnicode@Base @VER@
+ PyLong_FromUnsignedLong@Base @VER@
+ PyLong_FromUnsignedLongLong@Base @VER@
+ PyLong_FromVoidPtr@Base @VER@
+ PyLong_GetInfo@Base @VER@
+ PyLong_Type@Base @VER@
+ PyMapping_Check@Base @VER@
+ PyMapping_GetItemString@Base @VER@
+ PyMapping_HasKey@Base @VER@
+ PyMapping_HasKeyString@Base @VER@
+ PyMapping_Length@Base @VER@
+ PyMapping_SetItemString@Base @VER@
+ PyMapping_Size@Base @VER@
+ PyMarshal_Init@Base @VER@
+ PyMarshal_ReadLastObjectFromFile@Base @VER@
+ PyMarshal_ReadLongFromFile@Base @VER@
+ PyMarshal_ReadObjectFromFile@Base @VER@
+ PyMarshal_ReadObjectFromString@Base @VER@
+ PyMarshal_ReadShortFromFile@Base @VER@
+ PyMarshal_WriteLongToFile@Base @VER@
+ PyMarshal_WriteObjectToFile@Base @VER@
+ PyMarshal_WriteObjectToString@Base @VER@
+ PyMem_Free@Base @VER@
+ PyMem_Malloc@Base @VER@
+ PyMem_Realloc@Base @VER@
+ PyMemberDescr_Type@Base @VER@
+ PyMember_Get@Base @VER@
+ PyMember_GetOne@Base @VER@
+ PyMember_Set@Base @VER@
+ PyMember_SetOne@Base @VER@
+ PyMemoryView_FromBuffer@Base @VER@
+ PyMemoryView_FromObject@Base @VER@
+ PyMemoryView_GetContiguous@Base @VER@
+ PyMemoryView_Type@Base @VER@
+ PyMethod_Class@Base @VER@
+ PyMethod_ClearFreeList@Base @VER@
+ PyMethod_Fini@Base @VER@
+ PyMethod_Function@Base @VER@
+ PyMethod_New@Base @VER@
+ PyMethod_Self@Base @VER@
+ PyMethod_Type@Base @VER@
+ PyModule_AddIntConstant@Base @VER@
+ PyModule_AddObject@Base @VER@
+ PyModule_AddStringConstant@Base @VER@
+ PyModule_GetDict@Base @VER@
+ PyModule_GetFilename@Base @VER@
+ PyModule_GetName@Base @VER@
+ PyModule_GetWarningsModule@Base @VER@
+ PyModule_New@Base @VER@
+ PyModule_Type@Base @VER@
+ PyNode_AddChild@Base @VER@
+ PyNode_Compile@Base @VER@
+ PyNode_Free@Base @VER@
+ PyNode_ListTree@Base @VER@
+ PyNode_New@Base @VER@
+ PyNullImporter_Type@Base @VER@
+ PyNumber_Absolute@Base @VER@
+ PyNumber_Add@Base @VER@
+ PyNumber_And@Base @VER@
+ PyNumber_AsSsize_t@Base @VER@
+ PyNumber_Check@Base @VER@
+ PyNumber_Coerce@Base @VER@
+ PyNumber_CoerceEx@Base @VER@
+ PyNumber_Divide@Base @VER@
+ PyNumber_Divmod@Base @VER@
+ PyNumber_Float@Base @VER@
+ PyNumber_FloorDivide@Base @VER@
+ PyNumber_InPlaceAdd@Base @VER@
+ PyNumber_InPlaceAnd@Base @VER@
+ PyNumber_InPlaceDivide@Base @VER@
+ PyNumber_InPlaceFloorDivide@Base @VER@
+ PyNumber_InPlaceLshift@Base @VER@
+ PyNumber_InPlaceMultiply@Base @VER@
+ PyNumber_InPlaceOr@Base @VER@
+ PyNumber_InPlacePower@Base @VER@
+ PyNumber_InPlaceRemainder@Base @VER@
+ PyNumber_InPlaceRshift@Base @VER@
+ PyNumber_InPlaceSubtract@Base @VER@
+ PyNumber_InPlaceTrueDivide@Base @VER@
+ PyNumber_InPlaceXor@Base @VER@
+ PyNumber_Index@Base @VER@
+ PyNumber_Int@Base @VER@
+ PyNumber_Invert@Base @VER@
+ PyNumber_Long@Base @VER@
+ PyNumber_Lshift@Base @VER@
+ PyNumber_Multiply@Base @VER@
+ PyNumber_Negative@Base @VER@
+ PyNumber_Or@Base @VER@
+ PyNumber_Positive@Base @VER@
+ PyNumber_Power@Base @VER@
+ PyNumber_Remainder@Base @VER@
+ PyNumber_Rshift@Base @VER@
+ PyNumber_Subtract@Base @VER@
+ PyNumber_ToBase@Base @VER@
+ PyNumber_TrueDivide@Base @VER@
+ PyNumber_Xor@Base @VER@
+ PyOS_AfterFork@Base @VER@
+ PyOS_FiniInterrupts@Base @VER@
+ PyOS_InitInterrupts@Base @VER@
+ PyOS_InputHook@Base @VER@
+ PyOS_InterruptOccurred@Base @VER@
+ PyOS_Readline@Base @VER@
+ PyOS_ReadlineFunctionPointer@Base @VER@
+ PyOS_StdioReadline@Base @VER@
+ PyOS_ascii_atof@Base @VER@
+ PyOS_ascii_formatd@Base @VER@
+ PyOS_ascii_strtod@Base @VER@
+ PyOS_double_to_string@Base @VER@
+ PyOS_getsig@Base @VER@
+ PyOS_mystricmp@Base @VER@
+ PyOS_mystrnicmp@Base @VER@
+ PyOS_setsig@Base @VER@
+ PyOS_snprintf@Base @VER@
+ PyOS_string_to_double@Base @VER@
+ PyOS_strtol@Base @VER@
+ PyOS_strtoul@Base @VER@
+ PyOS_vsnprintf@Base @VER@
+ PyObject_AsCharBuffer@Base @VER@
+ PyObject_AsFileDescriptor@Base @VER@
+ PyObject_AsReadBuffer@Base @VER@
+ PyObject_AsWriteBuffer@Base @VER@
+ PyObject_Call@Base @VER@
+ PyObject_CallFunction@Base @VER@
+ PyObject_CallFunctionObjArgs@Base @VER@
+ PyObject_CallMethod@Base @VER@
+ PyObject_CallMethodObjArgs@Base @VER@
+ PyObject_CallObject@Base @VER@
+ PyObject_CheckReadBuffer@Base @VER@
+ PyObject_ClearWeakRefs@Base @VER@
+ PyObject_Cmp@Base @VER@
+ PyObject_Compare@Base @VER@
+ PyObject_CopyData@Base @VER@
+ PyObject_DelItem@Base @VER@
+ PyObject_DelItemString@Base @VER@
+ PyObject_Dir@Base @VER@
+ PyObject_Format@Base @VER@
+ PyObject_Free@Base @VER@
+ PyObject_GC_Del@Base @VER@
+ PyObject_GC_Track@Base @VER@
+ PyObject_GC_UnTrack@Base @VER@
+ PyObject_GenericGetAttr@Base @VER@
+ PyObject_GenericSetAttr@Base @VER@
+ PyObject_GetAttr@Base @VER@
+ PyObject_GetAttrString@Base @VER@
+ PyObject_GetBuffer@Base @VER@
+ PyObject_GetItem@Base @VER@
+ PyObject_GetIter@Base @VER@
+ PyObject_HasAttr@Base @VER@
+ PyObject_HasAttrString@Base @VER@
+ PyObject_Hash@Base @VER@
+ PyObject_HashNotImplemented@Base @VER@
+ PyObject_Init@Base @VER@
+ PyObject_InitVar@Base @VER@
+ PyObject_IsInstance@Base @VER@
+ PyObject_IsSubclass@Base @VER@
+ PyObject_IsTrue@Base @VER@
+ PyObject_Length@Base @VER@
+ PyObject_Malloc@Base @VER@
+ PyObject_Not@Base @VER@
+ PyObject_Print@Base @VER@
+ PyObject_Realloc@Base @VER@
+ PyObject_Repr@Base @VER@
+ PyObject_RichCompare@Base @VER@
+ PyObject_RichCompareBool@Base @VER@
+ PyObject_SelfIter@Base @VER@
+ PyObject_SetAttr@Base @VER@
+ PyObject_SetAttrString@Base @VER@
+ PyObject_SetItem@Base @VER@
+ PyObject_Size@Base @VER@
+ PyObject_Str@Base @VER@
+ PyObject_Type@Base @VER@
+ PyObject_Unicode@Base @VER@
+ PyParser_ASTFromFile@Base @VER@
+ PyParser_ASTFromString@Base @VER@
+ PyParser_AddToken@Base @VER@
+ PyParser_Delete@Base @VER@
+ PyParser_New@Base @VER@
+ PyParser_ParseFile@Base @VER@
+ PyParser_ParseFileFlags@Base @VER@
+ PyParser_ParseFileFlagsEx@Base @VER@
+ PyParser_ParseString@Base @VER@
+ PyParser_ParseStringFlags@Base @VER@
+ PyParser_ParseStringFlagsFilename@Base @VER@
+ PyParser_ParseStringFlagsFilenameEx@Base @VER@
+ PyParser_SetError@Base @VER@
+ PyParser_SimpleParseFile@Base @VER@
+ PyParser_SimpleParseFileFlags@Base @VER@
+ PyParser_SimpleParseString@Base @VER@
+ PyParser_SimpleParseStringFilename@Base @VER@
+ PyParser_SimpleParseStringFlags@Base @VER@
+ PyParser_SimpleParseStringFlagsFilename@Base @VER@
+ PyProperty_Type@Base @VER@
+ PyRange_Type@Base @VER@
+ PyReversed_Type@Base @VER@
+ PyRun_AnyFile@Base @VER@
+ PyRun_AnyFileEx@Base @VER@
+ PyRun_AnyFileExFlags@Base @VER@
+ PyRun_AnyFileFlags@Base @VER@
+ PyRun_File@Base @VER@
+ PyRun_FileEx@Base @VER@
+ PyRun_FileExFlags@Base @VER@
+ PyRun_FileFlags@Base @VER@
+ PyRun_InteractiveLoop@Base @VER@
+ PyRun_InteractiveLoopFlags@Base @VER@
+ PyRun_InteractiveOne@Base @VER@
+ PyRun_InteractiveOneFlags@Base @VER@
+ PyRun_SimpleFile@Base @VER@
+ PyRun_SimpleFileEx@Base @VER@
+ PyRun_SimpleFileExFlags@Base @VER@
+ PyRun_SimpleString@Base @VER@
+ PyRun_SimpleStringFlags@Base @VER@
+ PyRun_String@Base @VER@
+ PyRun_StringFlags@Base @VER@
+ PySTEntry_Type@Base @VER@
+ PyST_GetScope@Base @VER@
+ PySeqIter_New@Base @VER@
+ PySeqIter_Type@Base @VER@
+ PySequence_Check@Base @VER@
+ PySequence_Concat@Base @VER@
+ PySequence_Contains@Base @VER@
+ PySequence_Count@Base @VER@
+ PySequence_DelItem@Base @VER@
+ PySequence_DelSlice@Base @VER@
+ PySequence_Fast@Base @VER@
+ PySequence_GetItem@Base @VER@
+ PySequence_GetSlice@Base @VER@
+ PySequence_In@Base @VER@
+ PySequence_InPlaceConcat@Base @VER@
+ PySequence_InPlaceRepeat@Base @VER@
+ PySequence_Index@Base @VER@
+ PySequence_Length@Base @VER@
+ PySequence_List@Base @VER@
+ PySequence_Repeat@Base @VER@
+ PySequence_SetItem@Base @VER@
+ PySequence_SetSlice@Base @VER@
+ PySequence_Size@Base @VER@
+ PySequence_Tuple@Base @VER@
+ PySet_Add@Base @VER@
+ PySet_Clear@Base @VER@
+ PySet_Contains@Base @VER@
+ PySet_Discard@Base @VER@
+ PySet_Fini@Base @VER@
+ PySet_New@Base @VER@
+ PySet_Pop@Base @VER@
+ PySet_Size@Base @VER@
+ PySet_Type@Base @VER@
+ PySignal_SetWakeupFd@Base @VER@
+ PySlice_GetIndices@Base @VER@
+ PySlice_GetIndicesEx@Base @VER@
+ PySlice_New@Base @VER@
+ PySlice_Type@Base @VER@
+ PyStaticMethod_New@Base @VER@
+ PyStaticMethod_Type@Base @VER@
+ PyString_AsDecodedObject@Base @VER@
+ PyString_AsDecodedString@Base @VER@
+ PyString_AsEncodedObject@Base @VER@
+ PyString_AsEncodedString@Base @VER@
+ PyString_AsString@Base @VER@
+ PyString_AsStringAndSize@Base @VER@
+ PyString_Concat@Base @VER@
+ PyString_ConcatAndDel@Base @VER@
+ PyString_Decode@Base @VER@
+ PyString_DecodeEscape@Base @VER@
+ PyString_Encode@Base @VER@
+ PyString_Fini@Base @VER@
+ PyString_Format@Base @VER@
+ PyString_FromFormat@Base @VER@
+ PyString_FromFormatV@Base @VER@
+ PyString_FromString@Base @VER@
+ PyString_FromStringAndSize@Base @VER@
+ PyString_InternFromString@Base @VER@
+ PyString_InternImmortal@Base @VER@
+ PyString_InternInPlace@Base @VER@
+ PyString_Repr@Base @VER@
+ PyString_Size@Base @VER@
+ PyString_Type@Base @VER@
+ PyStructSequence_InitType@Base @VER@
+ PyStructSequence_New@Base @VER@
+ PyStructSequence_UnnamedField@Base @VER@
+ PySuper_Type@Base @VER@
+ PySymtable_Build@Base @VER@
+ PySymtable_Free@Base @VER@
+ PySymtable_Lookup@Base @VER@
+ PySys_AddWarnOption@Base @VER@
+ PySys_GetFile@Base @VER@
+ PySys_GetObject@Base @VER@
+ PySys_HasWarnOptions@Base @VER@
+ PySys_ResetWarnOptions@Base @VER@
+ PySys_SetArgv@Base @VER@
+ PySys_SetArgvEx@Base @VER@
+ PySys_SetObject@Base @VER@
+ PySys_SetPath@Base @VER@
+ PySys_WriteStderr@Base @VER@
+ PySys_WriteStdout@Base @VER@
+ PyThreadState_Clear@Base @VER@
+ PyThreadState_Delete@Base @VER@
+ PyThreadState_DeleteCurrent@Base @VER@
+ PyThreadState_Get@Base @VER@
+ PyThreadState_GetDict@Base @VER@
+ PyThreadState_New@Base @VER@
+ PyThreadState_Next@Base @VER@
+ PyThreadState_SetAsyncExc@Base @VER@
+ PyThreadState_Swap@Base @VER@
+ PyThread_ReInitTLS@Base @VER@
+ PyThread_acquire_lock@Base @VER@
+ PyThread_allocate_lock@Base @VER@
+ PyThread_create_key@Base @VER@
+ PyThread_delete_key@Base @VER@
+ PyThread_delete_key_value@Base @VER@
+ PyThread_exit_thread@Base @VER@
+ PyThread_free_lock@Base @VER@
+ PyThread_get_key_value@Base @VER@
+ PyThread_get_stacksize@Base @VER@
+ PyThread_get_thread_ident@Base @VER@
+ PyThread_init_thread@Base @VER@
+ PyThread_release_lock@Base @VER@
+ PyThread_set_key_value@Base @VER@
+ PyThread_set_stacksize@Base @VER@
+ PyThread_start_new_thread@Base @VER@
+ PyToken_OneChar@Base @VER@
+ PyToken_ThreeChars@Base @VER@
+ PyToken_TwoChars@Base @VER@
+ PyTokenizer_Free@Base @VER@
+ PyTokenizer_FromFile@Base @VER@
+ PyTokenizer_FromString@Base @VER@
+ PyTokenizer_Get@Base @VER@
+ PyTokenizer_RestoreEncoding@Base @VER@
+ PyTraceBack_Here@Base @VER@
+ PyTraceBack_Print@Base @VER@
+ PyTraceBack_Type@Base @VER@
+ PyTupleIter_Type@Base @VER@
+ PyTuple_ClearFreeList@Base @VER@
+ PyTuple_Fini@Base @VER@
+ PyTuple_GetItem@Base @VER@
+ PyTuple_GetSlice@Base @VER@
+ PyTuple_New@Base @VER@
+ PyTuple_Pack@Base @VER@
+ PyTuple_SetItem@Base @VER@
+ PyTuple_Size@Base @VER@
+ PyTuple_Type@Base @VER@
+ PyType_ClearCache@Base @VER@
+ PyType_GenericAlloc@Base @VER@
+ PyType_GenericNew@Base @VER@
+ PyType_IsSubtype@Base @VER@
+ PyType_Modified@Base @VER@
+ PyType_Ready@Base @VER@
+ PyType_Type@Base @VER@
+ PyUnicodeDecodeError_Create@Base @VER@
+ PyUnicodeDecodeError_GetEncoding@Base @VER@
+ PyUnicodeDecodeError_GetEnd@Base @VER@
+ PyUnicodeDecodeError_GetObject@Base @VER@
+ PyUnicodeDecodeError_GetReason@Base @VER@
+ PyUnicodeDecodeError_GetStart@Base @VER@
+ PyUnicodeDecodeError_SetEnd@Base @VER@
+ PyUnicodeDecodeError_SetReason@Base @VER@
+ PyUnicodeDecodeError_SetStart@Base @VER@
+ PyUnicodeEncodeError_Create@Base @VER@
+ PyUnicodeEncodeError_GetEncoding@Base @VER@
+ PyUnicodeEncodeError_GetEnd@Base @VER@
+ PyUnicodeEncodeError_GetObject@Base @VER@
+ PyUnicodeEncodeError_GetReason@Base @VER@
+ PyUnicodeEncodeError_GetStart@Base @VER@
+ PyUnicodeEncodeError_SetEnd@Base @VER@
+ PyUnicodeEncodeError_SetReason@Base @VER@
+ PyUnicodeEncodeError_SetStart@Base @VER@
+ PyUnicodeTranslateError_Create@Base @VER@
+ PyUnicodeTranslateError_GetEnd@Base @VER@
+ PyUnicodeTranslateError_GetObject@Base @VER@
+ PyUnicodeTranslateError_GetReason@Base @VER@
+ PyUnicodeTranslateError_GetStart@Base @VER@
+ PyUnicodeTranslateError_SetEnd@Base @VER@
+ PyUnicodeTranslateError_SetReason@Base @VER@
+ PyUnicodeTranslateError_SetStart@Base @VER@
+ PyUnicodeUCS4_AsASCIIString@Base @VER@
+ PyUnicodeUCS4_AsCharmapString@Base @VER@
+ PyUnicodeUCS4_AsEncodedObject@Base @VER@
+ PyUnicodeUCS4_AsEncodedString@Base @VER@
+ PyUnicodeUCS4_AsLatin1String@Base @VER@
+ PyUnicodeUCS4_AsRawUnicodeEscapeString@Base @VER@
+ PyUnicodeUCS4_AsUTF16String@Base @VER@
+ PyUnicodeUCS4_AsUTF32String@Base @VER@
+ PyUnicodeUCS4_AsUTF8String@Base @VER@
+ PyUnicodeUCS4_AsUnicode@Base @VER@
+ PyUnicodeUCS4_AsUnicodeEscapeString@Base @VER@
+ PyUnicodeUCS4_AsWideChar@Base @VER@
+ PyUnicodeUCS4_ClearFreelist@Base @VER@
+ PyUnicodeUCS4_Compare@Base @VER@
+ PyUnicodeUCS4_Concat@Base @VER@
+ PyUnicodeUCS4_Contains@Base @VER@
+ PyUnicodeUCS4_Count@Base @VER@
+ PyUnicodeUCS4_Decode@Base @VER@
+ PyUnicodeUCS4_DecodeASCII@Base @VER@
+ PyUnicodeUCS4_DecodeCharmap@Base @VER@
+ PyUnicodeUCS4_DecodeLatin1@Base @VER@
+ PyUnicodeUCS4_DecodeRawUnicodeEscape@Base @VER@
+ PyUnicodeUCS4_DecodeUTF16@Base @VER@
+ PyUnicodeUCS4_DecodeUTF16Stateful@Base @VER@
+ PyUnicodeUCS4_DecodeUTF32@Base @VER@
+ PyUnicodeUCS4_DecodeUTF32Stateful@Base @VER@
+ PyUnicodeUCS4_DecodeUTF8@Base @VER@
+ PyUnicodeUCS4_DecodeUTF8Stateful@Base @VER@
+ PyUnicodeUCS4_DecodeUnicodeEscape@Base @VER@
+ PyUnicodeUCS4_Encode@Base @VER@
+ PyUnicodeUCS4_EncodeASCII@Base @VER@
+ PyUnicodeUCS4_EncodeCharmap@Base @VER@
+ PyUnicodeUCS4_EncodeDecimal@Base @VER@
+ PyUnicodeUCS4_EncodeLatin1@Base @VER@
+ PyUnicodeUCS4_EncodeRawUnicodeEscape@Base @VER@
+ PyUnicodeUCS4_EncodeUTF16@Base @VER@
+ PyUnicodeUCS4_EncodeUTF32@Base @VER@
+ PyUnicodeUCS4_EncodeUTF8@Base @VER@
+ PyUnicodeUCS4_EncodeUnicodeEscape@Base @VER@
+ PyUnicodeUCS4_Find@Base @VER@
+ PyUnicodeUCS4_Format@Base @VER@
+ PyUnicodeUCS4_FromEncodedObject@Base @VER@
+ PyUnicodeUCS4_FromFormat@Base @VER@
+ PyUnicodeUCS4_FromFormatV@Base @VER@
+ PyUnicodeUCS4_FromObject@Base @VER@
+ PyUnicodeUCS4_FromOrdinal@Base @VER@
+ PyUnicodeUCS4_FromString@Base @VER@
+ PyUnicodeUCS4_FromStringAndSize@Base @VER@
+ PyUnicodeUCS4_FromUnicode@Base @VER@
+ PyUnicodeUCS4_FromWideChar@Base @VER@
+ PyUnicodeUCS4_GetDefaultEncoding@Base @VER@
+ PyUnicodeUCS4_GetMax@Base @VER@
+ PyUnicodeUCS4_GetSize@Base @VER@
+ PyUnicodeUCS4_Join@Base @VER@
+ PyUnicodeUCS4_Partition@Base @VER@
+ PyUnicodeUCS4_RPartition@Base @VER@
+ PyUnicodeUCS4_RSplit@Base @VER@
+ PyUnicodeUCS4_Replace@Base @VER@
+ PyUnicodeUCS4_Resize@Base @VER@
+ PyUnicodeUCS4_RichCompare@Base @VER@
+ PyUnicodeUCS4_SetDefaultEncoding@Base @VER@
+ PyUnicodeUCS4_Split@Base @VER@
+ PyUnicodeUCS4_Splitlines@Base @VER@
+ PyUnicodeUCS4_Tailmatch@Base @VER@
+ PyUnicodeUCS4_Translate@Base @VER@
+ PyUnicodeUCS4_TranslateCharmap@Base @VER@
+ PyUnicode_AsDecodedObject@Base @VER@
+ PyUnicode_BuildEncodingMap@Base @VER@
+ PyUnicode_DecodeUTF7@Base @VER@
+ PyUnicode_DecodeUTF7Stateful@Base @VER@
+ PyUnicode_EncodeUTF7@Base @VER@
+ PyUnicode_Type@Base @VER@
+ PyWeakref_GetObject@Base @VER@
+ PyWeakref_NewProxy@Base @VER@
+ PyWeakref_NewRef@Base @VER@
+ PyWrapperDescr_Type@Base @VER@
+ PyWrapper_New@Base @VER@
+ Py_AddPendingCall@Base @VER@
+ Py_AtExit@Base @VER@
+ Py_BuildValue@Base @VER@
+ Py_BytesWarningFlag@Base @VER@
+ Py_CompileString@Base @VER@
+ Py_CompileStringFlags@Base @VER@
+ Py_DebugFlag@Base @VER@
+ Py_DecRef@Base @VER@
+ Py_DivisionWarningFlag@Base @VER@
+ Py_DontWriteBytecodeFlag@Base @VER@
+ Py_EndInterpreter@Base @VER@
+ Py_Exit@Base @VER@
+ Py_FatalError@Base @VER@
+ Py_FdIsInteractive@Base @VER@
+ Py_FileSystemDefaultEncoding@Base @VER@
+ Py_Finalize@Base @VER@
+ Py_FindMethod@Base @VER@
+ Py_FindMethodInChain@Base @VER@
+ Py_FlushLine@Base @VER@
+ Py_FrozenFlag@Base @VER@
+ Py_FrozenMain@Base @VER@
+ Py_GetArgcArgv@Base @VER@
+ Py_GetBuildInfo@Base @VER@
+ Py_GetCompiler@Base @VER@
+ Py_GetCopyright@Base @VER@
+ Py_GetExecPrefix@Base @VER@
+ Py_GetPath@Base @VER@
+ Py_GetPlatform@Base @VER@
+ Py_GetPrefix@Base @VER@
+ Py_GetProgramFullPath@Base @VER@
+ Py_GetProgramName@Base @VER@
+ Py_GetPythonHome@Base @VER@
+ Py_GetRecursionLimit@Base @VER@
+ Py_GetVersion@Base @VER@
+ Py_IgnoreEnvironmentFlag@Base @VER@
+ Py_IncRef@Base @VER@
+ Py_Initialize@Base @VER@
+ Py_InitializeEx@Base @VER@
+ Py_InspectFlag@Base @VER@
+ Py_InteractiveFlag@Base @VER@
+ Py_IsInitialized@Base @VER@
+ Py_Main@Base @VER@
+ Py_MakePendingCalls@Base @VER@
+ Py_NewInterpreter@Base @VER@
+ Py_NoSiteFlag@Base @VER@
+ Py_NoUserSiteDirectory@Base @VER@
+ Py_OptimizeFlag@Base @VER@
+ Py_Py3kWarningFlag@Base @VER@
+ Py_ReprEnter@Base @VER@
+ Py_ReprLeave@Base @VER@
+ Py_SetProgramName@Base @VER@
+ Py_SetPythonHome@Base @VER@
+ Py_SetRecursionLimit@Base @VER@
+ Py_SubversionRevision@Base @VER@
+ Py_SubversionShortBranch@Base @VER@
+ Py_SymtableString@Base @VER@
+ Py_TabcheckFlag@Base @VER@
+ Py_UnicodeFlag@Base @VER@
+ Py_UniversalNewlineFgets@Base @VER@
+ Py_UniversalNewlineFread@Base @VER@
+ Py_UseClassExceptionsFlag@Base @VER@
+ Py_VaBuildValue@Base @VER@
+ Py_VerboseFlag@Base @VER@
+ Py_meta_grammar@Base @VER@
+ Py_pgen@Base @VER@
+ _PyArg_NoKeywords@Base @VER@
+ _PyArg_ParseTupleAndKeywords_SizeT@Base @VER@
+ _PyArg_ParseTuple_SizeT@Base @VER@
+ _PyArg_Parse_SizeT@Base @VER@
+ _PyArg_VaParseTupleAndKeywords_SizeT@Base @VER@
+ _PyArg_VaParse_SizeT@Base @VER@
+ _PyBuiltin_Init@Base @VER@
+ _PyByteArray_empty_string@Base @VER@
+ _PyBytes_FormatAdvanced@Base @VER@
+ _PyCode_CheckLineNumber@Base @VER@
+ _PyCodec_Lookup@Base @VER@
+ _PyComplex_FormatAdvanced@Base @VER@
+ _PyDict_Contains@Base @VER@
+ _PyDict_MaybeUntrack@Base @VER@
+ _PyDict_NewPresized@Base @VER@
+ _PyDict_Next@Base @VER@
+ _PyErr_BadInternalCall@Base @VER@
+ _PyEval_CallTracing@Base @VER@
+ _PyEval_SliceIndex@Base @VER@
+ _PyExc_Fini@Base @VER@
+ _PyExc_Init@Base @VER@
+ _PyFile_SanitizeMode@Base @VER@
+ _PyFloat_FormatAdvanced@Base @VER@
+ _PyFloat_Init@Base @VER@
+ _PyFloat_Pack4@Base @VER@
+ _PyFloat_Pack8@Base @VER@
+ _PyFloat_Unpack4@Base @VER@
+ _PyFloat_Unpack8@Base @VER@
+ _PyFrame_Init@Base @VER@
+ _PyGC_Dump@Base @VER@
+ _PyGC_generation0@Base @VER@
+ _PyGILState_Fini@Base @VER@
+ _PyGILState_Init@Base @VER@
+ _PyImportHooks_Init@Base @VER@
+ _PyImport_AcquireLock@Base @VER@
+ _PyImport_DynLoadFiletab@Base @VER@
+ _PyImport_Filetab@Base @VER@
+ _PyImport_FindExtension@Base @VER@
+ _PyImport_FindModule@Base @VER@
+ _PyImport_Fini@Base @VER@
+ _PyImport_FixupExtension@Base @VER@
+ _PyImport_GetDynLoadFunc@Base @VER@
+ _PyImport_Init@Base @VER@
+ _PyImport_Inittab@Base @VER@
+ _PyImport_IsScript@Base @VER@
+ _PyImport_LoadDynamicModule@Base @VER@
+ _PyImport_ReleaseLock@Base @VER@
+ _PyImport_ReInitLock@Base @VER@
+ _PyInstance_Lookup@Base @VER@
+ _PyInt_Format@Base @VER@
+ _PyInt_FormatAdvanced@Base @VER@
+ _PyInt_Init@Base @VER@
+ _PyList_Extend@Base @VER@
+ _PyLong_AsByteArray@Base @VER@
+ _PyLong_Copy@Base @VER@
+ _PyLong_DigitValue@Base @VER@
+ _PyLong_Format@Base @VER@
+ _PyLong_FormatAdvanced@Base @VER@
+ _PyLong_Frexp@Base @VER@
+ _PyLong_FromByteArray@Base @VER@
+ _PyLong_Init@Base @VER@
+ _PyLong_New@Base @VER@
+ _PyLong_NumBits@Base @VER@
+ _PyLong_Sign@Base @VER@
+ _PyModule_Clear@Base @VER@
+ _PyNumber_ConvertIntegralToInt@Base @VER@
+ _PyOS_GetOpt@Base @VER@
+ _PyOS_ReadlineTState@Base @VER@
+ _PyOS_ascii_formatd@Base @VER@
+ _PyOS_ascii_strtod@Base @VER@
+ _PyOS_optarg@Base @VER@
+ _PyOS_opterr@Base @VER@
+ _PyOS_optind@Base @VER@
+ _PyObject_CallFunction_SizeT@Base @VER@
+ _PyObject_CallMethod_SizeT@Base @VER@
+ _PyObject_Del@Base @VER@
+ _PyObject_Dump@Base @VER@
+ _PyObject_GC_Del@Base @VER@
+ _PyObject_GC_Malloc@Base @VER@
+ _PyObject_GC_New@Base @VER@
+ _PyObject_GC_NewVar@Base @VER@
+ _PyObject_GC_Resize@Base @VER@
+ _PyObject_GC_Track@Base @VER@
+ _PyObject_GC_UnTrack@Base @VER@
+ _PyObject_GenericGetAttrWithDict@Base @VER@
+ _PyObject_GenericSetAttrWithDict@Base @VER@
+ _PyObject_GetDictPtr@Base @VER@
+ _PyObject_LengthHint@Base @VER@
+ _PyObject_LookupSpecial@Base @VER@
+ _PyObject_New@Base @VER@
+ _PyObject_NewVar@Base @VER@
+ _PyObject_NextNotImplemented@Base @VER@
+ _PyObject_RealIsInstance@Base @VER@
+ _PyObject_RealIsSubclass@Base @VER@
+ _PyObject_SlotCompare@Base @VER@
+ _PyObject_Str@Base @VER@
+ _PyParser_Grammar@Base @VER@
+ _PyParser_TokenNames@Base @VER@
+ _PySequence_IterSearch@Base @VER@
+ _PySet_Next@Base @VER@
+ _PySet_NextEntry@Base @VER@
+ _PySet_Update@Base @VER@
+ _PySlice_FromIndices@Base @VER@
+ _PyString_Eq@Base @VER@
+ _PyString_FormatLong@Base @VER@
+ _PyString_InsertThousandsGrouping@Base @VER@
+ _PyString_Join@Base @VER@
+ _PyString_Resize@Base @VER@
+ _PySys_Init@Base @VER@
+ _PyThreadState_Current@Base @VER@
+ _PyThreadState_GetFrame@Base @VER@
+ _PyThreadState_Init@Base @VER@
+ _PyThreadState_Prealloc@Base @VER@
+ _PyThread_CurrentFrames@Base @VER@
+ _PyTime_DoubleToTimet@Base @VER@
+ _PyTrash_delete_later@Base @VER@
+ _PyTrash_delete_nesting@Base @VER@
+ _PyTrash_deposit_object@Base @VER@
+ _PyTrash_destroy_chain@Base @VER@
+ _PyTuple_MaybeUntrack@Base @VER@
+ _PyTuple_Resize@Base @VER@
+ _PyType_Lookup@Base @VER@
+ _PyUnicodeUCS4_AsDefaultEncodedString@Base @VER@
+ _PyUnicodeUCS4_Fini@Base @VER@
+ _PyUnicodeUCS4_Init@Base @VER@
+ _PyUnicodeUCS4_IsAlpha@Base @VER@
+ _PyUnicodeUCS4_IsDecimalDigit@Base @VER@
+ _PyUnicodeUCS4_IsDigit@Base @VER@
+ _PyUnicodeUCS4_IsLinebreak@Base @VER@
+ _PyUnicodeUCS4_IsLowercase@Base @VER@
+ _PyUnicodeUCS4_IsNumeric@Base @VER@
+ _PyUnicodeUCS4_IsTitlecase@Base @VER@
+ _PyUnicodeUCS4_IsUppercase@Base @VER@
+ _PyUnicodeUCS4_IsWhitespace@Base @VER@
+ _PyUnicodeUCS4_ToDecimalDigit@Base @VER@
+ _PyUnicodeUCS4_ToDigit@Base @VER@
+ _PyUnicodeUCS4_ToLowercase@Base @VER@
+ _PyUnicodeUCS4_ToNumeric@Base @VER@
+ _PyUnicodeUCS4_ToTitlecase@Base @VER@
+ _PyUnicodeUCS4_ToUppercase@Base @VER@
+ _PyUnicode_BidirectionalNames@Base @VER@
+ _PyUnicode_CategoryNames@Base @VER@
+ _PyUnicode_Database_Records@Base @VER@
+ _PyUnicode_DecodeUnicodeInternal@Base @VER@
+ _PyUnicode_EastAsianWidthNames@Base @VER@
+ _PyUnicode_FormatAdvanced@Base @VER@
+ _PyUnicode_TypeRecords@Base @VER@
+ _PyUnicode_XStrip@Base @VER@
+ _PyWarnings_Init@Base @VER@
+ _PyWeakref_CallableProxyType@Base @VER@
+ _PyWeakref_ClearRef@Base @VER@
+ _PyWeakref_GetWeakrefCount@Base @VER@
+ _PyWeakref_ProxyType@Base @VER@
+ _PyWeakref_RefType@Base @VER@
+ _Py_Assert@Base @VER@
+ _Py_Assign@Base @VER@
+ _Py_Attribute@Base @VER@
+ _Py_AugAssign@Base @VER@
+ _Py_BinOp@Base @VER@
+ _Py_BoolOp@Base @VER@
+ _Py_Break@Base @VER@
+ _Py_BuildValue_SizeT@Base @VER@
+ _Py_Call@Base @VER@
+ _Py_CheckInterval@Base @VER@
+ _Py_CheckRecursionLimit@Base @VER@
+ _Py_CheckRecursiveCall@Base @VER@
+ _Py_ClassDef@Base @VER@
+ _Py_Compare@Base @VER@
+ _Py_Continue@Base @VER@
+ _Py_Delete@Base @VER@
+ _Py_Dict@Base @VER@
+ _Py_DictComp@Base @VER@
+ _Py_DisplaySourceLine@Base @VER@
+ _Py_Ellipsis@Base @VER@
+ _Py_EllipsisObject@Base @VER@
+ _Py_ExceptHandler@Base @VER@
+ _Py_Exec@Base @VER@
+ _Py_Expr@Base @VER@
+ _Py_Expression@Base @VER@
+ _Py_ExtSlice@Base @VER@
+ _Py_For@Base @VER@
+ _Py_FunctionDef@Base @VER@
+ _Py_GeneratorExp@Base @VER@
+ _Py_Global@Base @VER@
+ _Py_HashDouble@Base @VER@
+ _Py_HashPointer@Base @VER@
+ _Py_If@Base @VER@
+ _Py_IfExp@Base @VER@
+ _Py_Import@Base @VER@
+ _Py_ImportFrom@Base @VER@
+ _Py_Index@Base @VER@
+ _Py_InsertThousandsGroupingLocale@Base @VER@
+ _Py_Interactive@Base @VER@
+ _Py_Lambda@Base @VER@
+ _Py_List@Base @VER@
+ _Py_ListComp@Base @VER@
+ _Py_Mangle@Base @VER@
+ _Py_Module@Base @VER@
+ _Py_Name@Base @VER@
+ _Py_NoneStruct@Base @VER@
+ _Py_NotImplementedStruct@Base @VER@
+ _Py_Num@Base @VER@
+ _Py_PackageContext@Base @VER@
+ _Py_Pass@Base @VER@
+ _Py_Print@Base @VER@
+ _Py_QnewFlag@Base @VER@
+ _Py_Raise@Base @VER@
+ _Py_ReadyTypes@Base @VER@
+ _Py_ReleaseInternedStrings@Base @VER@
+ _Py_Repr@Base @VER@
+ _Py_Return@Base @VER@
+ _Py_Set@Base @VER@
+ _Py_SetComp@Base @VER@
+ _Py_Slice@Base @VER@
+ _Py_Str@Base @VER@
+ _Py_Subscript@Base @VER@
+ _Py_Suite@Base @VER@
+ _Py_SwappedOp@Base @VER@
+ _Py_Ticker@Base @VER@
+ _Py_TrueStruct@Base @VER@
+ _Py_TryExcept@Base @VER@
+ _Py_TryFinally@Base @VER@
+ _Py_Tuple@Base @VER@
+ _Py_UnaryOp@Base @VER@
+ _Py_VaBuildValue_SizeT@Base @VER@
+ _Py_While@Base @VER@
+ _Py_With@Base @VER@
+ _Py_Yield@Base @VER@
+ _Py_ZeroStruct@Base @VER@
+ _Py_abstract_hack@Base @VER@
+ _Py_add_one_to_index_C@Base @VER@
+ _Py_add_one_to_index_F@Base @VER@
+ (optional)_Py_acosh@Base @VER@
+ _Py_addarc@Base @VER@
+ _Py_addbit@Base @VER@
+ _Py_adddfa@Base @VER@
+ _Py_addfirstsets@Base @VER@
+ _Py_addlabel@Base @VER@
+ _Py_addstate@Base @VER@
+ _Py_alias@Base @VER@
+ _Py_arguments@Base @VER@
+ _Py_ascii_whitespace@Base @VER@
+ (optional)_Py_asinh@Base @VER@
+ (optional)_Py_atanh@Base @VER@
+ _Py_bytes_capitalize@Base @VER@
+ _Py_bytes_isalnum@Base @VER@
+ _Py_bytes_isalpha@Base @VER@
+ _Py_bytes_isdigit@Base @VER@
+ _Py_bytes_islower@Base @VER@
+ _Py_bytes_isspace@Base @VER@
+ _Py_bytes_istitle@Base @VER@
+ _Py_bytes_isupper@Base @VER@
+ _Py_bytes_lower@Base @VER@
+ _Py_bytes_swapcase@Base @VER@
+ _Py_bytes_title@Base @VER@
+ _Py_bytes_upper@Base @VER@
+ _Py_c_abs@Base @VER@
+ _Py_c_diff@Base @VER@
+ _Py_c_neg@Base @VER@
+ _Py_c_pow@Base @VER@
+ _Py_c_prod@Base @VER@
+ _Py_c_quot@Base @VER@
+ _Py_c_sum@Base @VER@
+ _Py_capitalize__doc__@Base @VER@
+ _Py_capsule_hack@Base @VER@
+ _Py_cobject_hack@Base @VER@
+ _Py_comprehension@Base @VER@
+ _Py_ctype_table@Base @VER@
+ _Py_ctype_tolower@Base @VER@
+ _Py_ctype_toupper@Base @VER@
+ _Py_delbitset@Base @VER@
+ _Py_dg_dtoa@Base @VER@
+ _Py_dg_freedtoa@Base @VER@
+ _Py_dg_strtod@Base @VER@
+ _Py_double_round@Base @VER@
+ (optional)_Py_expm1@Base @VER@
+ _Py_findlabel@Base @VER@
+ (arch=i386 lpia)_Py_force_double@Base @VER@
+ (arch=amd64 i386 lpia)_Py_get_387controlword@Base @VER@
+ _Py_isalnum__doc__@Base @VER@
+ _Py_isalpha__doc__@Base @VER@
+ _Py_isdigit__doc__@Base @VER@
+ _Py_islower__doc__@Base @VER@
+ _Py_isspace__doc__@Base @VER@
+ _Py_istitle__doc__@Base @VER@
+ _Py_isupper__doc__@Base @VER@
+ _Py_keyword@Base @VER@
+ (optional)_Py_log1p@Base @VER@
+ _Py_lower__doc__@Base @VER@
+ _Py_mergebitset@Base @VER@
+ _Py_meta_grammar@Base @VER@
+ _Py_newbitset@Base @VER@
+ _Py_newgrammar@Base @VER@
+ (optional)_Py_parse_inf_or_nan@Base @VER@
+ _Py_pgen@Base @VER@
+ _Py_samebitset@Base @VER@
+ (arch=amd64 i386 lpia)_Py_set_387controlword@Base @VER@
+ _Py_svnversion@Base @VER@
+ _Py_swapcase__doc__@Base @VER@
+ _Py_title__doc__@Base @VER@
+ _Py_translatelabels@Base @VER@
+ _Py_upper__doc__@Base @VER@
+
+ PyFPE_counter@Base @VER@
+ PyFPE_dummy@Base @VER@
+ PyFPE_jbuf@Base @VER@
+
+ asdl_int_seq_new@Base @VER@
+ asdl_seq_new@Base @VER@
+
+# don't check for the following symbols, found in extensions
+# which either can be built as builtin or extension.
+
+ (optional)fast_save_leave@Base @VER@
+ (optional)partial_reduce@Base @VER@
+ (optional)partial_setstate@Base @VER@
+
+# _check_for_multiple_distdirs@Base @VER@
+ (optional)init_ast@Base @VER@
+ (optional)init_bisect@Base @VER@
+ (optional)init_codecs@Base @VER@
+ (optional)init_collections@Base @VER@
+ (optional)init_functools@Base @VER@
+ (optional)init_hashlib@Base @VER@
+ (optional)init_locale@Base @VER@
+ (optional)init_random@Base @VER@
+ (optional)init_socket@Base @VER@
+ (optional)init_sockobject@Base @VER@
+ (optional)init_sre@Base @VER@
+ (optional)init_ssl@Base @VER@
+ (optional)init_struct@Base @VER@
+ (optional)init_symtable@Base @VER@
+ (optional)init_weakref@Base @VER@
+ (optional)initarray@Base @VER@
+ (optional)initbinascii@Base @VER@
+ (optional)initcPickle@Base @VER@
+ (optional)initcStringIO@Base @VER@
+ (optional)initcmath@Base @VER@
+ (optional)initerrno@Base @VER@
+ (optional)initfcntl@Base @VER@
+ (optional)initgc@Base @VER@
+ (optional)initgrp@Base @VER@
+ (optional)initimp@Base @VER@
+ (optional)inititertools@Base @VER@
+ (optional)initmath@Base @VER@
+ (optional)initoperator@Base @VER@
+ (optional)initposix@Base @VER@
+ (optional)initpwd@Base @VER@
+ (optional)initselect@Base @VER@
+ (optional)initsignal@Base @VER@
+ (optional)initspwd@Base @VER@
+ (optional)initstrop@Base @VER@
+ (optional)initsyslog@Base @VER@
+ (optional)initthread@Base @VER@
+ (optional)inittime@Base @VER@
+ (optional)initunicodedata@Base @VER@
+ (optional)initxxsubtype@Base @VER@
+ (optional)initzipimport@Base @VER@
+ (optional)initzlib@Base @VER@
--- python2.7-2.7.1.orig/debian/control
+++ python2.7-2.7.1/debian/control
@@ -0,0 +1,114 @@
+Source: python2.7
+Section: python
+Priority: optional
+Maintainer: Ubuntu Core Developers <ubuntu-devel-discuss@lists.ubuntu.com>
+XSBC-Original-Maintainer: Matthias Klose <doko@debian.org>
+Build-Depends: debhelper (>= 5), quilt, autoconf, libreadline-dev, libncursesw5-dev (>= 5.3), tk8.5-dev, zlib1g-dev, blt-dev (>= 2.4z), libssl-dev, libexpat1-dev, sharutils, libbz2-dev, libbluetooth-dev [!hurd-i386 !kfreebsd-i386 !kfreebsd-amd64], locales [!armel !avr32 !hppa !ia64 !mipsel], libsqlite3-dev, libffi-dev (>= 3.0.5), mime-support, libgpm2 [!hurd-i386 !kfreebsd-i386 !kfreebsd-amd64], netbase, lsb-release, bzip2, libdb4.8-dev, gdb, python
+Build-Depends-Indep: python-sphinx
+Build-Conflicts: tcl8.3-dev, tk8.3-dev, tcl8.4-dev, tk8.4-dev, python2.7-xml, python-xml, autoconf2.13
+XS-Python-Version: 2.7
+Standards-Version: 3.9.1
+Vcs-Browser: https://code.launchpad.net/~doko/python/pkg2.7-debian
+Vcs-Bzr: http://bazaar.launchpad.net/~doko/python/pkg2.7-debian
+
+Package: python2.7
+Architecture: any
+Priority: optional
+Depends: python2.7-minimal (= ${binary:Version}), mime-support, ${shlibs:Depends}, ${misc:Depends}
+Suggests: python2.7-doc, python2.7-profiler, binutils
+Provides: python2.7-cjkcodecs, python2.7-ctypes, python2.7-elementtree, python2.7-celementtree, python2.7-wsgiref
+XB-Python-Version: 2.7
+Description: An interactive high-level object-oriented language (version 2.7)
+ Version 2.7 of the high-level, interactive object oriented language,
+ includes an extensive class library with lots of goodies for
+ network programming, system administration, sounds and graphics.
+
+Package: python2.7-minimal
+Architecture: any
+Priority: optional
+Depends: ${shlibs:Depends}, ${misc:Depends}
+Recommends: python2.7
+Suggests: binfmt-support
+Replaces: python2.7 (<< 2.7.1~rc1-2~)
+Conflicts: binfmt-support (<< 1.1.2)
+XB-Python-Runtime: python2.7
+XB-Python-Version: 2.7
+Description: A minimal subset of the Python language (version 2.7)
+ This package contains the interpreter and some essential modules.  It can
+ be used in the boot process for some basic tasks.
+ See /usr/share/doc/python2.7-minimal/README.Debian for a list of the modules
+ contained in this package.
+
+Package: libpython2.7
+Architecture: any
+Section: libs
+Priority: optional
+Depends: python2.7 (= ${binary:Version}), ${shlibs:Depends}, ${misc:Depends}
+Replaces: python2.7 (<< 2.6)
+Description: Shared Python runtime library (version 2.7)
+ Version 2.7 of the high-level, interactive object oriented language,
+ includes an extensive class library with lots of goodies for
+ network programming, system administration, sounds and graphics.
+ .
+ This package contains the shared runtime library, normally not needed
+ for programs using the statically linked interpreter.
+
+Package: python2.7-examples
+Architecture: all
+Depends: python2.7 (>= ${source:Version}), ${misc:Depends}
+Description: Examples for the Python language (v2.7)
+ Examples, Demos and Tools for Python (v2.7). These are files included in
+ the upstream Python distribution (v2.7).
+
+Package: python2.7-dev
+Architecture: any
+Depends: python2.7 (= ${binary:Version}), libpython2.7 (= ${binary:Version}), libexpat1-dev, libssl-dev, ${shlibs:Depends}, ${misc:Depends}
+Recommends: libc6-dev | libc-dev
+Replaces: python2.7 (<< 2.7-3)
+Description: Header files and a static library for Python (v2.7)
+ Header files, a static library and development tools for building
+ Python (v2.7) modules, extending the Python interpreter or embedding
+ Python (v2.7) in applications.
+ .
+ Maintainers of Python packages should read README.maintainers.
+
+Package: idle-python2.7
+Architecture: all
+Depends: python2.7, python-tk (>= 2.6~a3), python2.7-tk, ${misc:Depends}
+Enhances: python2.7
+Replaces: python2.7 (<< 2.6.1-2)
+XB-Python-Version: 2.7
+Description: An IDE for Python (v2.7) using Tkinter
+ IDLE is an Integrated Development Environment for Python (v2.7).
+ IDLE is written using Tkinter and therefore quite platform-independent.
+
+Package: python2.7-doc
+Section: doc
+Architecture: all
+Depends: libjs-jquery, ${misc:Depends}
+Suggests: python2.7
+Description: Documentation for the high-level object-oriented language Python (v2.7)
+ These is the official set of documentation for the interactive high-level
+ object-oriented language Python (v2.7). All documents are provided
+ in HTML format. The package consists of ten documents:
+ .
+   * What's New in Python2.7
+   * Tutorial
+   * Python Library Reference
+   * Macintosh Module Reference
+   * Python Language Reference
+   * Extending and Embedding Python
+   * Python/C API Reference
+   * Installing Python Modules
+   * Documenting Python
+   * Distributing Python Modules
+
+Package: python2.7-dbg
+Section: debug
+Architecture: any
+Priority: extra
+Depends: python2.7 (>= ${binary:Version}), ${shlibs:Depends}, ${misc:Depends}
+Suggests: python-gdbm-dbg, python-tk-dbg
+Description: Debug Build of the Python Interpreter (version 2.7)
+ Python interpreter configured with --pydebug. Dynamically loaded modules are
+ searched in /usr/lib/python2.7/lib-dynload/debug first.
--- python2.7-2.7.1.orig/debian/PVER-dbg.prerm.in
+++ python2.7-2.7.1/debian/PVER-dbg.prerm.in
@@ -0,0 +1,22 @@
+#! /bin/sh
+
+set -e
+
+case "$1" in
+    remove)
+	rm -f /usr/lib/debug/usr/bin/@PVER@-gdb.py[co]
+	rm -f /usr/lib/debug/usr/lib/lib@PVER@.so.1.0-gdb.py[co]
+        ;;
+    upgrade)
+        ;;
+    deconfigure)
+        ;;
+    failed-upgrade)
+        ;;
+    *)
+        echo "prerm called with unknown argument \`$1'" >&2
+        exit 1
+    ;;
+esac
+
+#DEBHELPER#
--- python2.7-2.7.1.orig/debian/source.lintian-overrides.in
+++ python2.7-2.7.1/debian/source.lintian-overrides.in
@@ -0,0 +1,5 @@
+# this is conditional in the rules file
+@PVER@ source: debhelper-script-needs-versioned-build-depends dh_icons (>= 5.0.51~)
+
+# generated during the build
+@PVER@ source: quilt-build-dep-but-no-series-file
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-api.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-api.in
@@ -0,0 +1,13 @@
+Document: @PVER@-api
+Title: Python/C API Reference Manual (v@VER@)
+Author: Guido van Rossum
+Abstract: This manual documents the API used by C (or C++) programmers who
+ want to write extension modules or embed Python.  It is a
+ companion to *Extending and Embedding the Python Interpreter*,
+ which describes the general principles of extension writing but
+ does not document the API functions in detail.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/c-api/index.html
+Files: /usr/share/doc/@PVER@/html/c-api/*.html
--- python2.7-2.7.1.orig/debian/copyright
+++ python2.7-2.7.1/debian/copyright
@@ -0,0 +1,705 @@
+This package was put together by Klee Dienes <klee@debian.org> from 
+sources from ftp.python.org:/pub/python, based on the Debianization by 
+the previous maintainers Bernd S. Brentrup <bsb@uni-muenster.de> and 
+Bruce Perens. Current maintainer is Matthias Klose <doko@debian.org>. 
+
+It was downloaded from http://python.org/
+
+Copyright:
+
+Upstream Author: Guido van Rossum <guido@cwi.nl> and others.
+
+License:
+
+The following text includes the Python license and licenses and
+acknowledgements for incorporated software. The licenses can be read
+in the HTML and texinfo versions of the documentation as well, after
+installing the pythonx.y-doc package. Licenses for files not licensed
+under the Python Licenses are found at the end of this file.
+
+
+Python License
+==============
+
+A. HISTORY OF THE SOFTWARE
+==========================
+
+Python was created in the early 1990s by Guido van Rossum at Stichting
+Mathematisch Centrum (CWI, see http://www.cwi.nl) in the Netherlands
+as a successor of a language called ABC.  Guido remains Python's
+principal author, although it includes many contributions from others.
+
+In 1995, Guido continued his work on Python at the Corporation for
+National Research Initiatives (CNRI, see http://www.cnri.reston.va.us)
+in Reston, Virginia where he released several versions of the
+software.
+
+In May 2000, Guido and the Python core development team moved to
+BeOpen.com to form the BeOpen PythonLabs team.  In October of the same
+year, the PythonLabs team moved to Digital Creations (now Zope
+Corporation, see http://www.zope.com).  In 2001, the Python Software
+Foundation (PSF, see http://www.python.org/psf/) was formed, a
+non-profit organization created specifically to own Python-related
+Intellectual Property.  Zope Corporation is a sponsoring member of
+the PSF.
+
+All Python releases are Open Source (see http://www.opensource.org for
+the Open Source Definition).  Historically, most, but not all, Python
+releases have also been GPL-compatible; the table below summarizes
+the various releases.
+
+    Release         Derived     Year        Owner       GPL-
+                    from                                compatible? (1)
+
+    0.9.0 thru 1.2              1991-1995   CWI         yes
+    1.3 thru 1.5.2  1.2         1995-1999   CNRI        yes
+    1.6             1.5.2       2000        CNRI        no
+    2.0             1.6         2000        BeOpen.com  no
+    1.6.1           1.6         2001        CNRI        yes (2)
+    2.1             2.0+1.6.1   2001        PSF         no
+    2.0.1           2.0+1.6.1   2001        PSF         yes
+    2.1.1           2.1+2.0.1   2001        PSF         yes
+    2.2             2.1.1       2001        PSF         yes
+    2.1.2           2.1.1       2002        PSF         yes
+    2.1.3           2.1.2       2002        PSF         yes
+    2.2.1           2.2         2002        PSF         yes
+    2.2.2           2.2.1       2002        PSF         yes
+    2.2.3           2.2.2       2003        PSF         yes
+    2.3             2.2.2       2002-2003   PSF         yes
+    2.3.1           2.3         2002-2003   PSF         yes
+    2.3.2           2.3.1       2002-2003   PSF         yes
+    2.3.3           2.3.2       2002-2003   PSF         yes
+    2.3.4           2.3.3       2004        PSF         yes
+    2.3.5           2.3.4       2005        PSF         yes
+    2.4             2.3         2004        PSF         yes
+    2.4.1           2.4         2005        PSF         yes
+    2.4.2           2.4.1       2005        PSF         yes
+    2.4.3           2.4.2       2006        PSF         yes
+    2.5             2.4         2006        PSF         yes
+    2.5.1           2.5         2007        PSF         yes
+
+Footnotes:
+
+(1) GPL-compatible doesn't mean that we're distributing Python under
+    the GPL.  All Python licenses, unlike the GPL, let you distribute
+    a modified version without making your changes open source.  The
+    GPL-compatible licenses make it possible to combine Python with
+    other software that is released under the GPL; the others don't.
+
+(2) According to Richard Stallman, 1.6.1 is not GPL-compatible,
+    because its license has a choice of law clause.  According to
+    CNRI, however, Stallman's lawyer has told CNRI's lawyer that 1.6.1
+    is "not incompatible" with the GPL.
+
+Thanks to the many outside volunteers who have worked under Guido's
+direction to make these releases possible.
+
+
+B. TERMS AND CONDITIONS FOR ACCESSING OR OTHERWISE USING PYTHON
+===============================================================
+
+PYTHON SOFTWARE FOUNDATION LICENSE VERSION 2
+--------------------------------------------
+
+1. This LICENSE AGREEMENT is between the Python Software Foundation
+("PSF"), and the Individual or Organization ("Licensee") accessing and
+otherwise using this software ("Python") in source or binary form and
+its associated documentation.
+
+2. Subject to the terms and conditions of this License Agreement, PSF
+hereby grants Licensee a nonexclusive, royalty-free, world-wide
+license to reproduce, analyze, test, perform and/or display publicly,
+prepare derivative works, distribute, and otherwise use Python
+alone or in any derivative version, provided, however, that PSF's
+License Agreement and PSF's notice of copyright, i.e., "Copyright (c)
+2001, 2002, 2003, 2004, 2005, 2006, 2007 Python Software Foundation; 
+All Rights Reserved" are retained in Python alone or in any derivative 
+version prepared by Licensee.
+
+3. In the event Licensee prepares a derivative work that is based on
+or incorporates Python or any part thereof, and wants to make
+the derivative work available to others as provided herein, then
+Licensee hereby agrees to include in any such work a brief summary of
+the changes made to Python.
+
+4. PSF is making Python available to Licensee on an "AS IS"
+basis.  PSF MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR
+IMPLIED.  BY WAY OF EXAMPLE, BUT NOT LIMITATION, PSF MAKES NO AND
+DISCLAIMS ANY REPRESENTATION OR WARRANTY OF MERCHANTABILITY OR FITNESS
+FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF PYTHON WILL NOT
+INFRINGE ANY THIRD PARTY RIGHTS.
+
+5. PSF SHALL NOT BE LIABLE TO LICENSEE OR ANY OTHER USERS OF PYTHON
+FOR ANY INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES OR LOSS AS
+A RESULT OF MODIFYING, DISTRIBUTING, OR OTHERWISE USING PYTHON,
+OR ANY DERIVATIVE THEREOF, EVEN IF ADVISED OF THE POSSIBILITY THEREOF.
+
+6. This License Agreement will automatically terminate upon a material
+breach of its terms and conditions.
+
+7. Nothing in this License Agreement shall be deemed to create any
+relationship of agency, partnership, or joint venture between PSF and
+Licensee.  This License Agreement does not grant permission to use PSF
+trademarks or trade name in a trademark sense to endorse or promote
+products or services of Licensee, or any third party.
+
+8. By copying, installing or otherwise using Python, Licensee
+agrees to be bound by the terms and conditions of this License
+Agreement.
+
+
+BEOPEN.COM LICENSE AGREEMENT FOR PYTHON 2.0
+-------------------------------------------
+
+BEOPEN PYTHON OPEN SOURCE LICENSE AGREEMENT VERSION 1
+
+1. This LICENSE AGREEMENT is between BeOpen.com ("BeOpen"), having an
+office at 160 Saratoga Avenue, Santa Clara, CA 95051, and the
+Individual or Organization ("Licensee") accessing and otherwise using
+this software in source or binary form and its associated
+documentation ("the Software").
+
+2. Subject to the terms and conditions of this BeOpen Python License
+Agreement, BeOpen hereby grants Licensee a non-exclusive,
+royalty-free, world-wide license to reproduce, analyze, test, perform
+and/or display publicly, prepare derivative works, distribute, and
+otherwise use the Software alone or in any derivative version,
+provided, however, that the BeOpen Python License is retained in the
+Software, alone or in any derivative version prepared by Licensee.
+
+3. BeOpen is making the Software available to Licensee on an "AS IS"
+basis.  BEOPEN MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR
+IMPLIED.  BY WAY OF EXAMPLE, BUT NOT LIMITATION, BEOPEN MAKES NO AND
+DISCLAIMS ANY REPRESENTATION OR WARRANTY OF MERCHANTABILITY OR FITNESS
+FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF THE SOFTWARE WILL NOT
+INFRINGE ANY THIRD PARTY RIGHTS.
+
+4. BEOPEN SHALL NOT BE LIABLE TO LICENSEE OR ANY OTHER USERS OF THE
+SOFTWARE FOR ANY INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES OR LOSS
+AS A RESULT OF USING, MODIFYING OR DISTRIBUTING THE SOFTWARE, OR ANY
+DERIVATIVE THEREOF, EVEN IF ADVISED OF THE POSSIBILITY THEREOF.
+
+5. This License Agreement will automatically terminate upon a material
+breach of its terms and conditions.
+
+6. This License Agreement shall be governed by and interpreted in all
+respects by the law of the State of California, excluding conflict of
+law provisions.  Nothing in this License Agreement shall be deemed to
+create any relationship of agency, partnership, or joint venture
+between BeOpen and Licensee.  This License Agreement does not grant
+permission to use BeOpen trademarks or trade names in a trademark
+sense to endorse or promote products or services of Licensee, or any
+third party.  As an exception, the "BeOpen Python" logos available at
+http://www.pythonlabs.com/logos.html may be used according to the
+permissions granted on that web page.
+
+7. By copying, installing or otherwise using the software, Licensee
+agrees to be bound by the terms and conditions of this License
+Agreement.
+
+
+CNRI LICENSE AGREEMENT FOR PYTHON 1.6.1
+---------------------------------------
+
+1. This LICENSE AGREEMENT is between the Corporation for National
+Research Initiatives, having an office at 1895 Preston White Drive,
+Reston, VA 20191 ("CNRI"), and the Individual or Organization
+("Licensee") accessing and otherwise using Python 1.6.1 software in
+source or binary form and its associated documentation.
+
+2. Subject to the terms and conditions of this License Agreement, CNRI
+hereby grants Licensee a nonexclusive, royalty-free, world-wide
+license to reproduce, analyze, test, perform and/or display publicly,
+prepare derivative works, distribute, and otherwise use Python 1.6.1
+alone or in any derivative version, provided, however, that CNRI's
+License Agreement and CNRI's notice of copyright, i.e., "Copyright (c)
+1995-2001 Corporation for National Research Initiatives; All Rights
+Reserved" are retained in Python 1.6.1 alone or in any derivative
+version prepared by Licensee.  Alternately, in lieu of CNRI's License
+Agreement, Licensee may substitute the following text (omitting the
+quotes): "Python 1.6.1 is made available subject to the terms and
+conditions in CNRI's License Agreement.  This Agreement together with
+Python 1.6.1 may be located on the Internet using the following
+unique, persistent identifier (known as a handle): 1895.22/1013.  This
+Agreement may also be obtained from a proxy server on the Internet
+using the following URL: http://hdl.handle.net/1895.22/1013".
+
+3. In the event Licensee prepares a derivative work that is based on
+or incorporates Python 1.6.1 or any part thereof, and wants to make
+the derivative work available to others as provided herein, then
+Licensee hereby agrees to include in any such work a brief summary of
+the changes made to Python 1.6.1.
+
+4. CNRI is making Python 1.6.1 available to Licensee on an "AS IS"
+basis.  CNRI MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR
+IMPLIED.  BY WAY OF EXAMPLE, BUT NOT LIMITATION, CNRI MAKES NO AND
+DISCLAIMS ANY REPRESENTATION OR WARRANTY OF MERCHANTABILITY OR FITNESS
+FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF PYTHON 1.6.1 WILL NOT
+INFRINGE ANY THIRD PARTY RIGHTS.
+
+5. CNRI SHALL NOT BE LIABLE TO LICENSEE OR ANY OTHER USERS OF PYTHON
+1.6.1 FOR ANY INCIDENTAL, SPECIAL, OR CONSEQUENTIAL DAMAGES OR LOSS AS
+A RESULT OF MODIFYING, DISTRIBUTING, OR OTHERWISE USING PYTHON 1.6.1,
+OR ANY DERIVATIVE THEREOF, EVEN IF ADVISED OF THE POSSIBILITY THEREOF.
+
+6. This License Agreement will automatically terminate upon a material
+breach of its terms and conditions.
+
+7. This License Agreement shall be governed by the federal
+intellectual property law of the United States, including without
+limitation the federal copyright law, and, to the extent such
+U.S. federal law does not apply, by the law of the Commonwealth of
+Virginia, excluding Virginia's conflict of law provisions.
+Notwithstanding the foregoing, with regard to derivative works based
+on Python 1.6.1 that incorporate non-separable material that was
+previously distributed under the GNU General Public License (GPL), the
+law of the Commonwealth of Virginia shall govern this License
+Agreement only as to issues arising under or with respect to
+Paragraphs 4, 5, and 7 of this License Agreement.  Nothing in this
+License Agreement shall be deemed to create any relationship of
+agency, partnership, or joint venture between CNRI and Licensee.  This
+License Agreement does not grant permission to use CNRI trademarks or
+trade name in a trademark sense to endorse or promote products or
+services of Licensee, or any third party.
+
+8. By clicking on the "ACCEPT" button where indicated, or by copying,
+installing or otherwise using Python 1.6.1, Licensee agrees to be
+bound by the terms and conditions of this License Agreement.
+
+        ACCEPT
+
+
+CWI LICENSE AGREEMENT FOR PYTHON 0.9.0 THROUGH 1.2
+--------------------------------------------------
+
+Copyright (c) 1991 - 1995, Stichting Mathematisch Centrum Amsterdam,
+The Netherlands.  All rights reserved.
+
+Permission to use, copy, modify, and distribute this software and its
+documentation for any purpose and without fee is hereby granted,
+provided that the above copyright notice appear in all copies and that
+both that copyright notice and this permission notice appear in
+supporting documentation, and that the name of Stichting Mathematisch
+Centrum or CWI not be used in advertising or publicity pertaining to
+distribution of the software without specific, written prior
+permission.
+
+STICHTING MATHEMATISCH CENTRUM DISCLAIMS ALL WARRANTIES WITH REGARD TO
+THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
+FITNESS, IN NO EVENT SHALL STICHTING MATHEMATISCH CENTRUM BE LIABLE
+FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
+WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
+ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
+OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
+
+
+Licenses and Acknowledgements for Incorporated Software
+=======================================================
+
+Mersenne Twister
+----------------
+
+The `_random' module includes code based on a download from
+`http://www.math.keio.ac.jp/~matumoto/MT2002/emt19937ar.html'.  The
+following are the verbatim comments from the original code:
+
+     A C-program for MT19937, with initialization improved 2002/1/26.
+     Coded by Takuji Nishimura and Makoto Matsumoto.
+
+     Before using, initialize the state by using init_genrand(seed)
+     or init_by_array(init_key, key_length).
+
+     Copyright (C) 1997 - 2002, Makoto Matsumoto and Takuji Nishimura,
+     All rights reserved.
+
+     Redistribution and use in source and binary forms, with or without
+     modification, are permitted provided that the following conditions
+     are met:
+
+      1. Redistributions of source code must retain the above copyright
+         notice, this list of conditions and the following disclaimer.
+
+      2. Redistributions in binary form must reproduce the above copyright
+         notice, this list of conditions and the following disclaimer in the
+         documentation and/or other materials provided with the distribution.
+
+      3. The names of its contributors may not be used to endorse or promote
+         products derived from this software without specific prior written
+         permission.
+
+     THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
+     "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
+     LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
+     A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT
+     OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+     SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
+     TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
+     PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+     LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+     NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+     SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+     Any feedback is very welcome.
+     http://www.math.keio.ac.jp/matumoto/emt.html
+     email: matumoto@math.keio.ac.jp
+
+
+Sockets
+-------
+
+The `socket' module uses the functions, `getaddrinfo', and
+`getnameinfo', which are coded in separate source files from the WIDE
+Project, `http://www.wide.ad.jp/about/index.html'.
+
+     Copyright (C) 1995, 1996, 1997, and 1998 WIDE Project.
+     All rights reserved.
+
+     Redistribution and use in source and binary forms, with or without
+     modification, are permitted provided that the following conditions
+     are met:
+     1. Redistributions of source code must retain the above copyright
+        notice, this list of conditions and the following disclaimer.
+     2. Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+     3. Neither the name of the project nor the names of its contributors
+        may be used to endorse or promote products derived from this software
+        without specific prior written permission.
+
+     THIS SOFTWARE IS PROVIDED BY THE PROJECT AND CONTRIBUTORS ``AS IS'' AND
+     GAI_ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+     IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+     ARE DISCLAIMED.  IN NO EVENT SHALL THE PROJECT OR CONTRIBUTORS BE LIABLE
+     FOR GAI_ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+     CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+     SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+     INTERRUPTION) HOWEVER CAUSED AND ON GAI_ANY THEORY OF LIABILITY, WHETHER
+     IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+     ARISING IN GAI_ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
+     OF THE POSSIBILITY OF SUCH DAMAGE.
+
+
+Floating point exception control
+--------------------------------
+
+The source for the `fpectl' module includes the following notice:
+
+     ---------------------------------------------------------------------  
+    /                       Copyright (c) 1996.                           \ 
+   |          The Regents of the University of California.                 |
+   |                        All rights reserved.                           |
+   |                                                                       |
+   |   Permission to use, copy, modify, and distribute this software for   |
+   |   any purpose without fee is hereby granted, provided that this en-   |
+   |   tire notice is included in all copies of any software which is or   |
+   |   includes  a  copy  or  modification  of  this software and in all   |
+   |   copies of the supporting documentation for such software.           |
+   |                                                                       |
+   |   This  work was produced at the University of California, Lawrence   |
+   |   Livermore National Laboratory under  contract  no.  W-7405-ENG-48   |
+   |   between  the  U.S.  Department  of  Energy and The Regents of the   |
+   |   University of California for the operation of UC LLNL.              |
+   |                                                                       |
+   |                              DISCLAIMER                               |
+   |                                                                       |
+   |   This  software was prepared as an account of work sponsored by an   |
+   |   agency of the United States Government. Neither the United States   |
+   |   Government  nor the University of California nor any of their em-   |
+   |   ployees, makes any warranty, express or implied, or  assumes  any   |
+   |   liability  or  responsibility  for the accuracy, completeness, or   |
+   |   usefulness of any information,  apparatus,  product,  or  process   |
+   |   disclosed,   or  represents  that  its  use  would  not  infringe   |
+   |   privately-owned rights. Reference herein to any specific  commer-   |
+   |   cial  products,  process,  or  service  by trade name, trademark,   |
+   |   manufacturer, or otherwise, does not  necessarily  constitute  or   |
+   |   imply  its endorsement, recommendation, or favoring by the United   |
+   |   States Government or the University of California. The views  and   |
+   |   opinions  of authors expressed herein do not necessarily state or   |
+   |   reflect those of the United States Government or  the  University   |
+   |   of  California,  and shall not be used for advertising or product   |
+    \  endorsement purposes.                                              / 
+     ---------------------------------------------------------------------
+
+
+Cookie management
+-----------------
+
+The `Cookie' module contains the following notice:
+
+      Copyright 2000 by Timothy O'Malley <timo@alum.mit.edu>
+
+                     All Rights Reserved
+
+      Permission to use, copy, modify, and distribute this software
+      and its documentation for any purpose and without fee is hereby
+      granted, provided that the above copyright notice appear in all
+      copies and that both that copyright notice and this permission
+      notice appear in supporting documentation, and that the name of
+      Timothy O'Malley  not be used in advertising or publicity
+      pertaining to distribution of the software without specific, written
+      prior permission.
+
+      Timothy O'Malley DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS
+      SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
+      AND FITNESS, IN NO EVENT SHALL Timothy O'Malley BE LIABLE FOR
+      ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
+      WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
+      WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
+      ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
+      PERFORMANCE OF THIS SOFTWARE.
+
+
+Execution tracing
+-----------------
+
+The `trace' module contains the following notice:
+
+      portions copyright 2001, Autonomous Zones Industries, Inc., all rights...
+      err...  reserved and offered to the public under the terms of the
+      Python 2.2 license.
+      Author: Zooko O'Whielacronx
+      http://zooko.com/
+      mailto:zooko@zooko.com
+
+      Copyright 2000, Mojam Media, Inc., all rights reserved.
+      Author: Skip Montanaro
+
+      Copyright 1999, Bioreason, Inc., all rights reserved.
+      Author: Andrew Dalke
+
+      Copyright 1995-1997, Automatrix, Inc., all rights reserved.
+      Author: Skip Montanaro
+
+      Copyright 1991-1995, Stichting Mathematisch Centrum, all rights reserved.
+
+      Permission to use, copy, modify, and distribute this Python software and
+      its associated documentation for any purpose without fee is hereby
+      granted, provided that the above copyright notice appears in all copies,
+      and that both that copyright notice and this permission notice appear in
+      supporting documentation, and that the name of neither Automatrix,
+      Bioreason or Mojam Media be used in advertising or publicity pertaining
+      to distribution of the software without specific, written prior
+      permission.
+
+
+UUencode and UUdecode functions
+-------------------------------
+
+The `uu' module contains the following notice:
+
+      Copyright 1994 by Lance Ellinghouse
+      Cathedral City, California Republic, United States of America.
+                             All Rights Reserved
+      Permission to use, copy, modify, and distribute this software and its
+      documentation for any purpose and without fee is hereby granted,
+      provided that the above copyright notice appear in all copies and that
+      both that copyright notice and this permission notice appear in
+      supporting documentation, and that the name of Lance Ellinghouse
+      not be used in advertising or publicity pertaining to distribution
+      of the software without specific, written prior permission.
+      LANCE ELLINGHOUSE DISCLAIMS ALL WARRANTIES WITH REGARD TO
+      THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
+      FITNESS, IN NO EVENT SHALL LANCE ELLINGHOUSE CENTRUM BE LIABLE
+      FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
+      WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
+      ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
+      OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
+
+      Modified by Jack Jansen, CWI, July 1995:
+      - Use binascii module to do the actual line-by-line conversion
+        between ascii and binary. This results in a 1000-fold speedup. The C
+        version is still 5 times faster, though.
+      - Arguments more compliant with python standard
+
+
+XML Remote Procedure Calls
+--------------------------
+
+The `xmlrpclib' module contains the following notice:
+
+          The XML-RPC client interface is
+
+      Copyright (c) 1999-2002 by Secret Labs AB
+      Copyright (c) 1999-2002 by Fredrik Lundh
+
+      By obtaining, using, and/or copying this software and/or its
+      associated documentation, you agree that you have read, understood,
+      and will comply with the following terms and conditions:
+
+      Permission to use, copy, modify, and distribute this software and
+      its associated documentation for any purpose and without fee is
+      hereby granted, provided that the above copyright notice appears in
+      all copies, and that both that copyright notice and this permission
+      notice appear in supporting documentation, and that the name of
+      Secret Labs AB or the author not be used in advertising or publicity
+      pertaining to distribution of the software without specific, written
+      prior permission.
+
+      SECRET LABS AB AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD
+      TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANT-
+      ABILITY AND FITNESS.  IN NO EVENT SHALL SECRET LABS AB OR THE AUTHOR
+      BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY
+      DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
+      WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
+      ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE
+      OF THIS SOFTWARE.
+
+Licenses for Software linked to
+===============================
+
+Note that the choice of GPL compatibility outlined above doesn't extend
+to modules linked to particular libraries, since they change the
+effective License of the module binary.
+
+
+GNU Readline
+------------
+
+The 'readline' module makes use of GNU Readline.
+
+      The GNU Readline Library is free software; you can redistribute it
+      and/or modify it under the terms of the GNU General Public License as
+      published by the Free Software Foundation; either version 2, or (at
+      your option) any later version.
+
+      On Debian systems, you can find the complete statement in
+      /usr/share/doc/readline-common/copyright'. A copy of the GNU General
+      Public License is available in /usr/share/common-licenses/GPL-2'.
+
+
+OpenSSL
+-------
+
+The '_ssl' module makes use of OpenSSL.
+
+      The OpenSSL toolkit stays under a dual license, i.e. both the
+      conditions of the OpenSSL License and the original SSLeay license
+      apply to the toolkit. Actually both licenses are BSD-style Open
+      Source licenses. Note that both licenses are incompatible with
+      the GPL.
+
+      On Debian systems, you can find the complete license text in
+      /usr/share/doc/openssl/copyright'.
+
+
+Files with other licenses than the Python License
+-------------------------------------------------
+
+Files: Modules/zlib/*
+Copyright: (C) 1995-2010 Jean-loup Gailly and Mark Adler
+License: This software is provided 'as-is', without any express or implied
+  warranty.  In no event will the authors be held liable for any damages
+  arising from the use of this software.
+
+  Permission is granted to anyone to use this software for any purpose,
+  including commercial applications, and to alter it and redistribute it
+  freely, subject to the following restrictions:
+
+  1. The origin of this software must not be misrepresented; you must not
+     claim that you wrote the original software. If you use this software
+     in a product, an acknowledgment in the product documentation would be
+     appreciated but is not required.
+  2. Altered source versions must be plainly marked as such, and must not be
+     misrepresented as being the original software.
+  3. This notice may not be removed or altered from any source distribution.
+
+  Jean-loup Gailly        Mark Adler
+  jloup@gzip.org          madler@alumni.caltech.edu
+
+ If you use the zlib library in a product, we would appreciate *not* receiving
+ lengthy legal documents to sign.  The sources are provided for free but without
+ warranty of any kind.  The library has been entirely written by Jean-loup
+ Gailly and Mark Adler; it does not include third-party code.
+
+Files: Modules/_ctypes/libffi/*
+Copyright: Copyright (C) 1996-2009 Red Hat, Inc and others.
+License: Permission is hereby granted, free of charge, to any person obtaining
+   a copy of this software and associated documentation files (the
+   ``Software''), to deal in the Software without restriction, including
+   without limitation the rights to use, copy, modify, merge, publish,
+   distribute, sublicense, and/or sell copies of the Software, and to
+   permit persons to whom the Software is furnished to do so, subject to
+   the following conditions:
+
+   The above copyright notice and this permission notice shall be included
+   in all copies or substantial portions of the Software.
+
+   THE SOFTWARE IS PROVIDED ``AS IS'', WITHOUT WARRANTY OF ANY KIND,
+   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+   NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
+   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
+   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+   DEALINGS IN THE SOFTWARE.
+
+   Documentation:
+   Permission is granted to copy, distribute and/or modify this document
+   under the terms of the GNU General Public License as published by the
+   Free Software Foundation; either version 2, or (at your option) any
+   later version.  A copy of the license is included in the
+   section entitled ``GNU General Public License''.
+
+Files: Modules/expat/*
+Copyright: Copyright (c) 1998, 1999, 2000 Thai Open Source Software Center Ltd
+  and Clark Cooper
+  Copyright (c) 2001, 2002, 2003, 2004, 2005, 2006 Expat maintainers
+License: Permission is hereby granted, free of charge, to any person obtaining
+  a copy of this software and associated documentation files (the
+  "Software"), to deal in the Software without restriction, including
+  without limitation the rights to use, copy, modify, merge, publish,
+  distribute, sublicense, and/or sell copies of the Software, and to
+  permit persons to whom the Software is furnished to do so, subject to
+  the following conditions:
+ 
+  The above copyright notice and this permission notice shall be included
+  in all copies or substantial portions of the Software.
+ 
+  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
+  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+Files: Misc/python-mode.el
+Copyright: Copyright (C) 1992,1993,1994  Tim Peters
+License: This software is provided as-is, without express or implied
+	warranty.  Permission to use, copy, modify, distribute or sell this
+	software, without fee, for any purpose and by any individual or
+	organization, is hereby granted, provided that the above copyright
+	notice and this paragraph appear in all copies.
+
+Files: PC/_subprocess.c
+Copyright: Copyright (c) 2004 by Fredrik Lundh <fredrik@pythonware.com>
+	Copyright (c) 2004 by Secret Labs AB, http://www.pythonware.com
+	Copyright (c) 2004 by Peter Astrand <astrand@lysator.liu.se>
+License:
+ * Permission to use, copy, modify, and distribute this software and
+ * its associated documentation for any purpose and without fee is
+ * hereby granted, provided that the above copyright notice appears in
+ * all copies, and that both that copyright notice and this permission
+ * notice appear in supporting documentation, and that the name of the
+ * authors not be used in advertising or publicity pertaining to
+ * distribution of the software without specific, written prior
+ * permission.
+ *
+ * THE AUTHORS DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,
+ * INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS.
+ * IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY SPECIAL, INDIRECT OR
+ * CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS
+ * OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
+ * NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION
+ * WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
+
+Files: PC/winsound.c
+Copyright: Copyright (c) 1999 Toby Dickenson
+License:  * Permission to use this software in any way is granted without
+ * fee, provided that the copyright notice above appears in all
+ * copies. This software is provided "as is" without any warranty.
+ */
+
+/* Modified by Guido van Rossum */
+/* Beep added by Mark Hammond */
+/* Win9X Beep and platform identification added by Uncle Timmy */
--- python2.7-2.7.1.orig/debian/README.source
+++ python2.7-2.7.1/debian/README.source
@@ -0,0 +1,7 @@
+The source tarball is lacking the files Lib/profile.py and Lib/pstats.py,
+which Debian considers to have a license non-suitable for main (the use
+of these modules limited to python).
+
+The package uses quilt to apply / unapply patches.
+See /usr/share/doc/quilt/README.source.  The series file is generated
+during the build.
--- python2.7-2.7.1.orig/debian/PVER-dbg.overrides.in
+++ python2.7-2.7.1/debian/PVER-dbg.overrides.in
@@ -0,0 +1,2 @@
+@PVER@-dbg binary: package-name-doesnt-match-sonames
+@PVER@-dbg binary: non-dev-pkg-with-shlib-symlink
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-inst.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-inst.in
@@ -0,0 +1,12 @@
+Document: @PVER@-inst
+Title: Installing Python Modules (v@VER@)
+Author: Greg Ward
+Abstract: This document describes the Python Distribution Utilities
+ (``Distutils'') from the end-user's point-of-view, describing how to
+ extend the capabilities of a standard Python installation by building
+ and installing third-party Python modules and extensions.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/install/index.html
+Files: /usr/share/doc/@PVER@/html/install/*.html
--- python2.7-2.7.1.orig/debian/idle-PVER.postrm.in
+++ python2.7-2.7.1/debian/idle-PVER.postrm.in
@@ -0,0 +1,9 @@
+#! /bin/sh -e
+
+if [ "$1" = "purge" ]; then
+    rm -rf /etc/idle-@PVER@
+fi
+
+#DEBHELPER#
+
+exit 0
--- python2.7-2.7.1.orig/debian/PVER.pycentral.in
+++ python2.7-2.7.1/debian/PVER.pycentral.in
@@ -0,0 +1,4 @@
+[@PVER@]
+runtime: @PVER@
+interpreter: /usr/bin/@PVER@
+prefix: /usr/lib/@PVER@
--- python2.7-2.7.1.orig/debian/PVER.postinst.in
+++ python2.7-2.7.1/debian/PVER.postinst.in
@@ -0,0 +1,37 @@
+#! /bin/sh -e
+
+if [ "$1" = configure ]; then
+    (
+    files=$(dpkg -L @PVER@ | sed -n '/^\/usr\/lib\/@PVER@\/.*\.py$/p')
+	@PVER@ /usr/lib/@PVER@/py_compile.py $files
+	if grep -sq '^byte-compile[^#]*optimize' /etc/python/debian_config; then
+	    @PVER@ -O /usr/lib/@PVER@/py_compile.py $files
+	fi
+    )
+fi
+
+case "$1" in
+    configure|abort-upgrade|abort-remove|abort-deconfigure)
+
+        # Create empty directories in /usr/local
+        if [ ! -e /usr/local/lib/python@VER@ ]; then
+            mkdir -p /usr/local/lib/python@VER@ 2> /dev/null || true
+            chmod 2775 /usr/local/lib/python@VER@ 2> /dev/null || true
+            chown root:staff /usr/local/lib/python@VER@ 2> /dev/null || true
+        fi
+        if [ ! -e /usr/local/lib/python@VER@/site-packages ]; then
+            mkdir -p /usr/local/lib/python@VER@/site-packages 2> /dev/null || true
+            chmod 2775 /usr/local/lib/python@VER@/site-packages 2> /dev/null || true
+            chown root:staff /usr/local/lib/python@VER@/site-packages 2> /dev/null || true
+        fi
+    ;;
+
+    *)
+        echo "postinst called with unknown argument \`$1'" >&2
+        exit 1
+    ;;
+esac
+
+#DEBHELPER#
+
+exit 0
--- python2.7-2.7.1.orig/debian/README.python
+++ python2.7-2.7.1/debian/README.python
@@ -0,0 +1,153 @@
+
+  Python 2.x for Debian
+  ---------------------
+
+This is Python 2.x packaged for Debian.
+
+This document contains information specific to the Debian packages of
+Python 2.x.
+
+
+
+   [TODO: This document is not yet up-to-date with the packages.]
+
+
+
+
+
+
+Currently, it features those two main topics:
+
+  1. Release notes for the Debian packages:
+  2. Notes for developers using the Debian Python packages:
+
+Release notes and documentation from the upstream package are installed
+in /usr/share/doc/python/.
+
+Up-to-date information regarding Python on Debian systems is also
+available as http://www.debian.org/~flight/python/.
+
+There's a mailing list for discussion of issues related to Python on Debian
+systems: debian-python@lists.debian.org. The list is not intended for
+general Python problems, but as a forum for maintainers of Python-related
+packages and interested third parties.
+
+
+
+1. Release notes for the Debian packages:
+
+
+Results of the regression test:
+------------------------------
+
+The package does successfully run the regression tests for all included
+modules. Seven packages are skipped since they are platform-dependent and
+can't be used with Linux.
+
+
+Noteworthy changes since the 1.4 packages:
+-----------------------------------------
+
+- Threading support enabled.
+- Tkinter for Tcl/Tk 8.x.
+- New package python-zlib.
+- The dbmmodule was dropped. Use bsddb instead. gdbmmodule is provided
+  for compatibility's sake.
+- python-elisp adheres to the new emacs add-on policy; it now depends
+  on emacsen. python-elisp probably won't work correctly with emacs19.
+  Refer to /usr/doc/python-elisp/ for more information.
+- Remember that 1.5 has dropped the `ni' interface in favor of a generic
+  `packages' concept.
+- Python 1.5 regression test as additional package python-regrtest. You
+  don't need to install this package unless you don't trust the
+  maintainer ;-).
+- once again, modified upstream's compileall.py and py_compile.py.
+  Now they support compilation of optimized byte-code (.pyo) for use
+  with "python -O", removal of .pyc and .pyo files where the .py source
+  files are missing (-d) and finally the fake of a installation directory
+  when .py files have to be compiled out of place for later installation
+  in a different directory (-i destdir, used in ./debian/rules).
+- The Debian packages for python 1.4 do call 
+  /usr/lib/python1.4/compileall.py in their postrm script. Therefore
+  I had to provide a link from /usr/lib/python1.5/compileall.py, otherwise
+  the old packages won't be removed completely. THIS IS A SILLY HACK!
+
+
+
+2. Notes for developers using the Debian python packages:
+
+
+Embedding python:
+----------------
+
+The files for embedding python resp. extending the python interpreter
+are included in the python-dev package. With the configuration in the
+Debian GNU/Linux packages of python 1.5, you will want to use something
+like
+
+    -I/usr/include/python1.5                  (e.g. for config.h)
+    -L/usr/lib/python1.5/config -lpython1.5   (... -lpthread)
+                           (also for Makefile.pre.in, Setup etc.)
+
+Makefile.pre.in automatically gets that right.  Note that unlike 1.4,
+python 1.5 has only one library, libpython1.5.a.
+
+Currently, there's no shared version of libpython. Future version of
+the Debian python packages will support this.
+
+
+Python extension packages:
+-------------------------
+
+According to www.python.org/doc/essays/packages.html, extension packages
+should only install into /usr/lib/python1.5/site-packages/ (resp.
+/usr/lib/site-python/ for packages that are definitely version independent).
+No extension package should install files directly into /usr/lib/python1.5/.
+
+But according to the FSSTND, only Debian packages are allowed to use
+/usr/lib/python1.5/. Therefore Debian Python additionally by default
+searches a second hierarchy in /usr/local/lib/. These directories take
+precedence over their equivalents in /usr/lib/.
+
+a) Locally installed Python add-ons
+
+    /usr/local/lib/python1.5/site-packages/
+    /usr/local/lib/site-python/ (version-independent modules)
+
+b) Python add-ons packaged for Debian
+
+    /usr/lib/python1.5/site-packages/
+    /usr/lib/site-python/ (version-independent modules)
+
+Note that no package must install files directly into /usr/lib/python1.5/
+or /usr/local/lib/python1.5/. Only the site-packages directory is allowed
+for third-party extensions.
+
+Use of the new `package' scheme is strongly encouraged. The `ni' interface
+is obsolete in python 1.5.
+
+Header files for extensions go into /usr/include/python1.5/.
+
+
+Installing extensions for local use only:
+----------------------------------------
+
+Most extensions use Python's Makefile.pre.in. Note that Makefile.pre.in
+by default will install files into /usr/lib/, not into /usr/local/lib/,
+which is not allowed for local extensions. You'll have to change the
+Makefile accordingly. Most times, "make prefix=/usr/local install" will
+work.
+
+
+Packaging python extensions for Debian:
+--------------------------------------
+
+Maintainers of Python extension packages should read README.maintainers.
+
+ 
+
+
+    03/09/98
+    Gregor Hoffleit <flight@debian.org>
+
+Last change: 07/16/1999
--- python2.7-2.7.1.orig/debian/pdb.1.in
+++ python2.7-2.7.1/debian/pdb.1.in
@@ -0,0 +1,16 @@
+.TH PDB@VER@ 1
+.SH NAME
+pdb@VER@ \- the Python debugger
+.SH SYNOPSIS
+.PP
+.B pdb@VER@
+.I script [...]
+.SH DESCRIPTION
+.PP
+See /usr/lib/python@VER@/pdb.doc for more information on the use
+of pdb.  When the debugger is started, help is available via the
+help command.
+.SH SEE ALSO
+python@VER@(1). Chapter 9 of the Python Library Reference
+(The Python Debugger). Available in the python@VER@-doc package at
+/usr/share/doc/python@VER@/html/lib/module-pdb.html.
--- python2.7-2.7.1.orig/debian/locale-gen
+++ python2.7-2.7.1/debian/locale-gen
@@ -0,0 +1,31 @@
+#!/bin/sh
+
+LOCPATH=`pwd`/locales
+export LOCPATH
+
+[ -d $LOCPATH ] || mkdir -p $LOCPATH
+
+umask 022
+
+echo "Generating locales..."
+while read locale charset; do
+	case $locale in \#*) continue;; esac
+	[ -n "$locale" -a -n "$charset" ] || continue
+	echo -n "  `echo $locale | sed 's/\([^.\@]*\).*/\1/'`"
+	echo -n ".$charset"
+	echo -n `echo $locale | sed 's/\([^\@]*\)\(\@.*\)*/\2/'`
+	echo -n '...'
+        if [ -f $LOCPATH/$locale ]; then
+	    input=$locale
+	else
+            input=`echo $locale | sed 's/\([^.]*\)[^@]*\(.*\)/\1\2/'`
+	fi
+	localedef -i $input -c -f $charset $LOCPATH/$locale #-A /etc/locale.alias
+	echo ' done'; \
+done <<EOF
+# This file lists locales that the python testsuite depends on
+en_US			ISO-8859-1
+en_US.UTF-8		UTF-8
+EOF
+
+echo "Generation complete."
--- python2.7-2.7.1.orig/debian/PVER-doc.overrides.in
+++ python2.7-2.7.1/debian/PVER-doc.overrides.in
@@ -0,0 +1,2 @@
+# this is referenced by the html docs
+@PVER@-doc binary: extra-license-file
--- python2.7-2.7.1.orig/debian/README.Tk
+++ python2.7-2.7.1/debian/README.Tk
@@ -0,0 +1,8 @@
+Tkinter documentation can be found at
+
+    http://www.pythonware.com/library/index.htm
+
+more specific:
+
+    http://www.pythonware.com/library/tkinter/introduction/index.htm
+    http://www.pythonware.com/library/tkinter/an-introduction-to-tkinter.pdf
--- python2.7-2.7.1.orig/debian/mincheck.py
+++ python2.7-2.7.1/debian/mincheck.py
@@ -0,0 +1,41 @@
+
+import sys
+
+def get_listed(fn):
+    modules = set()
+    for line in file(fn).readlines():
+        modules.add(line.split()[1])
+    return modules
+
+def get_dependencies(fn):
+    t = eval(file(fn).read())
+    modules = set()
+    depgraph = t['depgraph']
+    for mod, deps in depgraph.iteritems():
+        if mod != '__main__':
+            modules.add(mod)
+        modules.update(deps.keys())
+    return depgraph, modules
+
+def main():
+    mods = get_listed(sys.argv[1])
+    depgraph, deps = get_dependencies(sys.argv[2])
+    print "Listed modules:", sorted(mods)
+    print
+    print "Dependent modules:", sorted(deps)
+    print
+
+    missing = deps.difference(mods)
+    if missing:
+        print "Missing modules in python-minimal:"
+        print missing
+    for m in missing:
+        users = []
+        for caller, callees in depgraph.iteritems():
+            if m in callees:
+                users.append(caller)
+        print m, "used in: ", users
+    sys.exit(len(missing))
+
+main()
+
--- python2.7-2.7.1.orig/debian/idle-PVER.1.in
+++ python2.7-2.7.1/debian/idle-PVER.1.in
@@ -0,0 +1,104 @@
+.TH IDLE 1 "21 September 2004"
+.SH NAME
+\fBIDLE\fP \- An Integrated DeveLopment Environment for Python
+.SH SYNTAX
+.B idle [ \fI-dins\fP ] [ \fI-t title\fP ] [ \fIfile\fP ...]
+.PP
+.B idle [ \fI-dins\fP ] [ \fI-t title\fP ] ( \fI-c cmd\fP | \fI-r file\fP ) [ \fIarg\fP ...]
+.PP
+.B idle [ \fI-dins\fP ] [ \fI-t title\fP ] - [ \fIarg\fP ...]
+.SH DESCRIPTION
+This manual page documents briefly the
+.BR idle
+command.
+This manual page was written for Debian
+because the original program does not have a manual page.
+For more information, refer to IDLE's help menu.
+.PP
+.B IDLE
+is an Integrated DeveLopment Environment for Python. IDLE is based on
+Tkinter, Python's bindings to the Tk widget set. Features are 100% pure
+Python, multi-windows with multiple undo and Python colorizing, a Python
+shell window subclass, a debugger. IDLE is cross-platform, i.e. it works
+on all platforms where Tk is installed.
+.LP
+.SH OPTIONS
+.TP
+.B \-h
+.PD
+Print this help message and exit.
+.TP
+.B \-n
+.PD
+Run IDLE without a subprocess (see Help/IDLE Help for details).
+.PP
+The following options will override the IDLE 'settings' configuration:
+.TP
+.B \-e
+.PD
+Open an edit window.
+.TP
+.B \-i
+.PD
+Open a shell window.
+.PP
+The following options imply -i and will open a shell:
+.TP
+.B \-c cmd
+.PD
+Run the command in a shell, or
+.TP
+.B \-r file
+.PD
+Run script from file.
+.PP
+.TP
+.B \-d
+.PD
+Enable the debugger.
+.TP
+.B \-s
+.PD
+Run $IDLESTARTUP or $PYTHONSTARTUP before anything else.
+.TP
+.B \-t title
+.PD
+Set title of shell window.
+.PP
+A default edit window will be bypassed when -c, -r, or - are used.
+.PP
+[arg]* and [file]* are passed to the command (-c) or script (-r) in sys.argv[1:].
+.SH EXAMPLES
+.TP
+idle
+.PD
+Open an edit window or shell depending on IDLE's configuration.
+.TP
+idle foo.py foobar.py
+.PD
+Edit the files, also open a shell if configured to start with shell.
+.TP
+idle -est "Baz" foo.py
+.PD
+Run $IDLESTARTUP or $PYTHONSTARTUP, edit foo.py, and open a shell
+window with the title "Baz".
+.TP
+idle -c "import sys; print sys.argv" "foo"
+.PD
+Open a shell window and run the command, passing "-c" in sys.argv[0]
+and "foo" in sys.argv[1].
+.TP
+idle -d -s -r foo.py "Hello World"
+.PD
+Open a shell window, run a startup script, enable the debugger, and
+run foo.py, passing "foo.py" in sys.argv[0] and "Hello World" in
+sys.argv[1].
+.TP
+echo "import sys; print sys.argv" | idle - "foobar"
+.PD
+Open a shell window, run the script piped in, passing '' in sys.argv[0]
+and "foobar" in sys.argv[1].
+.SH SEE ALSO
+python(1).
+.SH AUTHORS
+Various.
--- python2.7-2.7.1.orig/debian/PVER-minimal.prerm.in
+++ python2.7-2.7.1/debian/PVER-minimal.prerm.in
@@ -0,0 +1,44 @@
+#! /bin/sh -e
+
+syssite=/usr/lib/@PVER@/site-packages
+localsite=/usr/local/lib/@PVER@/dist-packages
+
+case "$1" in
+    remove)
+	if [ "$DEBIAN_FRONTEND" != noninteractive ]; then
+	    echo "Unlinking and removing bytecode for runtime @PVER@"
+	fi
+	for hook in /usr/share/python/runtime.d/*.rtremove; do
+	    [ -x $hook ] || continue
+	    $hook rtremove @PVER@ || continue
+	done
+	dpkg -L @PVER@-minimal \
+	    | awk '/\.py$/ {print $0"c\n" $0"o"}' \
+	    | xargs rm -f >&2
+
+	if which update-binfmts >/dev/null; then
+	    update-binfmts --package @PVER@ --remove @PVER@ /usr/bin/@PVER@
+	fi
+
+	if [ -h $syssite ]; then
+	    rm -f $syssite
+	fi
+	[ -d $localsite ] && rmdir $localsite 2>/dev/null || true
+	[ -d $(dirname $localsite) ] && rmdir $(dirname $localsite) 2>/dev/null || true
+        ;;
+    upgrade)
+        dpkg -L @PVER@-minimal \
+	    | awk '/\.py$/ {print $0"c\n" $0"o"}' \
+	    | xargs rm -f >&2
+        ;;
+    deconfigure)
+        ;;
+    failed-upgrade)
+        ;;
+    *)
+        echo "prerm called with unknown argument \`$1'" >&2
+        exit 1
+    ;;
+esac
+
+#DEBHELPER#
--- python2.7-2.7.1.orig/debian/idle.desktop.in
+++ python2.7-2.7.1/debian/idle.desktop.in
@@ -0,0 +1,9 @@
+[Desktop Entry]
+Name=IDLE (using Python-@VER@)
+Comment=Integrated Development Environment for Python (using Python-@VER@)
+Exec=/usr/bin/idle-@PVER@ -n
+Icon=/usr/share/pixmaps/@PVER@.xpm
+Terminal=false
+Type=Application
+Categories=Application;Development;
+StartupNotify=true
--- python2.7-2.7.1.orig/debian/idle-PVER.overrides.in
+++ python2.7-2.7.1/debian/idle-PVER.overrides.in
@@ -0,0 +1,3 @@
+# icon in dependent package
+idle-@PVER@ binary: menu-icon-missing
+idle-@PVER@ binary: image-file-in-usr-lib
--- python2.7-2.7.1.orig/debian/PVER-dbg.README.Debian.in
+++ python2.7-2.7.1/debian/PVER-dbg.README.Debian.in
@@ -0,0 +1,51 @@
+Contents of the @PVER@-dbg package
+-------------------------------------
+
+For debugging python and extension modules, you may want to add the contents
+of /usr/share/doc/@PVER@/gdbinit to your ~/.gdbinit file.
+
+@PVER@-dbg contains two sets of packages:
+
+ - debugging symbols for the standard @PVER@ build. When this package
+   is installed, gdb will automatically load up the debugging symbols
+   from it when debugging @PVER@ or one of the included extension
+   modules.
+
+ - a separate @PVER@-dbg binary, configured --with-pydebug, enabling the
+   additional debugging code to help debug memory management problems.
+
+For the latter, all extension modules have to be recompiled to
+correctly load with an pydebug enabled build.
+
+
+Debian and Ubuntu specific changes to the debug interpreter
+-----------------------------------------------------------
+The python2.4 and python2.5 packages in Ubuntu feisty are modified to
+first look for extension modules under a different name.
+
+  normal build: foo.so
+  debug build:  foo_d.so foo.so
+
+This naming schema allows installation of the extension modules into
+the same path (The naming is directly taken from the Windows builds
+which already uses this naming scheme).
+
+See https://wiki.ubuntu.com/PyDbgBuilds for more information.
+
+
+Using the python-dbg builds
+---------------------------
+
+ * Call the python-dbg or the pythonX.Y-dbg binaries instead of the
+   python or pythonX.Y binaries.
+
+ * Properties of the debug build are described in
+   /usr/share/doc/@PVER@/SpecialBuilds.txt.gz.
+   The debug interpreter is built with Py_DEBUG defined.
+
+ * From SpecialBuilds.txt: This is what is generally meant by "a debug
+   build" of Python.  Py_DEBUG implies LLTRACE, Py_REF_DEBUG,
+   Py_TRACE_REFS, and PYMALLOC_DEBUG (if WITH_PYMALLOC is enabled).
+   In addition, C assert()s are enabled (via the C way: by not defining
+   NDEBUG), and some routines do additional sanity checks inside
+   "#ifdef Py_DEBUG" blocks.
--- python2.7-2.7.1.orig/debian/libPVER.overrides.in
+++ python2.7-2.7.1/debian/libPVER.overrides.in
@@ -0,0 +1 @@
+lib@PVER@ binary: package-name-doesnt-match-sonames
--- python2.7-2.7.1.orig/debian/FAQ.html
+++ python2.7-2.7.1/debian/FAQ.html
@@ -0,0 +1,8997 @@
+<HTML>
+<HEAD>
+<TITLE>The Whole Python FAQ</TITLE>
+</HEAD>
+
+<BODY BACKGROUND="http://www.python.org/pics/RedShort.gif"
+      BGCOLOR="#FFFFFF"
+      TEXT="#000000"
+      LINK="#AA0000"
+      VLINK="#906A6A">
+<H1>The Whole Python FAQ</H1>
+Last changed on Wed Feb 12 21:31:08 2003 CET
+
+<P>(Entries marked with ** were changed within the last 24 hours;
+entries marked with * were changed within the last 7 days.)
+<P>
+
+<P>
+<HR>
+<H2>1. General information and availability</H2>
+<UL>
+<LI><A HREF="#1.1">1.1. What is Python?</A>
+<LI><A HREF="#1.2">1.2. Why is it called Python?</A>
+<LI><A HREF="#1.3">1.3. How do I obtain a copy of the Python source?</A>
+<LI><A HREF="#1.4">1.4. How do I get documentation on Python?</A>
+<LI><A HREF="#1.5">1.5. Are there other ftp sites that mirror the Python distribution?</A>
+<LI><A HREF="#1.6">1.6. Is there a newsgroup or mailing list devoted to Python?</A>
+<LI><A HREF="#1.7">1.7. Is there a WWW page devoted to Python?</A>
+<LI><A HREF="#1.8">1.8. Is the Python documentation available on the WWW?</A>
+<LI><A HREF="#1.9">1.9. Are there any books on Python?</A>
+<LI><A HREF="#1.10">1.10. Are there any published articles about Python that I can reference?</A>
+<LI><A HREF="#1.11">1.11. Are there short introductory papers or talks on Python?</A>
+<LI><A HREF="#1.12">1.12. How does the Python version numbering scheme work?</A>
+<LI><A HREF="#1.13">1.13. How do I get a beta test version of Python?</A>
+<LI><A HREF="#1.14">1.14. Are there copyright restrictions on the use of Python?</A>
+<LI><A HREF="#1.15">1.15. Why was Python created in the first place?</A>
+<LI><A HREF="#1.16">1.16. Do I have to like &quot;Monty Python's Flying Circus&quot;?</A>
+<LI><A HREF="#1.17">1.17. What is Python good for?</A>
+<LI><A HREF="#1.18">1.18. Can I use the FAQ Wizard software to maintain my own FAQ?</A>
+<LI><A HREF="#1.19">1.19. Which editor has good support for editing Python source code?</A>
+<LI><A HREF="#1.20">1.20. I've never programmed before. Is there a Python tutorial?</A>
+<LI><A HREF="#1.21">1.21. Where in the world is www.python.org located?</A>
+
+</UL>
+
+<P>
+<HR>
+<H2>2. Python in the real world</H2>
+<UL>
+<LI><A HREF="#2.1">2.1. How many people are using Python?</A>
+<LI><A HREF="#2.2">2.2. Have any significant projects been done in Python?</A>
+<LI><A HREF="#2.3">2.3. Are there any commercial projects going on using Python?</A>
+<LI><A HREF="#2.4">2.4. How stable is Python?</A>
+<LI><A HREF="#2.5">2.5. What new developments are expected for Python in the future?</A>
+<LI><A HREF="#2.6">2.6. Is it reasonable to propose incompatible changes to Python?</A>
+<LI><A HREF="#2.7">2.7. What is the future of Python?</A>
+<LI><A HREF="#2.8">2.8. What was the PSA, anyway?</A>
+<LI><A HREF="#2.9">2.9. Deleted</A>
+<LI><A HREF="#2.10">2.10. Deleted</A>
+<LI><A HREF="#2.11">2.11. Is Python Y2K (Year 2000) Compliant?</A>
+<LI><A HREF="#2.12">2.12. Is Python a good language in a class for beginning programmers?</A>
+
+</UL>
+
+<P>
+<HR>
+<H2>3. Building Python and Other Known Bugs</H2>
+<UL>
+<LI><A HREF="#3.1">3.1. Is there a test set?</A>
+<LI><A HREF="#3.2">3.2. When running the test set, I get complaints about floating point operations, but when playing with floating point operations I cannot find anything wrong with them.</A>
+<LI><A HREF="#3.3">3.3. Link errors after rerunning the configure script.</A>
+<LI><A HREF="#3.4">3.4. The python interpreter complains about options passed to a script (after the script name).</A>
+<LI><A HREF="#3.5">3.5. When building on the SGI, make tries to run python to create glmodule.c, but python hasn't been built or installed yet.</A>
+<LI><A HREF="#3.6">3.6. I use VPATH but some targets are built in the source directory.</A>
+<LI><A HREF="#3.7">3.7. Trouble building or linking with the GNU readline library.</A>
+<LI><A HREF="#3.8">3.8. Trouble with socket I/O on older Linux 1.x versions.</A>
+<LI><A HREF="#3.9">3.9. Trouble with prototypes on Ultrix.</A>
+<LI><A HREF="#3.10">3.10. Other trouble building Python on platform X.</A>
+<LI><A HREF="#3.11">3.11. How to configure dynamic loading on Linux.</A>
+<LI><A HREF="#3.12">3.12. I can't get shared modules to work on Linux 2.0 (Slackware96)?</A>
+<LI><A HREF="#3.13">3.13. Trouble when making modules shared on Linux.</A>
+<LI><A HREF="#3.14">3.14. [deleted]</A>
+<LI><A HREF="#3.15">3.15. Errors when linking with a shared library containing C++ code.</A>
+<LI><A HREF="#3.16">3.16. Deleted</A>
+<LI><A HREF="#3.17">3.17. Deleted.</A>
+<LI><A HREF="#3.18">3.18. Compilation or link errors for the _tkinter module</A>
+<LI><A HREF="#3.19">3.19. I configured and built Python for Tcl/Tk but &quot;import Tkinter&quot; fails.</A>
+<LI><A HREF="#3.20">3.20. [deleted]</A>
+<LI><A HREF="#3.21">3.21. Several common system calls are missing from the posix module.</A>
+<LI><A HREF="#3.22">3.22. ImportError: No module named string, on MS Windows.</A>
+<LI><A HREF="#3.23">3.23. Core dump on SGI when using the gl module.</A>
+<LI><A HREF="#3.24">3.24. &quot;Initializer not a constant&quot; while building DLL on MS-Windows</A>
+<LI><A HREF="#3.25">3.25. Output directed to a pipe or file disappears on Linux.</A>
+<LI><A HREF="#3.26">3.26. [deleted]</A>
+<LI><A HREF="#3.27">3.27. [deleted]</A>
+<LI><A HREF="#3.28">3.28. How can I test if Tkinter is working?</A>
+<LI><A HREF="#3.29">3.29. Is there a way to get the interactive mode of the python interpreter to perform function/variable name completion?</A>
+<LI><A HREF="#3.30">3.30. Why is the Python interpreter not built as a shared library?</A>
+<LI><A HREF="#3.31">3.31. Build with GCC on Solaris 2.6 (SunOS 5.6) fails</A>
+<LI><A HREF="#3.32">3.32. Running &quot;make clean&quot; seems to leave problematic files that cause subsequent builds to fail.</A>
+<LI><A HREF="#3.33">3.33. Submitting bug reports and patches</A>
+<LI><A HREF="#3.34">3.34. I can't load shared libraries under Python 1.5.2, Solaris 7, and gcc 2.95.2</A>
+<LI><A HREF="#3.35">3.35. In the regression test, test___all__ fails for the profile module. What's wrong?</A>
+<LI><A HREF="#3.36">3.36. relocations remain against allocatable but non-writable sections</A>
+
+</UL>
+
+<P>
+<HR>
+<H2>4. Programming in Python</H2>
+<UL>
+<LI><A HREF="#4.1">4.1. Is there a source code level debugger with breakpoints, step, etc.?</A>
+<LI><A HREF="#4.2">4.2. Can I create an object class with some methods implemented in C and others in Python (e.g. through inheritance)? (Also phrased as: Can I use a built-in type as base class?)</A>
+<LI><A HREF="#4.3">4.3. Is there a curses/termcap package for Python?</A>
+<LI><A HREF="#4.4">4.4. Is there an equivalent to C's onexit() in Python?</A>
+<LI><A HREF="#4.5">4.5. [deleted]</A>
+<LI><A HREF="#4.6">4.6. How do I iterate over a sequence in reverse order?</A>
+<LI><A HREF="#4.7">4.7. My program is too slow. How do I speed it up?</A>
+<LI><A HREF="#4.8">4.8. When I have imported a module, then edit it, and import it again (into the same Python process), the changes don't seem to take place. What is going on?</A>
+<LI><A HREF="#4.9">4.9. How do I find the current module name?</A>
+<LI><A HREF="#4.10">4.10. I have a module in which I want to execute some extra code when it is run as a script. How do I find out whether I am running as a script?</A>
+<LI><A HREF="#4.11">4.11. I try to run a program from the Demo directory but it fails with ImportError: No module named ...; what gives?</A>
+<LI><A HREF="#4.12">4.12. [deleted]</A>
+<LI><A HREF="#4.13">4.13. What GUI toolkits exist for Python?</A>
+<LI><A HREF="#4.14">4.14. Are there any interfaces to database packages in Python?</A>
+<LI><A HREF="#4.15">4.15. Is it possible to write obfuscated one-liners in Python?</A>
+<LI><A HREF="#4.16">4.16. Is there an equivalent of C's &quot;?:&quot; ternary operator?</A>
+<LI><A HREF="#4.17">4.17. My class defines __del__ but it is not called when I delete the object.</A>
+<LI><A HREF="#4.18">4.18. How do I change the shell environment for programs called using os.popen() or os.system()? Changing os.environ doesn't work.</A>
+<LI><A HREF="#4.19">4.19. What is a class?</A>
+<LI><A HREF="#4.20">4.20. What is a method?</A>
+<LI><A HREF="#4.21">4.21. What is self?</A>
+<LI><A HREF="#4.22">4.22. What is an unbound method?</A>
+<LI><A HREF="#4.23">4.23. How do I call a method defined in a base class from a derived class that overrides it?</A>
+<LI><A HREF="#4.24">4.24. How do I call a method from a base class without using the name of the base class?</A>
+<LI><A HREF="#4.25">4.25. How can I organize my code to make it easier to change the base class?</A>
+<LI><A HREF="#4.26">4.26. How can I find the methods or attributes of an object?</A>
+<LI><A HREF="#4.27">4.27. I can't seem to use os.read() on a pipe created with os.popen().</A>
+<LI><A HREF="#4.28">4.28. How can I create a stand-alone binary from a Python script?</A>
+<LI><A HREF="#4.29">4.29. What WWW tools are there for Python?</A>
+<LI><A HREF="#4.30">4.30. How do I run a subprocess with pipes connected to both input and output?</A>
+<LI><A HREF="#4.31">4.31. How do I call a function if I have the arguments in a tuple?</A>
+<LI><A HREF="#4.32">4.32. How do I enable font-lock-mode for Python in Emacs?</A>
+<LI><A HREF="#4.33">4.33. Is there a scanf() or sscanf() equivalent?</A>
+<LI><A HREF="#4.34">4.34. Can I have Tk events handled while waiting for I/O?</A>
+<LI><A HREF="#4.35">4.35. How do I write a function with output parameters (call by reference)?</A>
+<LI><A HREF="#4.36">4.36. Please explain the rules for local and global variables in Python.</A>
+<LI><A HREF="#4.37">4.37. How can I have modules that mutually import each other?</A>
+<LI><A HREF="#4.38">4.38. How do I copy an object in Python?</A>
+<LI><A HREF="#4.39">4.39. How to implement persistent objects in Python? (Persistent == automatically saved to and restored from disk.)</A>
+<LI><A HREF="#4.40">4.40. I try to use __spam and I get an error about _SomeClassName__spam.</A>
+<LI><A HREF="#4.41">4.41. How do I delete a file? And other file questions.</A>
+<LI><A HREF="#4.42">4.42. How to modify urllib or httplib to support HTTP/1.1?</A>
+<LI><A HREF="#4.43">4.43. Unexplicable syntax errors in compile() or exec.</A>
+<LI><A HREF="#4.44">4.44. How do I convert a string to a number?</A>
+<LI><A HREF="#4.45">4.45. How do I convert a number to a string?</A>
+<LI><A HREF="#4.46">4.46. How do I copy a file?</A>
+<LI><A HREF="#4.47">4.47. How do I check if an object is an instance of a given class or of a subclass of it?</A>
+<LI><A HREF="#4.48">4.48. What is delegation?</A>
+<LI><A HREF="#4.49">4.49. How do I test a Python program or component.</A>
+<LI><A HREF="#4.50">4.50. My multidimensional list (array) is broken! What gives?</A>
+<LI><A HREF="#4.51">4.51. I want to do a complicated sort: can you do a Schwartzian Transform in Python?</A>
+<LI><A HREF="#4.52">4.52. How to convert between tuples and lists?</A>
+<LI><A HREF="#4.53">4.53. Files retrieved with urllib contain leading garbage that looks like email headers.</A>
+<LI><A HREF="#4.54">4.54. How do I get a list of all instances of a given class?</A>
+<LI><A HREF="#4.55">4.55. A regular expression fails with regex.error: match failure.</A>
+<LI><A HREF="#4.56">4.56. I can't get signal handlers to work.</A>
+<LI><A HREF="#4.57">4.57. I can't use a global variable in a function? Help!</A>
+<LI><A HREF="#4.58">4.58. What's a negative index? Why doesn't list.insert() use them?</A>
+<LI><A HREF="#4.59">4.59. How can I sort one list by values from another list?</A>
+<LI><A HREF="#4.60">4.60. Why doesn't dir() work on builtin types like files and lists?</A>
+<LI><A HREF="#4.61">4.61. How can I mimic CGI form submission (METHOD=POST)?</A>
+<LI><A HREF="#4.62">4.62. If my program crashes with a bsddb (or anydbm) database open, it gets corrupted. How come?</A>
+<LI><A HREF="#4.63">4.63. How do I make a Python script executable on Unix?</A>
+<LI><A HREF="#4.64">4.64. How do you remove duplicates from a list?</A>
+<LI><A HREF="#4.65">4.65. Are there any known year 2000 problems in Python?</A>
+<LI><A HREF="#4.66">4.66. I want a version of map that applies a method to a sequence of objects! Help!</A>
+<LI><A HREF="#4.67">4.67. How do I generate random numbers in Python?</A>
+<LI><A HREF="#4.68">4.68. How do I access the serial (RS232) port?</A>
+<LI><A HREF="#4.69">4.69. Images on Tk-Buttons don't work in Py15?</A>
+<LI><A HREF="#4.70">4.70. Where is the math.py (socket.py, regex.py, etc.) source file?</A>
+<LI><A HREF="#4.71">4.71. How do I send mail from a Python script?</A>
+<LI><A HREF="#4.72">4.72. How do I avoid blocking in connect() of a socket?</A>
+<LI><A HREF="#4.73">4.73. How do I specify hexadecimal and octal integers?</A>
+<LI><A HREF="#4.74">4.74. How to get a single keypress at a time?</A>
+<LI><A HREF="#4.75">4.75. How can I overload constructors (or methods) in Python?</A>
+<LI><A HREF="#4.76">4.76. How do I pass keyword arguments from one method to another?</A>
+<LI><A HREF="#4.77">4.77. What module should I use to help with generating HTML?</A>
+<LI><A HREF="#4.78">4.78. How do I create documentation from doc strings?</A>
+<LI><A HREF="#4.79">4.79. How do I read (or write) binary data?</A>
+<LI><A HREF="#4.80">4.80. I can't get key bindings to work in Tkinter</A>
+<LI><A HREF="#4.81">4.81. &quot;import crypt&quot; fails</A>
+<LI><A HREF="#4.82">4.82. Are there coding standards or a style guide for Python programs?</A>
+<LI><A HREF="#4.83">4.83. How do I freeze Tkinter applications?</A>
+<LI><A HREF="#4.84">4.84. How do I create static class data and static class methods?</A>
+<LI><A HREF="#4.85">4.85. __import__('x.y.z') returns &lt;module 'x'&gt;; how do I get z?</A>
+<LI><A HREF="#4.86">4.86. Basic thread wisdom</A>
+<LI><A HREF="#4.87">4.87. Why doesn't closing sys.stdout (stdin, stderr) really close it?</A>
+<LI><A HREF="#4.88">4.88. What kinds of global value mutation are thread-safe?</A>
+<LI><A HREF="#4.89">4.89. How do I modify a string in place?</A>
+<LI><A HREF="#4.90">4.90. How to pass on keyword/optional parameters/arguments</A>
+<LI><A HREF="#4.91">4.91. How can I get a dictionary to display its keys in a consistent order?</A>
+<LI><A HREF="#4.92">4.92. Is there a Python tutorial?</A>
+<LI><A HREF="#4.93">4.93. Deleted</A>
+<LI><A HREF="#4.94">4.94. How do I get a single keypress without blocking?</A>
+<LI><A HREF="#4.95">4.95. Is there an equivalent to Perl chomp()? (Remove trailing newline from string)</A>
+<LI><A HREF="#4.96">4.96. Why is join() a string method when I'm really joining the elements of a (list, tuple, sequence)?</A>
+<LI><A HREF="#4.97">4.97. How can my code discover the name of an object?</A>
+<LI><A HREF="#4.98">4.98. Why are floating point calculations so inaccurate?</A>
+<LI><A HREF="#4.99">4.99. I tried to open Berkeley DB file, but bsddb produces bsddb.error: (22, 'Invalid argument'). Help! How can I restore my data?</A>
+<LI><A HREF="#4.100">4.100. What are the &quot;best practices&quot; for using import in a module?</A>
+<LI><A HREF="#4.101">4.101. Is there a tool to help find bugs or perform static analysis?</A>
+<LI><A HREF="#4.102">4.102. UnicodeError: ASCII [decoding,encoding] error: ordinal not in range(128)</A>
+<LI><A HREF="#4.103">4.103. Using strings to call functions/methods</A>
+<LI><A HREF="#4.104">4.104. How fast are exceptions?</A>
+<LI><A HREF="#4.105">4.105. Sharing global variables across modules</A>
+<LI><A HREF="#4.106">4.106. Why is cPickle so slow?</A>
+<LI><A HREF="#4.107">4.107. When importing module XXX, why do I get &quot;undefined symbol: PyUnicodeUCS2_...&quot; ?</A>
+<LI><A HREF="#4.108">4.108. How do I create a .pyc file?</A>
+
+</UL>
+
+<P>
+<HR>
+<H2>5. Extending Python</H2>
+<UL>
+<LI><A HREF="#5.1">5.1. Can I create my own functions in C?</A>
+<LI><A HREF="#5.2">5.2. Can I create my own functions in C++?</A>
+<LI><A HREF="#5.3">5.3. How can I execute arbitrary Python statements from C?</A>
+<LI><A HREF="#5.4">5.4. How can I evaluate an arbitrary Python expression from C?</A>
+<LI><A HREF="#5.5">5.5. How do I extract C values from a Python object?</A>
+<LI><A HREF="#5.6">5.6. How do I use Py_BuildValue() to create a tuple of arbitrary length?</A>
+<LI><A HREF="#5.7">5.7. How do I call an object's method from C?</A>
+<LI><A HREF="#5.8">5.8. How do I catch the output from PyErr_Print() (or anything that prints to stdout/stderr)?</A>
+<LI><A HREF="#5.9">5.9. How do I access a module written in Python from C?</A>
+<LI><A HREF="#5.10">5.10. How do I interface to C++ objects from Python?</A>
+<LI><A HREF="#5.11">5.11. mSQLmodule (or other old module) won't build with Python 1.5 (or later)</A>
+<LI><A HREF="#5.12">5.12. I added a module using the Setup file and the make fails! Huh?</A>
+<LI><A HREF="#5.13">5.13. I want to compile a Python module on my Red Hat Linux system, but some files are missing.</A>
+<LI><A HREF="#5.14">5.14. What does &quot;SystemError: _PyImport_FixupExtension: module yourmodule not loaded&quot; mean?</A>
+<LI><A HREF="#5.15">5.15. How to tell &quot;incomplete input&quot; from &quot;invalid input&quot;?</A>
+<LI><A HREF="#5.16">5.16. How do I debug an extension?</A>
+<LI><A HREF="#5.17">5.17. How do I find undefined Linux g++ symbols, __builtin_new or __pure_virtural</A>
+<LI><A HREF="#5.18">5.18. How do I define and create objects corresponding to built-in/extension types</A>
+
+</UL>
+
+<P>
+<HR>
+<H2>6. Python's design</H2>
+<UL>
+<LI><A HREF="#6.1">6.1. Why isn't there a switch or case statement in Python?</A>
+<LI><A HREF="#6.2">6.2. Why does Python use indentation for grouping of statements?</A>
+<LI><A HREF="#6.3">6.3. Why are Python strings immutable?</A>
+<LI><A HREF="#6.4">6.4. Delete</A>
+<LI><A HREF="#6.5">6.5. Why does Python use methods for some functionality (e.g. list.index()) but functions for other (e.g. len(list))?</A>
+<LI><A HREF="#6.6">6.6. Why can't I derive a class from built-in types (e.g. lists or files)?</A>
+<LI><A HREF="#6.7">6.7. Why must 'self' be declared and used explicitly in method definitions and calls?</A>
+<LI><A HREF="#6.8">6.8. Can't you emulate threads in the interpreter instead of relying on an OS-specific thread implementation?</A>
+<LI><A HREF="#6.9">6.9. Why can't lambda forms contain statements?</A>
+<LI><A HREF="#6.10">6.10. [deleted]</A>
+<LI><A HREF="#6.11">6.11. [deleted]</A>
+<LI><A HREF="#6.12">6.12. Why is there no more efficient way of iterating over a dictionary than first constructing the list of keys()?</A>
+<LI><A HREF="#6.13">6.13. Can Python be compiled to machine code, C or some other language?</A>
+<LI><A HREF="#6.14">6.14. How does Python manage memory?</A>
+<LI><A HREF="#6.15">6.15. Why are there separate tuple and list data types?</A>
+<LI><A HREF="#6.16">6.16. How are lists implemented?</A>
+<LI><A HREF="#6.17">6.17. How are dictionaries implemented?</A>
+<LI><A HREF="#6.18">6.18. Why must dictionary keys be immutable?</A>
+<LI><A HREF="#6.19">6.19. How the heck do you make an array in Python?</A>
+<LI><A HREF="#6.20">6.20. Why doesn't list.sort() return the sorted list?</A>
+<LI><A HREF="#6.21">6.21. How do you specify and enforce an interface spec in Python?</A>
+<LI><A HREF="#6.22">6.22. Why do all classes have the same type? Why do instances all have the same type?</A>
+<LI><A HREF="#6.23">6.23. Why isn't all memory freed when Python exits?</A>
+<LI><A HREF="#6.24">6.24. Why no class methods or mutable class variables?</A>
+<LI><A HREF="#6.25">6.25. Why are default values sometimes shared between objects?</A>
+<LI><A HREF="#6.26">6.26. Why no goto?</A>
+<LI><A HREF="#6.27">6.27. How do you make a higher order function in Python?</A>
+<LI><A HREF="#6.28">6.28. Why do I get a SyntaxError for a 'continue' inside a 'try'?</A>
+<LI><A HREF="#6.29">6.29. Why can't raw strings (r-strings) end with a backslash?</A>
+<LI><A HREF="#6.30">6.30. Why can't I use an assignment in an expression?</A>
+<LI><A HREF="#6.31">6.31. Why doesn't Python have a &quot;with&quot; statement like some other languages?</A>
+<LI><A HREF="#6.32">6.32. Why are colons required for if/while/def/class?</A>
+<LI><A HREF="#6.33">6.33. Can't we get rid of the Global Interpreter Lock?</A>
+
+</UL>
+
+<P>
+<HR>
+<H2>7. Using Python on non-UNIX platforms</H2>
+<UL>
+<LI><A HREF="#7.1">7.1. Is there a Mac version of Python?</A>
+<LI><A HREF="#7.2">7.2. Are there DOS and Windows versions of Python?</A>
+<LI><A HREF="#7.3">7.3. Is there an OS/2 version of Python?</A>
+<LI><A HREF="#7.4">7.4. Is there a VMS version of Python?</A>
+<LI><A HREF="#7.5">7.5. What about IBM mainframes, or other non-UNIX platforms?</A>
+<LI><A HREF="#7.6">7.6. Where are the source or Makefiles for the non-UNIX versions?</A>
+<LI><A HREF="#7.7">7.7. What is the status and support for the non-UNIX versions?</A>
+<LI><A HREF="#7.8">7.8. I have a PC version but it appears to be only a binary. Where's the library?</A>
+<LI><A HREF="#7.9">7.9. Where's the documentation for the Mac or PC version?</A>
+<LI><A HREF="#7.10">7.10. How do I create a Python program file on the Mac or PC?</A>
+<LI><A HREF="#7.11">7.11. How can I use Tkinter on Windows 95/NT?</A>
+<LI><A HREF="#7.12">7.12. cgi.py (or other CGI programming) doesn't work sometimes on NT or win95!</A>
+<LI><A HREF="#7.13">7.13. Why doesn't os.popen() work in PythonWin on NT?</A>
+<LI><A HREF="#7.14">7.14. How do I use different functionality on different platforms with the same program?</A>
+<LI><A HREF="#7.15">7.15. Is there an Amiga version of Python?</A>
+<LI><A HREF="#7.16">7.16. Why doesn't os.popen()/win32pipe.popen() work on Win9x?</A>
+
+</UL>
+
+<P>
+<HR>
+<H2>8. Python on Windows</H2>
+<UL>
+<LI><A HREF="#8.1">8.1. Using Python for CGI on Microsoft Windows</A>
+<LI><A HREF="#8.2">8.2. How to check for a keypress without blocking?</A>
+<LI><A HREF="#8.3">8.3. $PYTHONPATH</A>
+<LI><A HREF="#8.4">8.4. dedent syntax errors</A>
+<LI><A HREF="#8.5">8.5. How do I emulate os.kill() in Windows?</A>
+<LI><A HREF="#8.6">8.6. Why does os.path.isdir() fail on NT shared directories?</A>
+<LI><A HREF="#8.7">8.7. PyRun_SimpleFile() crashes on Windows but not on Unix</A>
+<LI><A HREF="#8.8">8.8. Import of _tkinter fails on Windows 95/98</A>
+<LI><A HREF="#8.9">8.9. Can't extract the downloaded documentation on Windows</A>
+<LI><A HREF="#8.10">8.10. Can't get Py_RunSimpleFile() to work.</A>
+<LI><A HREF="#8.11">8.11. Where is Freeze for Windows?</A>
+<LI><A HREF="#8.12">8.12. Is a *.pyd file the same as a DLL?</A>
+<LI><A HREF="#8.13">8.13. Missing cw3215mt.dll (or missing cw3215.dll)</A>
+<LI><A HREF="#8.14">8.14. How to make python scripts executable:</A>
+<LI><A HREF="#8.15">8.15. Warning about CTL3D32 version from installer</A>
+<LI><A HREF="#8.16">8.16. How can I embed Python into a Windows application?</A>
+<LI><A HREF="#8.17">8.17. Setting up IIS 5 to use Python for CGI</A>
+<LI><A HREF="#8.18">8.18. How do I run a Python program under Windows?</A>
+
+</UL>
+
+<HR>
+<H1>1. General information and availability</H1>
+
+<HR>
+<H2><A NAME="1.1">1.1. What is Python?</A></H2>
+Python is an interpreted, interactive, object-oriented programming
+language.  It incorporates modules, exceptions, dynamic typing, very
+high level dynamic data types, and classes.  Python combines
+remarkable power with very clear syntax.  It has interfaces to many
+system calls and libraries, as well as to various window systems, and
+is extensible in C or C++.  It is also usable as an extension language
+for applications that need a programmable interface.  Finally, Python
+is portable: it runs on many brands of UNIX, on the Mac, and on PCs
+under MS-DOS, Windows, Windows NT, and OS/2.
+<P>
+To find out more, the best thing to do is to start reading the
+tutorial from the documentation set (see a few questions further
+down).
+<P>
+See also question 1.17 (what is Python good for).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.001.htp">Log info</A>
+
+/ Last changed on Mon May 26 16:05:18 1997 by
+<A HREF="mailto:guido@cnri.reston.va.us">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.2">1.2. Why is it called Python?</A></H2>
+Apart from being a computer scientist, I'm also a fan of "Monty
+Python's Flying Circus" (a BBC comedy series from the seventies, in
+the -- unlikely -- case you didn't know).  It occurred to me one day
+that I needed a name that was short, unique, and slightly mysterious.
+And I happened to be reading some scripts from the series at the
+time...  So then I decided to call my language Python.
+<P>
+By now I don't care any more whether you use a Python, some other
+snake, a foot or 16-ton weight, or a wood rat as a logo for Python!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.002.htp">Log info</A>
+
+/ Last changed on Thu Aug 24 00:50:41 2000 by
+<A HREF="mailto:guido@beopen.com">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.3">1.3. How do I obtain a copy of the Python source?</A></H2>
+The latest Python source distribution is always available from
+python.org, at <A HREF="http://www.python.org/download">http://www.python.org/download</A>.  The latest development sources can be obtained via anonymous CVS from SourceForge, at <A HREF="http://www.sf.net/projects/python">http://www.sf.net/projects/python</A> .
+<P>
+The source distribution is a gzipped tar file containing the complete C source, LaTeX
+documentation, Python library modules, example programs, and several
+useful pieces of freely distributable software.  This will compile and
+run out of the box on most UNIX platforms.  (See section 7 for
+non-UNIX information.)
+<P>
+Older versions of Python are also available from python.org.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.003.htp">Log info</A>
+
+/ Last changed on Tue Apr  9 17:06:16 2002 by
+<A HREF="mailto:akuchlin@mems-exchange.org">A.M. Kuchling</A>
+<P>
+
+<HR>
+<H2><A NAME="1.4">1.4. How do I get documentation on Python?</A></H2>
+All documentation is available on-line, starting at <A HREF="http://www.python.org/doc">http://www.python.org/doc</A>/. 
+<P>
+The LaTeX source for the documentation is part of the source
+distribution.  If you don't have LaTeX, the latest Python
+documentation set is available, in various formats like postscript 
+and html, by anonymous ftp - visit the above URL for links to the
+current versions.
+<P>
+PostScript for a high-level description of Python is in the file nluug-paper.ps 
+(a separate file on the ftp site).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.004.htp">Log info</A>
+
+/ Last changed on Wed Jan 21 12:02:55 1998 by
+<A HREF="mailto:klm@python.org">Ken Manheimer</A>
+<P>
+
+<HR>
+<H2><A NAME="1.5">1.5. Are there other ftp sites that mirror the Python distribution?</A></H2>
+The following anonymous ftp sites keep mirrors of the Python
+distribution:
+<P>
+USA:
+<P>
+<PRE>
+        <A HREF="ftp://ftp.python.org/pub/python">ftp://ftp.python.org/pub/python</A>/
+        <A HREF="ftp://gatekeeper.dec.com/pub/plan/python">ftp://gatekeeper.dec.com/pub/plan/python</A>/
+        <A HREF="ftp://ftp.uu.net/languages/python">ftp://ftp.uu.net/languages/python</A>/
+        <A HREF="ftp://ftp.wustl.edu/graphics/graphics/sgi-stuff/python">ftp://ftp.wustl.edu/graphics/graphics/sgi-stuff/python</A>/
+        <A HREF="ftp://ftp.sterling.com/programming/languages/python">ftp://ftp.sterling.com/programming/languages/python</A>/
+        <A HREF="ftp://uiarchive.cso.uiuc.edu/pub/lang/python">ftp://uiarchive.cso.uiuc.edu/pub/lang/python</A>/
+        <A HREF="ftp://ftp.pht.com/mirrors/python/python">ftp://ftp.pht.com/mirrors/python/python</A>/
+	<A HREF="ftp://ftp.cdrom.com/pub/python">ftp://ftp.cdrom.com/pub/python</A>/
+</PRE>
+Europe:
+<P>
+<PRE>
+        <A HREF="ftp://ftp.cwi.nl/pub/python">ftp://ftp.cwi.nl/pub/python</A>/
+        <A HREF="ftp://ftp.funet.fi/pub/languages/python">ftp://ftp.funet.fi/pub/languages/python</A>/
+        <A HREF="ftp://ftp.sunet.se/pub/lang/python">ftp://ftp.sunet.se/pub/lang/python</A>/
+        <A HREF="ftp://unix.hensa.ac.uk/mirrors/uunet/languages/python">ftp://unix.hensa.ac.uk/mirrors/uunet/languages/python</A>/
+        <A HREF="ftp://ftp.lip6.fr/pub/python">ftp://ftp.lip6.fr/pub/python</A>/
+        <A HREF="ftp://sunsite.cnlab-switch.ch/mirror/python">ftp://sunsite.cnlab-switch.ch/mirror/python</A>/
+        <A HREF="ftp://ftp.informatik.tu-muenchen.de/pub/comp/programming/languages/python">ftp://ftp.informatik.tu-muenchen.de/pub/comp/programming/languages/python</A>/
+</PRE>
+Australia:
+<P>
+<PRE>
+        <A HREF="ftp://ftp.dstc.edu.au/pub/python">ftp://ftp.dstc.edu.au/pub/python</A>/
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.005.htp">Log info</A>
+
+/ Last changed on Wed Mar 24 09:20:49 1999 by
+<A HREF="mailto:akuchlin@cnri.reston.va.us">A.M. Kuchling</A>
+<P>
+
+<HR>
+<H2><A NAME="1.6">1.6. Is there a newsgroup or mailing list devoted to Python?</A></H2>
+There is a newsgroup, comp.lang.python,
+and a mailing list.  The newsgroup and mailing list are gatewayed into
+each other -- if you can read news it's unnecessary to subscribe to
+the mailing list.  To subscribe to the mailing list
+(<A HREF="mailto:python-list@python.org">python-list@python.org</A>) visit its Mailman webpage at
+<A HREF="http://www.python.org/mailman/listinfo/python-list">http://www.python.org/mailman/listinfo/python-list</A>
+<P>
+More info about the newsgroup and mailing list, and about other lists,
+can be found at
+<A HREF="http://www.python.org/psa/MailingLists.html">http://www.python.org/psa/MailingLists.html</A>.
+<P>
+Archives of the newsgroup are kept by Deja News and accessible
+through the "Python newsgroup search" web page,
+<A HREF="http://www.python.org/search/search_news.html">http://www.python.org/search/search_news.html</A>.
+This page also contains pointer to other archival collections.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.006.htp">Log info</A>
+
+/ Last changed on Wed Jun 23 09:29:36 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.7">1.7. Is there a WWW page devoted to Python?</A></H2>
+Yes, <A HREF="http://www.python.org">http://www.python.org</A>/ is the official Python home page.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.007.htp">Log info</A>
+
+/ Last changed on Fri May 23 14:42:59 1997 by
+<A HREF="mailto:klm@python.org">Ken Manheimer</A>
+<P>
+
+<HR>
+<H2><A NAME="1.8">1.8. Is the Python documentation available on the WWW?</A></H2>
+Yes. Python 2.0 documentation is available from
+<A HREF="http://www.pythonlabs.com/tech/python2.0/doc">http://www.pythonlabs.com/tech/python2.0/doc</A>/ and from
+<A HREF="http://www.python.org/doc">http://www.python.org/doc</A>/.  Note that most documentation
+is available for on-line browsing as well as for downloading.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.008.htp">Log info</A>
+
+/ Last changed on Tue Jan  2 03:14:08 2001 by
+<A HREF="mailto:moshez@zadka.site.co.il">Moshe Zadka</A>
+<P>
+
+<HR>
+<H2><A NAME="1.9">1.9. Are there any books on Python?</A></H2>
+Yes, many, and more are being published.  See
+the python.org Wiki at <A HREF="http://www.python.org/cgi-bin/moinmoin/PythonBooks">http://www.python.org/cgi-bin/moinmoin/PythonBooks</A> for a list.
+<P>
+You can also search online bookstores for "Python"
+(and filter out the Monty Python references; or
+perhaps search for "Python" and "language").
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.009.htp">Log info</A>
+
+/ Last changed on Mon Aug  5 19:08:49 2002 by
+<A HREF="mailto:akuchlin@mems-exchange.org">amk</A>
+<P>
+
+<HR>
+<H2><A NAME="1.10">1.10. Are there any published articles about Python that I can reference?</A></H2>
+If you can't reference the web site, and you don't want to reference the books
+(see previous question), there are several articles on Python that you could
+reference.
+<P>
+Most publications about Python are collected on the Python web site:
+<P>
+<PRE>
+    <A HREF="http://www.python.org/doc/Publications.html">http://www.python.org/doc/Publications.html</A>
+</PRE>
+It is no longer recommended to reference this
+very old article by Python's author:
+<P>
+<PRE>
+    Guido van Rossum and Jelke de Boer, "Interactively Testing Remote
+    Servers Using the Python Programming Language", CWI Quarterly, Volume
+    4, Issue 4 (December 1991), Amsterdam, pp 283-303.
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.010.htp">Log info</A>
+
+/ Last changed on Sat Jul  4 20:52:31 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.11">1.11. Are there short introductory papers or talks on Python?</A></H2>
+There are several - you can find links to some of them collected at
+<A HREF="http://www.python.org/doc/Hints.html#intros">http://www.python.org/doc/Hints.html#intros</A>.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.011.htp">Log info</A>
+
+/ Last changed on Fri May 23 15:04:05 1997 by
+<A HREF="mailto:klm@python.org">Ken Manheimer</A>
+<P>
+
+<HR>
+<H2><A NAME="1.12">1.12. How does the Python version numbering scheme work?</A></H2>
+Python versions are numbered A.B.C or A.B.  A is the major version
+number -- it is only incremented for really major changes in the
+language.  B is the minor version number, incremented for less
+earth-shattering changes.  C is the micro-level -- it is
+incremented for each bugfix release.  See PEP 6 for more information
+about bugfix releases.
+<P>
+Not all releases have bugfix releases.
+Note that in the past (ending with 1.5.2),
+micro releases have added significant changes;
+in fact the changeover from 0.9.9 to 1.0.0 was the first time
+that either A or B changed!
+<P>
+Alpha, beta and release candidate versions have an additional suffixes.
+The suffix for an alpha version is "aN" for some small number N, the
+suffix for a beta version is "bN" for some small number N, and the
+suffix for a release candidate version is "cN" for some small number N.
+<P>
+Note that (for instance) all versions labeled 2.0aN precede the
+versions labeled 2.0bN, which precede versions labeled 2.0cN, and
+<I>those</I> precede 2.0.
+<P>
+As a rule, no changes are made between release candidates and the final
+release unless there are show-stopper bugs.
+<P>
+You may also find version numbers with a "+" suffix, e.g. "2.2+".
+These are unreleased versions, built directly from the CVS trunk.
+<P>
+See also the documentation for sys.version, sys.hexversion, and
+sys.version_info.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.012.htp">Log info</A>
+
+/ Last changed on Mon Jan 14 06:34:17 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.13">1.13. How do I get a beta test version of Python?</A></H2>
+All releases, including alphas, betas and release candidates, are announced on
+comp.lang.python and comp.lang.python.announce newsgroups,
+which are gatewayed into the <A HREF="mailto:python-list@python.org">python-list@python.org</A> and
+<A HREF="mailto:python-announce@python.org">python-announce@python.org</A>. In addition, all these announcements appear on
+the Python home page, at <A HREF="http://www.python.org">http://www.python.org</A>.
+<P>
+You can also access the development version of Python through CVS.  See <A HREF="http://sourceforge.net/cvs/?group_id=5470">http://sourceforge.net/cvs/?group_id=5470</A> for details.  If you're not familiar with CVS, documents like <A HREF="http://linux.oreillynet.com/pub/a/linux/2002/01/03/cvs_intro.html">http://linux.oreillynet.com/pub/a/linux/2002/01/03/cvs_intro.html</A>
+provide an introduction.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.013.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.013.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 00:57:08 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="1.14">1.14. Are there copyright restrictions on the use of Python?</A></H2>
+Hardly.  You can do anything you want with the source, as long as
+you leave the copyrights in, and display those copyrights in any
+documentation about Python that you produce.  Also, don't use the
+author's institute's name in publicity without prior written
+permission, and don't hold them responsible for anything (read the
+actual copyright for a precise legal wording).
+<P>
+In particular, if you honor the copyright rules, it's OK to use Python
+for commercial use, to sell copies of Python in source or binary form,
+or to sell products that enhance Python or incorporate Python (or part
+of it) in some form.  I would still like to know about all commercial
+use of Python!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.014.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.014.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="1.15">1.15. Why was Python created in the first place?</A></H2>
+Here's a <I>very</I> brief summary of what got me started:
+<P>
+I had extensive experience with implementing an interpreted language
+in the ABC group at CWI, and from working with this group I had
+learned a lot about language design.  This is the origin of many
+Python features, including the use of indentation for statement
+grouping and the inclusion of very-high-level data types (although the
+details are all different in Python).
+<P>
+I had a number of gripes about the ABC language, but also liked many
+of its features.  It was impossible to extend the ABC language (or its
+implementation) to remedy my complaints -- in fact its lack of
+extensibility was one of its biggest problems.
+I had some experience with using Modula-2+ and talked with the
+designers of Modula-3 (and read the M3 report).  M3 is the origin of
+the syntax and semantics used for exceptions, and some other Python
+features.
+<P>
+I was working in the Amoeba distributed operating system group at
+CWI.  We needed a better way to do system administration than by
+writing either C programs or Bourne shell scripts, since Amoeba had
+its own system call interface which wasn't easily accessible from the
+Bourne shell.  My experience with error handling in Amoeba made me
+acutely aware of the importance of exceptions as a programming
+language feature.
+<P>
+It occurred to me that a scripting language with a syntax like ABC
+but with access to the Amoeba system calls would fill the need.  I
+realized that it would be foolish to write an Amoeba-specific
+language, so I decided that I needed a language that was generally
+extensible.
+<P>
+During the 1989 Christmas holidays, I had a lot of time on my hand,
+so I decided to give it a try.  During the next year, while still
+mostly working on it in my own time, Python was used in the Amoeba
+project with increasing success, and the feedback from colleagues made
+me add many early improvements.
+<P>
+In February 1991, after just over a year of development, I decided
+to post to USENET.  The rest is in the Misc/HISTORY file.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.015.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.015.htp">Log info</A>
+
+/ Last changed on Fri May 23 00:06:23 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.16">1.16. Do I have to like &quot;Monty Python's Flying Circus&quot;?</A></H2>
+No, but it helps.  Pythonistas like the occasional reference to SPAM,
+and of course, nobody expects the Spanish Inquisition
+<P>
+The two main reasons to use Python are:
+<P>
+<PRE>
+ - Portable
+ - Easy to learn
+</PRE>
+The <I>three</I> main reasons to use Python are:
+<P>
+<PRE>
+ - Portable
+ - Easy to learn
+ - Powerful standard library
+</PRE>
+(And nice red uniforms.)
+<P>
+And remember, there is <I>no</I> rule six.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.016.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.016.htp">Log info</A>
+
+/ Last changed on Wed May 28 10:39:21 1997 by
+<A HREF="mailto:guido@cnri.reston.va.us">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.17">1.17. What is Python good for?</A></H2>
+Python is used in many situations where a great deal of dynamism,
+ease of use, power, and flexibility are required.  
+<P>
+In the area of basic text
+manipulation core Python (without any non-core extensions) is easier
+to use and is roughly as fast as just  about any language, and this makes Python
+good for many system administration type tasks and for CGI programming
+and other application areas that manipulate text and strings and such.
+<P>
+When augmented with
+standard extensions (such as PIL, COM, Numeric, oracledb, kjbuckets, 
+tkinter, win32api, etc.)
+or special purpose extensions (that you write, perhaps using helper tools such
+as SWIG, or using object protocols such as ILU/CORBA or COM) Python 
+becomes a very convenient "glue" or "steering"
+language that helps make heterogeneous collections of unrelated
+software packages work together.
+For example by combining Numeric with oracledb you can help your
+SQL database do statistical analysis, or even Fourier transforms.
+One of the features that makes Python excel in the "glue language" role
+is Python's simple, usable, and powerful C language runtime API.
+<P>
+Many developers also use Python extensively as a graphical user
+interface development aide.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.017.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.017.htp">Log info</A>
+
+/ Last changed on Sat May 24 10:13:11 1997 by
+<A HREF="mailto:aaron_watters@msn.com">Aaron Watters</A>
+<P>
+
+<HR>
+<H2><A NAME="1.18">1.18. Can I use the FAQ Wizard software to maintain my own FAQ?</A></H2>
+Sure.  It's in Tools/faqwiz/ of the python source tree.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.018.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.018.htp">Log info</A>
+
+/ Last changed on Fri Mar 29 06:50:32 2002 by
+<A HREF="mailto:aahz@pythoncraft.com">Aahz</A>
+<P>
+
+<HR>
+<H2><A NAME="1.19">1.19. Which editor has good support for editing Python source code?</A></H2>
+On Unix, the first choice is Emacs/XEmacs.  There's an elaborate
+mode for editing Python code, which is available from the Python
+source distribution (Misc/python-mode.el).  It's also bundled
+with XEmacs (we're still working on legal details to make it possible
+to bundle it with FSF Emacs).  And it has its own web page:
+<P>
+<PRE>
+    <A HREF="http://www.python.org/emacs/python-mode/index.html">http://www.python.org/emacs/python-mode/index.html</A>
+</PRE>
+There are many other choices, for Unix, Windows or Macintosh.
+Richard Jones compiled a table from postings on the Python newsgroup:
+<P>
+<PRE>
+    <A HREF="http://www.bofh.asn.au/~richard/editors.html">http://www.bofh.asn.au/~richard/editors.html</A>
+</PRE>
+See also FAQ question 7.10 for some more Mac and Win options.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.019.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.019.htp">Log info</A>
+
+/ Last changed on Mon Jun 15 23:21:04 1998 by
+<A HREF="mailto:guido@python.org">Gvr</A>
+<P>
+
+<HR>
+<H2><A NAME="1.20">1.20. I've never programmed before. Is there a Python tutorial?</A></H2>
+There are several, and at least one book.  
+All information for beginning Python programmers is collected here:
+<P>
+<PRE>
+    <A HREF="http://www.python.org/doc/Newbies.html">http://www.python.org/doc/Newbies.html</A>
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.020.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.020.htp">Log info</A>
+
+/ Last changed on Wed Sep  5 05:34:07 2001 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="1.21">1.21. Where in the world is www.python.org located?</A></H2>
+It's currently in Amsterdam, graciously hosted by XS4ALL:
+<P>
+<PRE>
+    <A HREF="http://www.xs4all.nl">http://www.xs4all.nl</A>
+</PRE>
+Thanks to Thomas Wouters for setting this up!!!!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq01.021.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq01.021.htp">Log info</A>
+
+/ Last changed on Fri Aug  3 21:49:27 2001 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H1>2. Python in the real world</H1>
+
+<HR>
+<H2><A NAME="2.1">2.1. How many people are using Python?</A></H2>
+Certainly thousands, and quite probably tens of thousands of users.
+More are seeing the light each day.  The comp.lang.python newsgroup is
+very active, but overall there is no accurate estimate of the number of subscribers or Python users.
+<P>
+Jacek Artymiak has created a Python Users Counter; you can see the 
+current count by visiting
+<A HREF="http://www.wszechnica.safenet.pl/cgi-bin/checkpythonuserscounter.py">http://www.wszechnica.safenet.pl/cgi-bin/checkpythonuserscounter.py</A>
+(this will not increment the counter; use the link there if you haven't
+added yourself already). Most Python users appear not to have registered themselves.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.001.htp">Log info</A>
+
+/ Last changed on Thu Feb 21 23:29:18 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="2.2">2.2. Have any significant projects been done in Python?</A></H2>
+At CWI (the former home of Python), we have written a 20,000 line
+authoring environment for transportable hypermedia presentations, a
+5,000 line multimedia teleconferencing tool, as well as many many
+smaller programs.
+<P>
+At CNRI (Python's new home), we have written two large applications:
+Grail, a fully featured web browser (see
+<A HREF="http://grail.cnri.reston.va.us">http://grail.cnri.reston.va.us</A>),
+and the Knowbot Operating Environment,
+a distributed environment for mobile code.
+<P>
+The University of Virginia uses Python to control a virtual reality
+engine.  See <A HREF="http://alice.cs.cmu.edu">http://alice.cs.cmu.edu</A>.
+<P>
+The ILU project at Xerox PARC can generate Python glue for ILU
+interfaces.  See <A HREF="ftp://ftp.parc.xerox.com/pub/ilu/ilu.html">ftp://ftp.parc.xerox.com/pub/ilu/ilu.html</A>.  ILU
+is a free CORBA compliant ORB which supplies distributed object
+connectivity to a host of platforms using a host of languages.
+<P>
+Mark Hammond and Greg Stein and others are interfacing Python to
+Microsoft's COM and ActiveX architectures.  This means, among other
+things, that Python may be used in active server pages or as a COM
+controller (for example to automatically extract from or insert information
+into Excel or MSAccess or any other COM aware application).
+Mark claims Python can even be a ActiveX scripting host (which
+means you could embed JScript inside a Python application, if you
+had a strange sense of humor).  Python/AX/COM is distributed as part
+of the PythonWin distribution.
+<P>
+The University of California, Irvine uses a student administration
+system called TELE-Vision written entirely in Python.  Contact: Ray
+Price <A HREF="mailto:rlprice@uci.edu">rlprice@uci.edu</A>.
+<P>
+The Melbourne Cricket Ground (MCG) in Australia (a 100,000+ person venue)
+has it's scoreboard system written largely in Python on MS Windows.
+Python expressions are used to create almost every scoring entry that
+appears on the board.  The move to Python/C++ away from exclusive C++
+has provided a level of functionality that would simply not have been
+viable otherwise.
+<P>
+See also the next question.
+<P>
+Note: this FAQ entry is really old.
+See <A HREF="http://www.python.org/psa/Users.html">http://www.python.org/psa/Users.html</A> for a more recent list.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.002.htp">Log info</A>
+
+/ Last changed on Wed Oct 25 13:24:15 2000 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="2.3">2.3. Are there any commercial projects going on using Python?</A></H2>
+Yes, there's lots of commercial activity using Python.  See
+<A HREF="http://www.python.org/psa/Users.html">http://www.python.org/psa/Users.html</A> for a list.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.003.htp">Log info</A>
+
+/ Last changed on Wed Oct 14 18:17:33 1998 by
+<A HREF="mailto:klm@python.org">ken</A>
+<P>
+
+<HR>
+<H2><A NAME="2.4">2.4. How stable is Python?</A></H2>
+Very stable.  New, stable releases have been coming out roughly every 3 to 12 months since 1991, and this seems likely to continue.
+<P>
+With the introduction of retrospective "bugfix" releases the stability of the language implementations can be, and is being, improved independently of the new features offered by more recent major or minor releases. Bugfix releases, indicated by a third component of the version number, only fix known problems and do not gratuitously introduce new and possibly incompatible features or modified library functionality.
+<P>
+Release 2.2 got its first bugfix on April 10, 2002. The new version
+number is now 2.2.1. The 2.1 release, at 2.1.3, can probably be
+considered the "most stable" platform because it has been bugfixed
+twice.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.004.htp">Log info</A>
+
+/ Last changed on Tue Jul 23 10:20:04 2002 by
+<A HREF="mailto:kubieziel@gmx.de">Jens Kubieziel</A>
+<P>
+
+<HR>
+<H2><A NAME="2.5">2.5. What new developments are expected for Python in the future?</A></H2>
+See <A HREF="http://www.python.org/peps">http://www.python.org/peps</A>/ for the Python Enhancement 
+Proposals (PEPs). PEPs are design
+documents 
+describing a  suggested new feature for Python, providing
+a concise technical specification and a rationale.
+<P>
+Also, follow the discussions on the python-dev mailing list.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.005.htp">Log info</A>
+
+/ Last changed on Tue Apr  9 17:09:51 2002 by
+<A HREF="mailto:akuchlin@mems-exchange.org">A.M. Kuchling</A>
+<P>
+
+<HR>
+<H2><A NAME="2.6">2.6. Is it reasonable to propose incompatible changes to Python?</A></H2>
+In general, no.  There are already millions of lines of Python code
+around the world, so any changes in the language that invalidates more
+than a very small fraction of existing programs has to be frowned
+upon.  Even if you can provide a conversion program, there still is
+the problem of updating all documentation.  Providing a gradual
+upgrade path is the only way if a feature has to be changed.
+<P>
+See <A HREF="http://www.python.org/peps/pep-0005.html">http://www.python.org/peps/pep-0005.html</A> for the proposed
+mechanism for creating backwards-incompatibilities.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.006.htp">Log info</A>
+
+/ Last changed on Mon Apr  1 22:13:47 2002 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="2.7">2.7. What is the future of Python?</A></H2>
+Please see <A HREF="http://www.python.org/peps">http://www.python.org/peps</A>/ for proposals of future
+activities. One of the PEPs (Python Enhancement Proposals) deals
+with the PEP process and PEP format -- see
+<A HREF="http://www.python.org/peps/pep-0001.html">http://www.python.org/peps/pep-0001.html</A> if you want to
+submit a PEP. In <A HREF="http://www.python.org/peps/pep-0042.html">http://www.python.org/peps/pep-0042.html</A> there
+is a list of wishlists the Python Development team plans to tackle.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.007.htp">Log info</A>
+
+/ Last changed on Mon Apr  1 22:15:46 2002 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="2.8">2.8. What was the PSA, anyway?</A></H2>
+The Python Software Activity was
+created by a number of Python aficionados who want Python to be more
+than the product and responsibility of a single individual.
+The PSA was not an independent organization, but lived
+under the umbrealla of CNRI.
+<P>
+The PSA has been superseded by the Python Software Foundation,
+an independent non-profit organization.  The PSF's home page
+is at <A HREF="http://www.python.org/psf">http://www.python.org/psf</A>/.
+<P>
+Some pages created by the PSA still live at
+<A HREF="http://www.python.org/psa">http://www.python.org/psa</A>/
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.008.htp">Log info</A>
+
+/ Last changed on Thu Jul 25 18:19:44 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="2.9">2.9. Deleted</A></H2>
+<P>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.009.htp">Log info</A>
+
+/ Last changed on Tue Jan  2 02:51:30 2001 by
+<A HREF="mailto:moshez@zadka.site.co.il">Moshe Zadka</A>
+<P>
+
+<HR>
+<H2><A NAME="2.10">2.10. Deleted</A></H2>
+<P>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.010.htp">Log info</A>
+
+/ Last changed on Tue Jan  2 02:52:19 2001 by
+<A HREF="mailto:moshez@zadka.site.co.il">Moshe Zadka</A>
+<P>
+
+<HR>
+<H2><A NAME="2.11">2.11. Is Python Y2K (Year 2000) Compliant?</A></H2>
+As of January, 2001 no major problems have been reported and Y2K
+compliance seems to be a non-issue.
+<P>
+Since Python is available free of charge, there are no absolute
+guarantees.  If there <I>are</I> unforeseen problems, liability is the
+user's rather than the developers', and there is nobody you can sue for damages.
+<P>
+Python does few 
+date manipulations, and what it does is all based on the Unix
+representation for time (even on non-Unix systems) which uses seconds
+since 1970 and won't overflow until 2038.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.011.htp">Log info</A>
+
+/ Last changed on Mon Jan  8 17:19:32 2001 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="2.12">2.12. Is Python a good language in a class for beginning programmers?</A></H2>
+Yes.  This long answer attempts to address any concerns you might
+have with teaching Python as a programmer's first language.  
+(If you want to discuss Python's use in education, then 
+you may be interested in joining the edu-sig mailinglist.
+See <A HREF="http://www.python.org/sigs/edu-sig">http://www.python.org/sigs/edu-sig</A>/ )
+<P>
+It is still common to start students with a procedural
+(subset of a) statically typed language such as Pascal, C, or
+a subset of C++ or Java.  I think that students may be better
+served by learning Python as their first language.  Python has
+a very simple and consistent syntax and a large standard library.
+Most importantly, using Python in a beginning programming course
+permits students to concentrate on important programming skills,
+such as problem decomposition and data type design.
+<P>
+With Python, students can be quickly introduced to basic concepts
+such as loops and procedures.  They can even probably work with
+user-defined objects in their very first course.  They could
+implement a tree structure as nested Python lists, for example.
+They could be introduced to objects in their first course if
+desired.  For a student who has never programmed before, using
+a statically typed language seems unnatural.  It presents
+additional complexity that the student must master and slows
+the pace of the course.  The students are trying to learn to
+think like a computer, decompose problems, design consistent
+interfaces, and encapsulate data.  While learning to use a
+statically typed language is important, it is not necessarily the
+best topic to address in the students' first programming course.
+<P>
+Many other aspects of Python make it a good first language.
+Python has a large standard library (like Java) so that
+students can be assigned programming projects very early in the
+course that <I>do</I> something.  Assignments aren't restricted to the
+standard four-function calculator and check balancing programs.
+By using the standard library, students can gain the satisfaction
+of working on realistic applications as they learn the fundamentals
+of programming.  Using the standard library also teaches students
+about code reuse.
+<P>
+Python's interactive interpreter also enables students to
+test language features while they're programming.  They can keep
+a window with the interpreter running while they enter their
+programs' source in another window.  If they can't remember the
+methods for a list, they can do something like this:
+<P>
+<PRE>
+ >>> L = []
+ >>> dir(L)
+ ['append', 'count', 'extend', 'index', 'insert', 'pop', 'remove',
+ 'reverse', 'sort']
+ >>> print L.append.__doc__
+ L.append(object) -- append object to end
+ >>> L.append(1)
+ >>> L
+ [1]
+</PRE>
+With the interpreter, documentation is never far from the
+student as he's programming.
+<P>
+There are also good IDEs for Python.  Guido van Rossum's IDLE
+is a cross-platform IDE for Python that is written in Python
+using Tk.  There is also a Windows specific IDE called PythonWin.
+Emacs users will be happy to know that there is a very good Python
+mode for Emacs.  All of these programming environments provide
+syntax highlighting, auto-indenting, and access to the interactive
+interpreter while coding.  For more information about IDEs, see XXX.
+<P>
+If your department is currently using Pascal because it was
+designed to be a teaching language, then you'll be happy to
+know that Guido van Rossum designed Python to be simple to
+teach to everyone but powerful enough to implement real world
+applications.  Python makes a good language for first time
+programmers because that was one of Python's design goals.
+There are papers at <A HREF="http://www.python.org/doc/essays">http://www.python.org/doc/essays</A>/ on the Python website 
+by Python's creator explaining his objectives for the language.
+One that may interest you is titled "Computer Programming for Everybody" 
+<A HREF="http://www.python.org/doc/essays/cp4e.html">http://www.python.org/doc/essays/cp4e.html</A>
+<P>
+If you're seriously considering Python as a language for your
+school,  Guido van Rossum may even be willing to correspond with
+you about how the language would fit in your curriculum.
+See <A HREF="http://www.python.org/doc/FAQ.html#2.2">http://www.python.org/doc/FAQ.html#2.2</A> for examples of
+Python's use in the "real world."
+<P>
+While Python, its source code, and its IDEs are freely
+available, this consideration should not rule 
+out other languages.  There are other free languages (Java, 
+free C compilers), and many companies are willing to waive some
+or all of their fees for student programming tools if it
+guarantees that a whole graduating class will know how to
+use their tools.  That is, if one of the requirements for 
+the language that will be taught is that it be freely 
+available, then Python qualifies, but this requirement 
+does not preclude other languages.
+<P>
+While Python jobs may not be as prevalent as C/C++/Java jobs,
+teachers should not worry about teaching students critical job
+skills in their first course.  The skills that win students a
+job are those they learn in their senior classes and internships.
+Their first programming courses are there to lay a solid
+foundation in programming fundamentals.  The primary question
+in choosing the language for such a course should be which
+language permits the students to learn this material without
+hindering or limiting them.
+<P>
+Another argument for Python is that there are many tasks for
+which something like C++ is overkill.  That's where languages
+like Python, Perl, Tcl, and Visual Basic thrive.  It's critical
+for students to know something about these languages.   (Every
+employer for whom I've worked used at least one such language.)
+Of the languages listed above, Python probably makes the best
+language in a programming curriculum since its syntax is simple,
+consistent, and not unlike other languages (C/C++/Java) that
+are probably in the curriculum.  By starting students with
+Python, a department simultaneously lays the foundations for
+other programming courses and introduces students to the type
+of language that is often used as a "glue" language.  As an
+added bonus, Python can be used to interface with Microsoft's
+COM components (thanks to Mark Hammond).  There is also Jython, 
+a Java implementation of the Python interpreter, that can be 
+used to connect Java components.
+<P>
+If you currently start students with Pascal or C/C++ or Java,
+you may be worried they will have trouble learning a statically
+typed language after starting with Python.  I think that this
+fear most often stems from the fact that the teacher started
+with a statically typed language, and we tend to like to teach
+others in the same way we were taught.  In reality, the
+transition from Python to one of these other languages is
+quite simple.
+<P>
+To motivate a statically typed language such as C++, begin the
+course by explaining that unlike Python, their first language,
+C++ is compiled to a machine dependent executable.  Explain
+that the point is to make a very fast executable.  To permit
+the compiler to make optimizations, programmers must help it
+by specifying the "types" of variables.  By restricting each
+variable to a specific type, the compiler can reduce the
+book-keeping it has to do to permit dynamic types.  The compiler
+also has to resolve references at compile time.  Thus, the
+language gains speed by sacrificing some of Python's dynamic
+features.  Then again, the C++ compiler provides type safety
+and catches many bugs at compile time instead of run time (a
+critical consideration for many commercial applications).  C++
+is also designed for very large programs where one may want to
+guarantee that others don't touch an object's implementation.
+C++ provides very strong language features to separate an object's
+implementation from its interface.  Explain why this separation
+is a good thing.
+<P>
+The first day of a C++ course could then be a whirlwind introduction
+to what C++ requires and provides.  The point here is that after
+a semester or two of Python, students are hopefully competent
+programmers.  They know how to handle loops and write procedures.
+They've also worked with objects, thought about the benefits of
+consistent interfaces, and used the technique of subclassing to
+specialize behavior.  Thus, a whirlwind introduction to C++ could
+show them how objects and subclassing looks in C++.  The
+potentially difficult concepts of object-oriented design were
+taught without the additional obstacles presented by a language
+such as C++ or Java.  When learning one of these languages,
+the students would already understand the "road map."  They
+understand objects; they would just be learning how objects
+fit in a statically typed languages.  Language requirements
+and compiler errors that seem unnatural to beginning programmers
+make sense in this new context.  Many students will find it
+helpful to be able to write a fast prototype of their algorithms
+in Python.  Thus, they can test and debug their ideas before
+they attempt to write the code in the new language, saving the
+effort of working with C++ types for when they've discovered a
+working solution for their assignments.  When they get annoyed
+with the rigidity of types, they'll be happy to learn about
+containers and templates to regain some of the lost flexibility
+Python afforded them.  Students may also gain an appreciation
+for the fact that no language is best for every task.  They'll
+see that C++ is faster, but they'll know that they can gain
+flexibility and development speed with a Python when execution
+speed isn't critical.
+<P>
+If you have any concerns that weren't addressed here, try
+posting to the Python newsgroup.  Others there have done some
+work with using Python as an instructional tool.  Good luck.
+We'd love to hear about it if you choose Python for your course.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq02.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq02.012.htp">Log info</A>
+
+/ Last changed on Mon Dec  2 19:32:35 2002 by
+<A HREF="mailto:sconce@in-spec-inc.com">Bill Sconce</A>
+<P>
+
+<HR>
+<H1>3. Building Python and Other Known Bugs</H1>
+
+<HR>
+<H2><A NAME="3.1">3.1. Is there a test set?</A></H2>
+Sure.  You can run it after building with "make test", or you can
+run it manually with this command at the Python prompt:
+<P>
+<PRE>
+ import test.autotest
+</PRE>
+In Python 1.4 or earlier, use
+<P>
+<PRE>
+ import autotest
+</PRE>
+The test set doesn't test <I>all</I> features of Python,
+but it goes a long way to confirm that Python is actually working.
+<P>
+NOTE: if "make test" fails, don't just mail the output to the
+newsgroup -- this doesn't give enough information to debug the
+problem.  Instead, find out which test fails, and run that test
+manually from an interactive interpreter.  For example, if
+"make test" reports that test_spam fails, try this interactively:
+<P>
+<PRE>
+ import test.test_spam
+</PRE>
+This generally produces more verbose output which can be diagnosed
+to debug the problem.  If you find a bug in Python or the libraries, or in the tests, please report this in the Python bug tracker at SourceForge:
+<P>
+<A HREF="http://sourceforge.net/tracker/?func=add&amp;group_id=5470&amp;atid=105470">http://sourceforge.net/tracker/?func=add&amp;group_id=5470&amp;atid=105470</A>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.001.htp">Log info</A>
+
+/ Last changed on Fri Apr 27 10:29:36 2001 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="3.2">3.2. When running the test set, I get complaints about floating point operations, but when playing with floating point operations I cannot find anything wrong with them.</A></H2>
+The test set makes occasional unwarranted assumptions about the
+semantics of C floating point operations.  Until someone donates a
+better floating point test set, you will have to comment out the
+offending floating point tests and execute similar tests manually.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.002.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.3">3.3. Link errors after rerunning the configure script.</A></H2>
+It is generally necessary to run "make clean" after a configuration
+change.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.003.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.4">3.4. The python interpreter complains about options passed to a script (after the script name).</A></H2>
+You are probably linking with GNU getopt, e.g. through -liberty.
+Don't.  The reason for the complaint is that GNU getopt, unlike System
+V getopt and other getopt implementations, doesn't consider a
+non-option to be the end of the option list.  A quick (and compatible)
+fix for scripts is to add "--" to the interpreter, like this:
+<P>
+<PRE>
+        #! /usr/local/bin/python --
+</PRE>
+You can also use this interactively:
+<P>
+<PRE>
+        python -- script.py [options]
+</PRE>
+Note that a working getopt implementation is provided in the Python
+distribution (in Python/getopt.c) but not automatically used.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.004.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.5">3.5. When building on the SGI, make tries to run python to create glmodule.c, but python hasn't been built or installed yet.</A></H2>
+Comment out the line mentioning glmodule.c in Setup and build a
+python without gl first; install it or make sure it is in your $PATH,
+then edit the Setup file again to turn on the gl module, and make
+again.  You don't need to do "make clean"; you do need to run "make
+Makefile" in the Modules subdirectory (or just run "make" at the
+toplevel).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.005.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.6">3.6. I use VPATH but some targets are built in the source directory.</A></H2>
+On some systems (e.g. Sun), if the target already exists in the
+source directory, it is created there instead of in the build
+directory.  This is usually because you have previously built without
+VPATH.  Try running "make clobber" in the source directory.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.006.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.7">3.7. Trouble building or linking with the GNU readline library.</A></H2>
+You can use the GNU readline library to improve the interactive user
+interface: this gives you line editing and command history when
+calling python interactively. Its sources are distributed with 
+Python (at least for 2.0).  Uncomment the line 
+<P>
+#readline readline.c -lreadline -ltermcap
+<P>
+in Modules/Setup.  The configuration option --with-readline 
+is no longer supported, at least in Python 2.0.  Some hints on 
+building and using the readline library:
+On SGI IRIX 5, you may have to add the following
+to rldefs.h:
+<P>
+<PRE>
+        #ifndef sigmask
+        #define sigmask(sig) (1L &lt;&lt; ((sig)-1))
+        #endif
+</PRE>
+On some systems, you will have to add #include "rldefs.h" to the
+top of several source files, and if you use the VPATH feature, you
+will have to add dependencies of the form foo.o: foo.c to the
+Makefile for several values of foo.
+The readline library requires use of the termcap library. A
+known problem with this is that it contains entry points which
+cause conflicts with the STDWIN and SGI GL libraries. The STDWIN
+conflict can be solved by adding a line saying '#define werase w_erase' to the
+stdwin.h file (in the STDWIN distribution, subdirectory H). The
+GL conflict has been solved in the Python configure script by a
+hack that forces use of the static version of the termcap library.
+Check the newsgroup gnu.bash.bug news:gnu.bash.bug for
+specific problems with the readline library (I don't read this group
+but I've been told that it is the place for readline bugs).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.007.htp">Log info</A>
+
+/ Last changed on Sat Dec  2 18:23:48 2000 by
+<A HREF="mailto:trotts@llnl.gov">Issac Trotts</A>
+<P>
+
+<HR>
+<H2><A NAME="3.8">3.8. Trouble with socket I/O on older Linux 1.x versions.</A></H2>
+Once you've built Python, use it to run the regen script in the
+Lib/plat-linux2 directory.  Apparently the files as distributed don't match the system headers on some Linux versions.
+<P>
+Note that this FAQ entry only applies to Linux kernel versions 1.x.y;
+these are hardly around any more.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.008.htp">Log info</A>
+
+/ Last changed on Tue Jul 30 20:05:52 2002 by
+<A HREF="mailto:kubieziel@gmx.de">Jens Kubieziel</A>
+<P>
+
+<HR>
+<H2><A NAME="3.9">3.9. Trouble with prototypes on Ultrix.</A></H2>
+Ultrix cc seems broken -- use gcc, or edit config.h to #undef
+HAVE_PROTOTYPES.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.009.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.10">3.10. Other trouble building Python on platform X.</A></H2>
+Please submit the details to the SourceForge bug tracker:
+<P>
+<PRE>
+  <A HREF="http://sourceforge.net/tracker/?group_id=5470&amp;atid=105470">http://sourceforge.net/tracker/?group_id=5470&amp;atid=105470</A>
+</PRE>
+and we'll look
+into it.  Please provide as many details as possible.  In particular,
+if you don't tell us what type of computer and what operating system
+(and version) you are using it will be difficult for us to figure out
+what is the matter.  If you have compilation output logs,
+please use file uploads -- don't paste everything in the message box.
+<P>
+In many cases, we won't have access to the same hardware or operating system version, so <I>please</I>, if you have a SourceForge account, log in before filing your report, or if you don't have an account, include an email address at which we can reach you for further questions.  Logging in to SourceForge first will also cause SourceForge to send you updates as we act on your report.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.010.htp">Log info</A>
+
+/ Last changed on Fri Apr 27 10:53:18 2001 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="3.11">3.11. How to configure dynamic loading on Linux.</A></H2>
+This is now automatic as long as your Linux version uses the ELF
+object format (all recent Linuxes do).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.011.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.12">3.12. I can't get shared modules to work on Linux 2.0 (Slackware96)?</A></H2>
+This is a bug in the Slackware96 release. The fix is simple: Make sure
+that there is a link from /lib/libdl.so to /lib/libdl.so.1 so that the
+following links are setup: /lib/libdl.so -&gt; /lib/libdl.so.1
+/lib/libdl.so.1 -&gt; /lib/libdl.so.1.7.14 You may have to rerun the
+configure script, after rm'ing the config.cache file, before you
+attempt to rebuild python after this fix.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.012.htp">Log info</A>
+
+/ Last changed on Wed May 21 15:45:03 1997 by
+<A HREF="mailto:guido2@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="3.13">3.13. Trouble when making modules shared on Linux.</A></H2>
+This happens when you have built Python for static linking and then
+enable
+<PRE>
+  *shared*
+</PRE>
+in the Setup file.  Shared library code must be
+compiled with "-fpic".  If a .o file for the module already exist that
+was compiled for static linking, you must remove it or do "make clean"
+in the Modules directory.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.013.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.013.htp">Log info</A>
+
+/ Last changed on Fri May 23 13:42:30 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="3.14">3.14. [deleted]</A></H2>
+[ancient information on threads on linux (when thread support
+was not standard) used to be here]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.014.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.014.htp">Log info</A>
+
+/ Last changed on Sun Jun  2 17:27:13 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="3.15">3.15. Errors when linking with a shared library containing C++ code.</A></H2>
+Link the main Python binary with C++.  Change the definition of
+LINKCC in Modules/Makefile to be your C++ compiler.  You may have to
+edit config.c slightly to make it compilable with C++.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.015.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.015.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.16">3.16. Deleted</A></H2>
+<P>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.016.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.016.htp">Log info</A>
+
+/ Last changed on Tue Sep 11 16:02:22 2001 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="3.17">3.17. Deleted.</A></H2>
+<P>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.017.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.017.htp">Log info</A>
+
+/ Last changed on Tue Sep 11 15:54:57 2001 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="3.18">3.18. Compilation or link errors for the _tkinter module</A></H2>
+Most likely, there's a version mismatch between the Tcl/Tk header
+files (tcl.h and tk.h) and the Tcl/Tk libraries you are using e.g.
+"-ltk8.0" and "-ltcl8.0" arguments for _tkinter in the Setup file).
+It is possible to install several versions of the Tcl/Tk libraries,
+but there can only be one version of the tcl.h and tk.h header
+files.  If the library doesn't match the header, you'll get
+problems, either when linking the module, or when importing it.
+Fortunately, the version number is clearly stated in each file,
+so this is easy to find.  Reinstalling and using the latest
+version usually fixes the problem.
+<P>
+(Also note that when compiling unpatched Python 1.5.1 against
+Tcl/Tk 7.6/4.2 or older, you get an error on Tcl_Finalize.  See
+the 1.5.1 patch page at <A HREF="http://www.python.org/1.5/patches-1.5.1">http://www.python.org/1.5/patches-1.5.1</A>/.)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.018.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.018.htp">Log info</A>
+
+/ Last changed on Thu Jun 11 00:49:14 1998 by
+<A HREF="mailto:guido@python.org">Gvr</A>
+<P>
+
+<HR>
+<H2><A NAME="3.19">3.19. I configured and built Python for Tcl/Tk but &quot;import Tkinter&quot; fails.</A></H2>
+Most likely, you forgot to enable the line in Setup that says
+"TKPATH=:$(DESTLIB)/tkinter".
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.019.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.019.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.20">3.20. [deleted]</A></H2>
+[ancient information on a gcc+tkinter bug on alpha was here]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.020.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.020.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 16:46:23 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="3.21">3.21. Several common system calls are missing from the posix module.</A></H2>
+Most likely, <I>all</I> test compilations run by the configure script
+are failing for some reason or another.  Have a look in config.log to
+see what could be the reason.  A common reason is specifying a
+directory to the --with-readline option that doesn't contain the
+libreadline.a file.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.021.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.021.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.22">3.22. ImportError: No module named string, on MS Windows.</A></H2>
+Most likely, your PYTHONPATH environment variable should be set to
+something like:
+<P>
+set PYTHONPATH=c:\python;c:\python\lib;c:\python\scripts
+<P>
+(assuming Python was installed in c:\python)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.022.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.022.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.23">3.23. Core dump on SGI when using the gl module.</A></H2>
+There are conflicts between entry points in the termcap and curses
+libraries and an entry point in the GL library.  There's a hack of a
+fix for the termcap library if it's needed for the GNU readline
+library, but it doesn't work when you're using curses.  Concluding,
+you can't build a Python binary containing both the curses and gl
+modules.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.023.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.023.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="3.24">3.24. &quot;Initializer not a constant&quot; while building DLL on MS-Windows</A></H2>
+Static type object initializers in extension modules may cause compiles to
+fail with an error message like "initializer not a constant".  
+Fredrik Lundh &lt;<A HREF="mailto:Fredrik.Lundh@image.combitech.se">Fredrik.Lundh@image.combitech.se</A>&gt; explains:
+<P>
+This shows up when building DLL under MSVC.  There's two ways to
+address this: either compile the module as C++, or change your code to
+something like:
+<P>
+<PRE>
+  statichere PyTypeObject bstreamtype = {
+      PyObject_HEAD_INIT(NULL) /* must be set by init function */
+      0,
+      "bstream",
+      sizeof(bstreamobject),
+</PRE>
+<PRE>
+  ...
+</PRE>
+<PRE>
+  void
+  initbstream()
+  {
+      /* Patch object type */
+      bstreamtype.ob_type = &amp;PyType_Type;
+      Py_InitModule("bstream", functions);
+      ...
+  }
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.024.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.024.htp">Log info</A>
+
+/ Last changed on Sun May 25 14:58:05 1997 by
+<A HREF="mailto:aaron_watters@msn.com">Aaron Watters</A>
+<P>
+
+<HR>
+<H2><A NAME="3.25">3.25. Output directed to a pipe or file disappears on Linux.</A></H2>
+Some people have reported that when they run their script
+interactively, it runs great, but that when they redirect it
+to a pipe or file, no output appears.
+<P>
+<PRE>
+    % python script.py
+    ...some output...
+    % python script.py >file
+    % cat file
+    % # no output
+    % python script.py | cat
+    % # no output
+    %
+</PRE>
+This was a bug in Linux kernel. It is fixed and should not appear anymore. So most Linux users are <I>not</I> affected by this.
+<P>
+If redirection doesn't work on your Linux system, check what shell you are using. Shells like (t)csh doesn't support redirection.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.025.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.025.htp">Log info</A>
+
+/ Last changed on Thu Jan 16 13:38:30 2003 by
+<A HREF="mailto:kubieziel@gmx.de">Jens Kubieziel</A>
+<P>
+
+<HR>
+<H2><A NAME="3.26">3.26. [deleted]</A></H2>
+[ancient libc/linux problem was here]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.026.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.026.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 16:48:08 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="3.27">3.27. [deleted]</A></H2>
+[ancient linux + threads + tk problem was described here]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.027.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.027.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 16:49:08 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="3.28">3.28. How can I test if Tkinter is working?</A></H2>
+Try the following:
+<P>
+<PRE>
+  python
+  >>> import _tkinter
+  >>> import Tkinter
+  >>> Tkinter._test()
+</PRE>
+This should pop up a window with two buttons,
+one "Click me" and one "Quit".
+<P>
+If the first statement (import _tkinter) fails, your Python
+installation probably has not been configured to support Tcl/Tk.
+On Unix, if you have installed Tcl/Tk, you have to rebuild Python
+after editing the Modules/Setup file to enable the _tkinter module
+and the TKPATH environment variable.
+<P>
+It is also possible to get complaints about Tcl/Tk version
+number mismatches or missing TCL_LIBRARY or TK_LIBRARY
+environment variables.  These have to do with Tcl/Tk installation
+problems.
+<P>
+A common problem is to have installed versions of tcl.h and tk.h
+that don't match the installed version of the Tcl/Tk libraries;
+this usually results in linker errors or (when using dynamic
+loading) complaints about missing symbols during loading
+the shared library.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.028.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.028.htp">Log info</A>
+
+/ Last changed on Thu Aug 28 17:01:46 1997 by
+<A HREF="mailto:guido@python.org">Guido van Rossum</A>
+<P>
+
+<HR>
+<H2><A NAME="3.29">3.29. Is there a way to get the interactive mode of the python interpreter to perform function/variable name completion?</A></H2>
+(From a posting by Guido van Rossum)
+<P>
+On Unix, if you have enabled the readline module (i.e. if Emacs-style
+command line editing and bash-style history works for you), you can
+add this by importing the undocumented standard library module
+"rlcompleter".  When completing a simple identifier, it
+completes keywords, built-ins and globals in __main__; when completing
+NAME.NAME..., it evaluates (!) the expression up to the last dot and
+completes its attributes.
+<P>
+This way, you can do "import string", type "string.", hit the
+completion key twice, and see the list of names defined by the
+string module.
+<P>
+Tip: to use the tab key as the completion key, call
+<P>
+<PRE>
+    readline.parse_and_bind("tab: complete")
+</PRE>
+You can put this in a ~/.pythonrc file, and set the PYTHONSTARTUP
+environment variable to ~/.pythonrc.  This will cause the completion to be enabled
+whenever you run Python interactively.  
+<P>
+Notes (see the docstring for rlcompleter.py for more information):
+<P>
+* The evaluation of the NAME.NAME... form may cause arbitrary 
+application defined code to be executed if an object with a
+__getattr__ hook is found.  Since it is the responsibility of the
+application (or the user) to enable this feature, I consider this an
+acceptable risk.  More complicated expressions (e.g. function calls or
+indexing operations) are <I>not</I> evaluated.
+<P>
+* GNU readline is also used by the built-in functions input() and
+raw_input(), and thus these also benefit/suffer from the complete
+features.  Clearly an interactive application can benefit by
+specifying its own completer function and using raw_input() for all
+its input.
+<P>
+* When stdin is not a tty device, GNU readline is never
+used, and this module (and the readline module) are silently inactive.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.029.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.029.htp">Log info</A>
+
+/ Last changed on Fri Jun 12 09:55:24 1998 by
+<A HREF="mailto:akuchlin@cnri.reston.va.us">A.M. Kuchling</A>
+<P>
+
+<HR>
+<H2><A NAME="3.30">3.30. Why is the Python interpreter not built as a shared library?</A></H2>
+(This is a Unix question; on Mac and Windows, it <I>is</I> a shared
+library.)
+<P>
+It's just a nightmare to get this to work on all different platforms.
+Shared library portability is a pain.  And yes, I know about GNU libtool
+-- but it requires me to use its conventions for filenames etc, and it 
+would require a complete and utter rewrite of all the makefile and
+config tools I'm currently using.
+<P>
+In practice, few applications embed Python -- it's much more common to
+have Python extensions, which already are shared libraries.  Also,
+serious embedders often want total control over which Python version
+and configuration they use so they wouldn't want to use a standard
+shared library anyway.  So while the motivation of saving space
+when lots of apps embed Python is nice in theory, I
+doubt that it will save much in practice.  (Hence the low priority I
+give to making a shared library.)
+<P>
+For Linux systems, the simplest method of producing libpython1.5.so seems to 
+be (originally from the Minotaur project web page,  
+<A HREF="http://www.equi4.com/minotaur/minotaur.html">http://www.equi4.com/minotaur/minotaur.html</A>): 
+<P>
+<PRE>
+  make distclean 
+  ./configure 
+  make OPT="-fpic -O2" 
+  mkdir .extract 
+  (cd .extract; ar xv ../libpython1.5.a) 
+  gcc -shared -o libpython1.5.so .extract/*.o 
+  rm -rf .extract
+</PRE>
+In Python 2.3 this will be supported by the standard build routine
+(at least on Linux) with --enable-shared.  Note however that there
+is little advantage, and it slows down Python because of the need
+for PIC code and the extra cost at startup time to find the library.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.030.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.030.htp">Log info</A>
+
+/ Last changed on Thu May 30 13:36:55 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="3.31">3.31. Build with GCC on Solaris 2.6 (SunOS 5.6) fails</A></H2>
+If you have upgraded Solaris 2.5 or 2.5.1 to Solaris 2.6,
+but you have not upgraded
+your GCC installation, the compile may fail, e.g. like this:
+<P>
+<PRE>
+ In file included from /usr/include/sys/stream.h:26,
+                  from /usr/include/netinet/in.h:38,
+                  from /usr/include/netdb.h:96,
+                  from ./socketmodule.c:121:
+ /usr/include/sys/model.h:32: #error "No DATAMODEL_NATIVE specified"
+</PRE>
+Solution: rebuild GCC for Solaris 2.6. 
+You might be able to simply re-run fixincludes, but
+people have had mixed success with doing that.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.031.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.031.htp">Log info</A>
+
+/ Last changed on Wed Oct 21 11:18:46 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="3.32">3.32. Running &quot;make clean&quot; seems to leave problematic files that cause subsequent builds to fail.</A></H2>
+Use "make clobber" instead.  
+<P>
+Use "make clean" to reduce the size of the source/build directory
+after you're happy with your build and installation.
+If you have already tried to build python and you'd like to start 
+over, you should use "make clobber".  It does a "make clean" and also 
+removes files such as the partially built Python library from a previous build.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.032.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.032.htp">Log info</A>
+
+/ Last changed on Thu Jun 24 20:39:26 1999 by
+<A HREF="mailto:tbryan@python.net">TAB</A>
+<P>
+
+<HR>
+<H2><A NAME="3.33">3.33. Submitting bug reports and patches</A></H2>
+To report a bug or submit a patch, please use the relevant service
+from the Python project at SourceForge.
+<P>
+Bugs: <A HREF="http://sourceforge.net/tracker/?group_id=5470&amp;atid=105470">http://sourceforge.net/tracker/?group_id=5470&amp;atid=105470</A>
+<P>
+Patches: <A HREF="http://sourceforge.net/tracker/?group_id=5470&amp;atid=305470">http://sourceforge.net/tracker/?group_id=5470&amp;atid=305470</A>
+<P>
+If you have a SourceForge account, please log in before submitting your bug report; this will make it easier for us to contact you regarding your report in the event we have follow-up questions.  It will also enable SourceForge to send you update information as we act on your bug.  If you do not have a SourceForge account, please consider leaving your name and email address as part of the report.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.033.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.033.htp">Log info</A>
+
+/ Last changed on Fri Apr 27 10:58:26 2001 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="3.34">3.34. I can't load shared libraries under Python 1.5.2, Solaris 7, and gcc 2.95.2</A></H2>
+When trying to load shared libraries, you may see errors like:
+ImportError: ld.so.1: python: fatal: relocation error: file /usr/local/lib/python1.5/site-packages/Perp/util/du_SweepUtilc.so:
+<PRE>
+ symbol PyExc_RuntimeError: referenced symbol not found
+</PRE>
+<P>
+There is a problem with the configure script for Python 1.5.2
+under Solaris 7 with gcc 2.95 .  configure should set the make variable
+LINKFORSHARED=-Xlinker -export-dynamic
+<P>
+<P>
+in Modules/Makefile, 
+<P>
+Manually add this line to the Modules/Makefile.
+This builds a Python executable that can load shared library extensions (xxx.so) .
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.034.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.034.htp">Log info</A>
+
+/ Last changed on Mon Feb 19 10:37:05 2001 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="3.35">3.35. In the regression test, test___all__ fails for the profile module. What's wrong?</A></H2>
+If you have been using the profile module, and have properly calibrated a copy of the module as described in the documentation for the profiler:
+<P>
+<A HREF="http://www.python.org/doc/current/lib/profile-calibration.html">http://www.python.org/doc/current/lib/profile-calibration.html</A>
+<P>
+then it is possible that the regression test "test___all__" will fail if you run the regression test manually rather than using "make test" in the Python source directory.  This will happen if you have set your PYTHONPATH environment variable to include the directory containing your calibrated profile module.  You have probably calibrated the profiler using an older version of the profile module which does not define the __all__ value, added to the module as of Python 2.1.
+<P>
+The problem can be fixed by removing the old calibrated version of the profile module and using the latest version to do a fresh calibration. In general, you will need to re-calibrate for each version of Python anyway, since the performance characteristics can change in subtle ways that impact profiling.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.035.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.035.htp">Log info</A>
+
+/ Last changed on Fri Apr 27 10:44:10 2001 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="3.36">3.36. relocations remain against allocatable but non-writable sections</A></H2>
+This linker error occurs on Solaris if you attempt to build an extension module which incorporates position-dependent (non-PIC) code. A common source of problems is that a static library (.a file), such as libreadline.a or libcrypto.a is linked with the extension module. The error specifically occurs when using gcc as the compiler, but /usr/ccs/bin/ld as the linker.
+<P>
+The following solutions and work-arounds are known:
+<P>
+1. Rebuild the libraries (libreadline, libcrypto) with -fPIC (-KPIC if using the system compiler). This is recommended; all object files in a shared library should be position-independent.
+<P>
+2. Statically link the extension module and its libraries into the Python interpreter, by editing Modules/Setup.
+<P>
+3. Use GNU ld instead of /usr/ccs/bin/ld; GNU ld will accept non-PIC code in shared libraries (and mark the section writable)
+<P>
+4. Pass -mimpure-text to GCC when linking the module. This will force gcc to not pass -z text to ld; in turn, ld will make all text sections writable.
+<P>
+Options 3 and 4 are not recommended, since the ability to share code across processes is lost.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq03.036.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq03.036.htp">Log info</A>
+
+/ Last changed on Tue Jan 29 12:05:11 2002 by
+<A HREF="mailto:loewis@informatik.hu-berlin.de">Martin v. Lwis</A>
+<P>
+
+<HR>
+<H1>4. Programming in Python</H1>
+
+<HR>
+<H2><A NAME="4.1">4.1. Is there a source code level debugger with breakpoints, step, etc.?</A></H2>
+Yes.  
+<P>
+Module pdb is a rudimentary but adequate console-mode debugger for Python. It is part of the standard Python library, and is documented in the Library Reference Manual. (You can also write your own debugger by using the code for pdb as an example.)
+<P>
+The IDLE interactive development environment, which is part of the standard Python distribution (normally available in Tools/idle), includes a graphical debugger.  There is documentation for the IDLE debugger at <A HREF="http://www.python.org/idle/doc/idle2.html#Debugger">http://www.python.org/idle/doc/idle2.html#Debugger</A>
+<P>
+Pythonwin is a Python IDE that includes a GUI debugger based on bdb.  The Pythonwin debugger colors breakpoints and has quite a few cool features (including debugging non-Pythonwin programs).  A reference can be found at <A HREF="http://www.python.org/ftp/python/pythonwin/pwindex.html">http://www.python.org/ftp/python/pythonwin/pwindex.html</A>
+More recent versions of PythonWin are available as a part of the ActivePython distribution (see   <A HREF="http://www.activestate.com/Products/ActivePython/index.html">http://www.activestate.com/Products/ActivePython/index.html</A>).
+<P>
+Pydb is a version of the standard Python debugger pdb, modified for use with DDD (Data Display Debugger), a popular graphical debugger front end.  Pydb can be found at  <A HREF="http://packages.debian.org/unstable/devel/pydb.html">http://packages.debian.org/unstable/devel/pydb.html</A>
+and DDD can be found at <A HREF="http://www.gnu.org/software/ddd">http://www.gnu.org/software/ddd</A>/
+<P>
+There are a number of commmercial Python IDEs that include graphical debuggers.  They include:
+<P>
+<PRE>
+ * Wing IDE (<A HREF="http://wingide.com">http://wingide.com</A>/) 
+ * Komodo IDE (<A HREF="http://www.activestate.com/Products/Komodo">http://www.activestate.com/Products/Komodo</A>/)
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.001.htp">Log info</A>
+
+/ Last changed on Tue Jan 28 01:43:41 2003 by
+<A HREF="mailto:steve@ferg.org">Stephen Ferg</A>
+<P>
+
+<HR>
+<H2><A NAME="4.2">4.2. Can I create an object class with some methods implemented in C and others in Python (e.g. through inheritance)? (Also phrased as: Can I use a built-in type as base class?)</A></H2>
+In Python 2.2, you can inherit from builtin classes such as int, list, dict, etc.
+<P>
+In previous versions of Python, you can easily create a Python class which serves as a wrapper around a built-in object, e.g. (for dictionaries):
+<P>
+<PRE>
+        # A user-defined class behaving almost identical
+        # to a built-in dictionary.
+        class UserDict:
+                def __init__(self): self.data = {}
+                def __repr__(self): return repr(self.data)
+                def __cmp__(self, dict):
+                        if type(dict) == type(self.data):
+                                return cmp(self.data, dict)
+                        else:
+                                return cmp(self.data, dict.data)
+                def __len__(self): return len(self.data)
+                def __getitem__(self, key): return self.data[key]
+                def __setitem__(self, key, item): self.data[key] = item
+                def __delitem__(self, key): del self.data[key]
+                def keys(self): return self.data.keys()
+                def items(self): return self.data.items()
+                def values(self): return self.data.values()
+                def has_key(self, key): return self.data.has_key(key)
+</PRE>
+A2. See Jim Fulton's ExtensionClass for an example of a mechanism
+which allows you to have superclasses which you can inherit from in
+Python -- that way you can have some methods from a C superclass (call
+it a mixin) and some methods from either a Python superclass or your
+subclass.  ExtensionClass is distributed as a part of Zope (see
+<A HREF="http://www.zope.org">http://www.zope.org</A>), but will be phased out with Zope 3, since
+Zope 3 uses Python 2.2 or later which supports direct inheritance
+from built-in types.  Here's a link to the original paper about
+ExtensionClass:
+<A HREF="http://debian.acm.ndsu.nodak.edu/doc/python-extclass/ExtensionClass.html">http://debian.acm.ndsu.nodak.edu/doc/python-extclass/ExtensionClass.html</A>
+<P>
+A3. The Boost Python Library (BPL, <A HREF="http://www.boost.org/libs/python/doc/index.html">http://www.boost.org/libs/python/doc/index.html</A>)
+provides a way of doing this from C++ (i.e. you can inherit from an
+extension class written in C++ using the BPL).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.002.htp">Log info</A>
+
+/ Last changed on Tue May 28 21:09:52 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.3">4.3. Is there a curses/termcap package for Python?</A></H2>
+The standard Python source distribution comes with a curses module in
+the Modules/ subdirectory, though it's not compiled by default (note
+that this is not available in the Windows distribution -- there is
+no curses module for Windows).
+<P>
+In Python versions before 2.0 the module only supported plain curses; 
+you couldn't use ncurses features like colors with it (though it would 
+link with ncurses).
+<P>
+In Python 2.0, the curses module has been greatly extended, starting 
+from Oliver Andrich's enhanced version, to provide many additional 
+functions from ncurses and SYSV curses, such as colour, alternative
+character set support, pads, and mouse support. This means the
+module is no longer compatible with operating systems that only
+have BSD curses, but there don't seem to be any currently
+maintained OSes that fall into this category.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.003.htp">Log info</A>
+
+/ Last changed on Sun Jun 23 20:24:06 2002 by
+<A HREF="mailto:tim.one@comcast.net">Tim Peters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.4">4.4. Is there an equivalent to C's onexit() in Python?</A></H2>
+For Python 2.0: The new atexit module provides a register function that
+is similar to C's onexit. See the Library Reference for details. For
+2.0 you should <I>not</I> assign to sys.exitfunc!
+<P>
+For Python 1.5.2: You need to import sys and assign a function to 
+sys.exitfunc, it will be called when your program exits, is 
+killed by an unhandled exception, or (on UNIX) receives a 
+SIGHUP or SIGTERM signal.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.004.htp">Log info</A>
+
+/ Last changed on Thu Dec 28 12:14:55 2000 by
+<A HREF="mailto:pbjorn@uswest.net">Bjorn Pettersen</A>
+<P>
+
+<HR>
+<H2><A NAME="4.5">4.5. [deleted]</A></H2>
+[python used to lack nested scopes, it was explained here]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.005.htp">Log info</A>
+
+/ Last changed on Thu Mar 21 05:18:22 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="4.6">4.6. How do I iterate over a sequence in reverse order?</A></H2>
+If it is a list, the fastest solution is
+<P>
+<PRE>
+        list.reverse()
+        try:
+                for x in list:
+                        "do something with x"
+        finally:
+                list.reverse()
+</PRE>
+This has the disadvantage that while you are in the loop, the list
+is temporarily reversed.  If you don't like this, you can make a copy.
+This appears expensive but is actually faster than other solutions:
+<P>
+<PRE>
+        rev = list[:]
+        rev.reverse()
+        for x in rev:
+                &lt;do something with x&gt;
+</PRE>
+If it's not a list, a more general but slower solution is:
+<P>
+<PRE>
+        for i in range(len(sequence)-1, -1, -1):
+                x = sequence[i]
+                &lt;do something with x&gt;
+</PRE>
+A more elegant solution, is to define a class which acts as a sequence
+and yields the elements in reverse order (solution due to Steve
+Majewski):
+<P>
+<PRE>
+        class Rev:
+                def __init__(self, seq):
+                        self.forw = seq
+                def __len__(self):
+                        return len(self.forw)
+                def __getitem__(self, i):
+                        return self.forw[-(i + 1)]
+</PRE>
+You can now simply write:
+<P>
+<PRE>
+        for x in Rev(list):
+                &lt;do something with x&gt;
+</PRE>
+Unfortunately, this solution is slowest of all, due to the method
+call overhead...
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.006.htp">Log info</A>
+
+/ Last changed on Sun May 25 21:10:50 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.7">4.7. My program is too slow. How do I speed it up?</A></H2>
+That's a tough one, in general.  There are many tricks to speed up
+Python code; I would consider rewriting parts in C only as a last
+resort.  One thing to notice is that function and (especially) method
+calls are rather expensive; if you have designed a purely OO interface
+with lots of tiny functions that don't do much more than get or set an
+instance variable or call another method, you may consider using a
+more direct way, e.g. directly accessing instance variables.  Also see
+the standard module "profile" (described in the Library Reference
+manual) which makes it possible to find out where
+your program is spending most of its time (if you have some patience
+-- the profiling itself can slow your program down by an order of
+magnitude).
+<P>
+Remember that many standard optimization heuristics you
+may know from other programming experience may well apply
+to Python.  For example it may be faster to send output to output
+devices using larger writes rather than smaller ones in order to
+avoid the overhead of kernel system calls.  Thus CGI scripts
+that write all output in "one shot" may be notably faster than
+those that write lots of small pieces of output.
+<P>
+Also, be sure to use "aggregate" operations where appropriate.
+For example the "slicing" feature allows programs to chop up
+lists and other sequence objects in a single tick of the interpreter
+mainloop using highly optimized C implementations.  Thus to 
+get the same effect as
+<P>
+<PRE>
+  L2 = []
+  for i in range[3]:
+       L2.append(L1[i])
+</PRE>
+it is much shorter and far faster to use
+<P>
+<PRE>
+  L2 = list(L1[:3]) # "list" is redundant if L1 is a list.
+</PRE>
+Note that the map() function, particularly used with
+builtin methods or builtin functions can be a convenient
+accelerator.  For example to pair the elements of two
+lists together:
+<P>
+<PRE>
+  >>> map(None, [1,2,3], [4,5,6])
+  [(1, 4), (2, 5), (3, 6)]
+</PRE>
+or to compute a number of sines:
+<P>
+<PRE>
+  >>> map( math.sin, (1,2,3,4))
+  [0.841470984808, 0.909297426826, 0.14112000806,   -0.756802495308]
+</PRE>
+The map operation completes very quickly in such cases.
+<P>
+Other examples of aggregate operations include the join and split
+methods of string objects.  For example if s1..s7 are large (10K+) strings then
+"".join([s1,s2,s3,s4,s5,s6,s7]) may be far faster than
+the more obvious s1+s2+s3+s4+s5+s6+s7, since the "summation"
+will compute many subexpressions, whereas join does all
+copying in one pass.  For manipulating strings also consider the 
+regular expression libraries and the "substitution" operations
+String % tuple and String % dictionary.  Also be sure to use
+the list.sort builtin method to do sorting, and see FAQ's 4.51
+and 4.59 for examples of moderately advanced usage -- list.sort beats
+other techniques for sorting in all but the most extreme
+circumstances.
+<P>
+There are many other aggregate operations
+available in the standard libraries and in contributed libraries
+and extensions.
+<P>
+Another common trick is to "push loops into functions or methods."
+For example suppose you have a program that runs slowly and you
+use the profiler (profile.run) to determine that a Python function ff
+is being called lots of times.  If you notice that ff 
+<P>
+<PRE>
+   def ff(x):
+       ...do something with x computing result...
+       return result
+</PRE>
+tends to be called in loops like (A)
+<P>
+<PRE>
+   list = map(ff, oldlist)
+</PRE>
+or (B)
+<P>
+<PRE>
+   for x in sequence:
+       value = ff(x)
+       ...do something with value...
+</PRE>
+then you can often eliminate function call overhead by rewriting
+ff to
+<P>
+<PRE>
+   def ffseq(seq):
+       resultseq = []
+       for x in seq:
+           ...do something with x computing result...
+           resultseq.append(result)
+       return resultseq
+</PRE>
+and rewrite (A) to
+<P>
+<PRE>
+    list = ffseq(oldlist)
+</PRE>
+and (B) to
+<P>
+<PRE>
+    for value in ffseq(sequence):
+        ...do something with value...
+</PRE>
+Other single calls ff(x) translate to ffseq([x])[0] with little
+penalty.  Of course this technique is not always appropriate
+and there are other variants, which you can figure out.
+<P>
+You can gain some performance by explicitly storing the results of
+a function or method lookup into a local variable.  A loop like
+<P>
+<PRE>
+    for key in token:
+        dict[key] = dict.get(key, 0) + 1
+</PRE>
+resolves dict.get every iteration.  If the method isn't going to
+change, a faster implementation is
+<P>
+<PRE>
+    dict_get = dict.get  # look up the method once
+    for key in token:
+        dict[key] = dict_get(key, 0) + 1
+</PRE>
+Default arguments can be used to determine values once, at
+compile time instead of at run time.  This can only be done for
+functions or objects which will not be changed during program
+execution, such as replacing
+<P>
+<PRE>
+    def degree_sin(deg):
+        return math.sin(deg * math.pi / 180.0)
+</PRE>
+with
+<P>
+<PRE>
+    def degree_sin(deg, factor = math.pi/180.0, sin = math.sin):
+        return sin(deg * factor)
+</PRE>
+Because this trick uses default arguments for terms which should
+not be changed, it should only be used when you are not concerned
+with presenting a possibly confusing API to your users.
+<P>
+<P>
+For an anecdote related to optimization, see
+<P>
+<PRE>
+	<A HREF="http://www.python.org/doc/essays/list2str.html">http://www.python.org/doc/essays/list2str.html</A>
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.007.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 01:03:54 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.8">4.8. When I have imported a module, then edit it, and import it again (into the same Python process), the changes don't seem to take place. What is going on?</A></H2>
+For reasons of efficiency as well as consistency, Python only reads
+the module file on the first time a module is imported.  (Otherwise a
+program consisting of many modules, each of which imports the same
+basic module, would read the basic module over and over again.)  To
+force rereading of a changed module, do this:
+<P>
+<PRE>
+        import modname
+        reload(modname)
+</PRE>
+Warning: this technique is not 100% fool-proof.  In particular,
+modules containing statements like
+<P>
+<PRE>
+        from modname import some_objects
+</PRE>
+will continue to work with the old version of the imported objects.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.008.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.9">4.9. How do I find the current module name?</A></H2>
+A module can find out its own module name by looking at the
+(predefined) global variable __name__.  If this has the value
+'__main__' you are running as a script.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.009.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.10">4.10. I have a module in which I want to execute some extra code when it is run as a script. How do I find out whether I am running as a script?</A></H2>
+See the previous question.  E.g. if you put the following on the
+last line of your module, main() is called only when your module is
+running as a script:
+<P>
+<PRE>
+        if __name__ == '__main__': main()
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.010.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.11">4.11. I try to run a program from the Demo directory but it fails with ImportError: No module named ...; what gives?</A></H2>
+This is probably an optional module (written in C!) which hasn't
+been configured on your system.  This especially happens with modules
+like "Tkinter", "stdwin", "gl", "Xt" or "Xm".  For Tkinter, STDWIN and
+many other modules, see Modules/Setup.in for info on how to add these
+modules to your Python, if it is possible at all.  Sometimes you will
+have to ftp and build another package first (e.g. Tcl and Tk for Tkinter).
+Sometimes the module only works on specific platforms (e.g. gl only works
+on SGI machines).
+<P>
+NOTE: if the complaint is about "Tkinter" (upper case T) and you have
+already configured module "tkinter" (lower case t), the solution is
+<I>not</I> to rename tkinter to Tkinter or vice versa.  There is probably
+something wrong with your module search path.  Check out the value of
+sys.path.
+<P>
+For X-related modules (Xt and Xm) you will have to do more work: they
+are currently not part of the standard Python distribution.  You will
+have to ftp the Extensions tar file, i.e.
+<A HREF="ftp://ftp.python.org/pub/python/src/X-extension.tar.gz">ftp://ftp.python.org/pub/python/src/X-extension.tar.gz</A> and follow
+the instructions there.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.011.htp">Log info</A>
+
+/ Last changed on Wed Feb 12 21:31:08 2003 by
+<A HREF="mailto:kubieziel@gmx.de">Jens Kubieziel</A>
+<P>
+
+<HR>
+<H2><A NAME="4.12">4.12. [deleted]</A></H2>
+[stdwin (long dead windowing library) entry deleted]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.012.htp">Log info</A>
+
+/ Last changed on Thu Mar 21 08:30:13 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="4.13">4.13. What GUI toolkits exist for Python?</A></H2>
+Depending on what platform(s) you are aiming at, there are several.
+<P>
+Currently supported solutions:
+<P>
+Cross-platform:
+<P>
+Tk:
+<P>
+There's a neat object-oriented interface to the Tcl/Tk widget set,
+called Tkinter.  It is part of the standard Python distribution and
+well-supported -- all you need to do is build and install Tcl/Tk and
+enable the _tkinter module and the TKPATH definition in Modules/Setup
+when building Python.  This is probably the easiest to install and
+use, and the most complete widget set.  It is also very likely that in
+the future the standard Python GUI API will be based on or at least
+look very much like the Tkinter interface.  For more info about Tk,
+including pointers to the source, see the Tcl/Tk home page at
+<A HREF="http://www.scriptics.com">http://www.scriptics.com</A>.  Tcl/Tk is now fully
+portable to the Mac and Windows platforms (NT and 95 only); you need
+Python 1.4beta3 or later and Tk 4.1patch1 or later.
+<P>
+wxWindows:
+<P>
+There's an interface to wxWindows called wxPython.  wxWindows is a 
+portable GUI class library written in C++.  It supports GTK, Motif, 
+MS-Windows and Mac as targets.  Ports to other platforms are being 
+contemplated or have already had some work done on them.  wxWindows 
+preserves the look and feel of the underlying graphics toolkit, and 
+there is quite a rich widget set and collection of GDI classes.  
+See the wxWindows page at <A HREF="http://www.wxwindows.org">http://www.wxwindows.org</A>/ for more details.  
+wxPython is a python extension module that wraps many of the wxWindows 
+C++ classes, and is quickly gaining popularity amongst Python 
+developers.  You can get wxPython as part of the source or CVS 
+distribution of wxWindows, or directly from its home page at 
+<A HREF="http://alldunn.com/wxPython">http://alldunn.com/wxPython</A>/.
+<P>
+Gtk+:
+<P>
+PyGtk bindings for the Gtk+ Toolkit by James Henstridge exist; see <A HREF="ftp://ftp.daa.com.au/pub/james/python">ftp://ftp.daa.com.au/pub/james/python</A>/.  Note that there are two incompatible bindings.  If you are using Gtk+ 1.2.x you should get the 0.6.x PyGtk bindings from
+<P>
+<PRE>
+    <A HREF="ftp://ftp.gtk.org/pub/python/v1.2">ftp://ftp.gtk.org/pub/python/v1.2</A>
+</PRE>
+If you plan to use Gtk+ 2.0 with Python (highly recommended if you are just starting with Gtk), get the most recent distribution from
+<P>
+<PRE>
+    <A HREF="ftp://ftp.gtk.org/pub/python/v2.0">ftp://ftp.gtk.org/pub/python/v2.0</A>
+</PRE>
+If you are adventurous, you can also check out the source from the Gnome CVS repository.  Set your CVS directory to :pserver:<A HREF="mailto:anonymous@anoncvs.gnome.org">anonymous@anoncvs.gnome.org</A>:/cvs/gnome and check the gnome-python module out from the repository.
+<P>
+Other:
+<P>
+There are also bindings available for the Qt toolkit (PyQt), and for KDE (PyKDE); see <A HREF="http://www.thekompany.com/projects/pykde">http://www.thekompany.com/projects/pykde</A>/.
+<P>
+For OpenGL bindings, see <A HREF="http://starship.python.net/~da/PyOpenGL">http://starship.python.net/~da/PyOpenGL</A>.
+<P>
+Platform specific:
+<P>
+The Mac port has a rich and ever-growing set of modules that support
+the native Mac toolbox calls.  See the documentation that comes with
+the Mac port.  See <A HREF="ftp://ftp.python.org/pub/python/mac">ftp://ftp.python.org/pub/python/mac</A>.  Support
+by Jack Jansen <A HREF="mailto:jack@cwi.nl">jack@cwi.nl</A>.
+<P>
+Pythonwin by Mark Hammond (<A HREF="mailto:MHammond@skippinet.com.au">MHammond@skippinet.com.au</A>)
+includes an interface to the Microsoft Foundation
+Classes and a Python programming environment using it that's written
+mostly in Python.  See <A HREF="http://www.python.org/windows">http://www.python.org/windows</A>/.
+<P>
+There's an object-oriented GUI based on the Microsoft Foundation
+Classes model called WPY, supported by Jim Ahlstrom <A HREF="mailto:jim@interet.com">jim@interet.com</A>.
+Programs written in WPY run unchanged and with native look and feel on
+Windows NT/95, Windows 3.1 (using win32s), and on Unix (using Tk).
+Source and binaries for Windows and Linux are available in
+<A HREF="ftp://ftp.python.org/pub/python/wpy">ftp://ftp.python.org/pub/python/wpy</A>/.
+<P>
+Obsolete or minority solutions:
+<P>
+There's an interface to X11, including the Athena and Motif widget
+sets (and a few individual widgets, like Mosaic's HTML widget and
+SGI's GL widget) available from
+<A HREF="ftp://ftp.python.org/pub/python/src/X-extension.tar.gz">ftp://ftp.python.org/pub/python/src/X-extension.tar.gz</A>.
+Support by Sjoerd Mullender <A HREF="mailto:sjoerd@cwi.nl">sjoerd@cwi.nl</A>.
+<P>
+On top of the X11 interface there's the vpApp
+toolkit by Per Spilling, now also maintained by Sjoerd Mullender
+<A HREF="mailto:sjoerd@cwi.nl">sjoerd@cwi.nl</A>.  See <A HREF="ftp://ftp.cwi.nl/pub/sjoerd/vpApp.tar.gz">ftp://ftp.cwi.nl/pub/sjoerd/vpApp.tar.gz</A>.
+<P>
+For SGI IRIX only, there are unsupported interfaces to the complete
+GL (Graphics Library -- low level but very good 3D capabilities) as
+well as to FORMS (a buttons-and-sliders-etc package built on top of GL
+by Mark Overmars -- ftp'able from
+<A HREF="ftp://ftp.cs.ruu.nl/pub/SGI/FORMS">ftp://ftp.cs.ruu.nl/pub/SGI/FORMS</A>/).  This is probably also
+becoming obsolete, as OpenGL takes over (see above).
+<P>
+There's an interface to STDWIN, a platform-independent low-level
+windowing interface for Mac and X11.  This is totally unsupported and
+rapidly becoming obsolete.  The STDWIN sources are at
+<A HREF="ftp://ftp.cwi.nl/pub/stdwin">ftp://ftp.cwi.nl/pub/stdwin</A>/.
+<P>
+There is an interface to WAFE, a Tcl interface to the X11
+Motif and Athena widget sets.  WAFE is at
+<A HREF="http://www.wu-wien.ac.at/wafe/wafe.html">http://www.wu-wien.ac.at/wafe/wafe.html</A>.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.013.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.013.htp">Log info</A>
+
+/ Last changed on Mon May 13 21:40:39 2002 by
+<A HREF="mailto:skip@pobox.com">Skip Montanaro</A>
+<P>
+
+<HR>
+<H2><A NAME="4.14">4.14. Are there any interfaces to database packages in Python?</A></H2>
+Yes!  See the Database Topic Guide at 
+<A HREF="http://www.python.org/topics/database">http://www.python.org/topics/database</A>/ for details.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.014.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.014.htp">Log info</A>
+
+/ Last changed on Tue Jan  4 20:12:19 2000 by
+<A HREF="mailto:bwarsaw@python.org">Barney Warplug</A>
+<P>
+
+<HR>
+<H2><A NAME="4.15">4.15. Is it possible to write obfuscated one-liners in Python?</A></H2>
+Yes.  See the following three examples, due to Ulf Bartelt:
+<P>
+<PRE>
+        # Primes &lt; 1000
+        print filter(None,map(lambda y:y*reduce(lambda x,y:x*y!=0,
+        map(lambda x,y=y:y%x,range(2,int(pow(y,0.5)+1))),1),range(2,1000)))
+</PRE>
+<PRE>
+        # First 10 Fibonacci numbers
+        print map(lambda x,f=lambda x,f:(x&lt;=1) or (f(x-1,f)+f(x-2,f)): f(x,f),
+        range(10))
+</PRE>
+<PRE>
+        # Mandelbrot set
+        print (lambda Ru,Ro,Iu,Io,IM,Sx,Sy:reduce(lambda x,y:x+y,map(lambda y,
+        Iu=Iu,Io=Io,Ru=Ru,Ro=Ro,Sy=Sy,L=lambda yc,Iu=Iu,Io=Io,Ru=Ru,Ro=Ro,i=IM,
+        Sx=Sx,Sy=Sy:reduce(lambda x,y:x+y,map(lambda x,xc=Ru,yc=yc,Ru=Ru,Ro=Ro,
+        i=i,Sx=Sx,F=lambda xc,yc,x,y,k,f=lambda xc,yc,x,y,k,f:(k&lt;=0)or (x*x+y*y
+        >=4.0) or 1+f(xc,yc,x*x-y*y+xc,2.0*x*y+yc,k-1,f):f(xc,yc,x,y,k,f):chr(
+        64+F(Ru+x*(Ro-Ru)/Sx,yc,0,0,i)),range(Sx))):L(Iu+y*(Io-Iu)/Sy),range(Sy
+        ))))(-2.1, 0.7, -1.2, 1.2, 30, 80, 24)
+        #    \___ ___/  \___ ___/  |   |   |__ lines on screen
+        #        V          V      |   |______ columns on screen
+        #        |          |      |__________ maximum of "iterations"
+        #        |          |_________________ range on y axis
+        #        |____________________________ range on x axis
+</PRE>
+Don't try this at home, kids!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.015.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.015.htp">Log info</A>
+
+/ Last changed on Wed May 21 15:48:33 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.16">4.16. Is there an equivalent of C's &quot;?:&quot; ternary operator?</A></H2>
+Not directly.  In many cases you can mimic a?b:c with "a and b or
+c", but there's a flaw: if b is zero (or empty, or None -- anything
+that tests false) then c will be selected instead.  In many cases you
+can prove by looking at the code that this can't happen (e.g. because
+b is a constant or has a type that can never be false), but in general
+this can be a problem.
+<P>
+Tim Peters (who wishes it was Steve Majewski) suggested the following
+solution: (a and [b] or [c])[0].  Because [b] is a singleton list it
+is never false, so the wrong path is never taken; then applying [0] to
+the whole thing gets the b or c that you really wanted.  Ugly, but it
+gets you there in the rare cases where it is really inconvenient to
+rewrite your code using 'if'.
+<P>
+As a last resort it is possible to implement the "?:" operator as a function:
+<P>
+<PRE>
+    def q(cond,on_true,on_false):
+        from inspect import isfunction
+</PRE>
+<PRE>
+        if cond:
+            if not isfunction(on_true): return on_true
+            else: return apply(on_true)
+        else:
+            if not isfunction(on_false): return on_false 
+            else: return apply(on_false)
+</PRE>
+In most cases you'll pass b and c directly: q(a,b,c).  To avoid evaluating b
+or c when they shouldn't be, encapsulate them
+within a lambda function, e.g.: q(a,lambda: b, lambda: c).
+<P>
+<P>
+<P>
+It has been asked <I>why</I> Python has no if-then-else expression,
+since most language have one; it is a frequently requested feature.
+<P>
+There are several possible answers: just as many languages do
+just fine without one; it can easily lead to less readable code;
+no sufficiently "Pythonic" syntax has been discovered; a search
+of the standard library found remarkably few places where using an
+if-then-else expression would make the code more understandable.
+<P>
+Nevertheless, in an effort to decide once and for all whether
+an if-then-else expression should be added to the language,
+PEP 308 (<A HREF="http://www.python.org/peps/pep-0308.html">http://www.python.org/peps/pep-0308.html</A>) has been
+put forward, proposing a specific syntax.  The community can
+now vote on this issue.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.016.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.016.htp">Log info</A>
+
+/ Last changed on Fri Feb  7 19:41:13 2003 by
+<A HREF="mailto:goodger@python.org">David Goodger</A>
+<P>
+
+<HR>
+<H2><A NAME="4.17">4.17. My class defines __del__ but it is not called when I delete the object.</A></H2>
+There are several possible reasons for this.
+<P>
+The del statement does not necessarily call __del__ -- it simply
+decrements the object's reference count, and if this reaches zero
+__del__ is called.
+<P>
+If your data structures contain circular links (e.g. a tree where
+each child has a parent pointer and each parent has a list of
+children) the reference counts will never go back to zero.  You'll
+have to define an explicit close() method which removes those
+pointers.  Please don't ever call __del__ directly -- __del__ should
+call close() and close() should make sure that it can be called more
+than once for the same object.
+<P>
+If the object has ever been a local variable (or argument, which is
+really the same thing) to a function that caught an expression in an
+except clause, chances are that a reference to the object still exists
+in that function's stack frame as contained in the stack trace.
+Normally, deleting (better: assigning None to) sys.exc_traceback will
+take care of this.  If a stack was printed for an unhandled
+exception in an interactive interpreter, delete sys.last_traceback
+instead.
+<P>
+There is code that deletes all objects when the interpreter exits,
+but it is not called if your Python has been configured to support
+threads (because other threads may still be active).  You can define
+your own cleanup function using sys.exitfunc (see question 4.4).
+<P>
+Finally, if your __del__ method raises an exception, a warning message is printed to sys.stderr.
+<P>
+<P>
+Starting with Python 2.0, a garbage collector periodically reclaims the space used by most cycles with no external references. (See the "gc" module documentation for details.) There <I>are</I>, however, pathological cases where it can be expected to fail. Moreover, the garbage collector runs some time after the last reference to your data structure vanishes, so your __del__ method may be called at an inconvenient and random time. This is inconvenient if you're trying to reproduce a problem. Worse, the order in which object's __del__ methods are executed is arbitrary.
+<P>
+Another way to avoid cyclical references is to use the "weakref" module, which allows you to point to objects without incrementing their reference count. Tree data structures, for instance, should use weak references for their parent  and sibling pointers (if they need them!).
+<P>
+Question 6.14 is intended to explain the new garbage collection algorithm.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.017.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.017.htp">Log info</A>
+
+/ Last changed on Mon Jun 10 15:27:28 2002 by
+<A HREF="mailto:smurf@noris.de">Matthias Urlichs</A>
+<P>
+
+<HR>
+<H2><A NAME="4.18">4.18. How do I change the shell environment for programs called using os.popen() or os.system()? Changing os.environ doesn't work.</A></H2>
+You must be using either a version of python before 1.4, or on a
+(rare) system that doesn't have the putenv() library function.
+<P>
+Before Python 1.4, modifying the environment passed to subshells was
+left out of the interpreter because there seemed to be no
+well-established portable way to do it (in particular, some systems,
+have putenv(), others have setenv(), and some have none at all).  As
+of Python 1.4, almost all Unix systems <I>do</I> have putenv(), and so does
+the Win32 API, and thus the os module was modified so that changes to
+os.environ are trapped and the corresponding putenv() call is made.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.018.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.018.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.19">4.19. What is a class?</A></H2>
+A class is the particular object type created by executing
+a class statement.  Class objects are used as templates, to create
+instance objects, which embody both the data structure
+(attributes) and program routines (methods) specific to a datatype.
+<P>
+A class can be based on one or more other classes, called its base
+class(es). It then inherits the attributes and methods of its base classes. This allows an object model to be successively refined
+by inheritance.
+<P>
+The term "classic class" is used to refer to the original
+class implementation in Python. One problem with classic
+classes is their inability to use the built-in data types
+(such as list and dictionary) as base classes. Starting
+with Python 2.2 an attempt is in progress to unify user-defined
+classes and built-in types. It is now possible to declare classes
+that inherit from built-in types.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.019.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.019.htp">Log info</A>
+
+/ Last changed on Mon May 27 01:31:21 2002 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="4.20">4.20. What is a method?</A></H2>
+A method is a function that you normally call as
+x.name(arguments...) for some object x.  The term is used for methods
+of classes and class instances as well as for methods of built-in
+objects.  (The latter have a completely different implementation and
+only share the way their calls look in Python code.)  Methods of
+classes (and class instances) are defined as functions inside the
+class definition.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.020.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.020.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.21">4.21. What is self?</A></H2>
+Self is merely a conventional name for the first argument of a
+method -- i.e. a function defined inside a class definition.  A method
+defined as meth(self, a, b, c) should be called as x.meth(a, b, c) for
+some instance x of the class in which the definition occurs;
+the called method will think it is called as meth(x, a, b, c).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.021.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.021.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.22">4.22. What is an unbound method?</A></H2>
+An unbound method is a method defined in a class that is not yet
+bound to an instance.  You get an unbound method if you ask for a
+class attribute that happens to be a function. You get a bound method
+if you ask for an instance attribute.  A bound method knows which
+instance it belongs to and calling it supplies the instance automatically;
+an unbound method only knows which class it wants for its first
+argument (a derived class is also OK).  Calling an unbound method
+doesn't "magically" derive the first argument from the context -- you
+have to provide it explicitly.
+<P>
+Trivia note regarding bound methods:  each reference to a bound
+method of a particular object creates a bound method object.  If you
+have two such references (a = inst.meth; b = inst.meth), they will
+compare equal (a == b) but are not the same (a is not b).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.022.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.022.htp">Log info</A>
+
+/ Last changed on Wed May  6 18:07:25 1998 by
+<A HREF="mailto:clarence@avtel.com">Clarence Gardner</A>
+<P>
+
+<HR>
+<H2><A NAME="4.23">4.23. How do I call a method defined in a base class from a derived class that overrides it?</A></H2>
+If your class definition starts with "class Derived(Base): ..."
+then you can call method meth defined in Base (or one of Base's base
+classes) as Base.meth(self, arguments...).  Here, Base.meth is an
+unbound method (see previous question).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.023.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.023.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.24">4.24. How do I call a method from a base class without using the name of the base class?</A></H2>
+DON'T DO THIS.  REALLY.  I MEAN IT.  It appears that you could call
+self.__class__.__bases__[0].meth(self, arguments...) but this fails when
+a doubly-derived method is derived from your class: for its instances,
+self.__class__.__bases__[0] is your class, not its base class -- so
+(assuming you are doing this from within Derived.meth) you would start
+a recursive call.
+<P>
+Often when you want to do this you are forgetting that classes
+are first class in Python.  You can "point to" the class you want
+to delegate an operation to either at the instance or at the
+subclass level.  For example if you want to use a "glorp"
+operation of a superclass you can point to the right superclass
+to use.
+<P>
+<PRE>
+  class subclass(superclass1, superclass2, superclass3):
+      delegate_glorp = superclass2
+      ...
+      def glorp(self, arg1, arg2):
+            ... subclass specific stuff ...
+            self.delegate_glorp.glorp(self, arg1, arg2)
+       ...
+</PRE>
+<PRE>
+  class subsubclass(subclass):
+       delegate_glorp = superclass3
+       ...
+</PRE>
+Note, however that setting delegate_glorp to subclass in
+subsubclass would cause an infinite recursion on subclass.delegate_glorp.  Careful!  Maybe you are getting too fancy for your own good.  Consider simplifying the design (?).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.024.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.024.htp">Log info</A>
+
+/ Last changed on Mon Jul 28 13:58:22 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.25">4.25. How can I organize my code to make it easier to change the base class?</A></H2>
+You could define an alias for the base class, assign the real base
+class to it before your class definition, and use the alias throughout
+your class.  Then all you have to change is the value assigned to the
+alias.  Incidentally, this trick is also handy if you want to decide
+dynamically (e.g. depending on availability of resources) which base
+class to use.  Example:
+<P>
+<PRE>
+        BaseAlias = &lt;real base class&gt;
+        class Derived(BaseAlias):
+                def meth(self):
+                        BaseAlias.meth(self)
+                        ...
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.025.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.025.htp">Log info</A>
+
+/ Last changed on Wed May 21 15:49:57 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.26">4.26. How can I find the methods or attributes of an object?</A></H2>
+This depends on the object type.
+<P>
+For an instance x of a user-defined class, instance attributes are
+found in the dictionary x.__dict__, and methods and attributes defined
+by its class are found in x.__class__.__bases__[i].__dict__ (for i in
+range(len(x.__class__.__bases__))).  You'll have to walk the tree of
+base classes to find <I>all</I> class methods and attributes.
+<P>
+Many, but not all built-in types define a list of their method names
+in x.__methods__, and if they have data attributes, their names may be
+found in x.__members__.  However this is only a convention.
+<P>
+For more information, read the source of the standard (but
+undocumented) module newdir.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.026.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.026.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.27">4.27. I can't seem to use os.read() on a pipe created with os.popen().</A></H2>
+os.read() is a low-level function which takes a file descriptor (a
+small integer).  os.popen() creates a high-level file object -- the
+same type used for sys.std{in,out,err} and returned by the builtin
+open() function.  Thus, to read n bytes from a pipe p created with
+os.popen(), you need to use p.read(n).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.027.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.027.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.28">4.28. How can I create a stand-alone binary from a Python script?</A></H2>
+Even though there are Python compilers being developed,
+you probably don't need a <I>real</I> compiler, if all you want
+is a stand-alone program. There are three solutions to that. 
+<P>
+One is to use the freeze tool, which is included in the Python
+source tree as Tools/freeze. It converts Python byte
+code to C arrays.  Using a C compiler, you can embed all
+your modules into a new program, which is then linked
+with the standard Python modules. 
+<P>
+It works by scanning your source recursively for import statements
+(in both forms) and looking for the modules in the standard Python path
+as well as in the source directory (for built-in modules).  It then
+1 the modules written in Python to C code (array initializers
+that can be turned into code objects using the marshal module) and
+creates a custom-made config file that only contains those built-in
+modules which are actually used in the program.  It then compiles the
+generated C code and links it with the rest of the Python interpreter
+to form a self-contained binary which acts exactly like your script.
+<P>
+(Hint: the freeze program only works if your script's filename ends in
+".py".)
+<P>
+There are several utilities which may be helpful.  The first is Gordon McMillan's installer at
+<P>
+<PRE>
+    <A HREF="http://www.mcmillan-inc.com/install1.html">http://www.mcmillan-inc.com/install1.html</A>
+</PRE>
+which works on Windows, Linux and at least some forms of Unix.
+<P>
+Another is Thomas Heller's py2exe (Windows only) at
+<P>
+<PRE>
+    <A HREF="http://starship.python.net/crew/theller/py2exe">http://starship.python.net/crew/theller/py2exe</A>/
+</PRE>
+A third is Christian Tismer's SQFREEZE
+(<A HREF="http://starship.python.net/crew/pirx">http://starship.python.net/crew/pirx</A>/) which appends the byte code
+to a specially-prepared Python interpreter, which
+will find the byte code in executable. 
+<P>
+A fourth is Fredrik Lundh's Squeeze
+(<A HREF="http://www.pythonware.com/products/python/squeeze">http://www.pythonware.com/products/python/squeeze</A>/).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.028.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.028.htp">Log info</A>
+
+/ Last changed on Wed Jun 19 14:01:30 2002 by
+<A HREF="mailto:gmcm@hypernet.com">Gordon McMillan</A>
+<P>
+
+<HR>
+<H2><A NAME="4.29">4.29. What WWW tools are there for Python?</A></H2>
+See the chapters titled "Internet Protocols and Support" and
+"Internet Data Handling" in the Library Reference
+Manual. Python is full of good things which will help you build server-side and client-side web systems.
+<P>
+A summary of available frameworks is maintained by Paul Boddie at
+<P>
+<PRE>
+    <A HREF="http://thor.prohosting.com/~pboddie/Python/web_modules.html">http://thor.prohosting.com/~pboddie/Python/web_modules.html</A>
+</PRE>
+Cameron Laird maintains a useful set of pages about Python web technologies at
+<P>
+<PRE>
+   <A HREF="http://starbase.neosoft.com/~claird/comp.lang.python/web_python.html">http://starbase.neosoft.com/~claird/comp.lang.python/web_python.html</A>/
+</PRE>
+There was a web browser written in Python, called Grail --
+see <A HREF="http://sourceforge.net/project/grail">http://sourceforge.net/project/grail</A>/. This project has been terminated; <A HREF="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/grail/grail/README">http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/grail/grail/README</A> gives more details.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.029.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.029.htp">Log info</A>
+
+/ Last changed on Mon Nov 11 22:48:25 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.30">4.30. How do I run a subprocess with pipes connected to both input and output?</A></H2>
+Use the standard popen2 module.  For example:
+<P>
+<PRE>
+	import popen2
+	fromchild, tochild = popen2.popen2("command")
+	tochild.write("input\n")
+	tochild.flush()
+	output = fromchild.readline()
+</PRE>
+Warning: in general, it is unwise to
+do this, because you can easily cause a deadlock where your
+process is blocked waiting for output from the child, while the child
+is blocked waiting for input from you.  This can be caused
+because the parent expects the child to output more text than it does,
+or it can be caused by data being stuck in stdio buffers due to lack
+of flushing.  The Python parent can of course explicitly flush the data
+it sends to the child before it reads any output, but if the child is
+a naive C program it can easily have been written to never explicitly
+flush its output, even if it is interactive, since flushing is
+normally automatic.
+<P>
+Note that a deadlock is also possible if you use popen3 to read
+stdout and stderr. If one of the two is too large for the internal
+buffer (increasing the buffersize does not help) and you read()
+the other one first, there is a deadlock, too.
+<P>
+Note on a bug in popen2: unless your program calls wait()
+or waitpid(), finished child processes are never removed,
+and eventually calls to popen2 will fail because of a limit on
+the number of child processes.  Calling os.waitpid with the
+os.WNOHANG option can prevent this; a good place to insert such
+a call would be before calling popen2 again.
+<P>
+Another way to produce a deadlock: Call a wait() and there is
+still more output from the program than what fits into the 
+internal buffers.
+<P>
+In many cases, all you really need is to run some data through a
+command and get the result back.  Unless the data is infinite in size,
+the easiest (and often the most efficient!) way to do this is to write
+it to a temporary file and run the command with that temporary file as
+input.  The standard module tempfile exports a function mktemp() which
+generates unique temporary file names.
+<P>
+<PRE>
+ import tempfile
+ import os
+ class Popen3:
+    """
+    This is a deadlock-save version of popen, that returns
+    an object with errorlevel, out (a string) and err (a string).
+    (capturestderr may not work under windows.)
+    Example: print Popen3('grep spam','\n\nhere spam\n\n').out
+    """
+    def __init__(self,command,input=None,capturestderr=None):
+        outfile=tempfile.mktemp()
+        command="( %s ) > %s" % (command,outfile)
+        if input:
+            infile=tempfile.mktemp()
+            open(infile,"w").write(input)
+            command=command+" &lt;"+infile
+        if capturestderr:
+            errfile=tempfile.mktemp()
+            command=command+" 2>"+errfile
+        self.errorlevel=os.system(command) >> 8
+        self.out=open(outfile,"r").read()
+        os.remove(outfile)
+        if input:
+            os.remove(infile)
+        if capturestderr:
+            self.err=open(errfile,"r").read()
+            os.remove(errfile)
+</PRE>
+Note that many interactive programs (e.g. vi) don't work well with
+pipes substituted for standard input and output.  You will have to use
+pseudo ttys ("ptys") instead of pipes.  There is some undocumented
+code to use these in the library module pty.py -- I'm afraid you're on
+your own here.
+<P>
+A different answer is a Python interface to Don Libes' "expect"
+library.  A Python extension that interfaces to expect is called "expy"
+and available from
+<A HREF="http://expectpy.sourceforge.net">http://expectpy.sourceforge.net</A>/.
+<P>
+A pure Python solution that works like expect is pexpect of Noah Spurrier.
+A beta version is available from
+<A HREF="http://pexpect.sourceforge.net">http://pexpect.sourceforge.net</A>/
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.030.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.030.htp">Log info</A>
+
+/ Last changed on Tue Sep  3 16:31:31 2002 by
+<A HREF="mailto:polzin@gmx.de">Tobias Polzin</A>
+<P>
+
+<HR>
+<H2><A NAME="4.31">4.31. How do I call a function if I have the arguments in a tuple?</A></H2>
+Use the built-in function apply().  For instance,
+<P>
+<PRE>
+    func(1, 2, 3)
+</PRE>
+is equivalent to
+<P>
+<PRE>
+    args = (1, 2, 3)
+    apply(func, args)
+</PRE>
+Note that func(args) is not the same -- it calls func() with exactly
+one argument, the tuple args, instead of three arguments, the integers
+1, 2 and 3.
+<P>
+In Python 2.0, you can also use extended call syntax:
+<P>
+f(*args) is equivalent to apply(f, args)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.031.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.031.htp">Log info</A>
+
+/ Last changed on Tue Jan  2 03:42:50 2001 by
+<A HREF="mailto:moshez@zadka.site.co.il">Moshe Zadka</A>
+<P>
+
+<HR>
+<H2><A NAME="4.32">4.32. How do I enable font-lock-mode for Python in Emacs?</A></H2>
+If you are using XEmacs 19.14 or later, any XEmacs 20, FSF Emacs 19.34
+or any Emacs 20, font-lock should work automatically for you if you
+are using the latest python-mode.el.
+<P>
+If you are using an older version of XEmacs or Emacs you will need 
+to put this in your .emacs file:
+<P>
+<PRE>
+        (defun my-python-mode-hook ()
+          (setq font-lock-keywords python-font-lock-keywords)
+          (font-lock-mode 1))
+        (add-hook 'python-mode-hook 'my-python-mode-hook)
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.032.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.032.htp">Log info</A>
+
+/ Last changed on Mon Apr  6 16:18:46 1998 by
+<A HREF="mailto:bwarsaw@python.org">Barry Warsaw</A>
+<P>
+
+<HR>
+<H2><A NAME="4.33">4.33. Is there a scanf() or sscanf() equivalent?</A></H2>
+Not as such.
+<P>
+For simple input parsing, the easiest approach is usually to split
+the line into whitespace-delimited words using string.split(), and to
+convert decimal strings to numeric values using int(),
+long() or float().  (Python's int() is 32-bit and its
+long() is arbitrary precision.)  string.split supports an optional
+"sep" parameter which is useful if the line uses something other
+than whitespace as a delimiter.
+<P>
+For more complicated input parsing, regular expressions (see module re)
+are better suited and more powerful than C's sscanf().
+<P>
+There's a contributed module that emulates sscanf(), by Steve Clift;
+see contrib/Misc/sscanfmodule.c of the ftp site:
+<P>
+<PRE>
+    <A HREF="http://www.python.org/ftp/python/contrib-09-Dec-1999/Misc">http://www.python.org/ftp/python/contrib-09-Dec-1999/Misc</A>/
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.033.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.033.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 01:07:51 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.34">4.34. Can I have Tk events handled while waiting for I/O?</A></H2>
+Yes, and you don't even need threads!  But you'll have to
+restructure your I/O code a bit.  Tk has the equivalent of Xt's
+XtAddInput() call, which allows you to register a callback function
+which will be called from the Tk mainloop when I/O is possible on a
+file descriptor.  Here's what you need:
+<P>
+<PRE>
+        from Tkinter import tkinter
+        tkinter.createfilehandler(file, mask, callback)
+</PRE>
+The file may be a Python file or socket object (actually, anything
+with a fileno() method), or an integer file descriptor.  The mask is
+one of the constants tkinter.READABLE or tkinter.WRITABLE.  The
+callback is called as follows:
+<P>
+<PRE>
+        callback(file, mask)
+</PRE>
+You must unregister the callback when you're done, using
+<P>
+<PRE>
+        tkinter.deletefilehandler(file)
+</PRE>
+Note: since you don't know *how many bytes* are available for reading,
+you can't use the Python file object's read or readline methods, since
+these will insist on reading a predefined number of bytes.  For
+sockets, the recv() or recvfrom() methods will work fine; for other
+files, use os.read(file.fileno(), maxbytecount).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.034.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.034.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.35">4.35. How do I write a function with output parameters (call by reference)?</A></H2>
+[Mark Lutz] The thing to remember is that arguments are passed by
+assignment in Python.  Since assignment just creates references to
+objects, there's no alias between an argument name in the caller and
+callee, and so no call-by-reference per se.  But you can simulate it
+in a number of ways:
+<P>
+1) By using global variables; but you probably shouldn't :-)
+<P>
+2) By passing a mutable (changeable in-place) object:
+<P>
+<PRE>
+      def func1(a):
+          a[0] = 'new-value'     # 'a' references a mutable list
+          a[1] = a[1] + 1        # changes a shared object
+</PRE>
+<PRE>
+      args = ['old-value', 99]
+      func1(args)
+      print args[0], args[1]     # output: new-value 100
+</PRE>
+3) By returning a tuple, holding the final values of arguments:
+<P>
+<PRE>
+      def func2(a, b):
+          a = 'new-value'        # a and b are local names
+          b = b + 1              # assigned to new objects
+          return a, b            # return new values
+</PRE>
+<PRE>
+      x, y = 'old-value', 99
+      x, y = func2(x, y)
+      print x, y                 # output: new-value 100
+</PRE>
+4) And other ideas that fall-out from Python's object model. For instance, it might be clearer to pass in a mutable dictionary:
+<P>
+<PRE>
+      def func3(args):
+          args['a'] = 'new-value'     # args is a mutable dictionary
+          args['b'] = args['b'] + 1   # change it in-place
+</PRE>
+<PRE>
+      args = {'a':' old-value', 'b': 99}
+      func3(args)
+      print args['a'], args['b']
+</PRE>
+5) Or bundle-up values in a class instance:
+<P>
+<PRE>
+      class callByRef:
+          def __init__(self, **args):
+              for (key, value) in args.items():
+                  setattr(self, key, value)
+</PRE>
+<PRE>
+      def func4(args):
+          args.a = 'new-value'        # args is a mutable callByRef
+          args.b = args.b + 1         # change object in-place
+</PRE>
+<PRE>
+      args = callByRef(a='old-value', b=99)
+      func4(args)
+      print args.a, args.b
+</PRE>
+<PRE>
+   But there's probably no good reason to get this complicated :-).
+</PRE>
+[Python's author favors solution 3 in most cases.]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.035.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.035.htp">Log info</A>
+
+/ Last changed on Sun Jun  8 23:49:46 1997 by
+<A HREF="mailto:david_ascher@brown.edu">David Ascher</A>
+<P>
+
+<HR>
+<H2><A NAME="4.36">4.36. Please explain the rules for local and global variables in Python.</A></H2>
+[Ken Manheimer] In Python, procedure variables are implicitly
+global, unless they are assigned anywhere within the block.
+In that case
+they are implicitly local, and you need to explicitly declare them as
+'global'.
+<P>
+Though a bit surprising at first, a moment's consideration explains
+this.  On one hand, requirement of 'global' for assigned vars provides
+a bar against unintended side-effects.  On the other hand, if global
+were required for all global references, you'd be using global all the
+time.  Eg, you'd have to declare as global every reference to a
+builtin function, or to a component of an imported module.  This
+clutter would defeat the usefulness of the 'global' declaration for
+identifying side-effects.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.036.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.036.htp">Log info</A>
+
+/ Last changed on Fri Aug 28 09:53:27 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.37">4.37. How can I have modules that mutually import each other?</A></H2>
+Suppose you have the following modules:
+<P>
+foo.py:
+<P>
+<PRE>
+	from bar import bar_var
+	foo_var=1
+</PRE>
+bar.py:
+<P>
+<PRE>
+	from foo import foo_var
+	bar_var=2
+</PRE>
+The problem is that the above is processed by the interpreter thus:
+<P>
+<PRE>
+	main imports foo
+	Empty globals for foo are created
+	foo is compiled and starts executing
+	foo imports bar
+	Empty globals for bar are created
+	bar is compiled and starts executing
+	bar imports foo (which is a no-op since there already is a module named foo)
+	bar.foo_var = foo.foo_var
+	...
+</PRE>
+The last step fails, because Python isn't done with interpreting foo yet and the global symbol dict for foo is still empty.
+<P>
+The same thing happens when you use "import foo", and then try to access "foo.one" in global code.
+<P>
+<P>
+There are (at least) three possible workarounds for this problem. 
+<P>
+Guido van Rossum recommends to avoid all uses of "from &lt;module&gt; import ..." (so everything from an imported module is referenced as &lt;module&gt;.&lt;name&gt;) and to place all code inside functions. Initializations of global variables and class variables should use constants or built-in functions only.
+<P>
+<P>
+Jim Roskind suggests the following order in each module:
+<P>
+<PRE>
+ exports (globals, functions, and classes that don't need imported base classes)
+ import statements
+ active code (including globals that are initialized from imported values).
+</PRE>
+Python's author doesn't like this approach much because the imports
+appear in a strange place, but has to admit that it works.
+<P>
+<P>
+<P>
+Matthias Urlichs recommends to restructure your code so that the recursive import is not necessary in the first place.
+<P>
+<P>
+These solutions are not mutually exclusive.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.037.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.037.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 06:52:51 2002 by
+<A HREF="mailto:smurf@noris.de">Matthias Urlichs</A>
+<P>
+
+<HR>
+<H2><A NAME="4.38">4.38. How do I copy an object in Python?</A></H2>
+Try copy.copy() or copy.deepcopy() for the general case. Not all objects can be copied, but most can.
+<P>
+Dictionaries have a copy method. Sequences can be copied by slicing:
+<PRE>
+ new_l = l[:]
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.038.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.038.htp">Log info</A>
+
+/ Last changed on Thu Mar 21 05:40:26 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="4.39">4.39. How to implement persistent objects in Python? (Persistent == automatically saved to and restored from disk.)</A></H2>
+The library module "pickle" now solves this in a very general way
+(though you still can't store things like open files, sockets or
+windows), and the library module "shelve" uses pickle and (g)dbm to
+create persistent mappings containing arbitrary Python objects.
+For possibly better performance also look for the latest version
+of the relatively recent cPickle module.
+<P>
+A more awkward way of doing things is to use pickle's little sister,
+marshal.  The marshal module provides very fast ways to store
+noncircular basic Python types to files and strings, and back again.
+Although marshal does not do fancy things like store instances or
+handle shared references properly, it does run extremely fast.  For
+example loading a half megabyte of data may take less than a
+third of a second (on some machines).  This often beats doing
+something more complex and general such as using gdbm with
+pickle/shelve.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.039.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.039.htp">Log info</A>
+
+/ Last changed on Sun Jun  8 22:59:00 1997 by
+<A HREF="mailto:david_ascher@brown.edu">David Ascher</A>
+<P>
+
+<HR>
+<H2><A NAME="4.40">4.40. I try to use __spam and I get an error about _SomeClassName__spam.</A></H2>
+Variables with double leading underscore are "mangled" to provide a
+simple but effective way to define class private variables.  See the
+chapter "New in Release 1.4" in the Python Tutorial.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.040.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.040.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.41">4.41. How do I delete a file? And other file questions.</A></H2>
+Use os.remove(filename) or os.unlink(filename); for documentation,
+see the posix section of the library manual.  They are the same,
+unlink() is simply the Unix name for this function.  In earlier
+versions of Python, only os.unlink() was available.
+<P>
+To remove a directory, use os.rmdir(); use os.mkdir() to create one.
+<P>
+To rename a file, use os.rename().
+<P>
+To truncate a file, open it using f = open(filename, "r+"), and use
+f.truncate(offset); offset defaults to the current seek position.
+(The "r+" mode opens the file for reading and writing.)
+There's also os.ftruncate(fd, offset) for files opened with os.open()
+-- for advanced Unix hacks only.
+<P>
+The shutil module also contains a number of functions to work on files
+including copyfile, copytree, and rmtree amongst others.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.041.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.041.htp">Log info</A>
+
+/ Last changed on Thu Dec 28 12:30:01 2000 by
+<A HREF="mailto:pbjorn@uswest.net">Bjorn Pettersen</A>
+<P>
+
+<HR>
+<H2><A NAME="4.42">4.42. How to modify urllib or httplib to support HTTP/1.1?</A></H2>
+Recent versions of Python (2.0 and onwards) support HTTP/1.1 natively.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.042.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.042.htp">Log info</A>
+
+/ Last changed on Tue Jan  2 02:56:56 2001 by
+<A HREF="mailto:moshez@zadka.site.co.il">Moshe Zadka</A>
+<P>
+
+<HR>
+<H2><A NAME="4.43">4.43. Unexplicable syntax errors in compile() or exec.</A></H2>
+When a statement suite (as opposed to an expression) is compiled by
+compile(), exec or execfile(), it <I>must</I> end in a newline.  In some
+cases, when the source ends in an indented block it appears that at
+least two newlines are required.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.043.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.043.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.44">4.44. How do I convert a string to a number?</A></H2>
+For integers, use the built-in int() function, e.g. int('144') == 144.  Similarly, long() converts from string to long integer, e.g. long('144') == 144L; and float() to floating-point, e.g. float('144') == 144.0.
+<P>
+Note that these are restricted to decimal interpretation, so 
+that int('0144') == 144 and int('0x144') raises ValueError. For Python
+2.0 int takes the base to convert from as a second optional argument, so
+int('0x144', 16) == 324.
+<P>
+For greater flexibility, or before Python 1.5, import the module 
+string and use the string.atoi() function for integers, 
+string.atol() for long integers, or string.atof() for 
+floating-point.  E.g., 
+string.atoi('100', 16) == string.atoi('0x100', 0) == 256.  
+See the library reference manual section for the string module for 
+more details.
+<P>
+While you could use the built-in function eval() instead of
+any of those, this is not recommended, because someone could pass you
+a Python expression that might have unwanted side effects (like
+reformatting your disk). It also has the effect of interpreting numbers
+as Python expressions, so that e.g. eval('09') gives a syntax error
+since Python regards numbers starting with '0' as octal (base 8).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.044.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.044.htp">Log info</A>
+
+/ Last changed on Thu Dec 28 12:37:34 2000 by
+<A HREF="mailto:pbjorn@uswest.net">Bjorn Pettersen</A>
+<P>
+
+<HR>
+<H2><A NAME="4.45">4.45. How do I convert a number to a string?</A></H2>
+To convert, e.g., the number 144 to the string '144', use the
+built-in function repr() or the backquote notation (these are
+equivalent).  If you want a hexadecimal or octal representation, use
+the built-in functions hex() or oct(), respectively.  For fancy
+formatting, use the % operator on strings, just like C printf formats,
+e.g. "%04d" % 144 yields '0144' and "%.3f" % (1/3.0) yields '0.333'.
+See the library reference manual for details.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.045.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.045.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="4.46">4.46. How do I copy a file?</A></H2>
+There's the shutil module which contains a copyfile()
+function that implements a copy loop;
+it isn't good enough for the Macintosh, though:
+it doesn't copy the resource fork and Finder info.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.046.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.046.htp">Log info</A>
+
+/ Last changed on Tue Jan  2 02:59:40 2001 by
+<A HREF="mailto:moshez@zadka.site.co.il">Moshe Zadka</A>
+<P>
+
+<HR>
+<H2><A NAME="4.47">4.47. How do I check if an object is an instance of a given class or of a subclass of it?</A></H2>
+If you are developing the classes from scratch it might be better to
+program in a more proper object-oriented style -- instead of doing a different
+thing based on class membership, why not use a method and define the
+method differently in different classes?
+<P>
+However, there are some legitimate situations
+where you need to test for class membership.
+<P>
+In Python 1.5, you can use the built-in function isinstance(obj, cls).
+<P>
+The following approaches can be used with earlier Python versions:
+<P>
+An unobvious method is to raise the object
+as an exception and to try to catch the exception with the class you're
+testing for:
+<P>
+<PRE>
+	def is_instance_of(the_instance, the_class):
+	    try:
+		raise the_instance
+	    except the_class:
+		return 1
+	    except:
+		return 0
+</PRE>
+This technique can be used to distinguish "subclassness"
+from a collection of classes as well
+<P>
+<PRE>
+                try:
+                              raise the_instance
+                except Audible:
+                              the_instance.play(largo)
+                except Visual:
+                              the_instance.display(gaudy)
+                except Olfactory:
+                              sniff(the_instance)
+                except:
+                              raise ValueError, "dunno what to do with this!"
+</PRE>
+This uses the fact that exception catching tests for class or subclass
+membership.
+<P>
+A different approach is to test for the presence of a class attribute that
+is presumably unique for the given class.  For instance:
+<P>
+<PRE>
+	class MyClass:
+	    ThisIsMyClass = 1
+	    ...
+</PRE>
+<PRE>
+	def is_a_MyClass(the_instance):
+	    return hasattr(the_instance, 'ThisIsMyClass')
+</PRE>
+This version is easier to inline, and probably faster (inlined it
+is definitely faster).  The disadvantage is that someone else could cheat:
+<P>
+<PRE>
+	class IntruderClass:
+	    ThisIsMyClass = 1    # Masquerade as MyClass
+	    ...
+</PRE>
+but this may be seen as a feature (anyway, there are plenty of other ways
+to cheat in Python).  Another disadvantage is that the class must be
+prepared for the membership test.  If you do not "control the
+source code" for the class it may not be advisable to modify the
+class to support testability.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.047.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.047.htp">Log info</A>
+
+/ Last changed on Fri Jan  2 15:16:04 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.48">4.48. What is delegation?</A></H2>
+Delegation refers to an object oriented technique Python programmers
+may implement with particular ease.  Consider the following:
+<P>
+<PRE>
+  from string import upper
+</PRE>
+<PRE>
+  class UpperOut:
+        def __init__(self, outfile):
+              self.__outfile = outfile
+        def write(self, str):
+              self.__outfile.write( upper(str) )
+        def __getattr__(self, name):
+              return getattr(self.__outfile, name)
+</PRE>
+Here the UpperOut class redefines the write method
+to convert the argument string to upper case before
+calling the underlying self.__outfile.write method, but
+all other methods are delegated to the underlying 
+self.__outfile object.  The delegation is accomplished
+via the "magic" __getattr__ method.  Please see the
+language reference for more information on the use
+of this method.
+<P>
+Note that for more general cases delegation can
+get trickier. Particularly when attributes must be set
+as well as gotten the class must define a __settattr__
+method too, and it must do so carefully.
+<P>
+The basic implementation of __setattr__ is roughly
+equivalent to the following:
+<P>
+<PRE>
+   class X:
+        ...
+        def __setattr__(self, name, value):
+             self.__dict__[name] = value
+        ...
+</PRE>
+Most __setattr__ implementations must modify
+self.__dict__ to store local state for self without
+causing an infinite recursion.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.048.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.048.htp">Log info</A>
+
+/ Last changed on Wed Aug 13 07:11:24 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.49">4.49. How do I test a Python program or component.</A></H2>
+We presume for the purposes of this question you are interested
+in standalone testing, rather than testing your components inside
+a testing framework. The best-known testing framework for Python
+is the PyUnit module, maintained at
+<P>
+<PRE>
+    <A HREF="http://pyunit.sourceforge.net">http://pyunit.sourceforge.net</A>/
+</PRE>
+For standalone testing, it helps to write the program so that
+it may be easily tested by using good modular design.
+In particular your program
+should have almost all functionality encapsulated in either functions
+or class methods -- and this sometimes has the surprising and
+delightful effect of making the program run faster (because
+local variable accesses are faster than global accesses).
+Furthermore the program should avoid depending on mutating
+global variables, since this makes testing much more difficult to do.
+<P>
+The "global main logic" of your program may be as simple
+as
+<P>
+<PRE>
+  if __name__=="__main__":
+       main_logic()
+</PRE>
+at the bottom of the main module of your program.
+<P>
+Once your program is organized as a tractable collection
+of functions and class behaviours you should write test
+functions that exercise the behaviours.  A test suite 
+can be associated with each module which automates
+a sequence of tests.  This sounds like a lot of work, but
+since Python is so terse and flexible it's surprisingly easy.
+You can make coding much more pleasant and fun by
+writing your test functions in parallel with the "production
+code", since this makes it easy to find bugs and even
+design flaws earlier.
+<P>
+"Support modules" that are not intended to be the main
+module of a program may include a "test script interpretation"
+which invokes a self test of the module.
+<P>
+<PRE>
+   if __name__ == "__main__":
+      self_test()
+</PRE>
+Even programs that interact with complex external
+interfaces may be tested when the external interfaces are
+unavailable by using "fake" interfaces implemented in
+Python.  For an example of a "fake" interface, the following
+class defines (part of) a "fake" file interface:
+<P>
+<PRE>
+ import string
+ testdata = "just a random sequence of characters"
+</PRE>
+<PRE>
+ class FakeInputFile:
+   data = testdata
+   position = 0
+   closed = 0
+</PRE>
+<PRE>
+   def read(self, n=None):
+       self.testclosed()
+       p = self.position
+       if n is None:
+          result= self.data[p:]
+       else:
+          result= self.data[p: p+n]
+       self.position = p + len(result)
+       return result
+</PRE>
+<PRE>
+   def seek(self, n, m=0):
+       self.testclosed()
+       last = len(self.data)
+       p = self.position
+       if m==0: 
+          final=n
+       elif m==1:
+          final=n+p
+       elif m==2:
+          final=len(self.data)+n
+       else:
+          raise ValueError, "bad m"
+       if final&lt;0:
+          raise IOError, "negative seek"
+       self.position = final
+</PRE>
+<PRE>
+   def isatty(self):
+       return 0
+</PRE>
+<PRE>
+   def tell(self):
+       return self.position
+</PRE>
+<PRE>
+   def close(self):
+       self.closed = 1
+</PRE>
+<PRE>
+   def testclosed(self):
+       if self.closed:
+          raise IOError, "file closed"
+</PRE>
+Try f=FakeInputFile() and test out its operations.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.049.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.049.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 01:12:10 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.50">4.50. My multidimensional list (array) is broken! What gives?</A></H2>
+You probably tried to make a multidimensional array like this.
+<P>
+<PRE>
+   A = [[None] * 2] * 3
+</PRE>
+This makes a list containing 3 references to the same list of length
+two.  Changes to one row will show in all rows, which is probably not
+what you want.  The following works much better:
+<P>
+<PRE>
+   A = [None]*3
+   for i in range(3):
+        A[i] = [None] * 2
+</PRE>
+This generates a list containing 3 different lists of length two.
+<P>
+If you feel weird, you can also do it in the following way:
+<P>
+<PRE>
+   w, h = 2, 3
+   A = map(lambda i,w=w: [None] * w, range(h))
+</PRE>
+For Python 2.0 the above can be spelled using a list comprehension:
+<P>
+<PRE>
+   w,h = 2,3
+   A = [ [None]*w for i in range(h) ]
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.050.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.050.htp">Log info</A>
+
+/ Last changed on Thu Dec 28 12:18:35 2000 by
+<A HREF="mailto:pbjorn@uswest.net">Bjorn Pettersen</A>
+<P>
+
+<HR>
+<H2><A NAME="4.51">4.51. I want to do a complicated sort: can you do a Schwartzian Transform in Python?</A></H2>
+Yes, and in Python you only have to write it once:
+<P>
+<PRE>
+ def st(List, Metric):
+     def pairing(element, M = Metric):
+           return (M(element), element)
+     paired = map(pairing, List)
+     paired.sort()
+     return map(stripit, paired)
+</PRE>
+<PRE>
+ def stripit(pair):
+     return pair[1]
+</PRE>
+This technique, attributed to Randal Schwartz, sorts the elements
+of a list by a metric which maps each element to its "sort value".
+For example, if L is a list of string then
+<P>
+<PRE>
+   import string
+   Usorted = st(L, string.upper)
+</PRE>
+<PRE>
+   def intfield(s):
+         return string.atoi( string.strip(s[10:15] ) )
+</PRE>
+<PRE>
+   Isorted = st(L, intfield)
+</PRE>
+Usorted gives the elements of L sorted as if they were upper
+case, and Isorted gives the elements of L sorted by the integer
+values that appear in the string slices starting at position 10
+and ending at position 15. In Python 2.0 this can be done more
+naturally with list comprehensions:
+<P>
+<PRE>
+  tmp1 = [ (x.upper(), x) for x in L ] # Schwartzian transform
+  tmp1.sort()
+  Usorted = [ x[1] for x in tmp1 ]
+</PRE>
+<PRE>
+  tmp2 = [ (int(s[10:15]), s) for s in L ] # Schwartzian transform
+  tmp2.sort()
+  Isorted = [ x[1] for x in tmp2 ]
+</PRE>
+<P>
+Note that Isorted may also be computed by
+<P>
+<PRE>
+   def Icmp(s1, s2):
+         return cmp( intfield(s1), intfield(s2) )
+</PRE>
+<PRE>
+   Isorted = L[:]
+   Isorted.sort(Icmp)
+</PRE>
+but since this method computes intfield many times for each
+element of L, it is slower than the Schwartzian Transform.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.051.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.051.htp">Log info</A>
+
+/ Last changed on Sat Jun  1 19:18:46 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.52">4.52. How to convert between tuples and lists?</A></H2>
+The function tuple(seq) converts any sequence into a tuple with
+the same items in the same order.
+For example, tuple([1, 2, 3]) yields (1, 2, 3) and tuple('abc')
+yields ('a', 'b', 'c').  If the argument is
+a tuple, it does not make a copy but returns the same object, so
+it is cheap to call tuple() when you aren't sure that an object
+is already a tuple.
+<P>
+The function list(seq) converts any sequence into a list with
+the same items in the same order.
+For example, list((1, 2, 3)) yields [1, 2, 3] and list('abc')
+yields ['a', 'b', 'c'].  If the argument is a list,
+it makes a copy just like seq[:] would.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.052.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.052.htp">Log info</A>
+
+/ Last changed on Sun Jun 14 14:18:53 1998 by
+<A HREF="mailto:tim_one@email.msn.com">Tim Peters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.53">4.53. Files retrieved with urllib contain leading garbage that looks like email headers.</A></H2>
+<I>Extremely</I> old  versions of Python supplied libraries which
+did not support HTTP/1.1; the vanilla httplib in Python 1.4
+only recognized HTTP/1.0.  In Python 2.0 full HTTP/1.1 support is included.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.053.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.053.htp">Log info</A>
+
+/ Last changed on Mon Jan  8 17:26:18 2001 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="4.54">4.54. How do I get a list of all instances of a given class?</A></H2>
+Python does not keep track of all instances of a class (or of a
+built-in type).
+<P>
+You can program the class's constructor to keep track of all
+instances, but unless you're very clever, this has the disadvantage
+that the instances never get deleted,because your list of all
+instances keeps a reference to them.
+<P>
+(The trick is to regularly inspect the reference counts of the
+instances you've retained, and if the reference count is below a
+certain level, remove it from the list.  Determining that level is
+tricky -- it's definitely larger than 1.)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.054.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.054.htp">Log info</A>
+
+/ Last changed on Tue May 27 23:52:16 1997 by
+<A HREF="mailto:guido@cnri.reston.va.us">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.55">4.55. A regular expression fails with regex.error: match failure.</A></H2>
+This is usually caused by too much backtracking; the regular
+expression engine has a fixed size stack which holds at most 4000
+backtrack points.  Every character matched by e.g. ".*" accounts for a
+backtrack point, so even a simple search like
+<P>
+<PRE>
+  regex.match('.*x',"x"*5000)
+</PRE>
+will fail.
+<P>
+This is fixed in the re module introduced with 
+Python 1.5; consult the Library Reference section on re for more information.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.055.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.055.htp">Log info</A>
+
+/ Last changed on Thu Jul 30 12:35:49 1998 by
+<A HREF="mailto:akuchlin@cnri.reston.va.us">A.M. Kuchling</A>
+<P>
+
+<HR>
+<H2><A NAME="4.56">4.56. I can't get signal handlers to work.</A></H2>
+The most common problem is that the signal handler is declared
+with the wrong argument list.  It is called as
+<P>
+<PRE>
+	handler(signum, frame)
+</PRE>
+so it should be declared with two arguments:
+<P>
+<PRE>
+	def handler(signum, frame):
+		...
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.056.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.056.htp">Log info</A>
+
+/ Last changed on Wed May 28 09:29:08 1997 by
+<A HREF="mailto:guido@cnri.reston.va.us">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.57">4.57. I can't use a global variable in a function? Help!</A></H2>
+Did you do something like this?
+<P>
+<PRE>
+   x = 1 # make a global
+</PRE>
+<PRE>
+   def f():
+         print x # try to print the global
+         ...
+         for j in range(100):
+              if q>3:
+                 x=4
+</PRE>
+Any variable assigned in a function is local to that function.
+unless it is specifically declared global. Since a value is bound
+to x as the last statement of the function body, the compiler
+assumes that x is local. Consequently the "print x"
+attempts to print an uninitialized local variable and will
+trigger a NameError.
+<P>
+In such cases the solution is to insert an explicit global
+declaration at the start of the function, making it
+<P>
+<P>
+<PRE>
+   def f():
+         global x
+         print x # try to print the global
+         ...
+         for j in range(100):
+              if q>3:
+                 x=4
+</PRE>
+<P>
+In this case, all references to x are interpreted as references
+to the x from the module namespace.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.057.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.057.htp">Log info</A>
+
+/ Last changed on Mon Feb 12 15:52:12 2001 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="4.58">4.58. What's a negative index? Why doesn't list.insert() use them?</A></H2>
+Python sequences are indexed with positive numbers and
+negative numbers.  For positive numbers 0 is the first index
+1 is the second index and so forth.  For negative indices -1
+is the last index and -2 is the pentultimate (next to last) index
+and so forth.  Think of seq[-n] as the same as seq[len(seq)-n].
+<P>
+Using negative indices can be very convenient.  For example
+if the string Line ends in a newline then Line[:-1] is all of Line except
+the newline.
+<P>
+Sadly the list builtin method L.insert does not observe negative
+indices.  This feature could be considered a mistake but since
+existing programs depend on this feature it may stay around 
+forever.  L.insert for negative indices inserts at the start of the
+list.  To get "proper" negative index behaviour use L[n:n] = [x]
+in place of the insert method.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.058.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.058.htp">Log info</A>
+
+/ Last changed on Wed Aug 13 07:03:18 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.59">4.59. How can I sort one list by values from another list?</A></H2>
+You can sort lists of  tuples.
+<P>
+<PRE>
+  >>> list1 = ["what", "I'm", "sorting", "by"]
+  >>> list2 = ["something", "else", "to", "sort"]
+  >>> pairs = map(None, list1, list2)
+  >>> pairs
+  [('what', 'something'), ("I'm", 'else'), ('sorting', 'to'), ('by', 'sort')]
+  >>> pairs.sort()
+  >>> pairs
+  [("I'm", 'else'), ('by', 'sort'), ('sorting', 'to'), ('what', 'something')]
+  >>> result = pairs[:]
+  >>> for i in xrange(len(result)): result[i] = result[i][1]
+  ...
+  >>> result
+  ['else', 'sort', 'to', 'something']
+</PRE>
+And if you didn't understand the question, please see the
+example above ;c).  Note that "I'm" sorts before "by" because
+uppercase "I" comes before lowercase "b" in the ascii order.
+Also see 4.51.
+<P>
+In Python 2.0 this can be done like:
+<P>
+<PRE>
+ >>> list1 = ["what", "I'm", "sorting", "by"]
+ >>> list2 = ["something", "else", "to", "sort"]
+ >>> pairs = zip(list1, list2)
+ >>> pairs
+ [('what', 'something'), ("I'm", 'else'), ('sorting', 'to'), ('by', 'sort')]
+ >>> pairs.sort()
+ >>> result = [ x[1] for x in pairs ]
+ >>> result
+ ['else', 'sort', 'to', 'something']
+</PRE>
+[Followup]
+<P>
+Someone asked, why not this for the last steps:
+<P>
+<PRE>
+  result = []
+  for p in pairs: result.append(p[1])
+</PRE>
+This is much more legible.  However, a quick test shows that
+it is almost twice as slow for long lists.  Why?  First of all,
+the append() operation has to reallocate memory, and while it
+uses some tricks to avoid doing that each time, it still has
+to do it occasionally, and apparently that costs quite a bit.
+Second, the expression "result.append" requires an extra
+attribute lookup.  The attribute lookup could be done away
+with by rewriting as follows:
+<P>
+<PRE>
+  result = []
+  append = result.append
+  for p in pairs: append(p[1])
+</PRE>
+which gains back some speed, but is still considerably slower
+than the original solution, and hardly less convoluted.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.059.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.059.htp">Log info</A>
+
+/ Last changed on Thu Dec 28 12:56:35 2000 by
+<A HREF="mailto:pbjorn@uswest.net">Bjorn Pettersen</A>
+<P>
+
+<HR>
+<H2><A NAME="4.60">4.60. Why doesn't dir() work on builtin types like files and lists?</A></H2>
+It does starting with Python 1.5.
+<P>
+Using 1.4, you can find out which methods a given object supports
+by looking at its __methods__ attribute:
+<P>
+<PRE>
+    >>> List = []
+    >>> List.__methods__
+    ['append', 'count', 'index', 'insert', 'remove', 'reverse', 'sort']
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.060.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.060.htp">Log info</A>
+
+/ Last changed on Thu Sep 16 14:56:42 1999 by
+<A HREF="mailto:skip@mojam.com">Skip Montanaro</A>
+<P>
+
+<HR>
+<H2><A NAME="4.61">4.61. How can I mimic CGI form submission (METHOD=POST)?</A></H2>
+I would like to retrieve web pages that are the result of POSTing a
+form. Is there existing code that would let me do this easily?
+<P>
+Yes. Here's a simple example that uses httplib.  
+<P>
+<PRE>
+    #!/usr/local/bin/python
+</PRE>
+<PRE>
+    import httplib, sys, time
+</PRE>
+<PRE>
+    ### build the query string
+    qs = "First=Josephine&amp;MI=Q&amp;Last=Public"
+</PRE>
+<PRE>
+    ### connect and send the server a path
+    httpobj = httplib.HTTP('www.some-server.out-there', 80)
+    httpobj.putrequest('POST', '/cgi-bin/some-cgi-script')
+    ### now generate the rest of the HTTP headers...
+    httpobj.putheader('Accept', '*/*')
+    httpobj.putheader('Connection', 'Keep-Alive')
+    httpobj.putheader('Content-type', 'application/x-www-form-urlencoded')
+    httpobj.putheader('Content-length', '%d' % len(qs))
+    httpobj.endheaders()
+    httpobj.send(qs)
+    ### find out what the server said in response...
+    reply, msg, hdrs = httpobj.getreply()
+    if reply != 200:
+	sys.stdout.write(httpobj.getfile().read())
+</PRE>
+Note that in general for "url encoded posts" (the default) query strings must be "quoted" to, for example, change equals signs and spaces to an encoded form when they occur in name or value.  Use urllib.quote to perform this quoting.  For example to send name="Guy Steele, Jr.":
+<P>
+<PRE>
+   >>> from urllib import quote
+   >>> x = quote("Guy Steele, Jr.")
+   >>> x
+   'Guy%20Steele,%20Jr.'
+   >>> query_string = "name="+x
+   >>> query_string
+   'name=Guy%20Steele,%20Jr.'
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.061.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.061.htp">Log info</A>
+
+/ Last changed on Mon Jun 21 03:47:07 1999 by
+<A HREF="mailto:tbryan@python.net">TAB</A>
+<P>
+
+<HR>
+<H2><A NAME="4.62">4.62. If my program crashes with a bsddb (or anydbm) database open, it gets corrupted. How come?</A></H2>
+Databases opened for write access with the bsddb module (and often by
+the anydbm module, since it will preferentially use bsddb) must
+explicitly be closed using the close method of the database.  The
+underlying libdb package caches database contents which need to be
+converted to on-disk form and written, unlike regular open files which
+already have the on-disk bits in the kernel's write buffer, where they
+can just be dumped by the kernel with the program exits.
+<P>
+If you have initialized a new bsddb database but not written anything to
+it before the program crashes, you will often wind up with a zero-length
+file and encounter an exception the next time the file is opened.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.062.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.062.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 01:15:01 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.63">4.63. How do I make a Python script executable on Unix?</A></H2>
+You need to do two things: the script file's mode must be executable
+(include the 'x' bit), and the first line must begin with #!
+followed by the pathname for the Python interpreter.
+<P>
+The first is done by executing 'chmod +x scriptfile' or perhaps
+'chmod 755 scriptfile'.
+<P>
+The second can be done in a number of way.  The most straightforward
+way is to write
+<P>
+<PRE>
+  #!/usr/local/bin/python
+</PRE>
+as the very first line of your file - or whatever the pathname is
+where the python interpreter is installed on your platform.
+<P>
+If you would like the script to be independent of where the python
+interpreter lives, you can use the "env" program.  On almost all
+platforms, the following will work, assuming the python interpreter
+is in a directory on the user's $PATH:
+<P>
+<PRE>
+  #! /usr/bin/env python
+</PRE>
+Note -- *don't* do this for CGI scripts.  The $PATH variable for
+CGI scripts is often very minimal, so you need to use the actual
+absolute pathname of the interpreter.
+<P>
+Occasionally, a user's environment is so full that the /usr/bin/env
+program fails; or there's no env program at all.
+In that case, you can try the following hack (due to Alex Rezinsky):
+<P>
+<PRE>
+  #! /bin/sh
+  """:"
+  exec python $0 ${1+"$@"}
+  """
+</PRE>
+The disadvantage is that this defines the script's __doc__ string.
+However, you can fix that by adding
+<P>
+<PRE>
+  __doc__ = """...Whatever..."""
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.063.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.063.htp">Log info</A>
+
+/ Last changed on Mon Jan 15 09:19:16 2001 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.64">4.64. How do you remove duplicates from a list?</A></H2>
+See the Python Cookbook for a long discussion of many cool ways:
+<P>
+<PRE>
+    <A HREF="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/52560">http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/52560</A>
+</PRE>
+Generally, if you don't mind reordering the List
+<P>
+<PRE>
+   if List:
+      List.sort()
+      last = List[-1]
+      for i in range(len(List)-2, -1, -1):
+          if last==List[i]: del List[i]
+          else: last=List[i]
+</PRE>
+If all elements of the list may be used as
+dictionary keys (ie, they are all hashable)
+this is often faster
+<P>
+<PRE>
+   d = {}
+   for x in List: d[x]=x
+   List = d.values()
+</PRE>
+Also, for extremely large lists you might
+consider more optimal alternatives to the first one.
+The second one is pretty good whenever it can
+be used.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.064.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.064.htp">Log info</A>
+
+/ Last changed on Fri May 24 21:56:33 2002 by
+<A HREF="mailto:tim.one@comcast.net">Tim Peters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.65">4.65. Are there any known year 2000 problems in Python?</A></H2>
+I am not aware of year 2000 deficiencies in Python 1.5.  Python does
+very few date calculations and for what it does, it relies on the C
+library functions.  Python generally represent times either as seconds
+since 1970 or as a tuple (year, month, day, ...) where the year is
+expressed with four digits, which makes Y2K bugs unlikely.  So as long
+as your C library is okay, Python should be okay.  Of course, I cannot
+vouch for <I>your</I> Python code!
+<P>
+Given the nature of freely available software, I have to add that this statement is not
+legally binding.  The Python copyright notice contains the following
+disclaimer:
+<P>
+<PRE>
+  STICHTING MATHEMATISCH CENTRUM AND CNRI DISCLAIM ALL WARRANTIES WITH
+  REGARD TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF
+  MERCHANTABILITY AND FITNESS, IN NO EVENT SHALL STICHTING MATHEMATISCH
+  CENTRUM OR CNRI BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL
+  DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
+  PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
+  TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
+  PERFORMANCE OF THIS SOFTWARE.
+</PRE>
+The good news is that <I>if</I> you encounter a problem, you have full
+source available to track it down and fix it!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.065.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.065.htp">Log info</A>
+
+/ Last changed on Fri Apr 10 14:59:31 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.66">4.66. I want a version of map that applies a method to a sequence of objects! Help!</A></H2>
+Get fancy!
+<P>
+<PRE>
+  def method_map(objects, method, arguments):
+       """method_map([a,b], "flog", (1,2)) gives [a.flog(1,2), b.flog(1,2)]"""
+       nobjects = len(objects)
+       methods = map(getattr, objects, [method]*nobjects)
+       return map(apply, methods, [arguments]*nobjects)
+</PRE>
+It's generally a good idea to get to know the mysteries of map and apply
+and getattr and the other dynamic features of Python.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.066.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.066.htp">Log info</A>
+
+/ Last changed on Mon Jan  5 14:21:14 1998 by
+<A HREF="mailto:aaron_watters@msn.com">Aaron Watters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.67">4.67. How do I generate random numbers in Python?</A></H2>
+The standard library module "random" implements a random number
+generator.  Usage is simple:
+<P>
+<PRE>
+    import random
+</PRE>
+<PRE>
+    random.random()
+</PRE>
+This returns a random floating point number in the range [0, 1).
+<P>
+There are also many other specialized generators in this module, such
+as
+<P>
+<PRE>
+    randrange(a, b) chooses an integer in the range [a, b)
+    uniform(a, b) chooses a floating point number in the range [a, b)
+    normalvariate(mean, sdev) sample from normal (Gaussian) distribution
+</PRE>
+Some higher-level functions operate on sequences directly, such as
+<P>
+<PRE>
+    choice(S) chooses random element from a given sequence
+    shuffle(L) shuffles a list in-place, i.e. permutes it randomly
+</PRE>
+There's also a class, Random, which you can instantiate
+to create independent multiple random number generators.
+<P>
+All this is documented in the library reference manual.  Note that
+the module "whrandom" is obsolete.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.067.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.067.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 01:16:51 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.68">4.68. How do I access the serial (RS232) port?</A></H2>
+There's a Windows serial communication module (for communication
+over RS 232 serial ports) at
+<P>
+<PRE>
+  <A HREF="ftp://ftp.python.org/pub/python/contrib/sio-151.zip">ftp://ftp.python.org/pub/python/contrib/sio-151.zip</A>
+  <A HREF="http://www.python.org/ftp/python/contrib/sio-151.zip">http://www.python.org/ftp/python/contrib/sio-151.zip</A>
+</PRE>
+For DOS, try Hans Nowak's Python-DX, which supports this, at:
+<P>
+<PRE>
+  <A HREF="http://www.cuci.nl/~hnowak">http://www.cuci.nl/~hnowak</A>/
+</PRE>
+For Unix, see a usenet post by Mitch Chapman:
+<P>
+<PRE>
+  <A HREF="http://groups.google.com/groups?selm=34A04430.CF9@ohioee.com">http://groups.google.com/groups?selm=34A04430.CF9@ohioee.com</A>
+</PRE>
+For Win32, POSIX(Linux, BSD, *), Jython, Chris':
+<P>
+<PRE>
+  <A HREF="http://pyserial.sourceforge.net">http://pyserial.sourceforge.net</A>
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.068.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.068.htp">Log info</A>
+
+/ Last changed on Tue Jul  2 21:11:07 2002 by
+<A HREF="mailto:cliechti@gmx.net">Chris Liechti</A>
+<P>
+
+<HR>
+<H2><A NAME="4.69">4.69. Images on Tk-Buttons don't work in Py15?</A></H2>
+They <I>do</I> work, but you must keep your own <I>reference</I> to the image 
+object now. More verbosely, you must make sure that, say, a global 
+variable or a class attribute refers to the object.
+<P>
+Quoting Fredrik Lundh from the mailinglist:
+<P>
+<PRE>
+  Well, the Tk button widget keeps a reference to the internal
+  photoimage object, but Tkinter does not.  So when the last
+  Python reference goes away, Tkinter tells Tk to release the
+  photoimage.  But since the image is in use by a widget, Tk
+  doesn't destroy it.  Not completely.  It just blanks the image,
+  making it completely transparent...
+</PRE>
+<PRE>
+  And yes, there was a bug in the keyword argument handling
+  in 1.4 that kept an extra reference around in some cases.  And
+  when Guido fixed that bug in 1.5, he broke quite a few Tkinter
+  programs...
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.069.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.069.htp">Log info</A>
+
+/ Last changed on Tue Feb  3 11:31:03 1998 by
+<A HREF="mailto:cjr@euronet.nl">Case Roole</A>
+<P>
+
+<HR>
+<H2><A NAME="4.70">4.70. Where is the math.py (socket.py, regex.py, etc.) source file?</A></H2>
+If you can't find a source file for a module it may be a builtin
+or dynamically loaded module implemented in C, C++ or other
+compiled language.  In this case you may not have the source
+file or it may be something like mathmodule.c, somewhere in
+a C source directory (not on the Python Path).
+<P>
+Fredrik Lundh (<A HREF="mailto:fredrik@pythonware.com">fredrik@pythonware.com</A>) explains (on the python-list):
+<P>
+There are (at least) three kinds of modules in Python:
+1) modules written in Python (.py);
+2) modules written in C and dynamically loaded (.dll, .pyd, .so, .sl, etc);
+3) modules written in C and linked with the interpreter; to get a list
+of these, type:
+<P>
+<PRE>
+    import sys
+    print sys.builtin_module_names
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.070.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.070.htp">Log info</A>
+
+/ Last changed on Tue Feb  3 13:55:33 1998 by
+<A HREF="mailto:aaron_watters@msn.com">Aaron Watters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.71">4.71. How do I send mail from a Python script?</A></H2>
+The standard library module smtplib does this.
+Here's a very simple interactive mail
+sender that uses it.  This method will work on any host that
+supports an SMTP listener.
+<P>
+<PRE>
+    import sys, smtplib
+</PRE>
+<PRE>
+    fromaddr = raw_input("From: ")
+    toaddrs  = raw_input("To: ").split(',')
+    print "Enter message, end with ^D:"
+    msg = ''
+    while 1:
+        line = sys.stdin.readline()
+        if not line:
+            break
+        msg = msg + line
+</PRE>
+<PRE>
+    # The actual mail send
+    server = smtplib.SMTP('localhost')
+    server.sendmail(fromaddr, toaddrs, msg)
+    server.quit()
+</PRE>
+If the local host doesn't have an SMTP listener, you need to find one. The simple method is to ask the user. Alternately, you can use the DNS system to find the mail gateway(s) responsible for the source address.
+<P>
+A Unix-only alternative uses sendmail.  The location of the
+sendmail program varies between systems; sometimes it is
+/usr/lib/sendmail, sometime /usr/sbin/sendmail.  The sendmail manual
+page will help you out.  Here's some sample code:
+<P>
+<PRE>
+  SENDMAIL = "/usr/sbin/sendmail" # sendmail location
+  import os
+  p = os.popen("%s -t -i" % SENDMAIL, "w")
+  p.write("To: <A HREF="mailto:cary@ratatosk.org">cary@ratatosk.org</A>\n")
+  p.write("Subject: test\n")
+  p.write("\n") # blank line separating headers from body
+  p.write("Some text\n")
+  p.write("some more text\n")
+  sts = p.close()
+  if sts != 0:
+      print "Sendmail exit status", sts
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.071.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.071.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 07:05:12 2002 by
+<A HREF="mailto:smurf@noris.de">Matthias Urlichs</A>
+<P>
+
+<HR>
+<H2><A NAME="4.72">4.72. How do I avoid blocking in connect() of a socket?</A></H2>
+The select module is widely known to help with asynchronous
+I/O on sockets once they are connected.  However, it is less
+than common knowledge how to avoid blocking on the initial
+connect() call.  Jeremy Hylton has the following advice (slightly
+edited):
+<P>
+To prevent the TCP connect from blocking, you can set the socket to 
+non-blocking mode.  Then when you do the connect(), you will either 
+connect immediately (unlikely) or get an exception that contains the 
+errno.  errno.EINPROGRESS indicates that the connection is in 
+progress, but hasn't finished yet.  Different OSes will return 
+different errnos, so you're going to have to check.  I can tell you 
+that different versions of Solaris return different errno values. 
+<P>
+In Python 1.5 and later, you can use connect_ex() to avoid
+creating an exception.  It will just return the errno value. 
+<P>
+To poll, you can call connect_ex() again later -- 0 or errno.EISCONN 
+indicate that you're connected -- or you can pass this socket to 
+select (checking to see if it is writeable).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.072.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.072.htp">Log info</A>
+
+/ Last changed on Tue Feb 24 21:30:45 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.73">4.73. How do I specify hexadecimal and octal integers?</A></H2>
+To specify an octal digit, precede the octal value with a zero.  For example,
+to set the variable "a" to the octal value "10" (8 in decimal), type:
+<P>
+<PRE>
+    >>> a = 010
+</PRE>
+To verify that this works, you can type "a" and hit enter while in the
+interpreter, which will cause Python to spit out the current value of "a"
+in decimal:
+<P>
+<PRE>
+    >>> a
+    8
+</PRE>
+Hexadecimal is just as easy.  Simply precede the hexadecimal number with a
+zero, and then a lower or uppercase "x".  Hexadecimal digits can be specified
+in lower or uppercase.  For example, in the Python interpreter:
+<P>
+<PRE>
+    >>> a = 0xa5
+    >>> a
+    165
+    >>> b = 0XB2
+    >>> b
+    178
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.073.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.073.htp">Log info</A>
+
+/ Last changed on Tue Mar  3 12:53:16 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.74">4.74. How to get a single keypress at a time?</A></H2>
+For Windows, see question 8.2.  Here is an answer for Unix (see also 4.94).
+<P>
+There are several solutions; some involve using curses, which is a
+pretty big thing to learn.  Here's a solution without curses, due
+to Andrew Kuchling (adapted from code to do a PGP-style
+randomness pool):
+<P>
+<PRE>
+        import termios, sys, os
+        fd = sys.stdin.fileno()
+        old = termios.tcgetattr(fd)
+        new = termios.tcgetattr(fd)
+        new[3] = new[3] &amp; ~termios.ICANON &amp; ~termios.ECHO
+        new[6][termios.VMIN] = 1
+        new[6][termios.VTIME] = 0
+        termios.tcsetattr(fd, termios.TCSANOW, new)
+        s = ''    # We'll save the characters typed and add them to the pool.
+        try:
+            while 1:
+                c = os.read(fd, 1)
+                print "Got character", `c`
+                s = s+c
+        finally:
+            termios.tcsetattr(fd, termios.TCSAFLUSH, old)
+</PRE>
+You need the termios module for any of this to work, and I've only
+tried it on Linux, though it should work elsewhere.  It turns off
+stdin's echoing and disables canonical mode, and then reads a
+character at a time from stdin, noting the time after each keystroke.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.074.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.074.htp">Log info</A>
+
+/ Last changed on Thu Oct 24 00:36:56 2002 by
+<A HREF="mailto:cliechti@gmx.net">chris</A>
+<P>
+
+<HR>
+<H2><A NAME="4.75">4.75. How can I overload constructors (or methods) in Python?</A></H2>
+(This actually applies to all methods, but somehow the question
+usually comes up first in the context of constructors.)
+<P>
+Where in C++ you'd write
+<P>
+<PRE>
+    class C {
+        C() { cout &lt;&lt; "No arguments\n"; }
+        C(int i) { cout &lt;&lt; "Argument is " &lt;&lt; i &lt;&lt; "\n"; }
+    }
+</PRE>
+in Python you have to write a single constructor that catches all
+cases using default arguments.  For example:
+<P>
+<PRE>
+    class C:
+        def __init__(self, i=None):
+            if i is None:
+                print "No arguments"
+            else:
+                print "Argument is", i
+</PRE>
+This is not entirely equivalent, but close enough in practice.
+<P>
+You could also try a variable-length argument list, e.g.
+<P>
+<PRE>
+        def __init__(self, *args):
+            ....
+</PRE>
+The same approach works for all method definitions.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.075.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.075.htp">Log info</A>
+
+/ Last changed on Mon Apr 20 11:55:55 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.76">4.76. How do I pass keyword arguments from one method to another?</A></H2>
+Use apply.  For example:
+<P>
+<PRE>
+    class Account:
+        def __init__(self, **kw):
+            self.accountType = kw.get('accountType')
+            self.balance = kw.get('balance')
+</PRE>
+<PRE>
+    class CheckingAccount(Account):
+        def __init__(self, **kw):
+            kw['accountType'] = 'checking'
+            apply(Account.__init__, (self,), kw)
+</PRE>
+<PRE>
+    myAccount = CheckingAccount(balance=100.00)
+</PRE>
+In Python 2.0 you can call it directly using the new ** syntax:
+<P>
+<PRE>
+    class CheckingAccount(Account):
+        def __init__(self, **kw):
+            kw['accountType'] = 'checking'
+            Account.__init__(self, **kw)
+</PRE>
+or more generally:
+<P>
+<PRE>
+ >>> def f(x, *y, **z):
+ ...  print x,y,z
+ ...
+ >>> Y = [1,2,3]
+ >>> Z = {'foo':3,'bar':None}
+ >>> f('hello', *Y, **Z)
+ hello (1, 2, 3) {'foo': 3, 'bar': None}
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.076.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.076.htp">Log info</A>
+
+/ Last changed on Thu Dec 28 13:04:01 2000 by
+<A HREF="mailto:pbjorn@uswest.net">Bjorn Pettersen</A>
+<P>
+
+<HR>
+<H2><A NAME="4.77">4.77. What module should I use to help with generating HTML?</A></H2>
+Check out HTMLgen written by Robin Friedrich. It's a class library
+of objects corresponding to all the HTML 3.2 markup tags. It's used
+when you are writing in Python and wish to synthesize HTML pages for
+generating a web or for CGI forms, etc. 
+<P>
+It can be found in the FTP contrib area on python.org or on the 
+Starship. Use the search engines there to locate the latest version.
+<P>
+It might also be useful to consider DocumentTemplate, which offers clear 
+separation between Python code and HTML code.  DocumentTemplate is part 
+of the Bobo objects publishing system (http:/www.digicool.com/releases) 
+but can be used independantly of course!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.077.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.077.htp">Log info</A>
+
+/ Last changed on Fri Aug 28 09:54:58 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.78">4.78. How do I create documentation from doc strings?</A></H2>
+Use gendoc, by Daniel Larson.  See
+<P>
+<A HREF="http://starship.python.net/crew/danilo">http://starship.python.net/crew/danilo</A>/
+<P>
+It can create HTML from the doc strings in your Python source code.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.078.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.078.htp">Log info</A>
+
+/ Last changed on Mon Oct  7 17:15:51 2002 by
+<A HREF="mailto:phil@dspfactory.com">Phil Rittenhouse</A>
+<P>
+
+<HR>
+<H2><A NAME="4.79">4.79. How do I read (or write) binary data?</A></H2>
+For complex data formats, it's best to use
+use the struct module.  It's documented in the library reference.
+It allows you to take a string read from a file containing binary
+data (usually numbers) and convert it to Python objects; and vice
+versa.
+<P>
+For example, the following code reads two 2-byte integers
+and one 4-byte integer in big-endian format from a file:
+<P>
+<PRE>
+  import struct
+</PRE>
+<PRE>
+  f = open(filename, "rb")  # Open in binary mode for portability
+  s = f.read(8)
+  x, y, z = struct.unpack(">hhl", s)
+</PRE>
+The '>' in the format string forces bin-endian data; the letter
+'h' reads one "short integer" (2 bytes), and 'l' reads one
+"long integer" (4 bytes) from the string.
+<P>
+For data that is more regular (e.g. a homogeneous list of ints or
+floats), you can also use the array module, also documented
+in the library reference.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.079.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.079.htp">Log info</A>
+
+/ Last changed on Wed Oct  7 09:16:45 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.80">4.80. I can't get key bindings to work in Tkinter</A></H2>
+An oft-heard complaint is that event handlers bound to events
+with the bind() method don't get handled even when the appropriate
+key is pressed.
+<P>
+The most common cause is that the widget to which the binding applies
+doesn't have "keyboard focus".  Check out the Tk documentation
+for the focus command.  Usually a widget is given the keyboard
+focus by clicking in it (but not for labels; see the taketocus
+option).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.080.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.080.htp">Log info</A>
+
+/ Last changed on Fri Jun 12 09:37:33 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.81">4.81. &quot;import crypt&quot; fails</A></H2>
+[Unix]
+<P>
+Starting with Python 1.5, the crypt module is disabled by default.
+In order to enable it, you must go into the Python source tree and
+edit the file Modules/Setup to enable it (remove a '#' sign in
+front of the line starting with '#crypt').  Then rebuild.
+You may also have to add the string '-lcrypt' to that same line.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.081.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.081.htp">Log info</A>
+
+/ Last changed on Wed Aug  5 08:57:09 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.82">4.82. Are there coding standards or a style guide for Python programs?</A></H2>
+Yes, Guido has written the "Python Style Guide".  See
+<A HREF="http://www.python.org/doc/essays/styleguide.html">http://www.python.org/doc/essays/styleguide.html</A>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.082.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.082.htp">Log info</A>
+
+/ Last changed on Tue Sep 29 09:50:27 1998 by
+<A HREF="mailto:vanandel@ucar.edu">Joseph VanAndel</A>
+<P>
+
+<HR>
+<H2><A NAME="4.83">4.83. How do I freeze Tkinter applications?</A></H2>
+Freeze is a tool to create stand-alone applications (see 4.28).
+<P>
+When freezing Tkinter applications, the applications will not be
+truly stand-alone, as the application will still need the tcl and
+tk libraries.
+<P>
+One solution is to ship the application with the tcl and tk libraries,
+and point to them at run-time using the TCL_LIBRARY and TK_LIBRARY
+environment variables.
+<P>
+To get truly stand-alone applications, the Tcl scripts that form
+the library have to be integrated into the application as well. One
+tool supporting that is SAM (stand-alone modules), which is part
+of the Tix distribution (<A HREF="http://tix.mne.com">http://tix.mne.com</A>). Build Tix with SAM 
+enabled, perform the appropriate call to Tclsam_init etc inside 
+Python's Modules/tkappinit.c, and link with libtclsam
+and libtksam (you might include the Tix libraries as well).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.083.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.083.htp">Log info</A>
+
+/ Last changed on Wed Jan 20 17:35:01 1999 by
+<A HREF="mailto:loewis@informatik.hu-berlin.de">Martin v. Lwis</A>
+<P>
+
+<HR>
+<H2><A NAME="4.84">4.84. How do I create static class data and static class methods?</A></H2>
+[Tim Peters, <A HREF="mailto:tim_one@email.msn.com">tim_one@email.msn.com</A>]
+<P>
+Static data (in the sense of C++ or Java) is easy; static methods (again in the sense of C++ or Java) are not supported directly.
+<P>
+STATIC DATA
+<P>
+For example,
+<P>
+<PRE>
+    class C:
+        count = 0   # number of times C.__init__ called
+</PRE>
+<PRE>
+        def __init__(self):
+            C.count = C.count + 1
+</PRE>
+<PRE>
+        def getcount(self):
+            return C.count  # or return self.count
+</PRE>
+c.count also refers to C.count for any c such that isinstance(c, C) holds, unless overridden by c itself or by some class on the base-class search path from c.__class__ back to C.
+<P>
+Caution:  within a method of C,
+<P>
+<PRE>
+    self.count = 42
+</PRE>
+creates a new and unrelated instance vrbl named "count" in self's own dict.  So rebinding of a class-static data name needs the
+<P>
+<PRE>
+    C.count = 314
+</PRE>
+form whether inside a method or not.
+<P>
+<P>
+STATIC METHODS
+<P>
+Static methods (as opposed to static data) are unnatural in Python, because
+<P>
+<PRE>
+    C.getcount
+</PRE>
+returns an unbound method object, which can't be invoked without supplying an instance of C as the first argument.
+<P>
+The intended way to get the effect of a static method is via a module-level function:
+<P>
+<PRE>
+    def getcount():
+        return C.count
+</PRE>
+If your code is structured so as to define one class (or tightly related class hierarchy) per module, this supplies the desired encapsulation.
+<P>
+Several tortured schemes for faking static methods can be found by searching DejaNews.  Most people feel such cures are worse than the disease.  Perhaps the least obnoxious is due to Pekka Pessi (mailto:<A HREF="mailto:ppessi@hut.fi">ppessi@hut.fi</A>):
+<P>
+<PRE>
+    # helper class to disguise function objects
+    class _static:
+        def __init__(self, f):
+            self.__call__ = f
+</PRE>
+<PRE>
+    class C:
+        count = 0
+</PRE>
+<PRE>
+        def __init__(self):
+            C.count = C.count + 1
+</PRE>
+<PRE>
+        def getcount():
+            return C.count
+        getcount = _static(getcount)
+</PRE>
+<PRE>
+        def sum(x, y):
+            return x + y
+        sum = _static(sum)
+</PRE>
+<PRE>
+    C(); C()
+    c = C()
+    print C.getcount()  # prints 3
+    print c.getcount()  # prints 3
+    print C.sum(27, 15) # prints 42
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.084.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.084.htp">Log info</A>
+
+/ Last changed on Thu Jan 21 21:35:38 1999 by
+<A HREF="mailto:tim_one@email.msn.com">Tim Peters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.85">4.85. __import__('x.y.z') returns &lt;module 'x'&gt;; how do I get z?</A></H2>
+Try
+<P>
+<PRE>
+   __import__('x.y.z').y.z
+</PRE>
+For more realistic situations, you may have to do something like
+<P>
+<PRE>
+   m = __import__(s)
+   for i in string.split(s, ".")[1:]:
+       m = getattr(m, i)
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.085.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.085.htp">Log info</A>
+
+/ Last changed on Thu Jan 28 11:01:43 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.86">4.86. Basic thread wisdom</A></H2>
+Please note that there is no way to take advantage of
+multiprocessor hardware using the Python thread model. The interpreter
+uses a global interpreter lock (GIL),
+which does not allow multiple threads to be concurrently active.
+<P>
+If you write a simple test program like this:
+<P>
+<PRE>
+  import thread
+  def run(name, n):
+      for i in range(n): print name, i
+  for i in range(10):
+      thread.start_new(run, (i, 100))
+</PRE>
+none of the threads seem to run!  The reason is that as soon as
+the main thread exits, all threads are killed.
+<P>
+A simple fix is to add a sleep to the end of the program,
+sufficiently long for all threads to finish:
+<P>
+<PRE>
+  import thread, time
+  def run(name, n):
+      for i in range(n): print name, i
+  for i in range(10):
+      thread.start_new(run, (i, 100))
+  time.sleep(10) # &lt;----------------------------!
+</PRE>
+But now (on many platforms) the threads don't run in parallel,
+but appear to run sequentially, one at a time!  The reason is
+that the OS thread scheduler doesn't start a new thread until
+the previous thread is blocked.
+<P>
+A simple fix is to add a tiny sleep to the start of the run
+function:
+<P>
+<PRE>
+  import thread, time
+  def run(name, n):
+      time.sleep(0.001) # &lt;---------------------!
+      for i in range(n): print name, i
+  for i in range(10):
+      thread.start_new(run, (i, 100))
+  time.sleep(10)
+</PRE>
+Some more hints:
+<P>
+Instead of using a time.sleep() call at the end, it's
+better to use some kind of semaphore mechanism.  One idea is to
+use a the Queue module to create a queue object, let each thread
+append a token to the queue when it finishes, and let the main
+thread read as many tokens from the queue as there are threads.
+<P>
+Use the threading module instead of the thread module.  It's part
+of Python since version 1.5.1.  It takes care of all these details,
+and has many other nice features too!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.086.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.086.htp">Log info</A>
+
+/ Last changed on Fri Feb  7 16:21:55 2003 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.87">4.87. Why doesn't closing sys.stdout (stdin, stderr) really close it?</A></H2>
+Python file objects are a high-level layer of abstraction on top of C streams, which in turn are a medium-level layer of abstraction on top of (among other things) low-level C file descriptors.
+<P>
+For most file objects f you create in Python via the builtin "open" function, f.close() marks the Python file object as being closed from Python's point of view, and also arranges to close the underlying C stream.  This happens automatically too, in f's destructor, when f becomes garbage.
+<P>
+But stdin, stdout and stderr are treated specially by Python, because of the special status also given to them by C:  doing
+<P>
+<PRE>
+    sys.stdout.close() # ditto for stdin and stderr
+</PRE>
+marks the Python-level file object as being closed, but does <I>not</I> close the associated C stream (provided sys.stdout is still bound to its default value, which is the stream C also calls "stdout").
+<P>
+To close the underlying C stream for one of these three, you should first be sure that's what you really want to do (e.g., you may confuse the heck out of extension modules trying to do I/O).  If it is, use os.close:
+<P>
+<PRE>
+    os.close(0)   # close C's stdin stream
+    os.close(1)   # close C's stdout stream
+    os.close(2)   # close C's stderr stream
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.087.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.087.htp">Log info</A>
+
+/ Last changed on Sat Apr 17 02:22:35 1999 by
+<A HREF="mailto:tim_one@email.msn.com">Tim Peters</A>
+<P>
+
+<HR>
+<H2><A NAME="4.88">4.88. What kinds of global value mutation are thread-safe?</A></H2>
+[adapted from c.l.py responses by Gordon McMillan &amp; GvR]
+<P>
+A global interpreter lock (GIL) is used internally to ensure that only one thread runs in the Python VM at a time.  In general, Python offers to switch among threads only between bytecode instructions (how frequently it offers to switch can be set via sys.setcheckinterval).  Each bytecode instruction-- and all the C implementation code reached from it --is therefore atomic.
+<P>
+In theory, this means an exact accounting requires an exact understanding of the PVM bytecode implementation.  In practice, it means that operations on shared vrbls of builtin data types (ints, lists, dicts, etc) that "look atomic" really are.
+<P>
+For example, these are atomic (L, L1, L2 are lists, D, D1, D2 are dicts, x, y
+are objects, i, j are ints):
+<P>
+<PRE>
+    L.append(x)
+    L1.extend(L2)
+    x = L[i]
+    x = L.pop()
+    L1[i:j] = L2
+    L.sort()
+    x = y
+    x.field = y
+    D[x] = y
+    D1.update(D2)
+    D.keys()
+</PRE>
+These aren't:
+<P>
+<PRE>
+    i = i+1
+    L.append(L[-1])
+    L[i] = L[j]
+    D[x] = D[x] + 1
+</PRE>
+Note: operations that replace other objects may invoke those other objects' __del__ method when their reference count reaches zero, and that can affect things.  This is especially true for the mass updates to dictionaries and lists.  When in doubt, use a mutex!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.088.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.088.htp">Log info</A>
+
+/ Last changed on Fri Feb  7 16:21:03 2003 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.89">4.89. How do I modify a string in place?</A></H2>
+Strings are immutable (see question 6.2) so you cannot modify a string
+directly.  If you need an object with this ability, try converting the
+string to a list or take a look at the array module.
+<P>
+<PRE>
+    >>> s = "Hello, world"
+    >>> a = list(s)
+    >>> print a
+    ['H', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd']
+    >>> a[7:] = list("there!")
+    >>> import string
+    >>> print string.join(a, '')
+    'Hello, there!'
+</PRE>
+<PRE>
+    >>> import array
+    >>> a = array.array('c', s)
+    >>> print a
+    array('c', 'Hello, world')
+    >>> a[0] = 'y' ; print a
+    array('c', 'yello world')
+    >>> a.tostring()
+    'yello, world'
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.089.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.089.htp">Log info</A>
+
+/ Last changed on Tue May 18 01:22:47 1999 by
+<A HREF="mailto:dalke@bioreason.com">Andrew Dalke</A>
+<P>
+
+<HR>
+<H2><A NAME="4.90">4.90. How to pass on keyword/optional parameters/arguments</A></H2>
+Q: How can I pass on optional or keyword parameters from one function to another?
+<P>
+<PRE>
+	def f1(a, *b, **c):
+		...
+</PRE>
+A: In Python 2.0 and above:
+<P>
+<PRE>
+	def f2(x, *y, **z):
+		...
+		z['width']='14.3c'
+		...
+		f1(x, *y, **z)
+</PRE>
+<PRE>
+   Note: y can be any sequence (e.g., list or tuple) and z must be a dict.
+</PRE>
+<P>
+A: For versions prior to 2.0, use 'apply', like:
+<P>
+<PRE>
+	def f2(x, *y, **z):
+		...
+		z['width']='14.3c'
+		...
+		apply(f1, (x,)+y, z)
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.090.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.090.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 07:20:56 2002 by
+<A HREF="mailto:smurf@noris.de">Matthias Urlichs</A>
+<P>
+
+<HR>
+<H2><A NAME="4.91">4.91. How can I get a dictionary to display its keys in a consistent order?</A></H2>
+In general, dictionaries store their keys in an unpredictable order,
+so the display order of a dictionary's elements will be similarly
+unpredictable.
+(See 
+<a href="http://www.python.org/doc/FAQ.html#6.12">Question 6.12</a>
+to understand why this is so.)
+<P>
+This can be frustrating if you want to save a printable version to a 
+file, make some changes and then compare it with some other printed
+dictionary.  If you have such needs you can subclass UserDict.UserDict
+to create a SortedDict class that prints itself in a predictable order.
+Here's one simpleminded implementation of such a class:
+<P>
+<PRE>
+  import UserDict, string
+</PRE>
+<PRE>
+  class SortedDict(UserDict.UserDict):
+    def __repr__(self):
+      result = []
+      append = result.append
+      keys = self.data.keys()
+      keys.sort()
+      for k in keys:
+        append("%s: %s" % (`k`, `self.data[k]`))
+      return "{%s}" % string.join(result, ", ")
+</PRE>
+<PRE>
+    ___str__ = __repr__
+</PRE>
+<P>
+This will work for many common situations you might encounter, though
+it's far from a perfect solution. (It won't have any effect on the
+pprint module and does not transparently handle values that are or
+contain dictionaries.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.091.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.091.htp">Log info</A>
+
+/ Last changed on Thu Sep 16 17:31:06 1999 by
+<A HREF="mailto:skip@mojam.com">Skip Montanaro</A>
+<P>
+
+<HR>
+<H2><A NAME="4.92">4.92. Is there a Python tutorial?</A></H2>
+Yes.  See question 1.20 at 
+<A HREF="http://www.python.org/doc/FAQ.html#1.20">http://www.python.org/doc/FAQ.html#1.20</A>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.092.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.092.htp">Log info</A>
+
+/ Last changed on Sat Dec  4 16:04:00 1999 by
+<A HREF="mailto:tbryan@python.net">TAB</A>
+<P>
+
+<HR>
+<H2><A NAME="4.93">4.93. Deleted</A></H2>
+See 4.28
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.093.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.093.htp">Log info</A>
+
+/ Last changed on Tue May 28 20:40:37 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="4.94">4.94. How do I get a single keypress without blocking?</A></H2>
+There are several solutions; some involve using curses, which is a
+pretty big thing to learn.  Here's a solution without curses. (see also 4.74, for Windows, see question 8.2)
+<P>
+<PRE>
+  import termios, fcntl, sys, os
+  fd = sys.stdin.fileno()
+</PRE>
+<PRE>
+  oldterm = termios.tcgetattr(fd)
+  newattr = termios.tcgetattr(fd)
+  newattr[3] = newattr[3] &amp; ~termios.ICANON &amp; ~termios.ECHO
+  termios.tcsetattr(fd, termios.TCSANOW, newattr)
+</PRE>
+<PRE>
+  oldflags = fcntl.fcntl(fd, fcntl.F_GETFL)
+  fcntl.fcntl(fd, fcntl.F_SETFL, oldflags | os.O_NONBLOCK)
+</PRE>
+<PRE>
+  try:
+      while 1:
+          try:
+              c = sys.stdin.read(1)
+              print "Got character", `c`
+          except IOError: pass
+  finally:
+      termios.tcsetattr(fd, termios.TCSAFLUSH, oldterm)
+      fcntl.fcntl(fd, fcntl.F_SETFL, oldflags)
+</PRE>
+<P>
+You need the termios and the fcntl module for any of this to work, 
+and I've only tried it on Linux, though it should work elsewhere. 
+<P>
+In this code, characters are read and printed one at a time.
+<P>
+termios.tcsetattr() turns off stdin's echoing and disables canonical
+mode.  fcntl.fnctl() is used to obtain stdin's file descriptor flags
+and modify them for non-blocking mode.  Since reading stdin when it is
+empty results in an IOError, this error is caught and ignored.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.094.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.094.htp">Log info</A>
+
+/ Last changed on Thu Oct 24 00:39:06 2002 by
+<A HREF="mailto:cliechti@gmx.net">chris</A>
+<P>
+
+<HR>
+<H2><A NAME="4.95">4.95. Is there an equivalent to Perl chomp()? (Remove trailing newline from string)</A></H2>
+There are two partial substitutes. If you want to remove all trailing
+whitespace, use the method string.rstrip(). Otherwise, if there is only
+one line in the string, use string.splitlines()[0].
+<P>
+<PRE>
+ -----------------------------------------------------------------------
+</PRE>
+<PRE>
+ rstrip() is too greedy, it strips all trailing white spaces.
+ splitlines() takes ControlM as line boundary.
+ Consider these strings as input:
+   "python python    \r\n"
+   "python\rpython\r\n"
+   "python python   \r\r\r\n"
+ The results from rstrip()/splitlines() are perhaps not what we want.
+</PRE>
+<PRE>
+ It seems re can perform this task.
+</PRE>
+<P>
+<PRE>
+ #!/usr/bin/python 
+ # requires python2                                                             
+</PRE>
+<PRE>
+ import re, os, StringIO
+</PRE>
+<PRE>
+ lines=StringIO.StringIO(
+   "The Python Programming Language\r\n"
+   "The Python Programming Language \r \r \r\r\n"
+   "The\rProgramming\rLanguage\r\n"
+   "The\rProgramming\rLanguage\r\r\r\r\n"
+   "The\r\rProgramming\r\rLanguage\r\r\r\r\n"
+ )
+</PRE>
+<PRE>
+ ln=re.compile("(?:[\r]?\n|\r)$") # dos:\r\n, unix:\n, mac:\r, others: unknown
+ # os.linesep does not work if someone ftps(in binary mode) a dos/mac text file
+ # to your unix box
+ #ln=re.compile(os.linesep + "$")
+</PRE>
+<PRE>
+ while 1:
+   s=lines.readline()
+   if not s: break
+   print "1.(%s)" % `s.rstrip()`
+   print "2.(%s)" % `ln.sub( "", s, 1)`
+   print "3.(%s)" % `s.splitlines()[0]`
+   print "4.(%s)" % `s.splitlines()`
+   print
+</PRE>
+<PRE>
+ lines.close()
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.095.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.095.htp">Log info</A>
+
+/ Last changed on Wed Aug  8 09:51:34 2001 by
+<A HREF="mailto:serpent@ms5.hinet.net">Crystal</A>
+<P>
+
+<HR>
+<H2><A NAME="4.96">4.96. Why is join() a string method when I'm really joining the elements of a (list, tuple, sequence)?</A></H2>
+Strings became much more like other standard types starting in release 1.6, when methods were added which give the same functionality that has always been available using the functions of the string module.  These new methods have been widely accepted, but the one which appears to make (some) programmers feel uncomfortable is:
+<P>
+<PRE>
+    ", ".join(['1', '2', '4', '8', '16'])
+</PRE>
+which gives the result
+<P>
+<PRE>
+    "1, 2, 4, 8, 16"
+</PRE>
+There are two usual arguments against this usage.
+<P>
+The first runs along the lines of: "It looks really ugly using a method of a string literal (string constant)", to which the answer is that it might, but a string literal is just a fixed value. If the methods are to be allowed on names bound to strings there is no logical reason to make them unavailable on literals. Get over it!
+<P>
+The second objection is typically cast as: "I am really telling a sequence to join its members together with a string constant". Sadly, you aren't. For some reason there seems to be much less difficulty with having split() as a string method, since in that case it is easy to see that
+<P>
+<PRE>
+    "1, 2, 4, 8, 16".split(", ")
+</PRE>
+is an instruction to a string literal to return the substrings delimited by the given separator (or, by default, arbitrary runs of white space). In this case a Unicode string returns a list of Unicode strings, an ASCII string returns a list of ASCII strings, and everyone is happy.
+<P>
+join() is a string method because in using it you are telling the separator string to iterate over an arbitrary sequence, forming string representations of each of the elements, and inserting itself between the elements' representations.  This method can be used with any argument which obeys the rules for sequence objects, inluding any new classes you might define yourself.
+<P>
+Because this is a string method it can work for Unicode strings as well as plain ASCII strings. If join() were a method of the sequence types then the sequence types would have to decide which type of string to return depending on the type of the separator.
+<P>
+If none of these arguments persuade you, then for the moment you can continue to use the join() function from the string module, which allows you to write
+<P>
+<PRE>
+    string.join(['1', '2', '4', '8', '16'], ", ")
+</PRE>
+You will just have to try and forget that the string module actually uses the syntax you are compaining about to implement the syntax you prefer!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.096.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.096.htp">Log info</A>
+
+/ Last changed on Fri Aug  2 15:51:58 2002 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="4.97">4.97. How can my code discover the name of an object?</A></H2>
+Generally speaking, it can't, because objects don't really have names. The assignment statement does not store the assigned value in the name but a reference to it. Essentially, assignment creates a binding of a name to a value. The same is true of <I>def</I> and <I>class</I> statements, but in that case the value is a callable. Consider the following code:
+<P>
+<PRE>
+    class A:
+        pass
+</PRE>
+<PRE>
+    B = A
+</PRE>
+<PRE>
+    a = B()
+    b = a
+    print b
+    &lt;__main__.A instance at 016D07CC&gt;
+    print a
+    &lt;__main__.A instance at 016D07CC&gt;
+</PRE>
+<P>
+Arguably the class has a name: even though it is bound to two names and invoked through the name B the created instance is still reported as an instance of class A. However, it is impossible to say whether the instance's name is a or b, since both names are bound to the same value.
+<P>
+Generally speaking it should not be necessary for your code to "know the names" of particular values. Unless you are deliberately writing introspective programs, this is usually an indication that a change of approach might be beneficial.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.097.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.097.htp">Log info</A>
+
+/ Last changed on Thu Mar  8 03:53:39 2001 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="4.98">4.98. Why are floating point calculations so inaccurate?</A></H2>
+The development version of the Python Tutorial now contains an Appendix with more info:
+<PRE>
+    <A HREF="http://www.python.org/doc/current/tut/node14.html">http://www.python.org/doc/current/tut/node14.html</A>
+</PRE>
+People are often very surprised by results like this:
+<P>
+<PRE>
+ >>> 1.2-1.0
+ 0.199999999999999996
+</PRE>
+And think it is a bug in Python. It's not. It's a problem caused by
+the internal representation of a floating point number. A floating point
+number is stored as a fixed number of binary digits.
+<P>
+In decimal math, there are many numbers that can't be represented
+with a fixed number of decimal digits, i.e.
+1/3 = 0.3333333333.......
+<P>
+In the binary case, 1/2 = 0.1, 1/4 = 0.01, 1/8 = 0.001, etc. There are 
+a lot of numbers that can't be represented. The digits are cut off at
+some point.
+<P>
+Since Python 1.6, a floating point's repr() function prints as many
+digits are necessary to make eval(repr(f)) == f true for any float f.
+The str() function prints the more sensible number that was probably
+intended:
+<P>
+<PRE>
+ >>> 0.2
+ 0.20000000000000001
+ >>> print 0.2
+ 0.2
+</PRE>
+Again, this has nothing to do with Python, but with the way the
+underlying C platform handles floating points, and ultimately with
+the inaccuracy you'll always have when writing down numbers of fixed
+number of digit strings.
+<P>
+One of the consequences of this is that it is dangerous to compare 
+the result of some computation to a float with == ! 
+Tiny inaccuracies may mean that == fails.
+<P>
+Instead try something like this:
+<P>
+<PRE>
+ epsilon = 0.0000000000001 # Tiny allowed error
+ expected_result = 0.4
+</PRE>
+<PRE>
+ if expected_result-epsilon &lt;= computation() &lt;= expected_result+epsilon:
+    ...
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.098.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.098.htp">Log info</A>
+
+/ Last changed on Mon Apr  1 22:18:47 2002 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="4.99">4.99. I tried to open Berkeley DB file, but bsddb produces bsddb.error: (22, 'Invalid argument'). Help! How can I restore my data?</A></H2>
+Don't panic! Your data are probably intact. The most frequent cause
+for the error is that you tried to open an earlier Berkeley DB file
+with a later version of the Berkeley DB library.
+<P>
+Many Linux systems now have all three versions of Berkeley DB
+available.  If you are migrating from version 1 to a newer version use
+db_dump185 to dump a plain text version of the database.
+If you are migrating from version 2 to version 3 use db2_dump to create
+a plain text version of the database.  In either case, use db_load to
+create a new native database for the latest version installed on your
+computer.  If you have version 3 of Berkeley DB installed, you should
+be able to use db2_load to create a native version 2 database.
+<P>
+You should probably move away from Berkeley DB version 1 files because
+the hash file code contains known bugs that can corrupt your data.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.099.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.099.htp">Log info</A>
+
+/ Last changed on Wed Aug 29 16:04:29 2001 by
+<A HREF="mailto:skip@pobox.com">Skip Montanaro</A>
+<P>
+
+<HR>
+<H2><A NAME="4.100">4.100. What are the &quot;best practices&quot; for using import in a module?</A></H2>
+First, the standard modules are great.  Use them!  The standard Python library is large and varied.  Using modules can save you time and effort and will reduce maintainenance cost of your code.  (Other programs are dedicated to supporting and fixing bugs in the standard Python modules.  Coworkers may also be familiar with themodules that you use, reducing the amount of time it takes them to understand your code.)
+<P>
+The rest of this answer is largely a matter of personal preference, but here's what some newsgroup posters said (thanks to all who responded)
+<P>
+In general, don't use 
+<PRE>
+ from modulename import *
+</PRE>
+Doing so clutters the importer's namespace.  Some avoid this idiom even with the few modules that were designed to be imported in this manner.  (Modules designed in this manner include Tkinter, thread, and wxPython.)
+<P>
+Import modules at the top of a file, one module per line.  Doing so makes it clear what other modules your code requires and avoids questions of whether the module name is in scope.  Using one import per line makes it easy to add and delete module imports.
+<P>
+Move imports into a local scope (such as at the top of a function definition) if there are a lot of imports, and you're trying to avoid the cost (lots of initialization time) of many imports.  This technique is especially helpful if many of the imports are unnecessary depending on how the program executes.  You may also want to move imports into a function if the modules are only ever used in that function.  Note that loading a module the first time may be expensive (because of the one time initialization of the module) but that loading a module multiple times is virtually free (a couple of dictionary lookups).  Even if the module name has gone out of scope, the module is probably available in sys.modules.  Thus, there isn't really anything wrong with putting no imports at the module level (if they aren't needed) and putting all of the imports at the function level.  
+<P>
+It is sometimes necessary to move imports to a function or class to avoid problems with circular imports.  Gordon says:
+<PRE>
+ Circular imports are fine where both modules use the "import &lt;module&gt;"
+ form of import. They fail when the 2nd module wants to grab a name
+ out of the first ("from module import name") and the import is at
+ the top level. That's because names in the 1st are not yet available,
+ (the first module is busy importing the 2nd).  
+</PRE>
+In this case, if the 2nd module is only used in one function, then the  import can easily be moved into that function.  By the time the import is called, the first module will have finished initializing, and the second module can do its import.
+<P>
+It may also be necessary to move imports out of the top level of code 
+if some of the modules are platform-specific.  In that case, it may not even be possible to import all of the modules at the top of the file.  In this case, importing the correct modules in the corresponding platform-specific code is a good option.   
+<P>
+If only instances of a specific class uses a module, then it is reasonable to import the module in the class's __init__ method and then assign the module to an instance variable so that the module is always available (via that instance variable) during the life of the object.  Note that to delay an import until the class is instantiated, the import must be inside a method.  Putting the import inside the class but outside of any method still causes the import to occur when the module is initialized.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.100.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.100.htp">Log info</A>
+
+/ Last changed on Sat Aug  4 04:44:47 2001 by
+<A HREF="mailto:tbryan@python.net">TAB</A>
+<P>
+
+<HR>
+<H2><A NAME="4.101">4.101. Is there a tool to help find bugs or perform static analysis?</A></H2>
+Yes.  PyChecker is a static analysis tool for finding bugs 
+in Python source code as well as warning about code complexity 
+and style.
+<P>
+You can get PyChecker from:  <A HREF="http://pychecker.sf.net">http://pychecker.sf.net</A>.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.101.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.101.htp">Log info</A>
+
+/ Last changed on Fri Aug 10 15:42:11 2001 by
+<A HREF="mailto:neal@metaslash.com">Neal</A>
+<P>
+
+<HR>
+<H2><A NAME="4.102">4.102. UnicodeError: ASCII [decoding,encoding] error: ordinal not in range(128)</A></H2>
+This error indicates that your Python installation can handle
+only 7-bit ASCII strings.  There are a couple ways to fix or
+workaround the problem.
+<P>
+If your programs must handle data in arbitary character set encodings, the environment the application runs in will generally identify the encoding of the data it is handing you.  You need to convert the input to Unicode data using that encoding.  For instance, a program that handles email or web input will typically find character set encoding information in Content-Type headers.  This can then be used to properly convert input data to Unicode. Assuming the string referred to by "value" is encoded as UTF-8:
+<P>
+<PRE>
+    value = unicode(value, "utf-8")
+</PRE>
+will return a Unicode object.  If the data is not correctly encoded as UTF-8, the above call will raise a UnicodeError.
+<P>
+If you only want strings coverted to Unicode which have non-ASCII data, you can try converting them first assuming an ASCII encoding, and then generate Unicode objects if that fails:
+<P>
+<PRE>
+    try:
+        x = unicode(value, "ascii")
+    except UnicodeError:
+        value = unicode(value, "utf-8")
+    else:
+        # value was valid ASCII data
+        pass
+</PRE>
+<P>
+If you normally use a character set encoding other than US-ASCII and only need to handle data in that encoding, the simplest way to fix the problem may be simply to set the encoding in sitecustomize.py. The following code is just a modified version of the encoding setup code from site.py with the relevant lines uncommented.
+<P>
+<PRE>
+    # Set the string encoding used by the Unicode implementation.
+    # The default is 'ascii'
+    encoding = "ascii" # &lt;= CHANGE THIS if you wish
+</PRE>
+<PRE>
+    # Enable to support locale aware default string encodings.
+    import locale
+    loc = locale.getdefaultlocale()
+    if loc[1]:
+        encoding = loc[1]
+    if encoding != "ascii":
+        import sys
+        sys.setdefaultencoding(encoding)
+</PRE>
+<P>
+Also note that on Windows, there is an encoding known as "mbcs", which uses an encoding specific to your current locale.  In many cases, and particularly when working with COM, this may be an appropriate default encoding to use.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.102.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.102.htp">Log info</A>
+
+/ Last changed on Sat Apr 13 04:45:41 2002 by
+<A HREF="mailto:skip@pobox.com">Skip Montanaro</A>
+<P>
+
+<HR>
+<H2><A NAME="4.103">4.103. Using strings to call functions/methods</A></H2>
+There are various techniques:
+<P>
+* Use a dictionary pre-loaded with strings and functions.  The primary
+advantage of this technique is that the strings do not need to match the
+names of the functions.  This is also the primary technique used to
+emulate a case construct:
+<P>
+<PRE>
+    def a():
+        pass
+</PRE>
+<PRE>
+    def b():
+        pass
+</PRE>
+<PRE>
+    dispatch = {'go': a, 'stop': b}  # Note lack of parens for funcs
+</PRE>
+<PRE>
+    dispatch[get_input()]()  # Note trailing parens to call function
+</PRE>
+* Use the built-in function getattr():
+<P>
+<PRE>
+    import foo
+    getattr(foo, 'bar')()
+</PRE>
+Note that getattr() works on any object, including classes, class
+instances, modules, and so on.
+<P>
+This is used in several places in the standard library, like
+this:
+<P>
+<PRE>
+    class Foo:
+        def do_foo(self):
+            ...
+</PRE>
+<PRE>
+        def do_bar(self):
+            ...
+</PRE>
+<PRE>
+     f = getattr(foo_instance, 'do_' + opname)
+     f()
+</PRE>
+<P>
+* Use locals() or eval() to resolve the function name:
+<P>
+def myFunc():
+<PRE>
+    print "hello"
+</PRE>
+fname = "myFunc"
+<P>
+f = locals()[fname]
+f()
+<P>
+f = eval(fname)
+f()
+<P>
+Note: Using eval() can be dangerous. If you don't have absolute control
+over the contents of the string, all sorts of things could happen...
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.103.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.103.htp">Log info</A>
+
+/ Last changed on Thu Mar 21 08:14:58 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="4.104">4.104. How fast are exceptions?</A></H2>
+A try/except block is extremely efficient.  Actually executing an
+exception is expensive.  In older versions of Python (prior to 2.0), it
+was common to code this idiom:
+<P>
+<PRE>
+    try:
+        value = dict[key]
+    except KeyError:
+        dict[key] = getvalue(key)
+        value = dict[key]
+</PRE>
+This idiom only made sense when you expected the dict to have the key
+95% of the time or more; other times, you coded it like this:
+<P>
+<PRE>
+    if dict.has_key(key):
+        value = dict[key]
+    else:
+        dict[key] = getvalue(key)
+        value = dict[key]
+</PRE>
+In Python 2.0 and higher, of course, you can code this as
+<P>
+<PRE>
+    value = dict.setdefault(key, getvalue(key))
+</PRE>
+However this evaluates getvalue(key) always, regardless of whether it's needed or not.  So if it's slow or has a side effect you should use one of the above variants.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.104.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.104.htp">Log info</A>
+
+/ Last changed on Mon Dec  9 10:12:30 2002 by
+<A HREF="mailto:yeti@physics.muni.cz">Yeti</A>
+<P>
+
+<HR>
+<H2><A NAME="4.105">4.105. Sharing global variables across modules</A></H2>
+The canonical way to share information across modules within a single
+program is to create a special module (often called config or cfg).
+Just import the config module in all modules of your application; the
+module then becomes available as a global name.  Because there is only
+one instance of each module, any changes made to the module object get
+reflected everywhere.  For example:
+<P>
+config.py:
+<P>
+<PRE>
+    pass
+</PRE>
+mod.py:
+<P>
+<PRE>
+    import config
+    config.x = 1
+</PRE>
+main.py:
+<P>
+<PRE>
+    import config
+    import mod
+    print config.x
+</PRE>
+Note that using a module is also the basis for implementing the
+Singleton design pattern, for the same reason.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.105.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.105.htp">Log info</A>
+
+/ Last changed on Tue Apr 23 23:07:19 2002 by
+<A HREF="mailto:aahz@pythoncraft.com">Aahz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.106">4.106. Why is cPickle so slow?</A></H2>
+Use the binary option.  We'd like to make that the default, but it would
+break backward compatibility:
+<P>
+<PRE>
+    largeString = 'z' * (100 * 1024)
+    myPickle = cPickle.dumps(largeString, 1)
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.106.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.106.htp">Log info</A>
+
+/ Last changed on Thu Aug 22 19:54:25 2002 by
+<A HREF="mailto:aahz@pythoncraft.com">Aahz</A>
+<P>
+
+<HR>
+<H2><A NAME="4.107">4.107. When importing module XXX, why do I get &quot;undefined symbol: PyUnicodeUCS2_...&quot; ?</A></H2>
+You are using a version of Python that uses a 4-byte representation for
+Unicode characters, but the extension module you are importing (possibly
+indirectly) was compiled using a Python that uses a 2-byte representation
+for Unicode characters (the default).
+<P>
+If instead the name of the undefined symbol starts with PyUnicodeUCS4_,
+the problem is the same by the relationship is reversed:  Python was
+built using 2-byte Unicode characters, and the extension module was
+compiled using a Python with 4-byte Unicode characters.
+<P>
+This can easily occur when using pre-built extension packages.  RedHat
+Linux 7.x, in particular, provides a "python2" binary that is compiled
+with 4-byte Unicode.  This only causes the link failure if the extension
+uses any of the PyUnicode_*() functions.  It is also a problem if if an
+extension uses any of the Unicode-related format specifiers for
+Py_BuildValue (or similar) or parameter-specifications for
+PyArg_ParseTuple().
+<P>
+You can check the size of the Unicode character a Python interpreter is
+using by checking the value of sys.maxunicode:
+<P>
+<PRE>
+  >>> import sys
+  >>> if sys.maxunicode > 65535:
+  ...     print 'UCS4 build'
+  ... else:
+  ...     print 'UCS2 build'
+</PRE>
+The only way to solve this problem is to use extension modules compiled
+with a Python binary built using the same size for Unicode characters.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.107.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.107.htp">Log info</A>
+
+/ Last changed on Tue Aug 27 15:00:17 2002 by
+<A HREF="mailto:fdrake@acm.org">Fred Drake</A>
+<P>
+
+<HR>
+<H2><A NAME="4.108">4.108. How do I create a .pyc file?</A></H2>
+QUESTION:
+<P>
+I have a module and I wish to generate a .pyc file.  
+How do I do it? Everything I read says that generation of a .pyc file is 
+"automatic", but I'm not getting anywhere.  
+<P>
+<P>
+ANSWER: 
+<P>
+When a module is imported for the first time (or when the source is more
+recent than the current compiled file) a .pyc file containing the compiled code should be created in the
+same directory as the .py file.
+<P>
+One reason that a .pyc file may not be created is permissions problems with the directory. This can happen, for example, if you develop as one user but run as another, such as if you are testing with a web server.
+<P>
+However, in most cases, that's not the problem.
+<P>
+Creation of a .pyc file is "automatic" if you are importing a module and Python has the
+ability (permissions, free space, etc...) to write the compiled module
+back to the directory. But note that running Python on a top level script is not considered an
+import and so no .pyc will be created automatically.  For example, if you have a top-level module abc.py that imports another module xyz.py, when you run abc, xyz.pyc will be created since xyz is imported, but no abc.pyc file will be created since abc isn't imported.
+<P>
+If you need to create abc.pyc -- that is, to create a .pyc file for a
+module that is not imported -- you can.  (Look up
+the py_compile and compileall modules in the Library Reference.) 
+<P>
+You can manually compile any module using the "py_compile" module.  One
+way is to use the compile() function in that module interactively:
+<P>
+<PRE>
+    >>> import py_compile
+    >>> py_compile.compile('abc.py')
+</PRE>
+This will write the .pyc to the same location as abc.py (or you
+can override that with the optional parameter cfile).
+<P>
+You can also automatically compile all files in a directory or
+directories using the "compileall" module, which can also be run
+straight from the command line.
+<P>
+You can do it from the shell (or DOS) prompt by entering:
+<PRE>
+       python compile.py abc.py
+</PRE>
+or 
+<PRE>
+       python compile.py *
+</PRE>
+Or you can write a script to do it on a list of filenames that you enter.
+<P>
+<PRE>
+     import sys
+     from py_compile import compile
+</PRE>
+<PRE>
+     if len(sys.argv) &lt;= 1:
+        sys.exit(1)
+</PRE>
+<PRE>
+     for file in sys.argv[1:]:
+        compile(file)
+</PRE>
+ACKNOWLEDGMENTS:
+<P>
+Steve Holden, David Bolen, Rich Somerfield,  Oleg Broytmann, Steve Ferg
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq04.108.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq04.108.htp">Log info</A>
+
+/ Last changed on Wed Feb 12 15:58:25 2003 by
+<A HREF="mailto:steve@ferg.org">Stephen Ferg</A>
+<P>
+
+<HR>
+<H1>5. Extending Python</H1>
+
+<HR>
+<H2><A NAME="5.1">5.1. Can I create my own functions in C?</A></H2>
+Yes, you can create built-in modules containing functions,
+variables, exceptions and even new types in C.  This is explained in
+the document "Extending and Embedding the Python Interpreter" (<A HREF="http://www.python.org/doc/current/ext/ext.html">http://www.python.org/doc/current/ext/ext.html</A>).  Also read the chapter
+on dynamic loading.
+<P>
+There's more information on this in each of the Python books:
+Programming Python, Internet Programming with Python, and Das Python-Buch
+(in German).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.001.htp">Log info</A>
+
+/ Last changed on Mon Dec 10 05:18:57 2001 by
+<A HREF="mailto:fdrake@acm.org">Fred L. Drake, Jr.</A>
+<P>
+
+<HR>
+<H2><A NAME="5.2">5.2. Can I create my own functions in C++?</A></H2>
+Yes, using the C-compatibility features found in C++.  Basically
+you place extern "C" { ... } around the Python include files and put
+extern "C" before each function that is going to be called by the
+Python interpreter.  Global or static C++ objects with constructors
+are probably not a good idea.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.002.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="5.3">5.3. How can I execute arbitrary Python statements from C?</A></H2>
+The highest-level function to do this is PyRun_SimpleString() which takes
+a single string argument which is executed in the context of module
+__main__ and returns 0 for success and -1 when an exception occurred
+(including SyntaxError).  If you want more control, use PyRun_String();
+see the source for PyRun_SimpleString() in Python/pythonrun.c.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.003.htp">Log info</A>
+
+/ Last changed on Fri May 23 20:08:14 1997 by
+<A HREF="mailto:billtut@microsoft.com">Bill Tutt</A>
+<P>
+
+<HR>
+<H2><A NAME="5.4">5.4. How can I evaluate an arbitrary Python expression from C?</A></H2>
+Call the function PyRun_String() from the previous question with the
+start symbol eval_input (Py_eval_input starting with 1.5a1); it 
+parses an expression, evaluates it and returns its value.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.004.htp">Log info</A>
+
+/ Last changed on Wed May 21 22:23:18 1997 by
+<A HREF="mailto:david_ascher@brown.edu">David Ascher</A>
+<P>
+
+<HR>
+<H2><A NAME="5.5">5.5. How do I extract C values from a Python object?</A></H2>
+That depends on the object's type.  If it's a tuple,
+PyTupleSize(o) returns its length and PyTuple_GetItem(o, i)
+returns its i'th item; similar for lists with PyListSize(o)
+and PyList_GetItem(o, i).  For strings, PyString_Size(o) returns
+its length and PyString_AsString(o) a pointer to its value
+(note that Python strings may contain null bytes so strlen()
+is not safe).  To test which type an object is, first make sure
+it isn't NULL, and then use PyString_Check(o), PyTuple_Check(o),
+PyList_Check(o), etc.
+<P>
+There is also a high-level API to Python objects which is
+provided by the so-called 'abstract' interface -- read
+Include/abstract.h for further details.  It allows for example 
+interfacing with any kind of Python sequence (e.g. lists and tuples)
+using calls like PySequence_Length(), PySequence_GetItem(), etc.)
+as well as many other useful protocols.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.005.htp">Log info</A>
+
+/ Last changed on Wed May 21 22:34:20 1997 by
+<A HREF="mailto:david_ascher@brown.edu">David Ascher</A>
+<P>
+
+<HR>
+<H2><A NAME="5.6">5.6. How do I use Py_BuildValue() to create a tuple of arbitrary length?</A></H2>
+You can't.  Use t = PyTuple_New(n) instead, and fill it with
+objects using PyTuple_SetItem(t, i, o) -- note that this "eats" a
+reference count of o.  Similar for lists with PyList_New(n) and
+PyList_SetItem(l, i, o).  Note that you <I>must</I> set all the tuple items to
+some value before you pass the tuple to Python code --
+PyTuple_New(n) initializes them to NULL, which isn't a valid Python
+value.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.006.htp">Log info</A>
+
+/ Last changed on Thu Jul 31 18:15:29 1997 by
+<A HREF="mailto:guido@python.org">Guido van Rossum</A>
+<P>
+
+<HR>
+<H2><A NAME="5.7">5.7. How do I call an object's method from C?</A></H2>
+The PyObject_CallMethod() function can be used to call an arbitrary
+method of an object.  The parameters are the object, the name of the
+method to call, a format string like that used with Py_BuildValue(), and the argument values:
+<P>
+<PRE>
+    PyObject *
+    PyObject_CallMethod(PyObject *object, char *method_name,
+                        char *arg_format, ...);
+</PRE>
+This works for any object that has methods -- whether built-in or
+user-defined.  You are responsible for eventually DECREF'ing the
+return value.
+<P>
+To call, e.g., a file object's "seek" method with arguments 10, 0
+(assuming the file object pointer is "f"):
+<P>
+<PRE>
+        res = PyObject_CallMethod(f, "seek", "(ii)", 10, 0);
+        if (res == NULL) {
+                ... an exception occurred ...
+        }
+        else {
+                Py_DECREF(res);
+        }
+</PRE>
+Note that since PyObject_CallObject() <I>always</I> wants a tuple for the
+argument list, to call a function without arguments, pass "()" for the
+format, and to call a function with one argument, surround the argument
+in parentheses, e.g. "(i)".
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.007.htp">Log info</A>
+
+/ Last changed on Thu Jun  6 16:15:46 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="5.8">5.8. How do I catch the output from PyErr_Print() (or anything that prints to stdout/stderr)?</A></H2>
+(Due to Mark Hammond):
+<P>
+In Python code, define an object that supports the "write()" method.
+Redirect sys.stdout and sys.stderr to this object.
+Call print_error, or just allow the standard traceback mechanism to
+work. Then, the output will go wherever your write() method sends it.
+<P>
+The easiest way to do this is to use the StringIO class in the standard
+library.
+<P>
+Sample code and use for catching stdout:
+<PRE>
+	>>> class StdoutCatcher:
+	...  def __init__(self):
+	...   self.data = ''
+	...  def write(self, stuff):
+	...   self.data = self.data + stuff
+	...  
+	>>> import sys
+	>>> sys.stdout = StdoutCatcher()
+	>>> print 'foo'
+	>>> print 'hello world!'
+	>>> sys.stderr.write(sys.stdout.data)
+	foo
+	hello world!
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.008.htp">Log info</A>
+
+/ Last changed on Wed Dec 16 18:34:25 1998 by
+<A HREF="mailto:richard@bofh.asn.au">Richard Jones</A>
+<P>
+
+<HR>
+<H2><A NAME="5.9">5.9. How do I access a module written in Python from C?</A></H2>
+You can get a pointer to the module object as follows:
+<P>
+<PRE>
+        module = PyImport_ImportModule("&lt;modulename&gt;");
+</PRE>
+If the module hasn't been imported yet (i.e. it is not yet present in
+sys.modules), this initializes the module; otherwise it simply returns
+the value of sys.modules["&lt;modulename&gt;"].  Note that it doesn't enter
+the module into any namespace -- it only ensures it has been
+initialized and is stored in sys.modules.
+<P>
+You can then access the module's attributes (i.e. any name defined in
+the module) as follows:
+<P>
+<PRE>
+        attr = PyObject_GetAttrString(module, "&lt;attrname&gt;");
+</PRE>
+Calling PyObject_SetAttrString(), to assign to variables in the module, also works.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.009.htp">Log info</A>
+
+/ Last changed on Wed May 21 22:56:40 1997 by
+<A HREF="mailto:david_ascher@brown.edu">david ascher</A>
+<P>
+
+<HR>
+<H2><A NAME="5.10">5.10. How do I interface to C++ objects from Python?</A></H2>
+Depending on your requirements, there are many approaches.  To do
+this manually, begin by reading the "Extending and Embedding" document
+(Doc/ext.tex, see also <A HREF="http://www.python.org/doc">http://www.python.org/doc</A>/).  Realize
+that for the Python run-time system, there isn't a whole lot of
+difference between C and C++ -- so the strategy to build a new Python
+type around a C structure (pointer) type will also work for C++
+objects.
+<P>
+A useful automated approach (which also works for C) is SWIG:
+<A HREF="http://www.swig.org">http://www.swig.org</A>/.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.010.htp">Log info</A>
+
+/ Last changed on Fri Oct 15 05:14:01 1999 by
+<A HREF="mailto:sjoerd.mullender@oratrix.nl">Sjoerd Mullender</A>
+<P>
+
+<HR>
+<H2><A NAME="5.11">5.11. mSQLmodule (or other old module) won't build with Python 1.5 (or later)</A></H2>
+Since python-1.4 "Python.h" will have the file includes needed in an 
+extension module.
+Backward compatibility is dropped after version 1.4 and therefore 
+mSQLmodule.c will not build as "allobjects.h" cannot be found. 
+The following change in mSQLmodule.c is harmless when building it with
+1.4 and necessary when doing so for later python versions:
+<P>
+Remove lines:
+<P>
+<PRE>
+	#include "allobjects.h"
+	#include "modsupport.h"
+</PRE>
+And insert instead:
+<P>
+<PRE>
+	#include "Python.h"
+</PRE>
+You may also need to add
+<P>
+<PRE>
+                #include "rename2.h"
+</PRE>
+if the module uses "old names".
+<P>
+This may happen with other ancient python modules as well,
+and the same fix applies.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.011.htp">Log info</A>
+
+/ Last changed on Sun Dec 21 02:03:35 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="5.12">5.12. I added a module using the Setup file and the make fails! Huh?</A></H2>
+Setup must end in a newline, if there is no newline there it gets
+very sad.  Aside from this possibility, maybe you have other
+non-Python-specific linkage problems.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.012.htp">Log info</A>
+
+/ Last changed on Tue Jun 24 15:54:01 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="5.13">5.13. I want to compile a Python module on my Red Hat Linux system, but some files are missing.</A></H2>
+Red Hat's RPM for Python doesn't include the 
+/usr/lib/python1.x/config/ directory, which contains various files required 
+for compiling Python extensions.
+Install the python-devel RPM to get the necessary files.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.013.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.013.htp">Log info</A>
+
+/ Last changed on Tue Jan 26 13:44:04 1999 by
+<A HREF="mailto:akuchling@acm.org">A.M. Kuchling</A>
+<P>
+
+<HR>
+<H2><A NAME="5.14">5.14. What does &quot;SystemError: _PyImport_FixupExtension: module yourmodule not loaded&quot; mean?</A></H2>
+This means that you have created an extension module named "yourmodule", but your module init function does not initialize with that name.
+<P>
+Every module init function will have a line similar to:
+<P>
+<PRE>
+  module = Py_InitModule("yourmodule", yourmodule_functions);
+</PRE>
+If the string passed to this function is not the same name as your extenion module, the SystemError will be raised.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.014.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.014.htp">Log info</A>
+
+/ Last changed on Thu Mar 25 07:16:08 1999 by
+<A HREF="mailto:mhammond@skippinet.com.au">Mark Hammond</A>
+<P>
+
+<HR>
+<H2><A NAME="5.15">5.15. How to tell &quot;incomplete input&quot; from &quot;invalid input&quot;?</A></H2>
+Sometimes you want to emulate the Python interactive interpreter's
+behavior, where it gives you a continuation prompt when the input
+is incomplete (e.g. you typed the start of an "if" statement
+or you didn't close your parentheses or triple string quotes),
+but it gives you a syntax error message immediately when the input
+is invalid.
+<P>
+In Python you can use the codeop module, which approximates the
+parser's behavior sufficiently.  IDLE uses this, for example.
+<P>
+The easiest way to do it in C is to call PyRun_InteractiveLoop()
+(in a separate thread maybe) and let the Python interpreter handle
+the input for you. You can also set the PyOS_ReadlineFunctionPointer
+to point at your custom input function. See Modules/readline.c and
+Parser/myreadline.c for more hints.
+<P>
+However sometimes you have to run the embedded Python interpreter
+in the same thread as your rest application and you can't allow the
+PyRun_InteractiveLoop() to stop while waiting for user input.
+The one solution then is to call PyParser_ParseString()
+and test for e.error equal to E_EOF (then the input is incomplete).
+Sample code fragment, untested, inspired by code from  Alex Farber:
+<P>
+<PRE>
+  #include &lt;Python.h&gt;
+  #include &lt;node.h&gt;
+  #include &lt;errcode.h&gt;
+  #include &lt;grammar.h&gt;
+  #include &lt;parsetok.h&gt;
+  #include &lt;compile.h&gt;
+</PRE>
+<PRE>
+  int testcomplete(char *code)
+    /* code should end in \n */
+    /* return -1 for error, 0 for incomplete, 1 for complete */
+  {
+    node *n;
+    perrdetail e;
+</PRE>
+<PRE>
+    n = PyParser_ParseString(code, &amp;_PyParser_Grammar,
+                             Py_file_input, &amp;e);
+    if (n == NULL) {
+      if (e.error == E_EOF) 
+        return 0;
+      return -1;
+    }
+</PRE>
+<PRE>
+    PyNode_Free(n);
+    return 1;
+  }
+</PRE>
+Another solution is trying to compile the received string with 
+Py_CompileString(). If it compiles fine - try to execute the returned 
+code object by calling PyEval_EvalCode(). Otherwise save the input for 
+later. If the compilation fails, find out if it's an error or just 
+more input is required - by extracting the message string from the 
+exception tuple and comparing it to the "unexpected EOF while parsing".
+Here is a complete example using the GNU readline library (you may
+want to ignore SIGINT while calling readline()):
+<P>
+<PRE>
+  #include &lt;stdio.h&gt;
+  #include &lt;readline.h&gt;
+</PRE>
+<PRE>
+  #include &lt;Python.h&gt;
+  #include &lt;object.h&gt;
+  #include &lt;compile.h&gt;
+  #include &lt;eval.h&gt;
+</PRE>
+<PRE>
+  int main (int argc, char* argv[])
+  {
+    int i, j, done = 0;                          /* lengths of line, code */
+    char ps1[] = ">>> ";
+    char ps2[] = "... ";
+    char *prompt = ps1;
+    char *msg, *line, *code = NULL;
+    PyObject *src, *glb, *loc;
+    PyObject *exc, *val, *trb, *obj, *dum;
+</PRE>
+<PRE>
+    Py_Initialize ();
+    loc = PyDict_New ();
+    glb = PyDict_New ();
+    PyDict_SetItemString (glb, "__builtins__", PyEval_GetBuiltins ());
+</PRE>
+<PRE>
+    while (!done)
+    {
+      line = readline (prompt);
+</PRE>
+<PRE>
+      if (NULL == line)                          /* CTRL-D pressed */
+      {
+        done = 1;
+      }
+      else
+      {
+        i = strlen (line);
+</PRE>
+<PRE>
+        if (i > 0)
+          add_history (line);                    /* save non-empty lines */
+</PRE>
+<PRE>
+        if (NULL == code)                        /* nothing in code yet */
+          j = 0;
+        else
+          j = strlen (code);
+</PRE>
+<PRE>
+        code = realloc (code, i + j + 2);
+        if (NULL == code)                        /* out of memory */
+          exit (1);
+</PRE>
+<PRE>
+        if (0 == j)                              /* code was empty, so */
+          code[0] = '\0';                        /* keep strncat happy */
+</PRE>
+<PRE>
+        strncat (code, line, i);                 /* append line to code */
+        code[i + j] = '\n';                      /* append '\n' to code */
+        code[i + j + 1] = '\0';
+</PRE>
+<PRE>
+        src = Py_CompileString (code, "&lt;stdin&gt;", Py_single_input);       
+</PRE>
+<PRE>
+        if (NULL != src)                         /* compiled just fine - */
+        {
+          if (ps1  == prompt ||                  /* "&gt;&gt;&gt; " or */
+              '\n' == code[i + j - 1])           /* "... " and double '\n' */
+          {                                               /* so execute it */
+            dum = PyEval_EvalCode ((PyCodeObject *)src, glb, loc);
+            Py_XDECREF (dum);
+            Py_XDECREF (src);
+            free (code);
+            code = NULL;
+            if (PyErr_Occurred ())
+              PyErr_Print ();
+            prompt = ps1;
+          }
+        }                                        /* syntax error or E_EOF? */
+        else if (PyErr_ExceptionMatches (PyExc_SyntaxError))           
+        {
+          PyErr_Fetch (&amp;exc, &amp;val, &amp;trb);        /* clears exception! */
+</PRE>
+<PRE>
+          if (PyArg_ParseTuple (val, "sO", &amp;msg, &amp;obj) &amp;&amp;
+              !strcmp (msg, "unexpected EOF while parsing")) /* E_EOF */
+          {
+            Py_XDECREF (exc);
+            Py_XDECREF (val);
+            Py_XDECREF (trb);
+            prompt = ps2;
+          }
+          else                                   /* some other syntax error */
+          {
+            PyErr_Restore (exc, val, trb);
+            PyErr_Print ();
+            free (code);
+            code = NULL;
+            prompt = ps1;
+          }
+        }
+        else                                     /* some non-syntax error */
+        {
+          PyErr_Print ();
+          free (code);
+          code = NULL;
+          prompt = ps1;
+        }
+</PRE>
+<PRE>
+        free (line);
+      }
+    }
+</PRE>
+<PRE>
+    Py_XDECREF(glb);
+    Py_XDECREF(loc);
+    Py_Finalize();
+    exit(0);
+  }
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.015.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.015.htp">Log info</A>
+
+/ Last changed on Wed Mar 15 09:47:24 2000 by
+<A HREF="mailto:farber@cpan.org">Alex Farber</A>
+<P>
+
+<HR>
+<H2><A NAME="5.16">5.16. How do I debug an extension?</A></H2>
+When using gdb with dynamically loaded extensions, you can't set a 
+breakpoint in your extension until your extension is loaded.
+<P>
+In your .gdbinit file (or interactively), add the command
+<P>
+br _PyImport_LoadDynamicModule
+<P>
+<P>
+$ gdb /local/bin/python
+<P>
+gdb) run myscript.py
+<P>
+gdb) continue # repeat until your extension is loaded
+<P>
+gdb) finish   # so that your extension is loaded
+<P>
+gdb) br myfunction.c:50
+<P>
+gdb) continue
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.016.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.016.htp">Log info</A>
+
+/ Last changed on Fri Oct 20 11:10:32 2000 by
+<A HREF="mailto:vanandel@ucar.edu">Joe VanAndel</A>
+<P>
+
+<HR>
+<H2><A NAME="5.17">5.17. How do I find undefined Linux g++ symbols, __builtin_new or __pure_virtural</A></H2>
+To dynamically load g++ extension modules, you must recompile python, relink python using g++ (change LINKCC in the python Modules Makefile), and link your extension module using g++ (e.g., "g++ -shared -o mymodule.so mymodule.o").
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.017.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.017.htp">Log info</A>
+
+/ Last changed on Sun Jan 14 18:03:51 2001 by
+<A HREF="mailto:dbo@angryduck.com">douglas orr</A>
+<P>
+
+<HR>
+<H2><A NAME="5.18">5.18. How do I define and create objects corresponding to built-in/extension types</A></H2>
+Usually you would like to be able to inherit from a Python type when
+you ask this question. The bottom line for Python 2.2 is: types and classes are miscible. You build instances by calling classes, and you can build subclasses to your heart's desire.
+<P>
+You need to be careful when instantiating immutable types like integers or strings. See <A HREF="http://www.amk.ca/python/2.2">http://www.amk.ca/python/2.2</A>/, section 2, for details.
+<P>
+Prior to version 2.2, Python (like Java) insisted that there are first-class and second-class objects (the former are types, the latter classes), and never the twain shall meet.
+<P>
+The library has, however, done a good job of providing class wrappers for the more commonly desired objects (see UserDict, UserList and UserString for examples), and more are always welcome if you happen to be in the mood to write code. These wrappers still exist in Python 2.2.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq05.018.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq05.018.htp">Log info</A>
+
+/ Last changed on Mon Jun 10 15:14:07 2002 by
+<A HREF="mailto:smurf@noris.de">Matthias Urlichs</A>
+<P>
+
+<HR>
+<H1>6. Python's design</H1>
+
+<HR>
+<H2><A NAME="6.1">6.1. Why isn't there a switch or case statement in Python?</A></H2>
+You can do this easily enough with a sequence of
+if... elif... elif... else.  There have been some proposals for switch
+statement syntax, but there is no consensus (yet) on whether and how
+to do range tests.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.001.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="6.2">6.2. Why does Python use indentation for grouping of statements?</A></H2>
+Basically I believe that using indentation for grouping is
+extremely elegant and contributes a lot to the clarity of the average
+Python program.  Most people learn to love this feature after a while.
+Some arguments for it:
+<P>
+Since there are no begin/end brackets there cannot be a disagreement
+between grouping perceived by the parser and the human reader.  I
+remember long ago seeing a C fragment like this:
+<P>
+<PRE>
+        if (x &lt;= y)
+                x++;
+                y--;
+        z++;
+</PRE>
+and staring a long time at it wondering why y was being decremented
+even for x > y...  (And I wasn't a C newbie then either.)
+<P>
+Since there are no begin/end brackets, Python is much less prone to
+coding-style conflicts.  In C there are loads of different ways to
+place the braces (including the choice whether to place braces around
+single statements in certain cases, for consistency).  If you're used
+to reading (and writing) code that uses one style, you will feel at
+least slightly uneasy when reading (or being required to write)
+another style.
+Many coding styles place begin/end brackets on a line by themself.
+This makes programs considerably longer and wastes valuable screen
+space, making it harder to get a good overview over a program.
+Ideally, a function should fit on one basic tty screen (say, 20
+lines).  20 lines of Python are worth a LOT more than 20 lines of C.
+This is not solely due to the lack of begin/end brackets (the lack of
+declarations also helps, and the powerful operations of course), but
+it certainly helps!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.002.htp">Log info</A>
+
+/ Last changed on Wed May 21 16:00:15 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.3">6.3. Why are Python strings immutable?</A></H2>
+There are two advantages.  One is performance: knowing that a
+string is immutable makes it easy to lay it out at construction time
+-- fixed and unchanging storage requirements.  (This is also one of
+the reasons for the distinction between tuples and lists.)  The
+other is that strings in Python are considered as "elemental" as
+numbers.  No amount of activity will change the value 8 to anything
+else, and in Python, no amount of activity will change the string
+"eight" to anything else.  (Adapted from Jim Roskind)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.003.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="6.4">6.4. Delete</A></H2>
+<P>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.004.htp">Log info</A>
+
+/ Last changed on Tue Jan  2 03:05:25 2001 by
+<A HREF="mailto:moshez@zadka.site.co.il">Moshe Zadka</A>
+<P>
+
+<HR>
+<H2><A NAME="6.5">6.5. Why does Python use methods for some functionality (e.g. list.index()) but functions for other (e.g. len(list))?</A></H2>
+The major reason is history. Functions were used for those
+operations that were generic for a group of types and which
+were intended to work even for objects that didn't have
+methods at all (e.g. numbers before type/class unification
+began, or tuples).
+<P>
+It is also convenient to have a function that can readily be applied
+to an amorphous collection of objects when you use the functional features of Python (map(), apply() et al).
+<P>
+In fact, implementing len(), max(), min() as a built-in function is
+actually less code than implementing them as methods for each type.
+One can quibble about individual cases but it's a part of Python,
+and it's too late to change such things fundamentally now. The
+functions have to remain to avoid massive code breakage.
+<P>
+Note that for string operations Python has moved from external functions
+(the string module) to methods.  However, len() is still a function.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.005.htp">Log info</A>
+
+/ Last changed on Thu May 30 14:08:58 2002 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="6.6">6.6. Why can't I derive a class from built-in types (e.g. lists or files)?</A></H2>
+As of Python 2.2, you can derive from built-in types.  For previous versions, the answer is:
+<P>
+This is caused by the relatively late addition of (user-defined)
+classes to the language -- the implementation framework doesn't easily
+allow it.  See the answer to question 4.2 for a work-around.  This
+<I>may</I> be fixed in the (distant) future.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.006.htp">Log info</A>
+
+/ Last changed on Thu May 23 02:53:22 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="6.7">6.7. Why must 'self' be declared and used explicitly in method definitions and calls?</A></H2>
+So, is your current programming language C++ or Java? :-)
+When classes were added to Python, this was (again) the simplest way of
+implementing methods without too many changes to the interpreter.  The
+idea was borrowed from Modula-3.  It turns out to be very useful, for
+a variety of reasons.
+<P>
+First, it makes it more obvious that you are using a method or
+instance attribute instead of a local variable.  Reading "self.x" or
+"self.meth()" makes it absolutely clear that an instance variable or
+method is used even if you don't know the class definition by heart.
+In C++, you can sort of tell by the lack of a local variable
+declaration (assuming globals are rare or easily recognizable) -- but
+in Python, there are no local variable declarations, so you'd have to
+look up the class definition to be sure.
+<P>
+Second, it means that no special syntax is necessary if you want to
+explicitly reference or call the method from a particular class.  In
+C++, if you want to use a method from base class that is overridden in
+a derived class, you have to use the :: operator -- in Python you can
+write baseclass.methodname(self, &lt;argument list&gt;).  This is
+particularly useful for __init__() methods, and in general in cases
+where a derived class method wants to extend the base class method of
+the same name and thus has to call the base class method somehow.
+<P>
+Lastly, for instance variables, it solves a syntactic problem with
+assignment: since local variables in Python are (by definition!) those
+variables to which a value assigned in a function body (and that
+aren't explicitly declared global), there has to be some way to tell
+the interpreter that an assignment was meant to assign to an instance
+variable instead of to a local variable, and it should preferably be
+syntactic (for efficiency reasons).  C++ does this through
+declarations, but Python doesn't have declarations and it would be a
+pity having to introduce them just for this purpose.  Using the
+explicit "self.var" solves this nicely.  Similarly, for using instance
+variables, having to write "self.var" means that references to
+unqualified names inside a method don't have to search the instance's
+directories.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.007.htp">Log info</A>
+
+/ Last changed on Fri Jan 12 08:01:50 2001 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="6.8">6.8. Can't you emulate threads in the interpreter instead of relying on an OS-specific thread implementation?</A></H2>
+Answer 1: Unfortunately, the interpreter pushes at least one C stack
+frame for each Python stack frame.  Also, extensions can call back into
+Python at almost random moments.  Therefore a complete threads
+implementation requires thread support for C.
+<P>
+Answer 2: Fortunately, there is Stackless Python, which has a completely redesigned interpreter loop that avoids the C stack. It's still experimental but looks very promising. Although it is binary compatible with standard Python, it's still unclear whether Stackless will make it into the core -- maybe it's just too revolutionary. Stackless Python currently lives here: <A HREF="http://www.stackless.com">http://www.stackless.com</A>. A microthread implementation that uses it can be found here: <A HREF="http://world.std.com/~wware/uthread.html">http://world.std.com/~wware/uthread.html</A>.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.008.htp">Log info</A>
+
+/ Last changed on Sat Apr 15 08:18:16 2000 by
+<A HREF="mailto:just@letterror.com">Just van Rossum</A>
+<P>
+
+<HR>
+<H2><A NAME="6.9">6.9. Why can't lambda forms contain statements?</A></H2>
+Python lambda forms cannot contain statements because Python's
+syntactic framework can't handle statements nested inside expressions.
+<P>
+However, in Python, this is not a serious problem.  Unlike lambda
+forms in other languages, where they add functionality, Python lambdas
+are only a shorthand notation if you're too lazy to define a function.
+<P>
+Functions are already first class objects in Python, and can be
+declared in a local scope.  Therefore the only advantage of using a
+lambda form instead of a locally-defined function is that you don't need to invent a name for the function -- but that's just a local variable to which the function object (which is exactly the same type of object that a lambda form yields) is assigned!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.009.htp">Log info</A>
+
+/ Last changed on Sun Jun 14 14:15:17 1998 by
+<A HREF="mailto:tim_one@email.msn.com">Tim Peters</A>
+<P>
+
+<HR>
+<H2><A NAME="6.10">6.10. [deleted]</A></H2>
+[lambda vs non-nested scopes used to be here]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.010.htp">Log info</A>
+
+/ Last changed on Thu Mar 21 05:20:56 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="6.11">6.11. [deleted]</A></H2>
+[recursive functions vs non-nested scopes used to be here]
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.011.htp">Log info</A>
+
+/ Last changed on Thu Mar 21 05:22:04 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="6.12">6.12. Why is there no more efficient way of iterating over a dictionary than first constructing the list of keys()?</A></H2>
+As of Python 2.2, you can now iterate over a dictionary directly,
+using the new implied dictionary iterator:
+<P>
+<PRE>
+    for k in d: ...
+</PRE>
+There are also methods returning iterators over the values and items:
+<P>
+<PRE>
+    for k in d.iterkeys(): # same as above
+    for v in d.itervalues(): # iterate over values
+    for k, v in d.iteritems(): # iterate over items
+</PRE>
+All these require that you do not modify the dictionary during the loop.
+<P>
+For previous Python versions, the following defense should do:
+<P>
+Have you tried it?  I bet it's fast enough for your purposes!  In
+most cases such a list takes only a few percent of the space occupied
+by the dictionary.  Apart from the fixed header,
+the list needs only 4 bytes (the size of a pointer) per
+key.  A dictionary uses 12 bytes per key plus between 30 and 70
+percent hash table overhead, plus the space for the keys and values.
+By necessity, all keys are distinct objects, and a string object (the most
+common key type) costs at least 20 bytes plus the length of the
+string.  Add to that the values contained in the dictionary, and you
+see that 4 bytes more per item really isn't that much more memory...
+<P>
+A call to dict.keys() makes one fast scan over the dictionary
+(internally, the iteration function does exist) copying the pointers
+to the key objects into a pre-allocated list object of the right size.
+The iteration time isn't lost (since you'll have to iterate anyway --
+unless in the majority of cases your loop terminates very prematurely
+(which I doubt since you're getting the keys in random order).
+<P>
+I don't expose the dictionary iteration operation to Python
+programmers because the dictionary shouldn't be modified during the
+entire iteration -- if it is, there's a small chance that the
+dictionary is reorganized because the hash table becomes too full, and
+then the iteration may miss some items and see others twice.  Exactly
+because this only occurs rarely, it would lead to hidden bugs in
+programs: it's easy never to have it happen during test runs if you
+only insert or delete a few items per iteration -- but your users will 
+surely hit upon it sooner or later.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.012.htp">Log info</A>
+
+/ Last changed on Fri May 24 21:24:08 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.13">6.13. Can Python be compiled to machine code, C or some other language?</A></H2>
+Not easily.  Python's high level data types, dynamic typing of
+objects and run-time invocation of the interpreter (using eval() or
+exec) together mean that a "compiled" Python program would probably
+consist mostly of calls into the Python run-time system, even for
+seemingly simple operations like "x+1".
+<P>
+Several projects described in the Python newsgroup or at past
+Python conferences have shown that this approach is feasible,
+although the speedups reached so far are only modest (e.g. 2x).
+JPython uses the same strategy for compiling to Java bytecode.
+(Jim Hugunin has demonstrated that in combination with whole-program
+analysis, speedups of 1000x are feasible for small demo programs.
+See the website for the 1997 Python conference.)
+<P>
+Internally, Python source code is always translated into a "virtual
+machine code" or "byte code" representation before it is interpreted
+(by the "Python virtual machine" or "bytecode interpreter").  In order
+to avoid the overhead of parsing and translating modules that rarely
+change over and over again, this byte code is written on a file whose
+name ends in ".pyc" whenever a module is parsed (from a file whose
+name ends in ".py").  When the corresponding .py file is changed, it
+is parsed and translated again and the .pyc file is rewritten.
+<P>
+There is no performance difference once the .pyc file has been loaded
+(the bytecode read from the .pyc file is exactly the same as the bytecode
+created by direct translation).  The only difference is that loading
+code from a .pyc file is faster than parsing and translating a .py
+file, so the presence of precompiled .pyc files will generally improve
+start-up time of Python scripts.  If desired, the Lib/compileall.py
+module/script can be used to force creation of valid .pyc files for a
+given set of modules.
+<P>
+Note that the main script executed by Python, even if its filename
+ends in .py, is not compiled to a .pyc file.  It is compiled to
+bytecode, but the bytecode is not saved to a file.
+<P>
+If you are looking for a way to translate Python programs in order to
+distribute them in binary form, without the need to distribute the
+interpreter and library as well, have a look at the freeze.py script
+in the Tools/freeze directory.  This creates a single binary file
+incorporating your program, the Python interpreter, and those parts of
+the Python library that are needed by your program.  Of course, the
+resulting binary will only run on the same type of platform as that
+used to create it.
+<P>
+Newsflash: there are now several programs that do this, to some extent.
+Look for Psyco, Pyrex, PyInline, Py2Cmod, and Weave.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.013.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.013.htp">Log info</A>
+
+/ Last changed on Fri May 24 21:26:19 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.14">6.14. How does Python manage memory?</A></H2>
+The details of Python memory management depend on the implementation.
+The standard Python implementation (the C implementation) uses reference
+counting and another mechanism to collect reference cycles.
+<P>
+Jython relies on the Java runtime; so it uses
+the JVM's garbage collector.  This difference can cause some subtle
+porting problems if your Python code depends on the behavior of
+the reference counting implementation.
+<P>
+The reference cycle collector was added in CPython 2.0. It
+periodically executes a cycle detection algorithm which looks for inaccessible cycles and deletes the objects involved. A new gc module provides functions to perform a garbage collection, obtain debugging statistics, and tuning the collector's parameters. 
+<P>
+The detection of cycles can be disabled when Python is compiled, if you can't afford even a tiny speed penalty or suspect that the cycle collection is buggy, by specifying the "--without-cycle-gc" switch when running the configure script. 
+<P>
+Sometimes objects get stuck in "tracebacks" temporarily and hence are not deallocated when you might expect.  Clear the tracebacks via
+<P>
+<PRE>
+       import sys
+       sys.exc_traceback = sys.last_traceback = None
+</PRE>
+Tracebacks are used for reporting errors and implementing debuggers and related things.  They contain a portion of the program state extracted during the handling of an exception (usually the most recent exception).
+<P>
+In the absence of circularities and modulo tracebacks, Python programs need not explicitly manage memory.
+<P>
+Why python doesn't use a more traditional garbage collection
+scheme? For one thing, unless this were
+added to C as a standard feature, it's a portability pain in the ass.
+And yes, I know about the Xerox library.  It has bits of assembler
+code for <I>most</I> <I>common</I> platforms.  Not for all.  And although it is
+mostly transparent, it isn't completely transparent (when I once
+linked Python with it, it dumped core).
+<P>
+Traditional GC also becomes a problem when Python gets embedded into
+other applications.  While in a stand-alone Python it may be fine to
+replace the standard malloc() and free() with versions provided by the
+GC library, an application embedding Python may want to have its <I>own</I>
+substitute for malloc() and free(), and may not want Python's.  Right
+now, Python works with anything that implements malloc() and free()
+properly.
+<P>
+In Jython, the following code (which is 
+fine in C Python) will probably run out of file descriptors long before
+it runs out of memory:
+<P>
+<PRE>
+        for file in &lt;very long list of files&gt;:
+                f = open(file)
+                c = f.read(1)
+</PRE>
+Using the current reference counting and destructor scheme, each new
+assignment to f closes the previous file.  Using GC, this is not
+guaranteed.  Sure, you can think of ways to fix this.  But it's not
+off-the-shelf technology.  If you want to write code that will
+work with any Python implementation, you should explicitly close
+the file; this will work regardless of GC:
+<P>
+<PRE>
+       for file in &lt;very long list of files&gt;:
+                f = open(file)
+                c = f.read(1)
+                f.close()
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.014.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.014.htp">Log info</A>
+
+/ Last changed on Thu Mar 21 05:35:38 2002 by
+<A HREF="mailto:erno-pyfaq@erno.iki.fi">Erno Kuusela</A>
+<P>
+
+<HR>
+<H2><A NAME="6.15">6.15. Why are there separate tuple and list data types?</A></H2>
+This is done so that tuples can be immutable while lists are mutable.
+<P>
+Immutable tuples are useful in situations where you need to pass a few
+items to a function and don't want the function to modify the tuple;
+for example,
+<P>
+<PRE>
+	point1 = (120, 140)
+	point2 = (200, 300)
+	record(point1, point2)
+	draw(point1, point2)
+</PRE>
+You don't want to have to think about what would happen if record()
+changed the coordinates -- it can't, because the tuples are immutable.
+<P>
+On the other hand, when creating large lists dynamically, it is
+absolutely crucial that they are mutable -- adding elements to a tuple
+one by one requires using the concatenation operator, which makes it
+quadratic in time.
+<P>
+As a general guideline, use tuples like you would use structs in C or
+records in Pascal, use lists like (variable length) arrays.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.015.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.015.htp">Log info</A>
+
+/ Last changed on Fri May 23 15:26:03 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.16">6.16. How are lists implemented?</A></H2>
+Despite what a Lisper might think, Python's lists are really
+variable-length arrays.  The implementation uses a contiguous
+array of references to other objects, and keeps a pointer
+to this array (as well as its length) in a list head structure.
+<P>
+This makes indexing a list (a[i]) an operation whose cost is
+independent of the size of the list or the value of the index.
+<P>
+When items are appended or inserted, the array of references is resized.
+Some cleverness is applied to improve the performance of appending
+items repeatedly; when the array must be grown, some extra space
+is allocated so the next few times don't require an actual resize.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.016.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.016.htp">Log info</A>
+
+/ Last changed on Fri May 23 15:32:24 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.17">6.17. How are dictionaries implemented?</A></H2>
+Python's dictionaries are implemented as resizable hash tables.
+<P>
+Compared to B-trees, this gives better performance for lookup
+(the most common operation by far) under most circumstances,
+and the implementation is simpler.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.017.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.017.htp">Log info</A>
+
+/ Last changed on Fri May 23 23:51:14 1997 by
+<A HREF="mailto:Vladimir.Marangozov@inrialpes.fr">Vladimir Marangozov</A>
+<P>
+
+<HR>
+<H2><A NAME="6.18">6.18. Why must dictionary keys be immutable?</A></H2>
+The hash table implementation of dictionaries uses a hash value
+calculated from the key value to find the key.  If the key were
+a mutable object, its value could change, and thus its hash could
+change.  But since whoever changes the key object can't tell that
+is incorporated in a dictionary, it can't move the entry around in
+the dictionary.  Then, when you try to look up the same object
+in the dictionary, it won't be found, since its hash value is different;
+and if you try to look up the old value, it won't be found either,
+since the value of the object found in that hash bin differs.
+<P>
+If you think you need to have a dictionary indexed with a list,
+try to use a tuple instead.  The function tuple(l) creates a tuple
+with the same entries as the list l.
+<P>
+Some unacceptable solutions that have been proposed:
+<P>
+- Hash lists by their address (object ID).  This doesn't work because
+if you construct a new list with the same value it won't be found;
+e.g.,
+<P>
+<PRE>
+  d = {[1,2]: '12'}
+  print d[[1,2]]
+</PRE>
+will raise a KeyError exception because the id of the [1,2] used
+in the second line differs from that in the first line.
+In other words, dictionary keys should be compared using '==', not using 'is'.
+<P>
+- Make a copy when using a list as a key.  This doesn't work because
+the list (being a mutable object) could contain a reference to itself,
+and then the copying code would run into an infinite loop.
+<P>
+- Allow lists as keys but tell the user not to modify them.  This would
+allow a class of hard-to-track bugs in programs that I'd rather not see;
+it invalidates an important invariant of dictionaries (every value in
+d.keys() is usable as a key of the dictionary).
+<P>
+- Mark lists as read-only once they are used as a dictionary key.
+The problem is that it's not just the top-level object that could change
+its value; you could use a tuple containing a list as a key.  Entering
+anything as a key into a dictionary would require marking all objects
+reachable from there as read-only -- and again, self-referential objects
+could cause an infinite loop again (and again and again).
+<P>
+There is a trick to get around this if you need to, but
+use it at your own risk:  You
+can wrap a mutable structure inside a class instance which
+has both a __cmp__ and a __hash__ method.  
+<P>
+<PRE>
+   class listwrapper:
+        def __init__(self, the_list):
+              self.the_list = the_list
+        def __cmp__(self, other):
+              return self.the_list == other.the_list
+        def __hash__(self):
+              l = self.the_list
+              result = 98767 - len(l)*555
+              for i in range(len(l)):
+                   try:
+                        result = result + (hash(l[i]) % 9999999) * 1001 + i
+                   except:
+                        result = (result % 7777777) + i * 333
+              return result
+</PRE>
+Note that the hash computation is complicated by the
+possibility that some members of the list may be unhashable
+and also by the possibility of arithmetic overflow.
+<P>
+You must make
+sure that the hash value for all such wrapper objects that reside in a
+dictionary (or other hash based structure), remain fixed while
+the object is in the dictionary (or other structure).
+<P>
+Furthermore it must always be the case that if
+o1 == o2 (ie o1.__cmp__(o2)==0) then hash(o1)==hash(o2)
+(ie, o1.__hash__() == o2.__hash__()), regardless of whether
+the object is in a dictionary or not.
+If you fail to meet these restrictions dictionaries and other
+hash based structures may misbehave!
+<P>
+In the case of listwrapper above whenever the wrapper
+object is in a dictionary the wrapped list must not change
+to avoid anomalies.  Don't do this unless you are prepared
+to think hard about the requirements and the consequences
+of not meeting them correctly.  You've been warned!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.018.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.018.htp">Log info</A>
+
+/ Last changed on Thu Jul 10 10:08:40 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="6.19">6.19. How the heck do you make an array in Python?</A></H2>
+["this", 1, "is", "an", "array"]
+<P>
+Lists are arrays in the C or Pascal sense of the word (see question
+6.16).  The array module also provides methods for creating arrays
+of fixed types with compact representations (but they are slower to
+index than lists).  Also note that the Numerics extensions and others
+define array-like structures with various characteristics as well.
+<P>
+To get Lisp-like lists, emulate cons cells
+<P>
+<PRE>
+    lisp_list = ("like",  ("this",  ("example", None) ) )
+</PRE>
+using tuples (or lists, if you want mutability).  Here the analogue
+of lisp car is lisp_list[0] and the analogue of cdr is lisp_list[1].
+Only do this if you're sure you really need to (it's usually a lot
+slower than using Python lists).
+<P>
+Think of Python lists as mutable heterogeneous arrays of
+Python objects (say that 10 times fast :) ).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.019.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.019.htp">Log info</A>
+
+/ Last changed on Wed Aug 13 07:08:27 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="6.20">6.20. Why doesn't list.sort() return the sorted list?</A></H2>
+In situations where performance matters, making a copy of the list
+just to sort it would be wasteful.  Therefore, list.sort() sorts
+the list in place.  In order to remind you of that fact, it does
+not return the sorted list.  This way, you won't be fooled into
+accidentally overwriting a list when you need a sorted copy but also
+need to keep the unsorted version around.
+<P>
+As a result, here's the idiom to iterate over the keys of a dictionary
+in sorted order:
+<P>
+<PRE>
+	keys = dict.keys()
+	keys.sort()
+	for key in keys:
+		...do whatever with dict[key]...
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.020.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.020.htp">Log info</A>
+
+/ Last changed on Thu Dec  2 17:01:52 1999 by
+<A HREF="mailto:fdrake@acm.org">Fred L. Drake, Jr.</A>
+<P>
+
+<HR>
+<H2><A NAME="6.21">6.21. How do you specify and enforce an interface spec in Python?</A></H2>
+An interfaces specification for a module as provided
+by languages such as C++ and java describes the prototypes
+for the methods and functions of the module.  Many feel
+that compile time enforcement of interface specifications
+help aid in the construction of large programs.  Python
+does not support interface specifications directly, but many
+of their advantages can be obtained by an appropriate
+test discipline for components, which can often be very
+easily accomplished in Python.  There is also a tool, PyChecker,
+which can be used to find problems due to subclassing.
+<P>
+A good test suite for a module can at
+once provide a regression test and serve as a module interface
+specification (even better since it also gives example usage).  Look to
+many of the standard libraries which often have a "script
+interpretation" which provides a simple "self test."  Even
+modules which use complex external interfaces can often
+be tested in isolation using trivial "stub" emulations of the
+external interface.
+<P>
+An appropriate testing discipline (if enforced) can help
+build large complex applications in Python as well as having interface
+specifications would do (or better).  Of course Python allows you 
+to get sloppy and not do it.  Also you might want to design
+your code with an eye to make it easily tested.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.021.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.021.htp">Log info</A>
+
+/ Last changed on Thu May 23 03:05:29 2002 by
+<A HREF="mailto:neal@metaslash.com">Neal Norwitz</A>
+<P>
+
+<HR>
+<H2><A NAME="6.22">6.22. Why do all classes have the same type? Why do instances all have the same type?</A></H2>
+The Pythonic use of the word "type" is quite different from
+common usage in much of the rest of the programming language
+world.  A "type" in Python is a description for an object's operations
+as implemented in C.  All classes have the same operations
+implemented in C which sometimes "call back" to differing program
+fragments implemented in Python, and hence all classes have the
+same type.  Similarly at the C level all class instances have the
+same C implementation, and hence all instances have the same
+type.
+<P>
+Remember that in Python usage "type" refers to a C implementation
+of an object.  To distinguish among instances of different classes
+use Instance.__class__, and also look to 4.47.  Sorry for the
+terminological confusion, but at this point in Python's development
+nothing can be done!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.022.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.022.htp">Log info</A>
+
+/ Last changed on Tue Jul  1 12:35:47 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="6.23">6.23. Why isn't all memory freed when Python exits?</A></H2>
+Objects referenced from Python module global name spaces are
+not always deallocated when Python exits.
+<P>
+This may happen if there are circular references (see question
+4.17).  There are also certain bits of memory that are allocated
+by the C library that are impossible to free (e.g. a tool
+like Purify will complain about these).
+<P>
+But in general, Python 1.5 and beyond
+(in contrast with earlier versions) is quite agressive about
+cleaning up memory on exit.
+<P>
+If you want to force Python to delete certain things on deallocation
+use the sys.exitfunc hook to force those deletions.  For example
+if you are debugging an extension module using a memory analysis
+tool and you wish to make Python deallocate almost everything
+you might use an exitfunc like this one:
+<P>
+<PRE>
+  import sys
+</PRE>
+<PRE>
+  def my_exitfunc():
+       print "cleaning up"
+       import sys
+       # do order dependant deletions here
+       ...
+       # now delete everything else in arbitrary order
+       for x in sys.modules.values():
+            d = x.__dict__
+            for name in d.keys():
+                 del d[name]
+</PRE>
+<PRE>
+  sys.exitfunc = my_exitfunc
+</PRE>
+Other exitfuncs can be less drastic, of course.
+<P>
+(In fact, this one just does what Python now already does itself;
+but the example of using sys.exitfunc to force cleanups is still
+useful.)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.023.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.023.htp">Log info</A>
+
+/ Last changed on Tue Sep 29 09:46:26 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.24">6.24. Why no class methods or mutable class variables?</A></H2>
+The notation
+<P>
+<PRE>
+    instance.attribute(arg1, arg2)
+</PRE>
+usually translates to the equivalent of
+<P>
+<PRE>
+    Class.attribute(instance, arg1, arg2)
+</PRE>
+where Class is a (super)class of instance.  Similarly
+<P>
+<PRE>
+    instance.attribute = value
+</PRE>
+sets an attribute of an instance (overriding any attribute of a class
+that instance inherits).  
+<P>
+Sometimes programmers want to have
+different behaviours -- they want a method which does not bind
+to the instance and a class attribute which changes in place.
+Python does not preclude these behaviours, but you have to
+adopt a convention to implement them.  One way to accomplish
+this is to use "list wrappers" and global functions.
+<P>
+<PRE>
+   def C_hello():
+         print "hello"
+</PRE>
+<PRE>
+   class C:
+        hello = [C_hello]
+        counter = [0]
+</PRE>
+<PRE>
+    I = C()
+</PRE>
+Here I.hello[0]() acts very much like a "class method" and
+I.counter[0] = 2 alters C.counter (and doesn't override it).
+If you don't understand why you'd ever want to do this, that's
+because you are pure of mind, and you probably never will
+want to do it!  This is dangerous trickery, not recommended
+when avoidable.  (Inspired by Tim Peter's discussion.)
+<P>
+In Python 2.2, you can do this using the new built-in operations
+classmethod and staticmethod.
+See <A HREF="http://www.python.org/2.2/descrintro.html#staticmethods">http://www.python.org/2.2/descrintro.html#staticmethods</A>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.024.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.024.htp">Log info</A>
+
+/ Last changed on Tue Sep 11 15:59:37 2001 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.25">6.25. Why are default values sometimes shared between objects?</A></H2>
+It is often expected that a function CALL creates new objects for default
+values. This is not what happens. Default values are created when the
+function is DEFINED, that is, there is only one such object that all 
+functions refer to. If that object is changed, subsequent calls to the 
+function will refer to this changed object. By definition, immutable objects
+(like numbers, strings, tuples, None) are safe from change. Changes to mutable 
+objects (like dictionaries, lists, class instances) is what causes the
+confusion.
+<P>
+Because of this feature it is good programming practice not to use mutable
+objects as default values, but to introduce them in the function.
+Don't write:
+<P>
+<PRE>
+	def foo(dict={}):  # XXX shared reference to one dict for all calls
+	    ...
+</PRE>
+but:
+<PRE>
+	def foo(dict=None):
+		if dict is None:
+			dict = {} # create a new dict for local namespace
+</PRE>
+See page 182 of "Internet Programming with Python" for one discussion
+of this feature. Or see the top of page 144 or bottom of page 277 in 
+"Programming Python" for another discussion.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.025.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.025.htp">Log info</A>
+
+/ Last changed on Sat Aug 16 07:03:35 1997 by
+<A HREF="mailto:cjr@bound.xs4all.nl">Case Roole</A>
+<P>
+
+<HR>
+<H2><A NAME="6.26">6.26. Why no goto?</A></H2>
+Actually, you can use exceptions to provide a "structured goto"
+that even works across function calls.  Many feel that exceptions
+can conveniently emulate all reasonable uses of the "go" or "goto"
+constructs of C, Fortran, and other languages.  For example:
+<P>
+<PRE>
+   class label: pass # declare a label
+   try:
+        ...
+        if (condition): raise label() # goto label
+        ...
+   except label: # where to goto
+        pass
+   ...
+</PRE>
+This doesn't allow you to jump into the middle of a loop, but
+that's usually considered an abuse of goto anyway.  Use sparingly.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.026.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.026.htp">Log info</A>
+
+/ Last changed on Wed Sep 10 07:16:44 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="6.27">6.27. How do you make a higher order function in Python?</A></H2>
+You have two choices: you can use default arguments and override
+them or you can use "callable objects."  For example suppose you
+wanted to define linear(a,b) which returns a function f where f(x)
+computes the value a*x+b.  Using default arguments:
+<P>
+<PRE>
+     def linear(a,b):
+         def result(x, a=a, b=b):
+             return a*x + b
+         return result
+</PRE>
+Or using callable objects:
+<P>
+<PRE>
+     class linear:
+        def __init__(self, a, b):
+            self.a, self.b = a,b
+        def __call__(self, x):
+            return self.a * x + self.b
+</PRE>
+In both cases:
+<P>
+<PRE>
+     taxes = linear(0.3,2)
+</PRE>
+gives a callable object where taxes(10e6) == 0.3 * 10e6 + 2.
+<P>
+The defaults strategy has the disadvantage that the default arguments
+could be accidentally or maliciously overridden.  The callable objects
+approach has the disadvantage that it is a bit slower and a bit
+longer.  Note however that a collection of callables can share
+their signature via inheritance.  EG
+<P>
+<PRE>
+      class exponential(linear):
+         # __init__ inherited
+         def __call__(self, x):
+             return self.a * (x ** self.b)
+</PRE>
+On comp.lang.python, <A HREF="mailto:zenin@bawdycaste.org">zenin@bawdycaste.org</A> points out that
+an object can encapsulate state for several methods in order
+to emulate the "closure" concept from functional programming
+languages, for example:
+<P>
+<PRE>
+    class counter:
+        value = 0
+        def set(self, x): self.value = x
+        def up(self): self.value=self.value+1
+        def down(self): self.value=self.value-1
+</PRE>
+<PRE>
+    count = counter()
+    inc, dec, reset = count.up, count.down, count.set
+</PRE>
+Here inc, dec and reset act like "functions which share the
+same closure containing the variable count.value" (if you
+like that way of thinking).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.027.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.027.htp">Log info</A>
+
+/ Last changed on Fri Sep 25 08:38:35 1998 by
+<A HREF="mailto:arw@pythonpros.com">Aaron Watters</A>
+<P>
+
+<HR>
+<H2><A NAME="6.28">6.28. Why do I get a SyntaxError for a 'continue' inside a 'try'?</A></H2>
+This is an implementation limitation,
+caused by the extremely simple-minded
+way Python generates bytecode.  The try block pushes something on the
+"block stack" which the continue would have to pop off again.  The
+current code generator doesn't have the data structures around so that 
+'continue' can generate the right code.
+<P>
+Note that JPython doesn't have this restriction!
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.028.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.028.htp">Log info</A>
+
+/ Last changed on Fri May 22 15:01:07 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="6.29">6.29. Why can't raw strings (r-strings) end with a backslash?</A></H2>
+More precisely, they can't end with an odd number of backslashes:
+the unpaired backslash at the end escapes the closing quote character,
+leaving an unterminated string.
+<P>
+Raw strings were designed to ease creating input for processors (chiefly
+regular expression engines) that want to do their own backslash escape processing. Such processors consider an unmatched trailing backslash to be an error anyway, so raw strings disallow that.  In return, they allow you to pass on the string quote character by escaping it with a backslash.  These rules work well when r-strings are used for their intended purpose.
+<P>
+If you're trying to build Windows pathnames, note that all Windows system calls accept forward slashes too:
+<P>
+<PRE>
+    f = open("/mydir/file.txt") # works fine!
+</PRE>
+If you're trying to build a pathname for a DOS command, try e.g. one of
+<P>
+<PRE>
+    dir = r"\this\is\my\dos\dir" "\\"
+    dir = r"\this\is\my\dos\dir\ "[:-1]
+    dir = "\\this\\is\\my\\dos\\dir\\"
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.029.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.029.htp">Log info</A>
+
+/ Last changed on Mon Jul 13 20:50:20 1998 by
+<A HREF="mailto:tim_one@email.msn.com">Tim Peters</A>
+<P>
+
+<HR>
+<H2><A NAME="6.30">6.30. Why can't I use an assignment in an expression?</A></H2>
+Many people used to C or Perl complain that they want to be able to
+use e.g. this C idiom:
+<P>
+<PRE>
+    while (line = readline(f)) {
+        ...do something with line...
+    }
+</PRE>
+where in Python you're forced to write this:
+<P>
+<PRE>
+    while 1:
+        line = f.readline()
+        if not line:
+            break
+        ...do something with line...
+</PRE>
+This issue comes up in the Python newsgroup with alarming frequency
+-- search Deja News for past messages about assignment expression.
+The reason for not allowing assignment in Python expressions
+is a common, hard-to-find bug in those other languages,
+caused by this construct:
+<P>
+<PRE>
+    if (x = 0) {
+        ...error handling...
+    }
+    else {
+        ...code that only works for nonzero x...
+    }
+</PRE>
+Many alternatives have been proposed.  Most are hacks that save some
+typing but use arbitrary or cryptic syntax or keywords,
+and fail the simple criterion that I use for language change proposals:
+it should intuitively suggest the proper meaning to a human reader
+who has not yet been introduced with the construct.
+<P>
+The earliest time something can be done about this will be with
+Python 2.0 -- if it is decided that it is worth fixing.
+An interesting phenomenon is that most experienced Python programmers
+recognize the "while 1" idiom and don't seem to be missing the
+assignment in expression construct much; it's only the newcomers
+who express a strong desire to add this to the language.
+<P>
+One fairly elegant solution would be to introduce a new operator
+for assignment in expressions spelled ":=" -- this avoids the "="
+instead of "==" problem.  It would have the same precedence
+as comparison operators but the parser would flag combination with
+other comparisons (without disambiguating parentheses) as an error.
+<P>
+Finally -- there's an alternative way of spelling this that seems
+attractive but is generally less robust than the "while 1" solution:
+<P>
+<PRE>
+    line = f.readline()
+    while line:
+        ...do something with line...
+        line = f.readline()
+</PRE>
+The problem with this is that if you change your mind about exactly
+how you get the next line (e.g. you want to change it into
+sys.stdin.readline()) you have to remember to change two places
+in your program -- the second one hidden at the bottom of the loop.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.030.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.030.htp">Log info</A>
+
+/ Last changed on Tue May 18 00:57:41 1999 by
+<A HREF="mailto:dalke@bioreason.com">Andrew Dalke</A>
+<P>
+
+<HR>
+<H2><A NAME="6.31">6.31. Why doesn't Python have a &quot;with&quot; statement like some other languages?</A></H2>
+Basically, because such a construct would be terribly ambiguous. Thanks to Carlos Ribeiro for the following remarks:
+<P>
+Some languages, such as Object Pascal, Delphi, and C++, use static types. So it is possible to know, in an unambiguous way, what member is being assigned in a "with" clause. This is the main point - the compiler <I>always</I>  knows the scope of every variable at compile time.
+<P>
+Python uses dynamic types. It is impossible to know in advance which 
+attribute will be referenced at runtime. Member attributes may be added or removed from objects on the fly. This would make it impossible to know, from a simple reading, what attribute is being referenced - a local one, a global one, or a member attribute.
+<P>
+For instance, take the following snippet (it is incomplete btw, just to 
+give you the idea):
+<P>
+<PRE>
+   def with_is_broken(a):
+      with a:
+         print x
+</PRE>
+The snippet assumes that "a" must have a member attribute called "x". 
+However, there is nothing in Python that guarantees that. What should 
+happen if "a" is, let us say, an integer? And if I have a global variable named "x", will it end up being used inside the with block? As you see, the dynamic nature of Python makes such choices much harder.
+<P>
+The primary benefit of "with" and similar language features (reduction of code volume) can, however, easily be achieved in Python by assignment. Instead of:
+<P>
+<PRE>
+    function(args).dict[index][index].a = 21
+    function(args).dict[index][index].b = 42
+    function(args).dict[index][index].c = 63
+</PRE>
+would become:
+<P>
+<PRE>
+    ref = function(args).dict[index][index]
+    ref.a = 21
+    ref.b = 42
+    ref.c = 63
+</PRE>
+This also has the happy side-effect of increasing execution speed, since name bindings are resolved at run-time in Python, and the second method only needs to perform the resolution once. If the referenced object does not have a, b and c attributes, of course, the end result is still a run-time exception.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.031.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.031.htp">Log info</A>
+
+/ Last changed on Fri Jan 11 14:32:58 2002 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="6.32">6.32. Why are colons required for if/while/def/class?</A></H2>
+The colon is required primarily to enhance readability (one of the
+results of the experimental ABC language).  Consider this:
+<P>
+<PRE>
+    if a==b
+        print a
+</PRE>
+versus
+<P>
+<PRE>
+    if a==b:
+        print a
+</PRE>
+Notice how the second one is slightly easier to read.  Notice further how
+a colon sets off the example in the second line of this FAQ answer; it's
+a standard usage in English.  Finally, the colon makes it easier for
+editors with syntax highlighting.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.032.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.032.htp">Log info</A>
+
+/ Last changed on Mon Jun  3 07:22:57 2002 by
+<A HREF="mailto:smurf@noris.de">Matthias Urlichs</A>
+<P>
+
+<HR>
+<H2><A NAME="6.33">6.33. Can't we get rid of the Global Interpreter Lock?</A></H2>
+The Global Interpreter Lock (GIL) is often seen as a hindrance to
+Python's deployment on high-end multiprocessor server machines,
+because a multi-threaded Python program effectively only uses
+one CPU, due to the insistence that (almost) all Python code
+can only run while the GIL is held.
+<P>
+Back in the days of Python 1.5, Greg Stein actually implemented
+a comprehensive patch set ("free threading")
+that removed the GIL, replacing it with
+fine-grained locking.  Unfortunately, even on Windows (where locks
+are very efficient) this ran ordinary Python code about twice as
+slow as the interpreter using the GIL.  On Linux the performance
+loss was even worse (pthread locks aren't as efficient).
+<P>
+Since then, the idea of getting rid of the GIL has occasionally
+come up but nobody has found a way to deal with the expected slowdown;
+Greg's free threading patch set has not been kept up-to-date for
+later Python versions.
+<P>
+This doesn't mean that you can't make good use of Python on
+multi-CPU machines!  You just have to be creative with dividing
+the work up between multiple <I>processes</I> rather than multiple
+<I>threads</I>.
+<P>
+<P>
+It has been suggested that the GIL should be a per-interpreter-state
+lock rather than truly global; interpreters then wouldn't be able
+to share objects.  Unfortunately, this isn't likely to happen either.
+<P>
+It would be a tremendous amount of work, because many object
+implementations currently have global state.  E.g. small ints and
+small strings are cached; these caches would have to be moved to the
+interpreter state.  Other object types have their own free list; these
+free lists would have to be moved to the interpreter state.  And so
+on.
+<P>
+And I doubt that it can even be done in finite time, because the same
+problem exists for 3rd party extensions.  It is likely that 3rd party
+extensions are being written at a faster rate than you can convert
+them to store all their global state in the interpreter state.
+<P>
+And finally, once you have multiple interpreters not sharing any
+state, what have you gained over running each interpreter
+in a separate process?
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq06.033.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq06.033.htp">Log info</A>
+
+/ Last changed on Fri Feb  7 16:34:01 2003 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H1>7. Using Python on non-UNIX platforms</H1>
+
+<HR>
+<H2><A NAME="7.1">7.1. Is there a Mac version of Python?</A></H2>
+Yes, it is maintained by Jack Jansen.  See Jack's MacPython Page:
+<P>
+<PRE>
+  <A HREF="http://www.cwi.nl/~jack/macpython.html">http://www.cwi.nl/~jack/macpython.html</A>
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.001.htp">Log info</A>
+
+/ Last changed on Fri May  4 09:33:42 2001 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="7.2">7.2. Are there DOS and Windows versions of Python?</A></H2>
+Yes.  The core windows binaries are available from <A HREF="http://www.python.org/windows">http://www.python.org/windows</A>/. There is a plethora of Windows extensions available, including a large number of not-always-compatible GUI toolkits.  The core binaries include the standard Tkinter GUI extension.
+<P>
+Most windows extensions can be found (or referenced) at <A HREF="http://www.python.org/windows">http://www.python.org/windows</A>/ 
+<P>
+Windows 3.1/DOS support seems to have dropped off recently.  You may need to settle for an old version of Python one these platforms.  One such port is WPY
+<P>
+WPY: Ports to DOS, Windows 3.1(1), Windows 95, Windows NT and OS/2.
+Also contains a GUI package that offers portability between Windows 
+(not DOS) and Unix, and native look and feel on both.
+<A HREF="ftp://ftp.python.org/pub/python/wpy">ftp://ftp.python.org/pub/python/wpy</A>/.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.002.htp">Log info</A>
+
+/ Last changed on Tue Jun  2 20:21:57 1998 by
+<A HREF="mailto:MHammond@skippinet.com.au">Mark Hammond</A>
+<P>
+
+<HR>
+<H2><A NAME="7.3">7.3. Is there an OS/2 version of Python?</A></H2>
+Yes, see <A HREF="http://www.python.org/download/download_os2.html">http://www.python.org/download/download_os2.html</A>.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.003.htp">Log info</A>
+
+/ Last changed on Tue Sep  7 11:33:16 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="7.4">7.4. Is there a VMS version of Python?</A></H2>
+Jean-Franois Pironne has ported 2.1.3 to OpenVMS.  It can be found at
+&lt;<A HREF="http://vmspython.dyndns.org">http://vmspython.dyndns.org</A>/&gt;.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.004.htp">Log info</A>
+
+/ Last changed on Thu Sep 19 15:40:38 2002 by
+<A HREF="mailto:skip@pobox.com">Skip Montanaro</A>
+<P>
+
+<HR>
+<H2><A NAME="7.5">7.5. What about IBM mainframes, or other non-UNIX platforms?</A></H2>
+I haven't heard about these, except I remember hearing about an
+OS/9 port and a port to Vxworks (both operating systems for embedded
+systems).  If you're interested in any of this, go directly to the
+newsgroup and ask there, you may find exactly what you need.  For
+example, a port to MPE/iX 5.0 on HP3000 computers was just announced,
+see <A HREF="http://www.allegro.com/software">http://www.allegro.com/software</A>/.
+<P>
+On the IBM mainframe side, for Z/OS there's a port of python 1.4 that goes with their open-unix package, formely OpenEdition MVS, (<A HREF="http://www-1.ibm.com/servers/eserver/zseries/zos/unix/python.html">http://www-1.ibm.com/servers/eserver/zseries/zos/unix/python.html</A>). On a side note, there's also a java vm ported - so, in theory, jython could run too.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.005.htp">Log info</A>
+
+/ Last changed on Mon Nov 18 03:18:39 2002 by
+<A HREF="mailto:bjessen@uol.com.br">Bruno Jessen</A>
+<P>
+
+<HR>
+<H2><A NAME="7.6">7.6. Where are the source or Makefiles for the non-UNIX versions?</A></H2>
+The standard sources can (almost) be used.  Additional sources can
+be found in the platform-specific subdirectories of the distribution.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.006.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="7.7">7.7. What is the status and support for the non-UNIX versions?</A></H2>
+I don't have access to most of these platforms, so in general I am
+dependent on material submitted by volunteers.  However I strive to
+integrate all changes needed to get it to compile on a particular
+platform back into the standard sources, so porting of the next
+version to the various non-UNIX platforms should be easy.
+(Note that Linux is classified as a UNIX platform here. :-)
+<P>
+Some specific platforms:
+<P>
+Windows: all versions (95, 98, ME, NT, 2000, XP) are supported,
+all python.org releases come with a Windows installer.
+<P>
+MacOS: Jack Jansen does an admirable job of keeping the Mac version
+up to date (both MacOS X and older versions);
+see <A HREF="http://www.cwi.nl/~jack/macpython.html">http://www.cwi.nl/~jack/macpython.html</A>
+<P>
+For all supported platforms, see <A HREF="http://www.python.org/download">http://www.python.org/download</A>/
+(follow the link to "Other platforms" for less common platforms)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.007.htp">Log info</A>
+
+/ Last changed on Fri May 24 21:34:24 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="7.8">7.8. I have a PC version but it appears to be only a binary. Where's the library?</A></H2>
+If you are running any version of Windows, then you have the wrong distribution.  The FAQ lists current Windows versions.  Notably, Pythonwin and wpy provide fully functional installations.
+<P>
+But if you are sure you have the only distribution with a hope of working on
+your system, then...
+<P>
+You still need to copy the files from the distribution directory
+"python/Lib" to your system.  If you don't have the full distribution,
+you can get the file lib&lt;version&gt;.tar.gz from most ftp sites carrying
+Python; this is a subset of the distribution containing just those
+files, e.g.  <A HREF="ftp://ftp.python.org/pub/python/src/lib1.4.tar.gz">ftp://ftp.python.org/pub/python/src/lib1.4.tar.gz</A>.
+<P>
+Once you have installed the library, you need to point sys.path to it.
+Assuming the library is in C:\misc\python\lib, the following commands
+will point your Python interpreter to it (note the doubled backslashes
+-- you can also use single forward slashes instead):
+<P>
+<PRE>
+        >>> import sys
+        >>> sys.path.insert(0, 'C:\\misc\\python\\lib')
+        >>>
+</PRE>
+For a more permanent effect, set the environment variable PYTHONPATH,
+as follows (talking to a DOS prompt):
+<P>
+<PRE>
+        C> SET PYTHONPATH=C:\misc\python\lib
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.008.htp">Log info</A>
+
+/ Last changed on Fri May 23 16:28:27 1997 by
+<A HREF="mailto:klm@python.org">Ken Manheimer</A>
+<P>
+
+<HR>
+<H2><A NAME="7.9">7.9. Where's the documentation for the Mac or PC version?</A></H2>
+The documentation for the Unix version also applies to the Mac and
+PC versions.  Where applicable, differences are indicated in the text.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.009.htp">Log info</A>
+<P>
+
+<HR>
+<H2><A NAME="7.10">7.10. How do I create a Python program file on the Mac or PC?</A></H2>
+Use an external editor.  On the Mac, BBEdit seems to be a popular
+no-frills text editor.  I work like this: start the interpreter; edit
+a module file using BBedit; import and test it in the interpreter;
+edit again in BBedit; then use the built-in function reload() to
+re-read the imported module; etc. In the 1.4 distribution 
+you will find a BBEdit extension that makes life a little easier: 
+it can tell the interpreter to execute the current window. 
+See :Mac:Tools:BBPy:README. 
+<P>
+Regarding the same question for the PC, Kurt Wm. Hemr writes: "While
+anyone with a pulse could certainly figure out how to do the same on
+MS-Windows, I would recommend the NotGNU Emacs clone for MS-Windows.
+Not only can you easily resave and "reload()" from Python after making
+changes, but since WinNot auto-copies to the clipboard any text you
+select, you can simply select the entire procedure (function) which
+you changed in WinNot, switch to QWPython, and shift-ins to reenter
+the changed program unit."
+<P>
+If you're using Windows95 or Windows NT, you should also know about
+PythonWin, which provides a GUI framework, with an mouse-driven
+editor, an object browser, and a GUI-based debugger.  See
+<PRE>
+       <A HREF="http://www.python.org/ftp/python/pythonwin">http://www.python.org/ftp/python/pythonwin</A>/
+</PRE>
+for details.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.010.htp">Log info</A>
+
+/ Last changed on Sun May 25 10:04:25 1997 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="7.11">7.11. How can I use Tkinter on Windows 95/NT?</A></H2>
+Starting from Python 1.5, it's very easy -- just download and install
+Python and Tcl/Tk and you're in business.  See 
+<P>
+<PRE>
+  <A HREF="http://www.python.org/download/download_windows.html">http://www.python.org/download/download_windows.html</A>
+</PRE>
+One warning: don't attempt to use Tkinter from PythonWin
+(Mark Hammond's IDE).  Use it from the command line interface
+(python.exe) or the windowless interpreter (pythonw.exe).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.011.htp">Log info</A>
+
+/ Last changed on Fri Jun 12 09:32:48 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="7.12">7.12. cgi.py (or other CGI programming) doesn't work sometimes on NT or win95!</A></H2>
+Be sure you have the latest python.exe, that you are using
+python.exe rather than a GUI version of python and that you
+have configured the server to execute
+<P>
+<PRE>
+     "...\python.exe -u ..."
+</PRE>
+for the cgi execution.  The -u (unbuffered) option on NT and
+win95 prevents the interpreter from altering newlines in the
+standard input and output.  Without it post/multipart requests
+will seem to have the wrong length and binary (eg, GIF)
+responses may get garbled (resulting in, eg, a "broken image").
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.012.htp">Log info</A>
+
+/ Last changed on Wed Jul 30 10:48:02 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="7.13">7.13. Why doesn't os.popen() work in PythonWin on NT?</A></H2>
+The reason that os.popen() doesn't work from within PythonWin is due to a bug in Microsoft's C Runtime Library (CRT). The CRT assumes you  have a Win32 console attached to the process.
+<P>
+You should use the win32pipe module's popen() instead which doesn't depend on having an attached Win32 console.
+<P>
+Example:
+<PRE>
+ import win32pipe
+ f = win32pipe.popen('dir /c c:\\')
+ print f.readlines()
+ f.close()
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.013.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.013.htp">Log info</A>
+
+/ Last changed on Thu Jul 31 15:34:09 1997 by
+<A HREF="mailto:billtut@microsoft.com">Bill Tutt</A>
+<P>
+
+<HR>
+<H2><A NAME="7.14">7.14. How do I use different functionality on different platforms with the same program?</A></H2>
+Remember that Python is extremely dynamic and that you
+can use this dynamism to configure a program at run-time to
+use available functionality on different platforms.  For example
+you can test the sys.platform and import different modules based
+on its value.
+<P>
+<PRE>
+   import sys
+   if sys.platform == "win32":
+      import win32pipe
+      popen = win32pipe.popen
+   else:
+      import os
+      popen = os.popen
+</PRE>
+(See FAQ 7.13 for an explanation of why you might want to
+do something like this.)  Also you can try to import a module
+and use a fallback if the import fails:
+<P>
+<PRE>
+    try:
+         import really_fast_implementation
+         choice = really_fast_implementation
+    except ImportError:
+         import slower_implementation
+         choice = slower_implementation
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.014.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.014.htp">Log info</A>
+
+/ Last changed on Wed Aug 13 07:39:06 1997 by
+<A HREF="mailto:aaron_watters@msn.com">aaron watters</A>
+<P>
+
+<HR>
+<H2><A NAME="7.15">7.15. Is there an Amiga version of Python?</A></H2>
+Yes. See the AmigaPython homepage at <A HREF="http://www.bigfoot.com/~irmen/python.html">http://www.bigfoot.com/~irmen/python.html</A>.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.015.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.015.htp">Log info</A>
+
+/ Last changed on Mon Dec 14 06:53:32 1998 by
+<A HREF="mailto:irmen@bigfoot.com">Irmen de Jong</A>
+<P>
+
+<HR>
+<H2><A NAME="7.16">7.16. Why doesn't os.popen()/win32pipe.popen() work on Win9x?</A></H2>
+There is a bug in Win9x that prevents os.popen/win32pipe.popen* from working. The good news is there is a way to work around this problem.
+The Microsoft Knowledge Base article that you need to lookup is: Q150956. You will find links to the knowledge base at:
+<A HREF="http://www.microsoft.com/kb">http://www.microsoft.com/kb</A>.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq07.016.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq07.016.htp">Log info</A>
+
+/ Last changed on Fri Jun 25 10:45:38 1999 by
+<A HREF="mailto:billtut@microsoft.com">Bill Tutt</A>
+<P>
+
+<HR>
+<H1>8. Python on Windows</H1>
+
+<HR>
+<H2><A NAME="8.1">8.1. Using Python for CGI on Microsoft Windows</A></H2>
+** Setting up the Microsoft IIS Server/Peer Server
+<P>
+On the Microsoft IIS 
+server or on the Win95 MS Personal Web Server
+you set up python in the same way that you 
+would set up any other scripting engine. 
+<P>
+Run regedt32 and go to: 
+<P>
+HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W3SVC\Parameters\ScriptMap 
+<P>
+and enter the following line (making any specific changes that your system may need) 
+<P>
+.py :REG_SZ: c:\&lt;path to python&gt;\python.exe -u %s %s 
+<P>
+This line will allow you to call your script with a simple reference like:
+http://yourserver/scripts/yourscript.py 
+provided "scripts" is an "executable" directory for your server (which
+it usually is by default).
+The "-u" flag specifies unbuffered and binary mode for stdin - needed when working with binary data
+<P>
+In addition, it is recommended by people who would know that using ".py" may 
+not be a good idea for the file extensions when used in this context
+(you might want to reserve *.py for support modules and use *.cgi or *.cgp
+for "main program" scripts).
+However, that issue is beyond this Windows FAQ entry.
+<P>
+<P>
+** Apache configuration
+<P>
+In the Apache configuration file httpd.conf, add the following line at 
+the end of the file:
+<P>
+ScriptInterpreterSource Registry
+<P>
+Then, give your Python CGI-scripts the extension .py and put them in the cgi-bin directory.
+<P>
+<P>
+** Netscape Servers:
+Information on this topic exists at:
+<A HREF="http://home.netscape.com/comprod/server_central/support/fasttrack_man/programs.htm#1010870">http://home.netscape.com/comprod/server_central/support/fasttrack_man/programs.htm#1010870</A>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.001.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.001.htp">Log info</A>
+
+/ Last changed on Wed Mar 27 12:25:54 2002 by
+<A HREF="mailto:gerhard@bigfoot.de">Gerhard Hring</A>
+<P>
+
+<HR>
+<H2><A NAME="8.2">8.2. How to check for a keypress without blocking?</A></H2>
+Use the msvcrt module.  This is a standard Windows-specific extensions
+in Python 1.5 and beyond.  It defines a function kbhit() which checks
+whether a keyboard hit is present; also getch() which gets one
+character without echo.  Plus a few other goodies.
+<P>
+(Search for "keypress" to find an answer for Unix as well.)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.002.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.002.htp">Log info</A>
+
+/ Last changed on Mon Mar 30 16:21:46 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.3">8.3. $PYTHONPATH</A></H2>
+In MS-DOS derived environments, a unix variable such as $PYTHONPATH is 
+set as PYTHONPATH, without the dollar sign.  PYTHONPATH is useful for
+specifying the location of library files.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.003.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.003.htp">Log info</A>
+
+/ Last changed on Thu Jun 11 00:41:26 1998 by
+<A HREF="mailto:guido@python.org">Gvr</A>
+<P>
+
+<HR>
+<H2><A NAME="8.4">8.4. dedent syntax errors</A></H2>
+The FAQ does not recommend using tabs, and Guido's Python Style Guide recommends 4 spaces for distributed Python code; this is also the Emacs python-mode default; see
+<P>
+<PRE>
+    <A HREF="http://www.python.org/doc/essays/styleguide.html">http://www.python.org/doc/essays/styleguide.html</A>
+</PRE>
+Under any editor mixing tabs and spaces is a bad idea.  MSVC is no different in this respect, and is easily configured to use spaces:  Take Tools -> Options -> Tabs, and for file type "Default" set "Tab size" and "Indent size" to 4, and select the "Insert spaces" radio button.
+<P>
+If you suspect mixed tabs and spaces are causing problems in leading whitespace, run Python with the -t switch or, run Tools/Scripts/tabnanny.py to check a directory tree in batch mode.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.004.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.004.htp">Log info</A>
+
+/ Last changed on Mon Feb 12 15:04:14 2001 by
+<A HREF="mailto:sholden@holdenweb.com">Steve Holden</A>
+<P>
+
+<HR>
+<H2><A NAME="8.5">8.5. How do I emulate os.kill() in Windows?</A></H2>
+Use win32api:
+<P>
+<PRE>
+    def kill(pid):
+        """kill function for Win32"""
+        import win32api
+        handle = win32api.OpenProcess(1, 0, pid)
+        return (0 != win32api.TerminateProcess(handle, 0))
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.005.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.005.htp">Log info</A>
+
+/ Last changed on Sat Aug  8 18:55:06 1998 by
+<A HREF="mailto:jeffbauer@bigfoot.com">Jeff Bauer</A>
+<P>
+
+<HR>
+<H2><A NAME="8.6">8.6. Why does os.path.isdir() fail on NT shared directories?</A></H2>
+The solution appears to be always append the "\\" on 
+the end of shared drives.
+<P>
+<PRE>
+  >>> import os
+  >>> os.path.isdir( '\\\\rorschach\\public')
+  0
+  >>> os.path.isdir( '\\\\rorschach\\public\\')
+  1
+</PRE>
+[Blake Winton responds:]
+I've had the same problem doing "Start >> Run" and then a
+directory on a shared drive.  If I use "\\rorschach\public", 
+it will fail, but if I use "\\rorschach\public\", it will 
+work.  For that matter, os.stat() does the same thing (well, 
+it gives an error for "\\\\rorschach\\public", but you get 
+the idea)...
+<P>
+I've got a theory about why this happens, but it's only 
+a theory.  NT knows the difference between shared directories, 
+and regular directories.  "\\rorschach\public" isn't a 
+directory, it's _really_ an IPC abstraction.  This is sort 
+of lended credence to by the fact that when you're mapping 
+a network drive, you can't map "\\rorschach\public\utils", 
+but only "\\rorschach\public".
+<P>
+[Clarification by <A HREF="mailto:funkster@midwinter.com">funkster@midwinter.com</A>]
+It's not actually a Python 
+question, as Python is working just fine; it's clearing up something 
+a bit muddled about Windows networked drives.
+<P>
+It helps to think of share points as being like drive letters.
+Example:
+<PRE>
+        k: is not a directory
+        k:\ is a directory
+        k:\media is a directory
+        k:\media\ is not a directory
+</PRE>
+The same rules apply if you substitute "k:" with "\\conky\foo":
+<PRE>
+        \\conky\foo  is not a directory
+        \\conky\foo\ is a directory
+        \\conky\foo\media is a directory
+        \\conky\foo\media\ is not a directory
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.006.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.006.htp">Log info</A>
+
+/ Last changed on Sun Jan 31 08:44:48 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.7">8.7. PyRun_SimpleFile() crashes on Windows but not on Unix</A></H2>
+I've seen a number of reports of PyRun_SimpleFile() failing
+in a Windows port of an application embedding Python that worked
+fine on Unix.  PyRun_SimpleString() works fine on both platforms.
+<P>
+I think this happens because the application was compiled with a 
+different set of compiler flags than Python15.DLL.  It seems that some 
+compiler flags affect the standard I/O library in such a way that 
+using different flags makes calls fail.  You need to set it for 
+the non-debug multi-threaded DLL (/MD on the command line, or can be set via MSVC under Project Settings-&gt;C++/Code Generation then the "Use rum-time library" dropdown.)
+<P>
+Also note that you can not mix-and-match Debug and Release versions.  If you wish to use the Debug Multithreaded DLL, then your module _must_ have an "_d" appended to the base name.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.007.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.007.htp">Log info</A>
+
+/ Last changed on Wed Nov 17 17:37:07 1999 by
+<A HREF="mailto:mhammond@skippinet.com.au">Mark Hammond</A>
+<P>
+
+<HR>
+<H2><A NAME="8.8">8.8. Import of _tkinter fails on Windows 95/98</A></H2>
+Sometimes, the import of _tkinter fails on Windows 95 or 98,
+complaining with a message like the following:
+<P>
+<PRE>
+  ImportError: DLL load failed: One of the library files needed
+  to run this application cannot be found.
+</PRE>
+It could be that you haven't installed Tcl/Tk, but if you did
+install Tcl/Tk, and the Wish application works correctly,
+the problem may be that its installer didn't
+manage to edit the autoexec.bat file correctly.  It tries to add a
+statement that changes the PATH environment variable to include
+the Tcl/Tk 'bin' subdirectory, but sometimes this edit doesn't
+quite work.  Opening it with notepad usually reveals what the
+problem is.
+<P>
+(One additional hint, noted by David Szafranski: you can't use
+long filenames here; e.g. use C:\PROGRA~1\Tcl\bin instead of
+C:\Program Files\Tcl\bin.)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.008.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.008.htp">Log info</A>
+
+/ Last changed on Wed Dec  2 22:32:41 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.9">8.9. Can't extract the downloaded documentation on Windows</A></H2>
+Sometimes, when you download the documentation package to a Windows
+machine using a web browser, the file extension of the saved file
+ends up being .EXE.  This is a mistake; the extension should be .TGZ.
+<P>
+Simply rename the downloaded file to have the .TGZ extension, and
+WinZip will be able to handle it.  (If your copy of WinZip doesn't,
+get a newer one from <A HREF="http://www.winzip.com">http://www.winzip.com</A>.)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.009.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.009.htp">Log info</A>
+
+/ Last changed on Sat Nov 21 13:41:35 1998 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.10">8.10. Can't get Py_RunSimpleFile() to work.</A></H2>
+This is very sensitive to the compiler vendor, version and (perhaps)
+even options.  If the FILE* structure in your embedding program isn't
+the same as is assumed by the Python interpreter it won't work.
+<P>
+The Python 1.5.* DLLs (python15.dll) are all compiled
+with MS VC++ 5.0 and with multithreading-DLL options (/MD, I think).
+<P>
+If you can't change compilers or flags, try using Py_RunSimpleString().
+A trick to get it to run an arbitrary file is to construct a call to
+execfile() with the name of your file as argument.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.010.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.010.htp">Log info</A>
+
+/ Last changed on Wed Jan 13 10:58:14 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.11">8.11. Where is Freeze for Windows?</A></H2>
+("Freeze" is a program that allows you to ship a Python program
+as a single stand-alone executable file.  It is <I>not</I> a compiler,
+your programs don't run any faster, but they are more easily
+distributable (to platforms with the same OS and CPU).  Read the
+README file of the freeze program for more disclaimers.)
+<P>
+You can use freeze on Windows, but you must download the source
+tree (see <A HREF="http://www.python.org/download/download_source.html">http://www.python.org/download/download_source.html</A>).
+This is recommended for Python 1.5.2 (and betas thereof) only;
+older versions don't quite work.
+<P>
+You need the Microsoft VC++ 5.0 compiler (maybe it works with
+6.0 too).  You probably need to build Python -- the project files
+are all in the PCbuild directory.
+<P>
+The freeze program is in the Tools\freeze subdirectory of the source
+tree.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.011.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.011.htp">Log info</A>
+
+/ Last changed on Wed Feb 17 18:47:24 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.12">8.12. Is a *.pyd file the same as a DLL?</A></H2>
+Yes, .pyd files are dll's.  But there are a few differences.  If you
+have a DLL named foo.pyd, then it must have a function initfoo().  You
+can then write Python "import foo", and Python will search for foo.pyd
+(as well as foo.py, foo.pyc) and if it finds it, will attempt to call
+initfoo() to initialize it.  You do not link your .exe with foo.lib,
+as that would cause Windows to require the DLL to be present.
+<P>
+Note that the search path for foo.pyd is PYTHONPATH, not the same as
+the path that Windows uses to search for foo.dll.  Also, foo.pyd need
+not be present to run your program, whereas if you linked your program
+with a dll, the dll is required.  Of course, foo.pyd is required if
+you want to say "import foo".  In a dll, linkage is declared in the
+source code with __declspec(dllexport).  In a .pyd, linkage is defined
+in a list of available functions.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.012.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.012.htp">Log info</A>
+
+/ Last changed on Tue Nov 23 02:40:08 1999 by
+<A HREF="mailto:jquinn+psa@cs.oberlin.edu">Jameson Quinn</A>
+<P>
+
+<HR>
+<H2><A NAME="8.13">8.13. Missing cw3215mt.dll (or missing cw3215.dll)</A></H2>
+Sometimes, when using Tkinter on Windows, you get an error that
+cw3215mt.dll or cw3215.dll is missing.
+<P>
+Cause: you have an old Tcl/Tk DLL built with cygwin in your path
+(probably C:\Windows).  You must use the Tcl/Tk DLLs from the
+standard Tcl/Tk installation (Python 1.5.2 comes with one).
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.013.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.013.htp">Log info</A>
+
+/ Last changed on Fri Jun 11 00:54:13 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.14">8.14. How to make python scripts executable:</A></H2>
+[Blake Coverett]
+<P>
+Win2K:
+<P>
+The standard installer already associates the .py extension with a file type
+(Python.File) and gives that file type an open command that runs the
+interpreter (D:\Program Files\Python\python.exe "%1" %*).  This is enough to
+make scripts executable from the command prompt as 'foo.py'.  If you'd
+rather be able to execute the script by simple typing 'foo' with no
+extension you need to add .py to the PATHEXT environment variable.
+<P>
+WinNT:
+<P>
+The steps taken by the installed as described above allow you do run a
+script with 'foo.py', but a long time bug in the NT command processor
+prevents you from redirecting the input or output of any script executed in
+this way.  This is often important.
+<P>
+An appropriate incantation for making a Python script executable under WinNT
+is to give the file an extension of .cmd and add the following as the first
+line:
+<P>
+<PRE>
+    @setlocal enableextensions &amp; python -x %~f0 %* &amp; goto :EOF
+</PRE>
+Win9x:
+<P>
+[Due to Bruce Eckel]
+<P>
+<PRE>
+  @echo off
+  rem = """
+  rem run python on this bat file. Needs the full path where
+  rem you keep your python files. The -x causes python to skip
+  rem the first line of the file:
+  python -x c:\aaa\Python\\"%0".bat %1 %2 %3 %4 %5 %6 %7 %8 %9
+  goto endofpython
+  rem """
+</PRE>
+<PRE>
+  # The python program goes here:
+</PRE>
+<PRE>
+  print "hello, Python"
+</PRE>
+<PRE>
+  # For the end of the batch file:
+  rem = """
+  :endofpython
+  rem """
+</PRE>
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.014.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.014.htp">Log info</A>
+
+/ Last changed on Tue Nov 30 10:25:17 1999 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.15">8.15. Warning about CTL3D32 version from installer</A></H2>
+The Python installer issues a warning like this:
+<P>
+<PRE>
+  This version uses CTL3D32.DLL whitch is not the correct version.
+  This version is used for windows NT applications only.
+</PRE>
+[Tim Peters]
+This is a Microsoft DLL, and a notorious
+source of problems.  The msg means what it says:  you have the wrong version
+of this DLL for your operating system.  The Python installation did not
+cause this -- something else you installed previous to this overwrote the
+DLL that came with your OS (probably older shareware of some sort, but
+there's no way to tell now).  If you search for "CTL3D32" using any search
+engine (AltaVista, for example), you'll find hundreds and hundreds of web
+pages complaining about the same problem with all sorts of installation
+programs.  They'll point you to ways to get the correct version reinstalled
+on your system (since Python doesn't cause this, we can't fix it).
+<P>
+David A Burton has written a little program to fix this.  Go to
+<A HREF="http://www.burtonsys.com/download.html">http://www.burtonsys.com/download.html</A> and click on "ctl3dfix.zip"
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.015.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.015.htp">Log info</A>
+
+/ Last changed on Thu Oct 26 15:42:00 2000 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<H2><A NAME="8.16">8.16. How can I embed Python into a Windows application?</A></H2>
+Edward K. Ream &lt;<A HREF="mailto:edream@tds.net">edream@tds.net</A>&gt; writes
+<P>
+When '##' appears in a file name below, it is an abbreviated version number.  For example, for Python 2.1.1, ## will be replaced by 21.
+<P>
+Embedding the Python interpreter in a Windows app can be summarized as
+follows:
+<P>
+1. Do _not_ build Python into your .exe file directly.  On Windows,
+Python must be a DLL to handle importing modules that are themselves
+DLL's.  (This is the first key undocumented fact.) Instead, link to
+python##.dll; it is typically installed in c:\Windows\System.  
+<P>
+You can link to Python statically or dynamically.  Linking statically
+means linking against python##.lib The drawback is that your app won't
+run if python##.dll does not exist on your system.
+<P>
+General note: python##.lib is the so-called "import lib" corresponding
+to python.dll.  It merely defines symbols for the linker.
+<P>
+Borland note: convert python##.lib to OMF format using Coff2Omf.exe
+first.
+<P>
+Linking dynamically greatly simplifies link options; everything happens
+at run time.  Your code must load python##.dll using the Windows
+LoadLibraryEx() routine.  The code must also use access routines and
+data in python##.dll (that is, Python's C API's) using pointers
+obtained by the Windows GetProcAddress() routine.  Macros can make
+using these pointers transparent to any C code that calls routines in
+Python's C API.
+<P>
+2. If you use SWIG, it is easy to create a Python "extension module"
+that will make the app's data and methods available to Python.  SWIG
+will handle just about all the grungy details for you.  The result is C
+code that you link _into your .exe file_ (!)  You do _not_ have to
+create a DLL file, and this also simplifies linking.
+<P>
+3.  SWIG will create an init function (a C function) whose name depends
+on the name of the extension module.  For example, if the name of the
+module is leo, the init function will be called initleo().  If you use
+SWIG shadow classes, as you should, the init function will be called
+initleoc().  This initializes a mostly hidden helper class used by the
+shadow class.
+<P>
+The reason you can link the C code in step 2 into your .exe file is that
+calling the initialization function is equivalent to importing the
+module into Python! (This is the second key undocumented fact.)
+<P>
+4. In short, you can use the following code to initialize the Python
+interpreter with your extension module.
+<P>
+<PRE>
+    #include "python.h"
+    ...
+    Py_Initialize();  // Initialize Python.
+    initmyAppc();  // Initialize (import) the helper class. 
+    PyRun_SimpleString("import myApp") ;  // Import the shadow class.
+</PRE>
+5. There are two problems with Python's C API which will become apparent
+if you use a compiler other than MSVC, the compiler used to build
+python##.dll.
+<P>
+Problem 1: The so-called "Very High Level" functions that take FILE *
+arguments will not work in a multi-compiler environment; each compiler's
+notion of a struct FILE will be different.  From an implementation
+standpoint these are very _low_ level functions.
+<P>
+Problem 2: SWIG generates the following code when generating wrappers to
+void functions:
+<P>
+<PRE>
+    Py_INCREF(Py_None);
+    _resultobj = Py_None;
+    return _resultobj;
+</PRE>
+Alas, Py_None is a macro that expands to a reference to a complex data
+structure called _Py_NoneStruct inside python##.dll.  Again, this code
+will fail in a mult-compiler environment.  Replace such code by:
+<P>
+<PRE>
+    return Py_BuildValue("");
+</PRE>
+It may be possible to use SWIG's %typemap command to make the change
+automatically, though I have not been able to get this to work (I'm a
+complete SWIG newbie).
+<P>
+6. Using a Python shell script to put up a Python interpreter window
+from inside your Windows app is not a good idea; the resulting window
+will be independent of your app's windowing system.  Rather, you (or the
+wxPythonWindow class) should create a "native" interpreter window.  It
+is easy to connect that window to the Python interpreter.  You can
+redirect Python's i/o to _any_ object that supports read and write, so
+all you need is a Python object (defined in your extension module) that
+contains read() and write() methods.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.016.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.016.htp">Log info</A>
+
+/ Last changed on Thu Jan 31 16:29:34 2002 by
+<A HREF="mailto:vkryukov@ufg.com">Victor Kryukov</A>
+<P>
+
+<HR>
+<H2><A NAME="8.17">8.17. Setting up IIS 5 to use Python for CGI</A></H2>
+In order to set up Internet Information Services 5 to use Python for CGI processing, please see the following links:
+<P>
+<A HREF="http://www.e-coli.net/pyiis_server.html">http://www.e-coli.net/pyiis_server.html</A> (for Win2k Server)
+<A HREF="http://www.e-coli.net/pyiis.html">http://www.e-coli.net/pyiis.html</A> (for Win2k pro)
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.017.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.017.htp">Log info</A>
+
+/ Last changed on Fri Mar 22 22:05:51 2002 by
+<A HREF="mailto:dsavitsk@e-coli.net">douglas savitsky</A>
+<P>
+
+<HR>
+<H2><A NAME="8.18">8.18. How do I run a Python program under Windows?</A></H2>
+This is not necessarily quite the straightforward question it appears
+to be. If you are already familiar with running programs from the
+Windows command line then everything will seem really easy and
+obvious. If your computer experience is limited then you might need a
+little more guidance. Also there are differences between Windows 95,
+98, NT, ME, 2000 and XP which can add to the confusion. You might
+think of this as "why I pay software support charges" if you have a
+helpful and friendly administrator to help you set things up without
+having to understand all this yourself. If so, then great! Show them
+this page and it should be a done deal.
+<P>
+Unless you use some sort of integrated development environment (such
+as PythonWin or IDLE, to name only two in a growing family) then you
+will end up <I>typing</I> Windows commands into what is variously referred
+to as a "DOS window" or "Command prompt window". Usually you can
+create such a window from your Start menu (under Windows 2000 I use
+"Start | Programs | Accessories | Command Prompt").  You should be
+able to recognize when you have started such a window because you will
+see a Windows "command prompt", which usually looks like this:
+<P>
+<PRE>
+    C:\>
+</PRE>
+The letter may be different, and there might be other things after it,
+so you might just as easily see something like:
+<P>
+<PRE>
+    D:\Steve\Projects\Python>
+</PRE>
+depending on how your computer has been set up and what else you have
+recently done with it. Once you have started such a window, you are
+well on the way to running Python programs.
+<P>
+You need to realize that your Python scripts have to be processed by
+another program, usually called the "Python interpreter". The
+interpreter reads your script, "compiles" it into "Python bytecodes"
+(which are instructions for an imaginary computer known as the "Python
+Virtual Machine") and then executes the bytecodes to run your
+program. So, how do you arrange for the interpreter to handle your
+Python?
+<P>
+First, you need to make sure that your command window recognises the
+word "python" as an instruction to start the interpreter. If you have
+opened a command window, you should try entering the command:
+<P>
+<PRE>
+    python
+</PRE>
+and hitting return. If you then see something like:
+<P>
+<PRE>
+    Python 2.2 (#28, Dec 21 2001, 12:21:22) [MSC 32 bit (Intel)] on win32
+    Type "help", "copyright", "credits" or "license" for more information.
+    >>>
+</PRE>
+then this part of the job has been correctly managed during Python's
+installation process, and you have started the interpreter in
+"interactive mode". That means you can enter Python statements or
+expressions interactively and have them executed or evaluated while
+you wait. This is one of Python's strongest features, but it takes a
+little getting used to. Check it by entering a few expressions of your
+choice and seeing the results...
+<P>
+<PRE>
+    >>> print "Hello"
+    Hello
+    >>> "Hello" * 3
+    HelloHelloHello
+</PRE>
+When you want to end your interactive Python session, enter a
+terminator (hold the Ctrl key down while you enter a Z, then hit the
+"Enter" key) to get back to your Windows command prompt.  You may also
+find that you have a Start-menu entry such as "Start | Programs |
+Python 2.2 | Python (command line)" that results in you seeing the
+">>>" prompt in a new window. If so, the window will disappear after
+you enter the terminator -- Windows runs a single "python" command in
+the window, which terminates when you terminate the interpreter.
+<P>
+If the "python" command, instead of displaying the interpreter prompt ">>>", gives you a message like
+<P>
+<PRE>
+    'python' is not recognized as an internal or external command,
+    operable program or batch file.
+</PRE>
+or
+<P>
+<PRE>
+    Bad command or filename
+</PRE>
+then you need to make sure that your computer knows where to find the
+Python interpreter. To do this you will have to modify a setting
+called the PATH, which is a just list of directories where Windows
+will look for programs. Rather than just enter the right command every
+time you create a command window, you should arrange for Python's
+installation directory to be added to the PATH of every command window
+as it starts. If you installed Python fairly recently then the command
+<P>
+<PRE>
+    dir C:\py*
+</PRE>
+will probably tell you where it is installed. Alternatively, perhaps
+you made a note. Otherwise you will be reduced to a search of your
+whole disk ... break out the Windows explorer and use "Tools | Find"
+or hit the "Search" button and look for "python.exe". Suppose you
+discover that Python is installed in the C:\Python22 directory (the
+default at the time of writing) then you should make sure that
+entering the command
+<P>
+<PRE>
+    c:\Python22\python
+</PRE>
+starts up the interpreter as above (and don't forget you'll need a
+"CTRL-Z" and an "Enter" to get out of it). Once you have verified the
+directory, you need to add it to the start-up routines your computer
+goes through.  For older versions of Windows the easiest way to do
+this is to edit the C:\AUTOEXEC.BAT file. You would want to add a line
+like the following to AUTOEXEC.BAT:
+<P>
+<PRE>
+    PATH C:\Python22;%PATH%
+</PRE>
+For Windows NT, 2000 and (I assume) XP, you will need to add a string
+such as
+<P>
+<PRE>
+    ;C:\Python22
+</PRE>
+to the current setting for the PATH environment variable, which you
+will find in the properties window of "My Computer" under the
+"Advanced" tab. Note that if you have sufficient privilege you might
+get a choice of installing the settings either for the Current User or
+for System. The latter is preferred if you want everybody to be able
+to run Python on the machine.
+<P>
+If you aren't confident doing any of these manipulations yourself, ask
+for help!  At this stage you may or may not want to reboot your system
+to make absolutely sure the new setting has "taken" (don't you love
+the way Windows gives you these freqeuent coffee breaks). You probably
+won't need to for Windows NT, XP or 2000. You can also avoid it in
+earlier versions by editing the file C:\WINDOWS\COMMAND\CMDINIT.BAT
+instead of AUTOEXEC.BAT.
+<P>
+You should now be able to start a new command window, enter
+<P>
+<PRE>
+    python
+</PRE>
+at the "C:>" (or whatever) prompt, and see the ">>>" prompt that
+indicates the Python interpreter is reading interactive commands.
+<P>
+Let's suppose you have a program called "pytest.py" in directory
+"C:\Steve\Projects\Python". A session to run that program might look
+like this:
+<P>
+<PRE>
+    C:\> cd \Steve\Projects\Python
+    C:\Steve\Projects\Python> python pytest.py
+</PRE>
+Because you added a file name to the command to start the interpreter,
+when it starts up it reads the Python script in the named file,
+compiles it, executes it, and terminates (so you see another "C:\>"
+prompt).  You might also have entered
+<P>
+<PRE>
+    C:\> python \Steve\Projects\Python\pytest.py
+</PRE>
+if you hadn't wanted to change your current directory.
+<P>
+Under NT, 2000 and XP you may well find that the installation process
+has also arranged that the command
+<P>
+<PRE>
+    pytest.py
+</PRE>
+(or, if the file isn't in the current directory)
+<P>
+<PRE>
+    C:\Steve\Projects\Python\pytest.py
+</PRE>
+will automatically recognize the ".py" extension and run the Python
+interpreter on the named file. Using this feature is fine, but <I>some</I>
+versions of Windows have bugs which mean that this form isn't exactly
+equivalent to using the interpreter explicitly, so be careful. Easier
+to remember, for now, that
+<P>
+<PRE>
+    python C:\Steve\Projects\Python\pytest.py
+</PRE>
+works pretty close to the same, and redirection will work (more)
+reliably.
+<P>
+The important things to remember are:
+<P>
+1. Start Python from the Start Menu, or make sure the PATH is set
+correctly so Windows can find the Python interpreter.
+<P>
+<PRE>
+    python
+</PRE>
+should give you a '>>>" prompt from the Python interpreter. Don't
+forget the CTRL-Z and ENTER to terminate the interpreter (and, if you
+started the window from the Start Menu, make the window disappear).
+<P>
+2. Once this works, you run programs with commands:
+<P>
+<PRE>
+    python {program-file}
+</PRE>
+3. When you know the commands to use you can build Windows shortcuts
+to run the Python interpreter on any of your scripts, naming
+particular working directories, and adding them to your menus, but
+that's another lessFAQ. Take a look at
+<P>
+<PRE>
+    python --help
+</PRE>
+if your needs are complex.
+<P>
+4. Interactive mode (where you see the ">>>" prompt) is best used
+<I>not</I> for running programs, which are better executed as in steps 2
+and 3, but for checking that individual statements and expressions do
+what you think they will, and for developing code by experiment.
+<P>
+
+<A HREF="faqw.py?req=edit&amp;file=faq08.018.htp">Edit this entry</A> /
+<A HREF="faqw.py?req=log&amp;file=faq08.018.htp">Log info</A>
+
+/ Last changed on Tue Aug 20 16:19:53 2002 by
+<A HREF="mailto:guido@python.org">GvR</A>
+<P>
+
+<HR>
+<A HREF="http://www.python.org">Python home</A> /
+<A HREF="faqw.py?req=home">Python FAQ Wizard 1.0.3</A> /
+Feedback to <A HREF="mailto:guido@python.org">GvR</A>
+<P><A HREF="http://www.python.org/"><IMG
+SRC="http://www.python.org/pics/PythonPowered.gif" 
+ALIGN=top WIDTH=110 HEIGHT=44 ALT="Python Powered" BORDER=0></A><BR>
+</BODY>
+</HTML>
--- python2.7-2.7.1.orig/debian/libPVER.symbols.in
+++ python2.7-2.7.1/debian/libPVER.symbols.in
@@ -0,0 +1,3 @@
+libpython@VER@.so.1.0 libpython@VER@ #MINVER#
+ Py_InitModule4@Base @VER@
+#include "libpython.symbols"
--- python2.7-2.7.1.orig/debian/rules
+++ python2.7-2.7.1/debian/rules
@@ -0,0 +1,1043 @@
+#!/usr/bin/make -f
+# Sample debian/rules that uses debhelper. GNU copyright 1997 by Joey Hess.
+
+unexport LANG LC_ALL LC_CTYPE LC_COLLATE LC_TIME LC_NUMERIC LC_MESSAGES
+unexport CFLAGS CXXFLAGS CPPFLAGS
+
+export SHELL = /bin/bash
+
+# Uncomment this to turn on verbose mode.
+#export DH_VERBOSE=1
+
+DEB_HOST_ARCH		?= $(shell dpkg-architecture -qDEB_HOST_ARCH)
+DEB_HOST_ARCH_OS	?= $(shell dpkg-architecture -qDEB_HOST_ARCH_OS)
+
+changelog_values := $(shell dpkg-parsechangelog \
+			| awk '/^(Version|Source):/ {print $$2}')
+PKGSOURCE  := $(word 1, $(changelog_values))
+PKGVERSION := $(word 2, $(changelog_values))
+
+on_buildd := $(shell [ -f /CurrentlyBuilding -o "$$LOGNAME" = buildd ] && echo yes)
+
+ifneq (,$(findstring nocheck, $(DEB_BUILD_OPTIONS)))
+  WITHOUT_CHECK := yes
+endif
+WITHOUT_BENCH :=
+ifneq (,$(findstring nobench, $(DEB_BUILD_OPTIONS)))
+  WITHOUT_BENCH := yes
+endif
+ifeq ($(on_buildd),yes)
+  ifneq (,$(findstring $(DEB_HOST_ARCH), hppa mips mipsel s390))
+    WITHOUT_CHECK := yes
+  endif
+endif
+
+COMMA = ,
+ifneq (,$(filter parallel=%,$(subst $(COMMA), ,$(DEB_BUILD_OPTIONS))))
+  NJOBS := -j $(subst parallel=,,$(filter parallel=%,$(subst $(COMMA), ,$(DEB_BUILD_OPTIONS))))
+endif
+
+distribution := $(shell lsb_release -is)
+#distribution := Ubuntu
+
+export VER=2.7
+export NVER=2.8
+export PVER=python2.7
+export PRIORITY=$(shell echo $(VER) | tr -d '.')0
+
+PREVVER	:= $(shell awk '/^python/ && NR > 1 {print substr($$2,2,length($$2)-2); exit}' debian/changelog)
+
+# default versions are built from the python-defaults source package
+# keep the definition to adjust package priorities.
+DEFAULT_VERSION = no
+STATIC_PYTHON=yes
+
+MIN_MODS := $(shell awk '/^  / && $$2 == "module" { print $$1 }' \
+		debian/PVER-minimal.README.Debian.in)
+MIN_EXTS := $(shell awk '/^  / && $$2 == "extension" { print $$1 }' \
+		debian/PVER-minimal.README.Debian.in)
+MIN_BUILTINS := $(shell awk '/^  / && $$2 == "builtin" { print $$1 }' \
+		debian/PVER-minimal.README.Debian.in)
+MIN_PACKAGES := $(shell awk '/^  / && $$2 == "package" { print $$1 }' \
+		debian/PVER-minimal.README.Debian.in)
+MIN_ENCODINGS := $(foreach i, \
+			$(filter-out \
+			  big5% bz2% cp932.py cp949.py cp950.py euc_% \
+			  gb% iso2022% johab.py shift_jis% , \
+			  $(shell cd Lib/encodings && echo *.py)), \
+			encodings/$(i)) \
+		 codecs.py stringprep.py
+
+with_tk := no
+with_gdbm := no
+with_interp := static
+#with_interp := shared
+
+build_target := build-all
+install_target := install
+
+PY_INTERPRETER = /usr/bin/python$(VER)
+
+ifeq ($(DEFAULT_VERSION),yes)
+  PY_PRIO = standard
+  #PYSTDDEP = , python (>= $(VER))
+  ifeq ($(distribution),Ubuntu)
+    PY_MINPRIO = required
+  else
+    PY_MINPRIO = $(PY_PRIO)
+  endif
+else
+  PY_PRIO = optional
+  PY_MINPRIO = $(PY_PRIO)
+endif
+with_fpectl = yes
+
+CC = gcc
+
+# on alpha, use -O2 only, use -mieee
+ifeq ($(DEB_HOST_ARCH),alpha)
+    OPTSETTINGS = OPT="-g -O2 -fwrapv -mieee -Wall -Wstrict-prototypes"
+    OPTDEBUGSETTINGS = OPT="-g -O0 -fwrapv -mieee -Wall -Wstrict-prototypes"
+endif
+ifeq ($(DEB_HOST_ARCH),m68k)
+    OPTSETTINGS = OPT="-fwrapv -g -O2 -Wall -Wstrict-prototypes"
+endif
+
+PWD		:= $(shell pwd)
+buildd_static	:= $(CURDIR)/build-static
+buildd_shared	:= $(CURDIR)/build-shared
+buildd_debug	:= $(CURDIR)/build-debug
+buildd_shdebug	:= $(CURDIR)/build-shdebug
+
+d		:= debian/tmp
+scriptdir	=  usr/share/lib/python$(VER)
+scriptdir	=  usr/share/python$(VER)
+scriptdir	=  usr/lib/python$(VER)
+
+# package names and directories
+p_base	:= $(PVER)
+p_min	:= $(PVER)-minimal
+p_lib	:= lib$(PVER)
+p_tk	:= $(PVER)-tk
+p_gdbm	:= $(PVER)-gdbm
+p_dev	:= $(PVER)-dev
+p_exam	:= $(PVER)-examples
+p_idle	:= idle-$(PVER)
+p_doc	:= $(PVER)-doc
+p_dbg	:= $(PVER)-dbg
+
+d_base	:= debian/$(p_base)
+d_min	:= debian/$(p_min)
+d_lib	:= debian/$(p_lib)
+d_tk	:= debian/$(p_tk)
+d_gdbm	:= debian/$(p_gdbm)
+d_dev	:= debian/$(p_dev)
+d_exam	:= debian/$(p_exam)
+d_idle	:= debian/$(p_idle)
+d_doc	:= debian/$(p_doc)
+d_dbg	:= debian/$(p_dbg)
+
+# profiled build fails on most architectures ...
+ifneq (,$(filter $(DEB_HOST_ARCH), alpha amd64 armel hppa i386 ia64 lpia mips mipsel powerpc s390 sparc hurd-i386 kfreebsd-i386 kfreebsd-amd64))
+  make_build_target =
+else
+  make_build_target = profile-opt
+endif
+make_build_target = profile-opt
+
+build: $(build_target)
+build-all: stamps/stamp-build
+stamps/stamp-build: stamps/stamp-build-static stamps/stamp-build-shared stamps/stamp-build-debug stamps/stamp-build-shared-debug stamps/stamp-mincheck stamps/stamp-check stamps/stamp-pystone stamps/stamp-pybench
+	touch stamps/stamp-build
+
+PROFILE_EXCLUDES = test_compiler test_distutils test_platform test_subprocess \
+	test_pstats test_profile test_multiprocessing test_cprofile \
+	test_thread test_threaded_import test_threadedtempfile \
+	test_socketserver \
+	test_threading test_threading_local test_threadsignals \
+	test_dbm_dumb test_dbm_ndbm test_pydoc test_sundry test_gdb \
+
+ifneq (,$(filter $(DEB_HOST_ARCH), arm armel))
+  PROFILE_EXCLUDES += test_float
+endif
+PROFILE_EXCLUDES += test_zipfile
+PROFILE_EXCLUDES += test_xmlrpc
+
+PROFILE_TASK = ../Lib/test/regrtest.py \
+	-x $(sort $(TEST_EXCLUDES) $(PROFILE_EXCLUDES))
+
+stamps/stamp-build-static: stamps/stamp-configure-static
+	dh_testdir
+	$(MAKE) $(NJOBS) -C $(buildd_static) \
+		PROFILE_TASK='$(PROFILE_TASK)' $(make_build_target)
+	touch stamps/stamp-build-static
+
+stamps/stamp-build-shared: stamps/stamp-configure-shared
+	dh_testdir
+	$(MAKE) $(NJOBS) -C $(buildd_shared)
+#	: # build the shared library
+#	$(MAKE) $(NJOBS) -C $(buildd_shared) \
+#		libpython$(VER).so
+	: # build a static library with PIC objects
+	$(MAKE) $(NJOBS) -C $(buildd_shared) \
+		LIBRARY=libpython$(VER)-pic.a libpython$(VER)-pic.a
+	touch stamps/stamp-build-shared
+
+stamps/stamp-build-debug: stamps/stamp-configure-debug
+	dh_testdir
+	$(MAKE) $(NJOBS) -C $(buildd_debug)
+	touch stamps/stamp-build-debug
+
+stamps/stamp-build-shared-debug: stamps/stamp-configure-shared-debug
+	dh_testdir
+	: # build the shared debug library
+	$(MAKE) $(NJOBS) -C $(buildd_shdebug) \
+		libpython$(VER)_d.so
+	touch stamps/stamp-build-shared-debug
+
+common_configure_args = \
+		--prefix=/usr \
+		--enable-ipv6 \
+		--enable-unicode=ucs4 \
+		--with-dbmliborder=bdb \
+		--with-system-expat
+
+ifeq ($(DEB_HOST_ARCH), avr32)
+  common_configure_args += --without-ffi
+else
+  common_configure_args += --with-system-ffi
+endif
+
+ifeq ($(with_fpectl),yes)
+  common_configure_args += \
+		--with-fpectl
+endif
+
+stamps/stamp-configure-shared: stamps/stamp-patch
+	rm -rf $(buildd_shared)
+	mkdir -p $(buildd_shared)
+	cd $(buildd_shared) && \
+	  CC="$(CC)" $(OPTSETTINGS) \
+	    ../configure \
+		--enable-shared \
+		$(common_configure_args)
+	egrep \
+	  "^#($$(awk '$$2 ~ /^extension$$/ {print $$1}' debian/PVER-minimal.README.Debian.in | tr '\012' '|')XX)" \
+	    Modules/Setup.dist \
+	  | sed -e 's/^#//' -e 's/-Wl,-Bdynamic//;s/-Wl,-Bstatic//' \
+	    >> $(buildd_shared)/Modules/Setup.local
+	cd $(buildd_shared) && \
+	  ../Modules/makesetup -c ../Modules/config.c.in -s Modules \
+	    Modules/Setup.config Modules/Setup.local Modules/Setup
+	mv $(buildd_shared)/config.c $(buildd_shared)/Modules/
+
+	touch stamps/stamp-configure-shared
+
+stamps/stamp-configure-static: stamps/stamp-patch
+	rm -rf $(buildd_static)
+	mkdir -p $(buildd_static)
+	cd $(buildd_static) && \
+	  CC="$(CC)" $(OPTSETTINGS) \
+	    ../configure \
+		$(common_configure_args)
+	egrep \
+	  "^#($$(awk '$$2 ~ /^extension$$/ {print $$1}' debian/PVER-minimal.README.Debian.in | tr '\012' '|')XX)" \
+	  Modules/Setup.dist | sed 's/^#//' \
+	    >> $(buildd_static)/Modules/Setup.local
+	cd $(buildd_static) && \
+	  ../Modules/makesetup -c ../Modules/config.c.in -s Modules \
+	    Modules/Setup.config Modules/Setup.local Modules/Setup
+
+	: # apply workaround for missing os.fsync
+	sed 's/HAVE_SYNC/HAVE_FSYNC/g' $(buildd_static)/pyconfig.h \
+		> $(buildd_static)/pyconfig.h.new
+	touch -r $(buildd_static)/pyconfig.h $(buildd_static)/pyconfig.h.new
+	mv -f $(buildd_static)/pyconfig.h.new $(buildd_static)/pyconfig.h
+	mv $(buildd_static)/config.c $(buildd_static)/Modules/
+
+	touch stamps/stamp-configure-static
+
+stamps/stamp-configure-debug: stamps/stamp-patch
+	rm -rf $(buildd_debug)
+	mkdir -p $(buildd_debug)
+	cd $(buildd_debug) && \
+	  CC="$(CC)" $(OPTDEBUGSETTINGS) CFLAGS="" CXXFLAGS="" \
+	    ../configure \
+		$(common_configure_args) \
+		--with-pydebug
+	egrep \
+	  "^#($$(awk '$$2 ~ /^extension$$/ {print $$1}' debian/PVER-minimal.README.Debian.in | tr '\012' '|')XX)" \
+	  Modules/Setup.dist | sed 's/^#//' \
+	    >> $(buildd_debug)/Modules/Setup.local
+	cd $(buildd_debug) && \
+	  ../Modules/makesetup -c ../Modules/config.c.in -s Modules \
+	    Modules/Setup.config Modules/Setup.local Modules/Setup
+	mv $(buildd_debug)/config.c $(buildd_debug)/Modules/
+
+	: # apply workaround for missing os.fsync
+	sed 's/HAVE_SYNC/HAVE_FSYNC/g' $(buildd_debug)/pyconfig.h \
+		> $(buildd_debug)/pyconfig.h.new
+	touch -r $(buildd_debug)/pyconfig.h $(buildd_debug)/pyconfig.h.new
+	mv -f $(buildd_debug)/pyconfig.h.new $(buildd_debug)/pyconfig.h
+
+	touch stamps/stamp-configure-debug
+
+stamps/stamp-configure-shared-debug: stamps/stamp-patch
+	rm -rf $(buildd_shdebug)
+	mkdir -p $(buildd_shdebug)
+	cd $(buildd_shdebug) && \
+	  CC="$(CC)" $(OPTDEBUGSETTINGS) CFLAGS="" CXXFLAGS="" \
+	    ../configure \
+		$(common_configure_args) \
+		--enable-shared \
+		--with-pydebug
+	egrep \
+	  "^#($$(awk '$$2 ~ /^extension$$/ {print $$1}' debian/PVER-minimal.README.Debian.in | tr '\012' '|')XX)" \
+	  Modules/Setup.dist \
+	    | sed -e 's/^#//' -e 's/-Wl,-Bdynamic//;s/-Wl,-Bstatic//' \
+	    >> $(buildd_shdebug)/Modules/Setup.local
+	cd $(buildd_shdebug) && \
+	  ../Modules/makesetup -c ../Modules/config.c.in -s Modules \
+	    Modules/Setup.config Modules/Setup.local Modules/Setup
+	mv $(buildd_shdebug)/config.c $(buildd_shdebug)/Modules/
+
+	: # apply workaround for missing os.fsync
+	sed 's/HAVE_SYNC/HAVE_FSYNC/g' $(buildd_shdebug)/pyconfig.h \
+		> $(buildd_shdebug)/pyconfig.h.new
+	touch -r $(buildd_shdebug)/pyconfig.h $(buildd_shdebug)/pyconfig.h.new
+	mv -f $(buildd_shdebug)/pyconfig.h.new $(buildd_shdebug)/pyconfig.h
+
+	touch stamps/stamp-configure-shared-debug
+
+stamps/stamp-mincheck: stamps/stamp-build-static debian/PVER-minimal.README.Debian.in
+	for m in $(MIN_MODS) $(MIN_PACKAGES) $(MIN_EXTS) $(MIN_BUILTINS); do \
+	  echo "import $$m"; \
+	done > $(buildd_static)/minmods.py
+	cd $(buildd_static) && ./python ../debian/pymindeps.py minmods.py \
+	  > $(buildd_static)/mindeps.txt
+	if [ -x /usr/bin/dot ]; then \
+	  python debian/depgraph.py < $(buildd_static)/mindeps.txt \
+	    > $(buildd_static)/mindeps.dot; \
+	  dot -Tpng -o $(buildd_static)/mindeps.png \
+	    $(buildd_static)/mindeps.dot; \
+	else true; fi
+	cd $(buildd_static) && ./python ../debian/mincheck.py \
+		minmods.py mindeps.txt
+	touch stamps/stamp-mincheck
+
+TEST_RESOURCES = all
+ifeq ($(on_buildd),yes)
+  TEST_RESOURCES := $(TEST_RESOURCES),-network,-urlfetch
+endif
+TESTOPTS = -w -l -u$(TEST_RESOURCES)
+TEST_EXCLUDES =
+# not built from this source
+TEST_EXCLUDES += test_bsddb3
+# profile.py and pstats.py removed from sources
+TEST_EXCLUDES += test_pstats test_profile test_cprofile
+ifeq ($(on_buildd),yes)
+  TEST_EXCLUDES += test_tcl test_codecmaps_cn test_codecmaps_hk \
+        test_codecmaps_jp test_codecmaps_kr test_codecmaps_tw \
+        test_normalization test_ossaudiodev
+  ifneq (,$(filter $(DEB_HOST_ARCH), powerpc))
+    TEST_EXCLUDES += test_threading
+  endif
+endif
+ifeq (,$(wildcard /dev/dsp))
+  TEST_EXCLUDES += test_linuxaudiodev test_ossaudiodev
+endif
+ifneq (,$(filter $(DEB_HOST_ARCH), armel hppa powerpc))
+  TEST_EXCLUDES += test_multiprocessing
+endif
+ifneq (,$(filter $(DEB_HOST_ARCH), hppa))
+  TEST_EXCLUDES += test_fork1 test_socketserver test_threading test_wait3 test_wait4 test_gdb
+endif
+ifneq (,$(filter $(DEB_HOST_ARCH), arm avr32))
+  TEST_EXCLUDES += test_ctypes
+endif
+ifneq (,$(filter $(DEB_HOST_ARCH), m68k avr32))
+  TEST_EXCLUDES += test_bsddb3
+endif
+ifneq (,$(filter $(DEB_HOST_ARCH), arm armel avr32 m68k))
+  ifeq ($(on_buildd),yes)
+    TEST_EXCLUDES += test_compiler
+  endif
+endif
+ifneq (,$(filter $(DEB_HOST_ARCH), hurd-i386))
+  TEST_EXCLUDES += test_io test_random test_signal test_socketserver test_ssl test_threading
+endif
+ifneq (,$(TEST_EXCLUDES))
+  TESTOPTS += -x $(sort $(TEST_EXCLUDES))
+endif
+
+ifneq (,$(wildcard /usr/bin/localedef))
+  SET_LOCPATH = LOCPATH=$(CURDIR)/locales
+endif
+
+stamps/stamp-check:
+ifeq ($(WITHOUT_CHECK),yes)
+	echo "check run disabled for this build" > $(buildd_static)/test_results
+else
+	: # build locales needed by the testsuite
+	rm -rf locales
+	mkdir locales
+	if which localedef >/dev/null 2>&1; then \
+	  sh debian/locale-gen; \
+	fi
+
+	@echo ========== test environment ============
+	@env
+	@echo ========================================
+
+	@echo "BEGIN test static"
+	-time \
+	  $(SET_LOCPATH) \
+	  $(MAKE) -C $(buildd_static) test \
+	    TESTOPTS="$(TESTOPTS)" 2>&1 \
+	    | tee $(buildd_static)/test_results
+	@echo "END test static"
+	@echo "BEGIN test shared"
+	-time \
+	  $(SET_LOCPATH) \
+	  $(MAKE) -C $(buildd_shared) test \
+	    TESTOPTS="$(TESTOPTS)" 2>&1 \
+	    | tee $(buildd_shared)/test_results
+	@echo "END test shared"
+  ifeq (0,1)
+  ifeq (,$(findstring $(DEB_HOST_ARCH), alpha))
+	@echo "BEGIN test debug"
+	-time \
+	  $(SET_LOCPATH) \
+	  $(MAKE) -C $(buildd_debug) test \
+	    TESTOPTS="$(TESTOPTS)" 2>&1 \
+	    | tee $(buildd_debug)/test_results
+	@echo "END test debug"
+  endif
+  endif
+endif
+	cp -p $(buildd_static)/test_results debian/
+	touch stamps/stamp-check
+
+stamps/stamp-pystone:
+	@echo "BEGIN pystone static"
+	cd $(buildd_static) && ./python ../Lib/test/pystone.py
+	cd $(buildd_static) && ./python ../Lib/test/pystone.py
+	@echo "END pystone static"
+	@echo "BEGIN pystone shared"
+	cd $(buildd_shared) \
+		&& LD_LIBRARY_PATH=$${LD_LIBRARY_PATH:+$$LD_LIBRARY_PATH:}. ./python ../Lib/test/pystone.py
+	cd $(buildd_shared) \
+		&& LD_LIBRARY_PATH=$${LD_LIBRARY_PATH:+$$LD_LIBRARY_PATH:}. ./python ../Lib/test/pystone.py
+	@echo "END pystone shared"
+	@echo "BEGIN pystone debug"
+	cd $(buildd_debug) && ./python ../Lib/test/pystone.py
+	cd $(buildd_debug) && ./python ../Lib/test/pystone.py
+	@echo "END pystone debug"
+	touch stamps/stamp-pystone
+
+#ifeq (,$(filter $(DEB_HOST_ARCH), arm armel avr32 hppa mips mipsel m68k))
+  pybench_options = -C 2 -n 5 -w 4
+#endif
+
+stamps/stamp-pybench:
+ifeq ($(WITHOUT_BENCH),yes)
+	echo "pybench run disabled for this build" > $(buildd_static)/pybench.log
+else
+	@echo "BEGIN pybench static"
+	cd $(buildd_static) \
+	  && time ./python ../Tools/pybench/pybench.py -f run1.pybench $(pybench_options)
+	cd $(buildd_static) \
+	  && ./python ../Tools/pybench/pybench.py -f run2.pybench -c run1.pybench $(pybench_options)
+	@echo "END pybench static"
+	@echo "BEGIN pybench shared"
+	cd $(buildd_shared) \
+	  && LD_LIBRARY_PATH=$${LD_LIBRARY_PATH:+$$LD_LIBRARY_PATH:}. \
+		./python ../Tools/pybench/pybench.py -f run1.pybench $(pybench_options)
+	cd $(buildd_shared) \
+	  && LD_LIBRARY_PATH=$${LD_LIBRARY_PATH:+$$LD_LIBRARY_PATH:}. \
+		./python ../Tools/pybench/pybench.py -f run2.pybench -c run1.pybench $(pybench_options)
+	@echo "END pybench shared"
+	@echo "BEGIN shared/static comparision"
+	$(buildd_static)/python Tools/pybench/pybench.py \
+	  -s $(buildd_static)/run2.pybench -c $(buildd_shared)/run2.pybench \
+	  | tee $(buildd_static)/pybench.log
+	@echo "END shared/static comparision"
+endif
+	touch stamps/stamp-pybench
+
+minimal-test:
+	rm -rf mintest
+	mkdir -p mintest/lib mintest/dynlib mintest/testlib mintest/all-lib
+	cp -p $(buildd_static)/python mintest/
+	cp -p $(foreach i,$(MIN_MODS),Lib/$(i).py) \
+		mintest/lib/
+	cp -a $(foreach i,$(MIN_PACKAGES),Lib/$(i)) \
+		mintest/lib/
+#	cp -p $(foreach i,$(MIN_EXTS),$(buildd_static)/build/lib*/$(i).so) \
+#		mintest/dynlib/
+	cp -p Lib/unittest.py mintest/lib/
+	cp -pr Lib/test mintest/lib/
+	cp -pr Lib mintest/all-lib
+	cp -p $(buildd_static)/build/lib*/*.so mintest/all-lib/
+	( \
+	  echo "import sys"; \
+	  echo "sys.path = ["; \
+	  echo "    '$(CURDIR)/mintest/lib',"; \
+	  echo "    '$(CURDIR)/mintest/dynlib',"; \
+	  echo "]"; \
+	  cat Lib/test/regrtest.py; \
+	) > mintest/lib/test/mintest.py
+	cd mintest && ./python -E -S lib/test/mintest.py \
+	     -x test_codecencodings_cn test_codecencodings_hk \
+		test_codecencodings_jp test_codecencodings_kr \
+		test_codecencodings_tw test_codecs test_multibytecodec \
+
+stamps/stamp-doc-html:
+	dh_testdir
+	$(MAKE) -C Doc html
+	touch stamps/stamp-doc-html
+
+build-doc: stamps/stamp-patch stamps/stamp-build-doc
+stamps/stamp-build-doc: stamps/stamp-doc-html
+	touch stamps/stamp-build-doc
+
+control-file:
+	sed -e "s/@PVER@/$(PVER)/g" \
+	    -e "s/@VER@/$(VER)/g" \
+	    -e "s/@PYSTDDEP@/$(PYSTDDEP)/g" \
+	    -e "s/@PRIO@/$(PY_PRIO)/g" \
+	    -e "s/@MINPRIO@/$(PY_MINPRIO)/g" \
+		debian/control.in > debian/control.tmp
+ifeq ($(distribution),Ubuntu)
+  ifneq (,$(findstring ubuntu, $(PKGVERSION)))
+	m='Ubuntu Core Developers <ubuntu-devel-discuss@lists.ubuntu.com>'; \
+	sed -i "/^Maintainer:/s/\(.*\)/Maintainer: $$m\nXSBC-Original-\1/" \
+	  debian/control.tmp
+  endif
+endif
+	[ -e debian/control ] \
+	  && cmp -s debian/control debian/control.tmp \
+	  && rm -f debian/control.tmp && exit 0; \
+	  mv debian/control.tmp debian/control
+
+
+
+clean: control-file
+	dh_testdir
+	dh_testroot
+	$(MAKE) -f debian/rules unpatch
+	rm -rf stamps .pc
+	rm -f debian/test_results
+
+	$(MAKE) -C Doc clean
+	sed 's/^@/#/' Makefile.pre.in | $(MAKE) -f - srcdir=. distclean
+	rm -rf Lib/test/db_home
+	rm -rf $(buildd_static) $(buildd_shared) $(buildd_debug) $(buildd_shdebug)
+	find -name '*.py[co]' | xargs -r rm -f
+	rm -f Lib/lib2to3/*.pickle
+	rm -rf locales
+	rm -rf $(d)-dbg
+
+	for f in debian/*.in; do \
+	  f2=`echo $$f | sed "s,PVER,$(PVER),g;s/@VER@/$(VER)/g;s,\.in$$,,"`; \
+	  if [ $$f2 != debian/control ] && [ $$f2 != debian/source.lintian-overrides ]; then \
+	    rm -f $$f2; \
+	  fi; \
+	done
+	dh_clean
+
+stamps/stamp-control:
+	: # We have to prepare the various control files
+
+	for f in debian/*.in; do \
+	  f2=`echo $$f | sed "s,PVER,$(PVER),g;s/@VER@/$(VER)/g;s,\.in$$,,"`; \
+	  if [ $$f2 != debian/control ]; then \
+	    sed -e "s/@PVER@/$(PVER)/g;s/@VER@/$(VER)/g" \
+		    -e "s/@PRIORITY@/$(PRIORITY)/g" \
+		    -e "s,@SCRIPTDIR@,/$(scriptdir),g" \
+		    -e "s,@INFO@,$(info_docs),g" \
+		  <$$f >$$f2; \
+	  fi; \
+	done
+ifneq (,$(filter $(DEB_HOST_ARCH), alpha amd64 ia64 ppc64 sparc64 kfreebsd-amd64))
+	sed -i 's/\(Py_InitModule4[^@]*\)@/\1_64@/' \
+		debian/lib$(PVER).symbols debian/$(PVER)-dbg.symbols
+endif
+
+install: $(build_target) stamps/stamp-install
+stamps/stamp-install: stamps/stamp-build control-file stamps/stamp-control
+	dh_testdir
+	dh_testroot
+	dh_clean -k
+	dh_installdirs
+
+	: # make install into tmp and subsequently move the files into
+	: # their packages' directories.
+	install -d $(d)/usr
+ifeq ($(with_interp),static)
+	$(MAKE) -C $(buildd_static) install prefix=$(CURDIR)/$(d)/usr
+else
+	$(MAKE) -C $(buildd_shared) install prefix=$(CURDIR)/$(d)/usr
+endif
+	-find $(d)/usr/lib/python$(VER) -name '*_failed*.so'
+	find $(d)/usr/lib/python$(VER) -name '*_failed*.so' | xargs -r rm -f
+
+	mv $(d)/usr/lib/python$(VER)/site-packages \
+		$(d)/usr/lib/python$(VER)/dist-packages
+
+	: # remove files, which are not packaged
+	rm -f $(d)/usr/bin/smtpd.py
+	rm -rf $(d)/usr/lib/python$(VER)/ctypes/macholib
+	rm -f $(d)/usr/lib/pkgconfig/python.pc
+
+	: # fix some file permissions
+	chmod a-x $(d)/$(scriptdir)/{fractions,lib-tk/Tix}.py
+
+	: # move manpages to new names
+	if [ -d $(d)/usr/man/man1 ]; then \
+	    mkdir -p $(d)/usr/share/man; \
+	    mv $(d)/usr/man/man1/* $(d)/usr/share/man/man1/; \
+	    rm -rf $(d)/usr/man/; \
+	fi
+	cp -p debian/pydoc.1 $(d)/usr/share/man/man1/pydoc$(VER).1
+
+	: # Symlinks to /usr/bin for some tools
+	ln -sf ../lib/python$(VER)/pdb.py $(d)/usr/bin/pdb$(VER)
+	cp -p debian/pdb.1 $(d)/usr/share/man/man1/pdb$(VER).1
+
+	: # versioned install only
+	rm -f $(d)/usr/bin/python-config
+
+	mv $(d)/usr/bin/2to3 $(d)/usr/bin/2to3-$(VER)
+
+#	: # remove the bsddb stuff
+#	rm -rf $(d)/$(scriptdir)/bsddb
+#	rm -f $(d)/$(scriptdir)/lib-dynload/_bsddb.so
+
+	: # Remove version information from the egg-info file
+	mv $(d)/$(scriptdir)/lib-dynload/Python-$(VER)*.egg-info \
+		$(d)/$(scriptdir)/lib-dynload/Python-$(VER).egg-info
+
+	dh_installdirs -p$(p_lib) \
+		$(scriptdir)/config \
+		usr/share/doc
+	: # install the shared library
+	cp -p $(buildd_shared)/libpython$(VER).so.1.0 $(d_lib)/usr/lib/
+	ln -sf libpython$(VER).so.1.0 $(d_lib)/usr/lib/libpython$(VER).so.1
+	ln -sf ../../libpython$(VER).so.1 \
+		$(d_lib)/$(scriptdir)/config/libpython$(VER).so
+	ln -sf $(p_base) $(d_lib)/usr/share/doc/$(p_lib)
+
+	ln -sf libpython$(VER).so.1 $(d)/usr/lib/libpython$(VER).so
+
+ifeq ($(with_interp),shared)
+	: # install the statically linked runtime
+	install -m755 $(buildd_static)/python $(d)/usr/bin/python$(VER)-static
+endif
+
+	mv $(d)/usr/bin/pydoc $(d)/usr/bin/pydoc$(VER)
+	cp -p Tools/i18n/pygettext.py $(d)/usr/bin/pygettext$(VER)
+	cp -p debian/pygettext.1 $(d)/usr/share/man/man1/pygettext$(VER).1
+
+	: # install the Makefile of the shared python build
+	sed -e '/^OPT/s,-O3,-O2,' \
+	    -e 's,^RUNSHARED *=.*,RUNSHARED=,' \
+		build-shared/Makefile > $(d)/$(scriptdir)/config/Makefile
+
+	: # Move the binary and the minimal libraries into $(p_min).
+	dh_installdirs -p$(p_min) \
+		etc/$(PVER) \
+		usr/bin \
+		usr/include/$(PVER) \
+		usr/share/man/man1 \
+		$(scriptdir)/lib-dynload \
+		$(scriptdir)/config
+	DH_COMPAT=2 dh_movefiles -p$(p_min) --sourcedir=$(d) \
+		usr/bin/python$(VER) \
+		usr/share/man/man1/python$(VER).1 \
+		$(foreach i,$(MIN_MODS),$(scriptdir)/$(i).py) \
+		$(foreach i,$(MIN_PACKAGES),$(scriptdir)/$(i)) \
+		$(foreach i,$(MIN_ENCODINGS),$(scriptdir)/$(i)) \
+		$(scriptdir)/config/Makefile \
+		usr/include/$(PVER)/pyconfig.h \
+		$(scriptdir)/site.py
+
+#		$(foreach i,$(MIN_EXTS),$(scriptdir)/lib-dynload/$(i).so) \
+
+	: # Install sitecustomize.py.
+	cp -p debian/sitecustomize.py $(d_min)/etc/$(PVER)/
+	patch --no-backup -d $(d_min)/$(scriptdir) < debian/patches/site-builddir.diff
+	dh_link -p$(p_min) /etc/$(PVER)/sitecustomize.py \
+		/$(scriptdir)/sitecustomize.py
+
+	: # Move the static library and the header files into $(p_dev).
+#	mv $(d)/usr/share/include/python$(VER)/* $(d)/usr/include/python$(VER)/.
+#	rm -rf $(d)/usr/share/include
+	dh_installdirs -p$(p_dev) \
+		usr/share/doc/python$(VER) \
+		$(scriptdir) \
+		$(scriptdir)/doc/html \
+		usr/include \
+		usr/lib
+	cp -p Misc/HISTORY Misc/README.valgrind Misc/gdbinit \
+		debian/README.maintainers \
+		debian/test_results $(buildd_static)/pybench.log \
+	    $(d_dev)/usr/share/doc/python$(VER)/
+
+	DH_COMPAT=2 dh_movefiles -p$(p_dev) --sourcedir=$(d) \
+		usr/lib/python$(VER)/config \
+		usr/include/python$(VER) \
+		usr/lib/libpython$(VER).so \
+		usr/lib/libpython$(VER).a \
+		usr/lib/pkgconfig/python-$(VER).pc \
+		usr/bin/python$(VER)-config \
+		usr/lib/python$(VER)/distutils/command/wininst-*.exe
+
+	cp -p $(buildd_shared)/libpython$(VER)-pic.a \
+		$(d_dev)/usr/lib/python$(VER)/config/
+
+ifeq ($(with_tk),yes)
+	: # Move the Tkinter files into $(p_tk).
+	dh_installdirs -p$(p_tk) \
+		$(scriptdir) \
+		usr/lib/python$(VER)/lib-dynload
+	DH_COMPAT=2 dh_movefiles -p$(p_tk) --sourcedir=$(d) \
+		usr/lib/python$(VER)/lib-dynload/_tkinter.so
+endif
+
+ifeq ($(with_gdbm),yes)
+	: # gdbm and dbm modules into $(p_gdbm).
+	dh_installdirs -p$(p_gdbm) \
+		usr/lib/python$(VER)/lib-dynload
+	DH_COMPAT=2 dh_movefiles -p$(p_gdbm) --sourcedir=$(d) \
+		usr/lib/python$(VER)/lib-dynload/gdbm.so
+endif
+
+#	: # The test framework into $(p_base), regression tests dropped
+	DH_COMPAT=2 dh_movefiles -p$(p_base) --sourcedir=$(d) \
+		$(scriptdir)/test/{regrtest.py,test_support.py,__init__.py,pystone.py}
+	rm -rf $(d)/$(scriptdir)/test
+	rm -rf $(d)/$(scriptdir)/ctypes/test
+	rm -rf $(d)/$(scriptdir)/bsddb/test
+	rm -rf $(d)/$(scriptdir)/email/test
+	rm -rf $(d)/$(scriptdir)/json/tests
+	rm -rf $(d)/$(scriptdir)/sqlite3/test
+	rm -rf $(d)/$(scriptdir)/distutils/tests
+	rm -rf $(d)/$(scriptdir)/lib2to3/tests
+	rm -rf $(d)/$(scriptdir)/unittest/test
+	rm -rf $(d)/$(scriptdir)/lib-tk/test
+
+	: # IDLE
+	mv $(d)/usr/bin/idle $(d)/usr/bin/idle-python$(VER)
+	rm -f $(d)/usr/lib/python$(VER)/idlelib/idle.bat
+	dh_installdirs -p$(p_idle) \
+		usr/bin \
+		usr/share/man/man1
+	DH_COMPAT=2 dh_movefiles -p$(p_idle) \
+		usr/lib/python$(VER)/idlelib \
+		usr/bin/idle-python$(VER)
+	cp -p debian/idle-$(PVER).1 $(d_idle)/usr/share/man/man1/
+
+	: # Move the demos and tools into $(p_exam)'s doc directory
+	dh_installdirs -p$(p_exam) \
+		usr/share/doc/python$(VER)/examples
+
+	cp -rp Demo Tools $(d_exam)/usr/share/doc/python$(VER)/examples/
+	rm -rf $(d_exam)/usr/share/doc/python$(VER)/examples/Demo/sgi
+	: # IDLE is in its own package:
+	rm -rf $(d_exam)/usr/share/doc/python$(VER)/examples/Tools/idle
+	: # XXX: We don't need rgb.txt, we'll use our own:
+	rm -rf $(d_exam)/usr/share/doc/python$(VER)/examples/Tools/pynche/X
+
+	: # XXX: Some files in upstream Demo and Tools have strange
+	: # exec permissions, make lintian glad:
+	-chmod 644 $(d_tk)/$(scriptdir)/lib-tk/Tix.py
+	-chmod 644 $(d)/$(scriptdir)/runpy.py
+
+	cd $(d_exam)/usr/share/doc/python$(VER)/examples && chmod 644 \
+	  Demo/{classes/*.py*,comparisons/patterns} \
+	  Demo/{rpc/test,threads/*.py*,md5test/*} \
+	  Demo/pdist/{client.py,cmdfw.py,cmptree.py,cvslib.py,cvslock.py,FSProxy.py,mac.py,rcsclient.py,rcslib.py,security.py,server.py,sumtree.py} \
+	  Demo/scripts/{morse.py,newslist.doc} \
+	  Demo/sockets/{broadcast.py,ftp.py,mcast.py,radio.py} \
+	  Demo/tix/{bitmaps/{tix.gif,*x[pb]m*},samples/*.py} \
+	  Demo/tkinter/guido/{AttrDialog.py,hanoi.py,hello.py,imagedraw.py,imageview.py,listtree.py,ManPage.py,ShellWindow.py,wish.py} \
+	  Tools/scripts/pydocgui.pyw \
+	  Tools/scripts/mailerdaemon.py
+
+	: # Replace all '#!' calls to python with $(PY_INTERPRETER)
+	: # and make them executable
+	for i in `find debian -mindepth 3 -type f ! -name '*.dpatch'`; do \
+	  sed '1s,#!.*python[^ ]*\(.*\),#! $(PY_INTERPRETER)\1,' \
+		$$i > $$i.temp; \
+	  if cmp --quiet $$i $$i.temp; then \
+	    rm -f $$i.temp; \
+	  else \
+	    mv -f $$i.temp $$i; \
+	    chmod 755 $$i; \
+	    echo "fixed interpreter: $$i"; \
+	  fi; \
+	done
+
+	: # Move the docs into $(p_base)'s /usr/share/doc/$(PVER) directory,
+	: # all other packages only have a copyright file.
+	dh_installdocs -p$(p_base) \
+		README Misc/NEWS Misc/ACKS
+	ln -sf NEWS.gz $(d_base)/usr/share/doc/$(p_base)/changelog.gz
+	dh_installdocs --all -N$(p_base) -N$(p_dev) -N$(p_dbg) -N$(p_lib) debian/README.Debian
+
+	: # IDLE has its own changelogs, docs...
+	dh_installchangelogs -p$(p_idle) Lib/idlelib/ChangeLog
+	dh_installdocs -p$(p_idle) Lib/idlelib/{NEWS,README,TODO,extend}.txt
+
+	mkdir -p $(d_idle)/usr/share/applications
+	cp -p debian/idle.desktop \
+		$(d_idle)/usr/share/applications/idle-$(PVER).desktop
+
+	: # those packages have own README.Debian's
+	install -m 644 -p debian/README.$(p_base) \
+		$(d_base)/usr/share/doc/$(PVER)/README.Debian
+	install -m 644 -p debian/README.$(p_idle) \
+		$(d_idle)/usr/share/doc/$(p_idle)/README.Debian
+ifeq ($(with_tk),yes)
+	cp -p debian/README.Tk $(d_tk)/usr/share/doc/$(p_tk)/
+endif
+
+	: # The rest goes into $(p_base)
+	mkdir -p $(d)/usr/lib/python$(VER)/dist-packages
+	(cd $(d) && tar cf - .) | (cd $(d_base) && tar xpf -)
+	sh debian/dh_rmemptydirs -p$(p_base)
+	rm -f $(d_base)/usr/bin/python
+
+	: # Install menu icon
+	dh_installdirs -p$(p_base) usr/share/pixmaps
+	cp -p debian/pylogo.xpm $(d_base)/usr/share/pixmaps/$(PVER).xpm
+
+	: # generate binfmt file
+	mkdir -p $(d_min)/usr/share/binfmts
+	$(buildd_static)/python debian/mkbinfmt.py $(PVER) \
+		> $(d_min)/usr/share/binfmts/$(PVER)
+
+	: # desktop entry
+	mkdir -p $(d_base)/usr/share/applications
+	cp -p debian/$(PVER).desktop \
+		$(d_base)/usr/share/applications/$(PVER).desktop
+
+	: # remove some things
+	-find debian -name .cvsignore | xargs rm -f
+	-find debian -name '*.py[co]' | xargs rm -f
+
+	: # remove empty directories, when all components are in place
+	-find debian ! -name lib-dynload -type d -empty -delete
+
+	: # install debug package
+	rm -rf $(d)-dbg
+	$(MAKE) -C $(buildd_debug) install DESTDIR=$(CURDIR)/$(d)-dbg
+	dh_installdirs -p$(p_dbg) \
+		usr/bin \
+		usr/share/man/man1 \
+		$(scriptdir)/lib-dynload \
+		usr/include/$(PVER)_d \
+		usr/lib/pkgconfig \
+		usr/share/doc/$(p_base)
+	cp -p Misc/SpecialBuilds.txt $(d_dbg)/usr/share/doc/$(p_base)/
+	cp -p debian/$(PVER)-dbg.README.Debian \
+		$(d_dbg)/usr/share/doc/$(p_base)/README.debug
+	cp -p $(buildd_debug)/python $(d_dbg)/usr/bin/$(PVER)-dbg
+	sed '1s,#!.*python[^ ]*\(.*\),#! $(PY_INTERPRETER)-dbg\1,' \
+		$(d)-dbg/usr/bin/$(PVER)-config \
+		> $(d_dbg)/usr/bin/$(PVER)-dbg-config
+	chmod 755 $(d_dbg)/usr/bin/$(PVER)-dbg-config
+	cp -p $(buildd_debug)/build/lib*/*_d.so \
+		$(d_dbg)/$(scriptdir)/lib-dynload/
+	cp -p $(buildd_shdebug)/libpython$(VER)_d.so.1.0 $(d_dbg)/usr/lib/
+	ln -sf libpython$(VER)_d.so.1.0 $(d_dbg)/usr/lib/libpython$(VER)_d.so.1
+	ln -sf libpython$(VER)_d.so.1 $(d_dbg)/usr/lib/libpython$(VER)_d.so
+	sed -e '/^Libs:/s,-lpython$(VER),-lpython$(VER)_d,' \
+	  -e '/^Cflags:/s,python$(VER),python$(VER)_d,' \
+	  $(d)-dbg/usr/lib/pkgconfig/python-$(VER).pc \
+	  > $(d_dbg)/usr/lib/pkgconfig/python-$(VER)-dbg.pc
+ifneq ($(with_gdbm),yes)
+	rm -f $(d_dbg)/$(scriptdir)/lib-dynload/gdbm_d.so
+	rm -f $(d_dbg)/usr/lib/debug/$(scriptdir)/lib-dynload/gdbm.so
+endif
+ifneq ($(with_tk),yes)
+	rm -f $(d_dbg)/$(scriptdir)/lib-dynload/_tkinter_d.so
+	rm -f $(d_dbg)/usr/lib/debug/$(scriptdir)/lib-dynload/_tkinter.so
+endif
+#	rm -f $(d_dbg)/$(scriptdir)/lib-dynload/_bsddb_d.so
+
+	cp -a $(d)-dbg/$(scriptdir)/config_d $(d_dbg)/$(scriptdir)/
+	ln -sf ../../libpython$(VER)_d.so \
+		$(d_dbg)/$(scriptdir)/config_d/libpython$(VER)_d.so
+	ln -sf libpython$(VER)_d.so \
+		$(d_dbg)/$(scriptdir)/config_d/libpython$(VER).so
+	ln -sf libpython$(VER)_d.a \
+		$(d_dbg)/$(scriptdir)/config_d/libpython$(VER).a
+
+	for i in $(d_dev)/usr/include/$(PVER)/*; do \
+	  i=$$(basename $$i); \
+	  case $$i in pyconfig.h) continue; esac; \
+	  ln -sf ../$(PVER)/$$i $(d_dbg)/usr/include/$(PVER)_d/$$i; \
+	done
+	cp -p $(buildd_debug)/pyconfig.h $(d_dbg)/usr/include/$(PVER)_d/
+	ln -sf $(PVER).1.gz $(d_dbg)/usr/share/man/man1/$(PVER)-dbg.1.gz
+
+	for i in debian/*.overrides; do \
+	  b=$$(basename $$i .overrides); \
+	  install -D -m 644 $$i debian/$$b/usr/share/lintian/overrides/$$b; \
+	done
+
+	touch stamps/stamp-install
+
+# Build architecture-independent files here.
+binary-indep: $(install_target) $(build_target) stamps/stamp-build-doc stamps/stamp-control
+	dh_testdir -i
+	dh_testroot -i
+
+	: # $(p_doc) package
+	dh_installdirs -p$(p_doc) \
+		usr/share/doc/$(p_base) \
+		usr/share/doc/$(p_doc)
+	dh_installdocs -p$(p_doc)
+	cp -a Doc/build/html $(d_doc)/usr/share/doc/$(p_base)/
+	rm -f $(d_doc)/usr/share/doc/$(p_base)/html/_static/jquery.js
+	dh_link -p$(p_doc) \
+		/usr/share/doc/$(p_base)/html /usr/share/doc/$(p_doc)/html \
+		/usr/share/javascript/jquery/jquery.js /usr/share/doc/$(p_base)/html/_static/jquery.js
+
+	: # devhelp docs
+	python debian/pyhtml2devhelp.py \
+		$(d_doc)/usr/share/doc/$(p_base)/html index.html $(VER) \
+		> $(d_doc)/usr/share/doc/$(p_base)/html/$(PVER).devhelp
+	gzip -9v $(d_doc)/usr/share/doc/$(p_base)/html/$(PVER).devhelp
+	dh_link -p$(p_doc) \
+		/usr/share/doc/$(p_base)/html /usr/share/devhelp/books/$(PVER)
+
+	dh_installdebconf -i $(dh_args)
+	dh_installexamples -i $(dh_args)
+	dh_installmenu -i $(dh_args)
+	-dh_icons -i $(dh_args) || dh_iconcache -i $(dh_args)
+	dh_installchangelogs -i $(dh_args)
+	dh_link -i $(dh_args)
+	dh_compress -i $(dh_args) -X.py -X.cls -X.css -X.txt -X.json -X.js -Xobjects.inv -Xgdbinit
+	dh_fixperms -i $(dh_args)
+
+	: # make python scripts starting with '#!' executable
+	for i in `find debian -mindepth 3 -type f ! -name '*.dpatch' ! -perm 755`; do \
+	  if head -1 $$i | grep -q '^#!'; then \
+	    chmod 755 $$i; \
+	    echo "make executable: $$i"; \
+	  fi; \
+	done
+	-find $(d_doc) -name '*.txt' -perm 755 -exec chmod 644 {} \;
+
+	dh_installdeb -i $(dh_args)
+	dh_gencontrol -i $(dh_args)
+	dh_md5sums -i $(dh_args)
+	dh_builddeb -i $(dh_args)
+
+# Build architecture-dependent files here.
+binary-arch: build install
+	dh_testdir -a
+	dh_testroot -a
+#	dh_installdebconf -a
+	dh_installexamples -a
+	dh_installmenu -a
+	-dh_icons -a || dh_iconcache -a
+#	dh_installmime -a
+	dh_installchangelogs -a
+	for i in $(p_dev) $(p_dbg) $(p_lib); do \
+	  rm -rf debian/$$i/usr/share/doc/$$i; \
+	  ln -s $(p_base) debian/$$i/usr/share/doc/$$i; \
+	done
+	-find debian ! -perm -200 -print -exec chmod +w {} \;
+ifneq ($(with_tk),yes)
+	rm -f $(d_base)/$(scriptdir)/lib-dynload/_tkinter.so
+endif
+ifneq ($(with_gdbm),yes)
+	rm -f $(d_base)/$(scriptdir)/lib-dynload/gdbm.so
+endif
+	dh_strip -a -N$(p_dbg) -Xdebug -Xdbg --dbg-package=$(p_dbg)
+	cp Tools/gdb/libpython.py $(d_dbg)/usr/lib/debug/usr/bin/$(PVER)-gdb.py
+	ln -sf $(PVER)-gdb.py $(d_dbg)/usr/lib/debug/usr/bin/$(PVER)-dbg-gdb.py
+	ln -sf ../bin/$(PVER)-gdb.py \
+		$(d_dbg)/usr/lib/debug/usr/lib/lib$(PVER).so.1.0-gdb.py
+	ln -sf ../bin/$(PVER)-gdb.py \
+		$(d_dbg)/usr/lib/lib$(PVER)_d.so.1.0-gdb.py
+	dh_link -a
+	dh_compress -a -X.py
+	dh_fixperms -a
+
+	: # make python scripts starting with '#!' executable
+	for i in `find debian -mindepth 3 -type f ! -name '*.dpatch' ! -perm 755`; do \
+	  if head -1 $$i | grep -q '^#!'; then \
+	    chmod 755 $$i; \
+	    echo "make executable: $$i"; \
+	  fi; \
+	done
+
+	dh_makeshlibs -p$(p_lib) -V '$(p_lib)'
+	dh_makeshlibs -p$(p_dbg) -V '$(p_dbg)'
+# don't include the following symbols, found in extensions
+# which either can be built as builtin or extension.
+	sed -ri '/^ (_check_|asdl_|fast_save_|init)/d' \
+	  $(d_lib)/DEBIAN/symbols $(d_dbg)/DEBIAN/symbols
+	dh_installdeb -a
+	dh_shlibdeps -a
+	dh_gencontrol -a
+	dh_md5sums -a
+	dh_builddeb -a
+
+# rules to patch the unpacked files in the source directory
+# ---------------------------------------------------------------------------
+# various rules to unpack addons and (un)apply patches.
+# 	- patch / apply-patches
+#	- unpatch / reverse-patches
+
+patchdir	= debian/patches
+
+glibc_version := $(shell dpkg -s locales | awk '/^Version:/ {print $$2}')
+broken_utimes := $(shell dpkg --compare-versions $(glibc_version) lt 2.3.5 && echo yes || echo no)
+
+$(patchdir)/series: $(patchdir)/series.in
+	cpp -E \
+	  -D$(distribution) \
+	  $(if $(filter $(broken_utimes),yes),-DBROKEN_UTIMES) \
+	  -Darch_os_$(DEB_HOST_ARCH_OS) -Darch_$(DEB_HOST_ARCH) \
+	  -o - $(patchdir)/series.in \
+	  | egrep -v '^(#.*|$$)' > $(patchdir)/series
+
+patch: stamps/stamp-patch
+stamps/stamp-patch: $(patchdir)/series
+	dh_testdir
+	QUILT_PATCHES=$(patchdir) quilt push -a || test $$? = 2
+	rm -rf autom4te.cache configure
+	autoconf
+	mkdir -p stamps
+	echo ""; echo "Patches applied in this version:" > stamps/pxx
+	for i in $$(cat $(patchdir)/series); do \
+	  echo ""; echo "$$i:"; \
+	  sed -n 's/^# *DP: */  /p' $(patchdir)/$$i; \
+	done >> stamps/pxx
+	mv stamps/pxx $@
+
+reverse-patches: unpatch
+unpatch:
+	QUILT_PATCHES=$(patchdir) quilt pop -a -R || test $$? = 2
+	rm -f stamps/stamp-patch $(patchdir)/series
+	rm -rf configure autom4te.cache
+
+update-patches: $(patchdir)/series
+	export QUILT_PATCHES=$(patchdir); \
+	export QUILT_REFRESH_ARGS="--no-timestamps --no-index -pab"; \
+	export QUILT_DIFF_ARGS="--no-timestamps --no-index -pab"; \
+	while quilt push; do quilt refresh; done
+
+binary: binary-indep binary-arch
+
+.PHONY: control-file configure build clean binary-indep binary-arch binary install
+
+# Local Variables:
+# mode: makefile
+# end:
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-doc.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-doc.in
@@ -0,0 +1,19 @@
+Document: @PVER@-doc
+Title: Documenting Python (v@VER@)
+Author: Fred L. Drake, Jr.
+Abstract: The Python language has a substantial body of documentation, much
+ of it contributed by various authors. The markup used for the Python
+ documentation is based on LATEX and requires a significant set of
+ macros written specifically for documenting Python. This document
+ describes the macros introduced to support Python documentation and
+ how they should be used to support a wide range of output formats.
+ .
+ This document describes the document classes and special markup used
+ in the Python documentation. Authors may use this guide, in
+ conjunction with the template files provided with the distribution,
+ to create or maintain whole documents or sections.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/documenting/index.html
+Files: /usr/share/doc/@PVER@/html/documenting/*.html
--- python2.7-2.7.1.orig/debian/changelog.shared
+++ python2.7-2.7.1/debian/changelog.shared
@@ -0,0 +1,3 @@
+  * Link the interpreter against the shared runtime library. With
+    gcc-4.1 the difference in the pystones benchmark dropped from about
+    12% to about 5%.
--- python2.7-2.7.1.orig/debian/source.lintian-overrides
+++ python2.7-2.7.1/debian/source.lintian-overrides
@@ -0,0 +1,5 @@
+# this is conditional in the rules file
+python2.7 source: debhelper-script-needs-versioned-build-depends dh_icons (>= 5.0.51~)
+
+# generated during the build
+python2.7 source: quilt-build-dep-but-no-series-file
--- python2.7-2.7.1.orig/debian/PVER.prerm.in
+++ python2.7-2.7.1/debian/PVER.prerm.in
@@ -0,0 +1,27 @@
+#! /bin/sh -e
+#
+# prerm script for the Debian @PVER@-base package.
+# Written 1998 by Gregor Hoffleit <flight@debian.org>.
+#
+
+case "$1" in
+    remove|upgrade)
+	dpkg -L @PVER@ \
+	    | awk '/\.py$/ {print $0"c\n" $0"o"}' \
+	    | xargs rm -f >&2
+        ;;
+    deconfigure)
+        ;;
+    failed-upgrade)
+        ;;
+    *)
+        echo "prerm called with unknown argument \`$1'" >&2
+        exit 1
+    ;;
+esac
+
+rmdir /usr/local/lib/python@VER@/site-packages 2>/dev/null && \
+        rmdir /usr/local/lib/python@VER@ 2>/dev/null || \
+        true
+
+#DEBHELPER#
--- python2.7-2.7.1.orig/debian/control.in
+++ python2.7-2.7.1/debian/control.in
@@ -0,0 +1,113 @@
+Source: @PVER@
+Section: python
+Priority: optional
+Maintainer: Matthias Klose <doko@debian.org>
+Build-Depends: debhelper (>= 5), quilt, autoconf, libreadline-dev, libncursesw5-dev (>= 5.3), tk8.5-dev, zlib1g-dev, blt-dev (>= 2.4z), libssl-dev, libexpat1-dev, sharutils, libbz2-dev, libbluetooth-dev [!hurd-i386 !kfreebsd-i386 !kfreebsd-amd64], locales [!armel !avr32 !hppa !ia64 !mipsel], libsqlite3-dev, libffi-dev (>= 3.0.5), mime-support, libgpm2 [!hurd-i386 !kfreebsd-i386 !kfreebsd-amd64], netbase, lsb-release, bzip2, libdb4.8-dev, gdb, python
+Build-Depends-Indep: python-sphinx
+Build-Conflicts: tcl8.3-dev, tk8.3-dev, tcl8.4-dev, tk8.4-dev, @PVER@-xml, python-xml, autoconf2.13
+XS-Python-Version: @VER@
+Standards-Version: 3.9.1
+Vcs-Browser: https://code.launchpad.net/~doko/python/pkg@VER@-debian
+Vcs-Bzr: http://bazaar.launchpad.net/~doko/python/pkg@VER@-debian
+
+Package: @PVER@
+Architecture: any
+Priority: @PRIO@
+Depends: @PVER@-minimal (= ${binary:Version}), mime-support, ${shlibs:Depends}, ${misc:Depends}
+Suggests: @PVER@-doc, @PVER@-profiler, binutils
+Provides: @PVER@-cjkcodecs, @PVER@-ctypes, @PVER@-elementtree, @PVER@-celementtree, @PVER@-wsgiref
+XB-Python-Version: @VER@
+Description: An interactive high-level object-oriented language (version @VER@)
+ Version @VER@ of the high-level, interactive object oriented language,
+ includes an extensive class library with lots of goodies for
+ network programming, system administration, sounds and graphics.
+
+Package: @PVER@-minimal
+Architecture: any
+Priority: @MINPRIO@
+Depends: ${shlibs:Depends}, ${misc:Depends}
+Recommends: @PVER@
+Suggests: binfmt-support
+Replaces: @PVER@ (<< 2.7.1~rc1-2~)
+Conflicts: binfmt-support (<< 1.1.2)
+XB-Python-Runtime: @PVER@
+XB-Python-Version: @VER@
+Description: A minimal subset of the Python language (version @VER@)
+ This package contains the interpreter and some essential modules.  It can
+ be used in the boot process for some basic tasks.
+ See /usr/share/doc/@PVER@-minimal/README.Debian for a list of the modules
+ contained in this package.
+
+Package: lib@PVER@
+Architecture: any
+Section: libs
+Priority: @PRIO@
+Depends: @PVER@ (= ${binary:Version}), ${shlibs:Depends}, ${misc:Depends}
+Replaces: @PVER@ (<< 2.6)
+Description: Shared Python runtime library (version @VER@)
+ Version @VER@ of the high-level, interactive object oriented language,
+ includes an extensive class library with lots of goodies for
+ network programming, system administration, sounds and graphics.
+ .
+ This package contains the shared runtime library, normally not needed
+ for programs using the statically linked interpreter.
+
+Package: @PVER@-examples
+Architecture: all
+Depends: @PVER@ (>= ${source:Version}), ${misc:Depends}
+Description: Examples for the Python language (v@VER@)
+ Examples, Demos and Tools for Python (v@VER@). These are files included in
+ the upstream Python distribution (v@VER@).
+
+Package: @PVER@-dev
+Architecture: any
+Depends: @PVER@ (= ${binary:Version}), lib@PVER@ (= ${binary:Version}), libexpat1-dev, libssl-dev, ${shlibs:Depends}, ${misc:Depends}
+Recommends: libc6-dev | libc-dev
+Replaces: @PVER@ (<< 2.7-3)
+Description: Header files and a static library for Python (v@VER@)
+ Header files, a static library and development tools for building
+ Python (v@VER@) modules, extending the Python interpreter or embedding
+ Python (v@VER@) in applications.
+ .
+ Maintainers of Python packages should read README.maintainers.
+
+Package: idle-@PVER@
+Architecture: all
+Depends: @PVER@, python-tk (>= 2.6~a3), @PVER@-tk, ${misc:Depends}
+Enhances: @PVER@
+Replaces: @PVER@ (<< 2.6.1-2)
+XB-Python-Version: @VER@
+Description: An IDE for Python (v@VER@) using Tkinter
+ IDLE is an Integrated Development Environment for Python (v@VER@).
+ IDLE is written using Tkinter and therefore quite platform-independent.
+
+Package: @PVER@-doc
+Section: doc
+Architecture: all
+Depends: libjs-jquery, ${misc:Depends}
+Suggests: @PVER@
+Description: Documentation for the high-level object-oriented language Python (v@VER@)
+ These is the official set of documentation for the interactive high-level
+ object-oriented language Python (v@VER@). All documents are provided
+ in HTML format. The package consists of ten documents:
+ .
+   * What's New in Python@VER@
+   * Tutorial
+   * Python Library Reference
+   * Macintosh Module Reference
+   * Python Language Reference
+   * Extending and Embedding Python
+   * Python/C API Reference
+   * Installing Python Modules
+   * Documenting Python
+   * Distributing Python Modules
+
+Package: @PVER@-dbg
+Section: debug
+Architecture: any
+Priority: extra
+Depends: @PVER@ (>= ${binary:Version}), ${shlibs:Depends}, ${misc:Depends}
+Suggests: python-gdbm-dbg, python-tk-dbg
+Description: Debug Build of the Python Interpreter (version @VER@)
+ Python interpreter configured with --pydebug. Dynamically loaded modules are
+ searched in /usr/lib/@PVER@/lib-dynload/debug first.
--- python2.7-2.7.1.orig/debian/PVER-examples.overrides.in
+++ python2.7-2.7.1/debian/PVER-examples.overrides.in
@@ -0,0 +1,2 @@
+# don't care about permissions of the example files
+@PVER@-examples binary: executable-not-elf-or-script
--- python2.7-2.7.1.orig/debian/idle-PVER.postinst.in
+++ python2.7-2.7.1/debian/idle-PVER.postinst.in
@@ -0,0 +1,30 @@
+#! /bin/sh -e
+#
+# postinst script for the Debian idle-@PVER@ package.
+# Written 1998 by Gregor Hoffleit <flight@debian.org>.
+#
+
+DIRLIST="/usr/lib/python@VER@/idlelib"
+
+case "$1" in
+    configure|abort-upgrade|abort-remove|abort-deconfigure)
+
+        for i in $DIRLIST ; do
+	    @PVER@ /usr/lib/@PVER@/compileall.py -q $i
+	    if grep -sq '^byte-compile[^#]*optimize' /etc/python/debian_config
+	    then
+		@PVER@ -O /usr/lib/@PVER@/compileall.py -q $i
+	    fi
+	done
+    ;;
+
+    *)
+	echo "postinst called with unknown argument \`$1'" >&2
+	exit 1
+    ;;
+
+esac
+
+#DEBHELPER#
+
+exit 0
--- python2.7-2.7.1.orig/debian/README.maintainers.in
+++ python2.7-2.7.1/debian/README.maintainers.in
@@ -0,0 +1,88 @@
+
+Hints for maintainers of Debian packages of Python extensions
+-------------------------------------------------------------
+
+Most of the content of this README can be found in the Debian Python policy.
+See /usr/share/doc/python/python-policy.txt.gz.
+
+Documentation Tools
+-------------------
+
+If your package ships documentation produced in the Python
+documentation format, you can generate it at build-time by
+build-depending on @PVER@-dev, and you will find the
+templates, tools and scripts in /usr/lib/@PVER@/doc/tools --
+adjust your build scripts accordingly.
+
+
+Makefile.pre.in issues
+----------------------
+
+Python comes with a `universal Unix Makefile for Python extensions' in
+/usr/lib/@PVER@/config/Makefile.pre.in (with Debian, this is included
+in the python-dev package), which is used by most Python extensions.
+
+In general, packages using the Makefile.pre.in approach can be packaged
+simply by running dh_make or by using one of debhelper's rules' templates
+(see /usr/doc/debhelper/examples/). Makefile.pre.in works fine with e.g.
+"make prefix=debian/tmp/usr install".
+
+One glitch: You may be running into the problem that Makefile.pre.in
+doesn't try to create all the directories when they don't exist. Therefore,
+you may have to create them manually before "make install". In most cases,
+the following should work:
+
+	...
+	dh_installdirs /usr/lib/@PVER@
+	$(MAKE) prefix=debian/tmp/usr install
+	...
+
+
+Byte-compilation
+----------------
+
+For speed reasons, Python internally compiles source files into a byte-code.
+To speed up subsequent imports, it tries to save the byte-code along with
+the source with an extension .pyc (resp. pyo). This will fail if the
+libraries are installed in a non-writable directory, which may be the
+case for /usr/lib/@PVER@/.
+
+Not that .pyc and .pyo files should not be relocated, since for debugging
+purposes the path of the source for is hard-coded into them.
+
+To precompile files in batches after installation, Python has a script
+compileall.py, which compiles all files in a given directory tree. The
+Debian version of compileall has been enhanced to support incremental
+compilation and to feature a ddir (destination dir) option. ddir is
+used to compile files in debian/usr/lib/python/ when they will be
+installed into /usr/lib/python/.
+
+
+Currently, there are two ways to use compileall for Debian packages. The
+first has a speed penalty, the second has a space penalty in the package.
+
+1.) Compiling and removing .pyc files in postinst/prerm:
+
+  Use dh_python(1) from the debhelper packages to add commands to byte-
+  compile on installation and to remove the byte-compiled files on removal.
+  Your package has to build-depend on: debhelper (>= 4.1.67), python.
+
+  In /usr/share/doc/@PVER@, you'll find sample.postinst and sample.prerm.
+  If you set the directory where the .py files are installed, these
+  scripts will install and remove the .pyc and .pyo files for your
+  package after unpacking resp. before removing the package.
+
+2.) Compiling the .pyc files `out of place' during installation:
+
+  As of 1.5.1, compileall.py allows you to specify a faked installation
+  directory using the "-d destdir" option, so that you can precompile
+  the files in their temporary directory
+  (e.g. debian/tmp/usr/lib/python2.1/site-packages/PACKAGE).
+
+
+
+    11/02/98                             
+    Gregor Hoffleit <flight@debian.org>
+
+
+Last modified: 2007-10-14
--- python2.7-2.7.1.orig/debian/dh_rmemptydirs
+++ python2.7-2.7.1/debian/dh_rmemptydirs
@@ -0,0 +1,10 @@
+#! /bin/sh -e
+
+pkg=`echo $1 | sed 's/^-p//'`
+
+: # remove empty directories, when all components are in place
+for d in `find debian/$pkg -depth -type d -empty 2> /dev/null`; do \
+    while rmdir $$d 2> /dev/null; do d=`dirname $$d`; done; \
+done
+
+exit 0
--- python2.7-2.7.1.orig/debian/control.stdlib
+++ python2.7-2.7.1/debian/control.stdlib
@@ -0,0 +1,16 @@
+Package: @PVER@-tk
+Architecture: any
+Depends: @PVER@ (= ${Source-Version}), ${shlibs:Depends}
+Suggests: tix
+XB-Python-Version: @VER@
+Description: Tkinter - Writing Tk applications with Python (v@VER@)
+ A module for writing portable GUI applications with Python (v@VER@) using Tk.
+ Also known as Tkinter.
+
+Package: @PVER@-gdbm
+Architecture: any
+Depends: @PVER@ (= ${Source-Version}), ${shlibs:Depends}
+Description: GNU dbm database support for Python (v@VER@)
+ GNU dbm database module for Python. Install this if you want to
+ create or read GNU dbm database files with Python.
+
--- python2.7-2.7.1.orig/debian/depgraph.py
+++ python2.7-2.7.1/debian/depgraph.py
@@ -0,0 +1,199 @@
+#! /usr/bin/python
+
+# Copyright 2004 Toby Dickenson
+#
+# Permission is hereby granted, free of charge, to any person obtaining
+# a copy of this software and associated documentation files (the
+# "Software"), to deal in the Software without restriction, including
+# without limitation the rights to use, copy, modify, merge, publish,
+# distribute, sublicense, and/or sell copies of the Software, and to
+# permit persons to whom the Software is furnished to do so, subject
+# to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+# IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
+# CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+# TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+# SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+import sys, getopt, colorsys, imp, md5
+
+class pydepgraphdot:
+
+    def main(self,argv):    
+        opts,args = getopt.getopt(argv,'',['mono'])
+        self.colored = 1
+        for o,v in opts:
+            if o=='--mono':
+                self.colored = 0
+        self.render()
+
+    def fix(self,s):
+        # Convert a module name to a syntactically correct node name
+        return s.replace('.','_')
+    
+    def render(self):
+        p,t = self.get_data()
+
+        # normalise our input data
+        for k,d in p.items():
+            for v in d.keys():
+                if not p.has_key(v):
+                    p[v] = {}
+                    
+        f = self.get_output_file()                    
+                    
+        f.write('digraph G {\n')
+        #f.write('concentrate = true;\n')
+        #f.write('ordering = out;\n')
+        f.write('ranksep=1.0;\n')
+        f.write('node [style=filled,fontname=Helvetica,fontsize=10];\n')
+        allkd = p.items()
+        allkd.sort()
+        for k,d in allkd:
+            tk = t.get(k)
+            if self.use(k,tk):
+                allv = d.keys()
+                allv.sort()
+                for v in allv:
+                    tv = t.get(v)
+                    if self.use(v,tv) and not self.toocommon(v,tv):
+                        f.write('%s -> %s' % ( self.fix(k),self.fix(v) ) )
+                        self.write_attributes(f,self.edge_attributes(k,v))
+                        f.write(';\n')
+                f.write(self.fix(k))
+                self.write_attributes(f,self.node_attributes(k,tk))
+                f.write(';\n')
+        f.write('}\n')
+
+    def write_attributes(self,f,a):
+        if a:
+            f.write(' [')
+            f.write(','.join(a))
+            f.write(']')
+
+    def node_attributes(self,k,type):
+        a = []
+        a.append('label="%s"' % self.label(k))
+        if self.colored:
+            a.append('fillcolor="%s"' % self.color(k,type))
+        else:
+            a.append('fillcolor=white')
+        if self.toocommon(k,type):
+            a.append('peripheries=2')
+        return a
+                
+    def edge_attributes(self,k,v):
+        a = []
+        weight = self.weight(k,v)
+        if weight!=1:
+            a.append('weight=%d' % weight)
+        length = self.alien(k,v)
+        if length:
+            a.append('minlen=%d' % length)
+        return a
+            
+    def get_data(self):
+        t = eval(sys.stdin.read())
+        return t['depgraph'],t['types']
+    
+    def get_output_file(self):
+        return sys.stdout
+
+    def use(self,s,type):
+        # Return true if this module is interesting and should be drawn. Return false
+        # if it should be completely omitted. This is a default policy - please override.
+        if s=='__main__':
+            return 0
+        #if s in ('os','sys','time','__future__','types','re','string'):
+        if s in ('sys'):
+            # nearly all modules use all of these... more or less. They add nothing to
+            # our diagram.
+            return 0
+        if s.startswith('encodings.'):
+            return 0
+        if self.toocommon(s,type):
+            # A module where we dont want to draw references _to_. Dot doesnt handle these
+            # well, so it is probably best to not draw them at all.
+            return 0
+        return 1
+
+    def toocommon(self,s,type):
+        # Return true if references to this module are uninteresting. Such references
+        # do not get drawn. This is a default policy - please override.
+        #
+        if s=='__main__':
+            # references *to* __main__ are never interesting. omitting them means
+            # that main floats to the top of the page
+            return 1
+        #if type==imp.PKG_DIRECTORY:
+        #    # dont draw references to packages.
+        #    return 1
+        return 0
+        
+    def weight(self,a,b):
+        # Return the weight of the dependency from a to b. Higher weights
+        # usually have shorter straighter edges. Return 1 if it has normal weight.
+        # A value of 4 is usually good for ensuring that a related pair of modules 
+        # are drawn next to each other. This is a default policy - please override.
+        #
+        if b.split('.')[-1].startswith('_'):
+            # A module that starts with an underscore. You need a special reason to
+            # import these (for example random imports _random), so draw them close
+            # together
+            return 4
+        return 1
+    
+    def alien(self,a,b):
+        # Return non-zero if references to this module are strange, and should be drawn
+        # extra-long. the value defines the length, in rank. This is also good for putting some
+        # vertical space between seperate subsystems. This is a default policy - please override.
+        #
+        return 0
+
+    def label(self,s):
+        # Convert a module name to a formatted node label. This is a default policy - please override.
+        #
+        return '\\.\\n'.join(s.split('.'))
+
+    def color(self,s,type):
+        # Return the node color for this module name. This is a default policy - please override.
+        #
+        # Calculate a color systematically based on the hash of the module name. Modules in the
+        # same package have the same color. Unpackaged modules are grey
+        t = self.normalise_module_name_for_hash_coloring(s,type)
+        return self.color_from_name(t)
+        
+    def normalise_module_name_for_hash_coloring(self,s,type):
+        if type==imp.PKG_DIRECTORY:
+            return s
+        else:
+            i = s.rfind('.')
+            if i<0:
+                return ''
+            else:
+                return s[:i]
+        
+    def color_from_name(self,name):
+        n = md5.md5(name).digest()
+        hf = float(ord(n[0])+ord(n[1])*0xff)/0xffff
+        sf = float(ord(n[2]))/0xff
+        vf = float(ord(n[3]))/0xff
+        r,g,b = colorsys.hsv_to_rgb(hf, 0.3+0.6*sf, 0.8+0.2*vf)
+        return '#%02x%02x%02x' % (r*256,g*256,b*256)
+
+
+def main():
+    pydepgraphdot().main(sys.argv[1:])
+
+if __name__=='__main__':
+    main()
+
+
+
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-ref.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-ref.in
@@ -0,0 +1,18 @@
+Document: @PVER@-ref
+Title: Python Reference Manual (v@VER@)
+Author: Guido van Rossum
+Abstract: This reference manual describes the syntax and "core semantics" of
+ the language.  It is terse, but attempts to be exact and complete.
+ The semantics of non-essential built-in object types and of the
+ built-in functions and modules are described in the *Python
+ Library Reference*.  For an informal introduction to the language,
+ see the *Python Tutorial*.  For C or C++ programmers, two
+ additional manuals exist: *Extending and Embedding the Python
+ Interpreter* describes the high-level picture of how to write a
+ Python extension module, and the *Python/C API Reference Manual*
+ describes the interfaces available to C/C++ programmers in detail.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/reference/index.html
+Files: /usr/share/doc/@PVER@/html/reference/*.html
--- python2.7-2.7.1.orig/debian/PVER-doc.doc-base.PVER-ext.in
+++ python2.7-2.7.1/debian/PVER-doc.doc-base.PVER-ext.in
@@ -0,0 +1,16 @@
+Document: @PVER@-ext
+Title: Extending and Embedding the Python Interpreter (v@VER@)
+Author: Guido van Rossum
+Abstract: This document describes how to write modules in C or C++ to extend
+ the Python interpreter with new modules.  Those modules can define
+ new functions but also new object types and their methods.  The
+ document also describes how to embed the Python interpreter in
+ another application, for use as an extension language.  Finally,
+ it shows how to compile and link extension modules so that they
+ can be loaded dynamically (at run time) into the interpreter, if
+ the underlying operating system supports this feature.
+Section: Programming/Python
+
+Format: HTML
+Index: /usr/share/doc/@PVER@/html/extending/index.html
+Files: /usr/share/doc/@PVER@/html/extending/*.html
--- python2.7-2.7.1.orig/debian/changelog
+++ python2.7-2.7.1/debian/changelog
@@ -0,0 +1,2414 @@
+python2.7 (2.7.1-5ubuntu2) natty; urgency=low
+
+  * Force linking the curses module against libncursesw.
+
+ -- Matthias Klose <doko@ubuntu.com>  Mon, 11 Apr 2011 11:54:52 +0200
+
+python2.7 (2.7.1-5ubuntu1) natty; urgency=low
+
+  * debian/patches/deb-setup.diff: DEB_GNU_TYPE was never being set, so
+    the expected multiarch path support wasn't working.  Consolidate to
+    a single call to dpkg-architecture -qDEB_HOST_MULTIARCH in setup.py.
+    LP: #738213.
+
+ -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 23 Mar 2011 15:02:47 -0700
+
+python2.7 (2.7.1-5) experimental; urgency=low
+
+  * Update to 20110224, taken from the 2.7 branch.
+  * Update patches.
+  * Re-enable profile guided build.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 24 Feb 2011 06:01:42 +0100
+
+python2.7 (2.7.1-4) experimental; urgency=low
+
+  * Update to 20110119, taken from the 2.7 branch.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 19 Jan 2011 04:21:14 +0100
+
+python2.7 (2.7.1-3) experimental; urgency=low
+
+  * Do not run test_multiprocessing when running the testsuite.
+    Fails on armel and powerpc on some buildds.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 24 Dec 2010 01:46:55 +0100
+
+python2.7 (2.7.1-2) experimental; urgency=low
+
+  * Update to 20101222, taken from the 2.7 branch.
+  * Re-enable the distutils-sysconfig.diff patch, apparently
+    lost when updating the patches for 2.7.
+  * Disable the profiled builds on all architectures.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 22 Dec 2010 15:39:48 +0100
+
+python2.7 (2.7.1-1) experimental; urgency=low
+
+  * Python 2.7.1 release.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 28 Nov 2010 12:05:23 +0100
+
+python2.7 (2.7.1~rc1-2) experimental; urgency=low
+
+  * Move the pyconfig.h file into the -min package, required by sysconfig.
+    Closes: #603237.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 14 Nov 2010 09:40:09 +0100
+
+python2.7 (2.7.1~rc1-1) experimental; urgency=low
+
+  * Python 2.7.1 release candidate 1.
+  * Move the Makefile into the -min package, required by sysconfig.
+    Closes: #603237.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 14 Nov 2010 00:33:48 +0100
+
+python2.7 (2.7-9) experimental; urgency=low
+
+  * Update to 20101016, taken from the 2.7 branch.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 16 Oct 2010 12:46:57 +0200
+
+python2.7 (2.7-8) experimental; urgency=low
+
+  * Disabled the profiled build on armel.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 23 Sep 2010 15:06:06 +0200
+
+python2.7 (2.7-7) experimental; urgency=low
+
+  * Update to 20100922, taken from the 2.7 branch.
+  * Update GNU/Hurd patches (Pino Toscano). Closes: #597419.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed, 22 Sep 2010 20:35:24 +0200
+
+python2.7 (2.7-6) experimental; urgency=low
+
+  * Update to 20100915, taken from the 2.7 branch.
+    - Fix issue #9729, Unconnected SSLSocket.{send,recv} raises TypeError
+      (Andrew Bennetts). LP: #637821.
+  * Add copyright information for expat, libffi and zlib. Addresses: #596276.
+  * Apply proposed fix for issue 9054, configure --with-system-expat.
+  * Provide Lib/plat-gnukfreebsd[78] (Jakub Wilk). Addresses: #593818.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 15 Sep 2010 17:43:18 +0200
+
+python2.7 (2.7-5) experimental; urgency=low
+
+  * Update to 20100829, taken from the 2.7 branch.
+  * Don't configure --with-system-expat, segfaults the interpreter in the
+    testsuite.
+  * Disable more tests on hppa and hurd-i386, which fail on the buildds.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 29 Aug 2010 16:22:37 +0200
+
+python2.7 (2.7-4) experimental; urgency=low
+
+  * Update to 20100822, taken from the 2.7 branch.
+  * Fixed in previous 2.7 uploads: Multiple integer overflows in audioop.c
+    in the audioop module (CVE-2010-1634).
+  * Fix some lintian warnings.
+  * Configure --with-system-expat.
+
+ -- Matthias Klose <doko@debian.org>  Mon, 23 Aug 2010 13:03:40 +0200
+
+python2.7 (2.7-3) experimental; urgency=low
+
+  * Update to 20100807, taken from the 2.7 branch.
+  * Move '/usr/local/.../dist-packages' before '/usr/lib/.../dist-packages'
+    in sys.path. Adresses: #588342.
+  * Fix detection of ffi.h header file. Closes: #591408.
+  * python2-7-dev: Depend on libssl-dev. LP: #611845.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 07 Aug 2010 21:28:04 +0200
+
+python2.7 (2.7-2) experimental; urgency=low
+
+  * Complete debug-build.diff, some parts lost in quilt conversion.
+  * Move the pkgconfig file into the -dev package.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 06 Jul 2010 21:07:48 +0200
+
+python2.7 (2.7-1) experimental; urgency=low
+
+  * Python 2.7 release.
+  * Update to 20100706, taken from the trunk.
+  * Update symbols files.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 06 Jul 2010 07:21:23 +0200
+
+python2.7 (2.7~rc2-3) experimental; urgency=low
+
+  * Update to 20100703, taken from the trunk.
+  * Move the _weakrefset module, not extension to -minimal. Closes: #587568.
+  * Move the sysconfig module to -minimal. Closes: #586113.
+  * Move the shutil module to python2.6-minimal. Addresses: #587628.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 03 Jul 2010 13:27:36 +0200
+
+python2.7 (2.7~rc2-2) experimental; urgency=low
+
+  * Fix applying plat-linux2* patches.
+  * Use the profiled build on armel, sparc and sparc64.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 29 Jun 2010 08:04:59 +0200
+
+python2.7 (2.7~rc2-1) experimental; urgency=low
+
+  * Python 2.7 release candidate 2.
+  * Update to 20100628, taken from the trunk.
+  * Merge packaging changes from python2.6 (2.6.5+20100628-1).
+
+ -- Matthias Klose <doko@debian.org>  Tue, 29 Jun 2010 00:57:00 +0200
+
+python2.7 (2.7~b1-2) experimental; urgency=low
+
+  * Update to 20100508, taken from the trunk.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 08 May 2010 17:34:07 +0200
+
+python2.7 (2.7~b1-1) experimental; urgency=low
+
+  * Python 2.7 beta1.
+  * Update to 20100420, taken from the trunk.
+  * Update libpython symbols files.
+  * Apply proposed patch for issue #7332, segfaults in
+    PyMarshal_ReadLastObjectFromFile in import_submodule.
+  * Don't build-depend on locales on avr32. Closes: #575144.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 20 Apr 2010 23:53:42 +0200
+
+python2.7 (2.7~a4-1) experimental; urgency=low
+
+  * Python 2.7 alpha4.
+  * Update to 20100316, taken from the trunk.
+  * Point distutils.sysconfig to the system installation. Closes: #573363.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue, 16 Mar 2010 15:45:07 +0100
+
+python2.7 (2.7~a3-1) experimental; urgency=low
+
+  * Python 2.7 alpha3.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 16 Feb 2010 03:04:01 +0100
+
+python2.7 (2.7~a2-1) experimental; urgency=low
+
+  * Python 2.7 alpha2.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 16 Jan 2010 14:49:59 +0100
+
+python2.6 (2.6.5+20100628-1) unstable; urgency=low
+
+  * Update to 20100614, taken from the 2.6 release branch (r82337).
+  * Apply plat-linux2-<arch> patch for alpha, hppa, mips, mipsel, sparc
+    and sparc64.
+
+ -- Matthias Klose <doko@debian.org>  Mon, 28 Jun 2010 21:26:43 +0200
+
+python2.6 (2.6.5+20100626-1) unstable; urgency=low
+
+  * Update to 20100614, taken from the 2.6 release branch (r82245).
+  * Update libpython symbols files. Closes: #587012.
+  * Move the logging package and the runpy module to python2.6-minimal.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 26 Jun 2010 14:29:41 +0200
+
+python2.6 (2.6.5+20100616-1) unstable; urgency=medium
+
+  * Update to 20100614, taken from the 2.6 release branch (r81601).
+  * Reapply the backport for issue #8233, lost in the conversion to
+    quilt.
+  * Disable the profiled build on alpha.
+  * Make pydoc more robust not to fail on exceptions other than import
+    exceptions.
+  * posixmodule: Add flags for statvfs.f_flag to constant list.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 16 Jun 2010 07:56:40 +0200
+
+python2.6 (2.6.5+20100529-1) unstable; urgency=low
+
+  * Update to 20100529, taken from the 2.6 release branch (r81601).
+    - Fix issue #5753, CVE-2008-5983 python: untrusted python modules
+      search path. Closes: #572010.
+  * Convert internal dpatch system to quilt.
+  * Build the ossaudio extension on GNU/kFreeBSD. Closes: #574696.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 29 May 2010 15:07:51 +0200
+
+python2.6 (2.6.5-2) unstable; urgency=low
+
+  * Update libpython symbols files.
+  * debian/patches/issue8032.dpatch: Update to version from the
+    trunk.
+  * Fix issue #8329: Don't return the same lists from select.select
+    when no fds are changed.
+  * Fix issue #8310: Allow dis to examine new style classes.
+  * Fix issues #8279: Fix test_gdb failures.
+  * Fix issue #8233: When run as a script, py_compile.py optionally
+    takes a single argument `-`.
+  * Apply proposed patch for issue #7332, segfaults in
+    PyMarshal_ReadLastObjectFromFile in import_submodule.
+  * Don't build-depend on locales on avr32. Closes: #575144.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 20 Apr 2010 19:41:36 +0200
+
+python2.6 (2.6.5-1ubuntu6) lucid; urgency=low
+
+  * Fix applying patch for issue #8310.
+
+ -- Matthias Klose <doko@ubuntu.com>  Fri, 16 Apr 2010 14:20:35 +0200
+
+python2.6 (2.6.5-1ubuntu5) lucid; urgency=low
+
+  * Fix issue #8329: Don't return the same lists from select.select
+    when no fds are changed.
+  * Fix issue #8310: Allow dis to examine new style classes.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 15 Apr 2010 01:21:07 +0200
+
+python2.6 (2.6.5-1ubuntu4) lucid; urgency=low
+
+  * debian/patches/issue8032.dpatch: Update to version from the
+    trunk. Upload for beta2 to avoid apport errors.
+    - Handle PyFrameObject's: LP: #543624, #548723.
+    - Detect cycles in object reference graph and add extra
+      protection: LP: #544823, LP: #552356.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 01 Apr 2010 22:53:06 +0200
+
+python2.6 (2.6.5-1ubuntu3) lucid; urgency=low
+
+  * debian/patches/issue8140.dpatch: Incomplete patch; regenerate.
+  * debian/patches/issue8032.dpatch: Update to v4:
+    - Add support for PySetObject (set/frozenset).
+    - Add support for PyBaseExceptionObject (BaseException).
+    - Fix a signed vs unsigned char issue that led to exceptions
+      in gdb for PyStringObject instances.
+    - Handle the case of loops in the object reference graph.
+    - Unit tests for all of the above.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed, 31 Mar 2010 18:52:32 +0200
+
+python2.6 (2.6.5-1ubuntu2) lucid; urgency=low
+
+  * Disable profiled build on powerpc.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sat, 20 Mar 2010 15:17:18 +0100
+
+python2.6 (2.6.5-1ubuntu1) lucid; urgency=low
+
+  * Merge with Debian (2.6.5-1).
+
+ -- Matthias Klose <doko@ubuntu.com>  Sat, 20 Mar 2010 03:57:17 +0100
+
+python2.6 (2.6.5-1) unstable; urgency=low
+
+  * Python 2.6.5 final release.
+  * Fix issue #4961: Inconsistent/wrong result of askyesno function in
+    tkMessageBox with Tcl8.5. LP: #462950.
+  * Issue #8154, fix segfault with os.execlp('true'). LP: #418848.
+  * Apply proposed patch for issue #8032, gdb7 hooks for debugging.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 19 Mar 2010 00:12:55 +0100
+
+python2.6 (2.6.5~rc2-2) unstable; urgency=low
+
+  * Add copyright notices for the readline and _ssl extensions.
+    Closes: #573866.
+  * Backport issue #8140: Extend compileall to compile single files.
+    Add -i option.
+  * Backport issue #6949, build _bsddb extension with db-4.8.x.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 16 Mar 2010 03:02:21 +0100
+
+python2.6 (2.6.5~rc2-1) unstable; urgency=low
+
+  * Python 2.6.5 release candidate 2.
+    - Replace the Monty Python audio test file. Closes: #568674.
+  * Fix build failure on sparc64. Closes: #570845.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 11 Mar 2010 16:50:03 +0100
+
+python2.6 (2.6.5~rc2-0ubuntu1) lucid; urgency=low
+
+  * Python 2.6.5 release candidate 2.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 11 Mar 2010 13:30:19 +0100
+
+python2.6 (2.6.4-6ubuntu1) lucid; urgency=low
+
+  * Merge with Debian (2.6.4-6).
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue, 16 Feb 2010 01:08:50 +0100
+
+python2.6 (2.6.4-6) unstable; urgency=low
+
+  * Update to 20100215, taken from the 2.6 release branch.
+  * python2.6-minimal: Skip moving syssite contents to new location, if
+    /usr/local/lib/python2.6 cannot be written. Closes: #569532. LP: #338227.
+  * libpython2.6: Fix symlink in /usr/lib/python2.6/config. LP: #521050.
+
+ -- Matthias Klose <doko@debian.org>  Mon, 15 Feb 2010 22:12:18 +0100
+
+python2.6 (2.6.4-5ubuntu1) lucid; urgency=low
+
+  * Merge with Debian (2.6.4-5).
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 31 Jan 2010 22:31:41 +0100
+
+python2.6 (2.6.4-5) unstable; urgency=low
+
+  * Update to 20100131, taken from the 2.6 release branch.
+    - Fix typo in os.execvp docstring. Closes: #558764.
+  * distutils.sysconfig.get_python_lib(): Only return ".../dist-packages" if
+    prefix is the default prefix and if PYTHONUSERBASE is not set in the
+    environment and if --user option is not present. LP: #476005.
+  * distutils install: Don't install into /usr/local/local, if option
+    --prefix=/usr/local is present, without changing the install prefix.
+    LP: #510211.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 31 Jan 2010 21:16:51 +0100
+
+python2.6 (2.6.4-4ubuntu1) lucid; urgency=low
+
+  * Update to 20100122, taken from the 2.6 release branch.
+    - Fix DoS via XML document with malformed UTF-8 sequences (CVE_2009_3560).
+      Closes: #566233.
+    - Fix typo in os.execvp docstring. Closes: #558764.
+  * python2.6-doc: Fix searching in local documentation. LP: #456025.
+  * Update locale module from the trunk. LP: #223281.
+  * Merge with Debian (2.6.4-4).
+
+ -- Matthias Klose <doko@ubuntu.com>  Fri, 22 Jan 2010 11:37:29 +0100
+
+python2.6 (2.6.4-4) unstable; urgency=low
+
+  * Update to 20100122, taken from the 2.6 release branch.
+    - Fix DoS via XML document with malformed UTF-8 sequences (CVE_2009_3560).
+      Closes: #566233.
+  * Hurd fixes (Pino Toscano). Closes: #565693:
+    - hurd-broken-poll.dpatch: ported from 2.5.
+    - hurd-disable-nonworking-constants.dpatch: disable a few constants from
+      the public API whose C counterparts are not implemented, so using them
+      either always blocks or always fails (caused issues in the test suite).
+    - Exclude the profiled build for hurd.
+    - Disable four blocking tests from the test suite.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 22 Jan 2010 11:10:41 +0100
+
+python2.6 (2.6.4-3) unstable; urgency=low
+
+  * Disable the profiled build on s390, mips, mipsel.
+  * Fix symbol files for kfreebsd-amd64 and sparc64.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 16 Jan 2010 16:12:17 +0100
+
+python2.6 (2.6.4-2) unstable; urgency=low
+
+  * Update to 20100116, taken from the 2.6 release branch.
+  * Fix bashism in makesetup shell script. Closes: #530170, #530171.
+  * Fix build issues on avr (Bradley Smith). Closes: #528439.
+    - Configure --without-ffi.
+    - Don't run lengthly tests.
+  * locale.py: Update locale aliases from the 2.7 branch.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 16 Jan 2010 11:05:12 +0100
+
+python2.6 (2.6.4-1) experimental; urgency=low
+
+  * Python 2.6.4 final release.
+    - Issue #7120: logging: Removed import of multiprocessing which is causing
+      crash in GAE.
+    - Issue #7149: fix exception in urllib when detecting proxy settings
+      on OSX.
+    - Issue #7115: Fixed the extension module builds that is failing when
+      using paths in the extension name instead of dotted names. LP: #449734.
+    - Issue #6894: Fixed the issue urllib2 doesn't respect "no_proxy"
+      environment.
+    - Issue #7052: Removed nonexisting NullHandler from logging.__all__.
+    - Issue #7039: Fixed distutils.tests.test_sysconfig when running on
+      installation with no build.
+    - Issue #7019: Raise ValueError when unmarshalling bad long data, instead
+      of producing internally inconsistent Python longs.
+  * distutils install: Don't install into /usr/local/local, if option
+    --prefix=/usr/local is present.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 27 Oct 2009 01:22:21 +0100
+
+python2.6 (2.6.4~rc1-1) experimental; urgency=low
+
+  * Python 2.6.4 release candidate 1.
+    - Issue #7052: Removed nonexisting NullHandler from logging.__all__.
+    - Issue #7039: Fixed distutils.tests.test_sysconfig when running on
+      installation with no build.
+    - Issue #7019: Raise ValueError when unmarshalling bad long data, instead
+      of producing internally inconsistent Python longs.
+    - Issue #7068: Fixed the partial renaming that occured in r72594.
+    - Issue #7042: Fix test_signal (test_itimer_virtual) failure on OS X 10.6.
+  * Remove the conflict with python-setuptools (fixed in issue #7068).
+  * Build _hashlib as a builtin.
+  * python2.6-doc: Don't compress the sphinx inventory.
+  * python2.6-doc: Fix jquery.js symlink.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 10 Oct 2009 10:21:02 +0200
+
+python2.6 (2.6.3-1) experimental; urgency=low
+
+  * Final Python 2.6.3 release.
+    - Issue #5329: Fix os.popen* regression from 2.5 with commands as a
+      sequence running through the shell.
+    - Issue #6990: Fix threading.local subclasses leaving old state around
+      after a reference cycle GC which could be recycled by new locals.
+    - Issue #6790: Make it possible again to pass an `array.array` to
+      `httplib.HTTPConnection.send`.
+    - Issue #6922: Fix an infinite loop when trying to decode an invalid
+      UTF-32 stream with a non-raising error handler like "replace" or
+      "ignore".
+    - Issue #1590864: Fix potential deadlock when mixing threads and fork().
+    - Issue #6844: Do not emit DeprecationWarnings when accessing a "message"
+      attribute on exceptions that was set explicitly.
+    - Issue #6236, #6348: Fix various failures in the `io` module under AIX
+      and other platforms, when using a non-gcc compiler. Patch by egreen.
+    - Issue #6851: Fix urllib.urlopen crash on secondairy threads on OSX 10.6
+    - Issue #6947: Fix distutils test on windows. Patch by Hirokazu Yamamoto.
+    - Issue #4606: Passing 'None' if ctypes argtype is set to POINTER(...)
+      does now always result in NULL.
+    - Issue #5042: ctypes Structure sub-subclass does now initialize
+      correctly with base class positional arguments.
+    - Issue #6938: Fix a TypeError in string formatting of a multiprocessing
+      debug message.
+    - Issue #6944: Fix a SystemError when socket.getnameinfo() was called
+      with something other than a tuple as first argument.
+    - Issue #6980: Fix ctypes build failure on armel-linux-gnueabi with
+      -mfloat-abi=softfp.
+  * python2.6-dbg: Don't create debug subdirectory in /usr/local. No
+    separate debug directory needed anymore.
+  * Run the benchmark with -C 2 -n 5 -w 4 on all architectures.
+  * Build-depend on the versioned db4.x-dev to avoid unexpected updates
+    for anydbm databases.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 03 Oct 2009 13:19:56 +0200
+
+python2.6 (2.6.2-3) experimental; urgency=low
+
+  * Update to 20090919, taken from the 2.6 release branch.
+  * Add a conflict to python-setuptools (<< 0.6c9-3), C extension
+    builds broken.
+  * Add new symbols for update from the branch.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 19 Sep 2009 10:36:34 +0200
+
+python2.6 (2.6.2-2) experimental; urgency=low
+
+  * Symbol _Py_force_double@Base is i386 only. Closes: #534208.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 23 Jun 2009 06:14:40 +0200
+
+python2.6 (2.6.2-1) experimental; urgency=low
+
+  * Final Python 2.6.2 release.
+    - Update Doc/tools/sphinxext/download.html. Closes: #526797.
+  * Update to 20090621, taken from the 2.6 release branch.
+	
+  * Address issues when working with PYTHONUSERBASE and non standard prefix
+    (pointed out by Larry Hastings):
+    - distutils.sysconfig.get_python_lib(): Only return ".../dist-packages" if
+      prefix is the default prefix and if PYTHONUSERBASE is not set in the
+      environment.
+    - site.addusersitepackages(): Add USER_BASE/.../dist-packages to sys.path.
+  * Always use the `unix_prefix' scheme for setup.py install in a virtualenv
+    setup. LP: #339904.
+  * Don't make the setup.py install options --install-layout=deb and --prefix
+    conflict with each other.
+  * distutils: Always install into `/usr/local/lib/python2.6/dist-packages'
+    if an option `--prefix=/usr/local' is present (except for virtualenv
+    and PYTHONUSERBASE installations). LP: #362570.
+  * Always use `site-packages' as site directory name in virtualenv.
+
+  * Do not add /usr/lib/pythonXY.zip on sys.path.
+  * Add symbols files for libpython2.6 and python2.6-dbg, don't include symbols
+    from builtins, which can either be built as builtins or extensions.
+  * Keep an empty lib-dynload in python2.6-minimal to avoid a warning on
+    startup.
+  * Build a shared library configured --with-pydebug. LP: #322580.
+  * Fix some lintian warnings.
+  * Use the information in /etc/lsb-release for platform.dist(). LP: #196526.
+  * Move the bdist_wininst files into the -dev package (only needed to build
+    windows installers).
+  * Document changes to the site directory name in the installation manual.
+  * Fix issue #1113244: Py_XINCREF, Py_DECREF, Py_XDECREF: Add
+   `do { ... } while (0)' to avoid compiler warnings. Closes: #516956.
+  * debian/pyhtml2devhelp.py: update for python 2.6 (Marc Deslauriers).
+  * debian/rules: re-enable documentation files for devhelp. LP: #338791.
+  * python2.6-doc: Depend on libjs-jquery, use jquery.js from this package.
+    Closes: #523482.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 21 Jun 2009 16:12:15 +0200
+
+python2.6 (2.6.1-3) experimental; urgency=low
+
+  * Update to 20090318, taken from the 2.6 release branch.
+  * Use the information in /etc/lsb-release for platform.dist().
+  * Update installation schemes: LP: #338395. Closes: #520278.
+    - When the --prefix option is used for setup.py install, Use the
+      `unix_prefix' scheme.
+    - Use the `deb_system' scheme if --install-layout=deb is specified.
+    - Use the the `unix_local' scheme if neither --install-layout=deb
+      nor --prefix is specified.
+    - The options --install-layout=deb and --prefix are exclusive.
+  * Don't fail installation/removal if directories in /usr/local cannot
+    be created. LP: #338227.
+  * Don't try to move away the site-packages directory. There never was a
+    python2.6 upload using site-packages. Closes: #518780.
+  * Fix build failure on mips/mipsel. Closes: #519386.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 18 Mar 2009 22:17:20 +0100
+
+python2.6 (2.6.1-2) experimental; urgency=low
+
+  * Move libpython2.6.a into the python2.6-dev package.
+  * Move idlelib into the idle-python2.6 package.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 25 Feb 2009 18:42:19 +0100
+
+python2.6 (2.6.1-1) experimental; urgency=low
+
+  * New upstream version, upload to experimental.
+  * Update to 20090225, taken from the 2.6 release branch.
+  * Don't build-depend on locales on armel, hppa, ia64 and mipsel; package is
+    currently not installable.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 25 Feb 2009 18:42:19 +0100
+
+python2.6 (2.6.1-0ubuntu9) jaunty; urgency=low
+
+  * Don't build pyexpat, _elementtree and _ctypes as builtin extensions,
+    third party packages make too many assumptions about these not built
+    as builtins.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue, 24 Feb 2009 16:34:27 +0100
+
+python2.6 (2.6.1-0ubuntu8) jaunty; urgency=low
+
+  * Link the shared libpython with $(MODLIBS).
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 22 Feb 2009 16:38:49 +0100
+
+python2.6 (2.6.1-0ubuntu7) jaunty; urgency=low
+
+  * Update to 20090222, taken from the 2.6 release branch.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 22 Feb 2009 10:35:29 +0100
+
+python2.6 (2.6.1-0ubuntu6) jaunty; urgency=low
+
+  * Don't build the gdbm extension from the python2.6 source.
+  * Build the dbm extension using libdb.
+  * Don't build-depend on locales on sparc (currently not installable), only
+    needed by the testsuite.
+  * Update to 20090219, taken from the 2.6 release branch.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 19 Feb 2009 12:43:20 +0100
+
+python2.6 (2.6.1-0ubuntu5) jaunty; urgency=low
+
+  * Add build dependency on libdb-dev.
+
+ -- Matthias Klose <doko@ubuntu.com>  Mon, 16 Feb 2009 13:34:41 +0100
+
+python2.6 (2.6.1-0ubuntu4) jaunty; urgency=low
+
+  * Disable the profiled build on all architectures.
+
+ -- Matthias Klose <doko@ubuntu.com>  Mon, 16 Feb 2009 11:18:51 +0100
+
+python2.6 (2.6.1-0ubuntu3) jaunty; urgency=low
+
+  * Disable the profiled build on armel as well.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 15 Feb 2009 10:38:02 +0100
+
+python2.6 (2.6.1-0ubuntu2) jaunty; urgency=low
+
+  * Don't use the profiled build on amd64, lpia and sparc (GCC
+    PR profile/38292).
+
+ -- Matthias Klose <doko@ubuntu.com>  Sat, 14 Feb 2009 14:09:34 +0100
+
+python2.6 (2.6.1-0ubuntu1) jaunty; urgency=low
+
+  * Update to 20090211, taken from the 2.6 release branch.
+
+ -- Matthias Klose <doko@ubuntu.com>  Fri, 13 Feb 2009 12:51:00 +0100
+
+python2.6 (2.6.1-0ubuntu1~ppa1) jaunty; urgency=low
+
+  * Python 2.6.1 release.
+  * Update to 20081206, taken from the 2.6 release branch.
+  * Ensure that all extensions from the -minimal package are statically
+    linked into the interpreter.
+  * Include expat, _elementtree, datetime, bisect, _bytesio, _locale,
+    _fileio in -minimal to link these extensions statically.
+
+ -- Matthias Klose <doko@ubuntu.com>  Fri, 05 Dec 2008 20:43:51 +0100
+
+python2.6 (2.6-0ubuntu1~ppa5) intrepid; urgency=low
+
+  * Test build
+
+ -- Matthias Klose <doko@ubuntu.com>  Fri, 14 Nov 2008 10:14:38 +0100
+
+python2.6 (2.6-0ubuntu1~ppa4) intrepid; urgency=low
+
+  * Do not build the bsddb3 module from this source, but recommend the
+    python-bsddb3 package (will be a dependency after python-bsddb3 is in
+    the archive).
+   * For locally installed packages, create a directory
+    /usr/local/lib/python2.6/dist-packages. This is the default for
+    installations done with distutils and setuptools. Third party stuff
+    packaged within the distribution goes to /usr/lib/python2.6/dist-packages.
+    There is no /usr/lib/python2.6/site-packages in the file system and
+    on sys.path. No package within the distribution must not install
+    anything in this location.
+  * Place the gdbm extension into the python2.6 package.
+  * distutils: Add an option --install-layout=deb, which
+    - installs into $prefix/dist-packages instead of $prefix/site-packages.
+    - doesn't encode the python version into the egg name.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sat, 25 Oct 2008 11:12:24 +0000
+
+python2.6 (2.6-0ubuntu1~ppa3) intrepid; urgency=low
+
+  * Build-depend on libdb4.6-dev, instead of libdb-dev (4.7). Test suite
+    hangs in the bsddb tests.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed, 22 Oct 2008 11:05:13 +0200
+
+python2.6 (2.6-0ubuntu1~ppa2) intrepid; urgency=low
+
+  * Update to 20081021, taken from the 2.6 release branch.
+  * Fix typos and section names in doc-base files. LP: #273344.
+  * Build a new package libpython2.6.
+  * For locally installed packages, create a directory
+    /usr/local/lib/python2.6/system-site-packages, which is symlinked
+    from /usr/lib/python2.6/site-packages. Third party stuff packaged
+    within the distribution goes to /usr/lib/python2.6/dist-packages.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue, 21 Oct 2008 18:09:31 +0200
+
+python2.6 (2.6-0ubuntu1~ppa1) intrepid; urgency=low
+
+  * Python 2.6 release.
+  * Update to current branch 20081009.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 09 Oct 2008 14:28:26 +0200
+
+python2.6 (2.6~b3-0ubuntu1~ppa1) intrepid; urgency=low
+
+  * Python 2.6 beta3 release.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 24 Aug 2008 01:34:54 +0000
+
+python2.6 (2.6~b2-0ubuntu1~ppa1) intrepid; urgency=low
+
+  * Python 2.6 beta2 release.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 07 Aug 2008 16:45:56 +0200
+
+python2.6 (2.6~b1-0ubuntu1~ppa1) intrepid; urgency=low
+
+  * Python 2.6 beta1 release.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue, 15 Jul 2008 12:57:20 +0000
+
+python2.6 (2.6~a3-0ubuntu1~ppa2) hardy; urgency=low
+
+  * Test build
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 29 May 2008 18:08:48 +0200
+
+python2.6 (2.6~a3-0ubuntu1~ppa1) hardy; urgency=low
+
+  * Python 2.6 alpha3 release.
+  * Update to current trunk 20080523.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 22 May 2008 17:37:46 +0200
+
+python2.5 (2.5.2-5) unstable; urgency=low
+
+  * Backport new function signal.set_wakeup_fd from the trunk.
+    Background: http://bugzilla.gnome.org/show_bug.cgi?id=481569
+
+ -- Matthias Klose <doko@debian.org>  Wed, 30 Apr 2008 12:05:10 +0000
+
+python2.5 (2.5.2-4) unstable; urgency=low
+
+  * Update to 20080427, taken from the 2.5 release branch.
+    - Fix issues #2670, #2682.
+  * Disable running pybench on the hppa buildd (ftbfs).
+  * Allow setting BASECFLAGS, OPT and EXTRA_LDFLAGS (like, CC, CXX, CPP,
+    CFLAGS, CPPFLAGS, CCSHARED, LDSHARED) from the environment.
+  * Support parallel=<n> in DEB_BUILD_OPTIONS (see #209008).
+
+ -- Matthias Klose <doko@debian.org>  Sun, 27 Apr 2008 10:40:51 +0200
+
+python2.5 (2.5.2-3) unstable; urgency=medium
+
+  * Update to 20080416, taken from the 2.5 release branch.
+    - Fix CVE-2008-1721, integer signedness error in the zlib extension module.
+    - Fix urllib2 file descriptor happens byte-at-a-time, reverting
+      a fix for excessively large memory allocations when calling .read()
+      on a socket object wrapped with makefile(). 
+  * Disable some regression tests on some architectures:
+    - arm: test_compiler, test_ctypes.
+    - armel: test_compiler.
+    - hppa: test_fork1, test_wait3.
+    - m68k: test_bsddb3, test_compiler.
+  * Build-depend on libffi-dev instead of libffi4-dev.
+  * Fix CVE-2008-1679, integer overflows in the imageop module.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 16 Apr 2008 23:37:46 +0200
+
+python2.5 (2.5.2-2) unstable; urgency=low
+
+  * Use site.addsitedir() to add directories in /usr/local to sys.path.
+    Addresses: #469157, #469818.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 08 Mar 2008 16:11:23 +0100
+
+python2.5 (2.5.2-1) unstable; urgency=low
+
+  * Python 2.5.2 release.
+  * Merge from Ubuntu:
+    - Move site customization into sitecustomize.py, don't make site.py
+      a config file. Addresses: #309719, #413172, #457361.
+    - Move site.py to python2.4-minimal, remove `addbuilddir' from site.py,
+      which is unnecessary for installed builds.
+    - python2.5-dev: Recommend libc-dev instead of suggesting it. LP: #164909.
+    - Fix issue 961805, Tk Text.edit_modified() fails. LP: #84720.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 28 Feb 2008 23:18:52 +0100
+
+python2.5 (2.5.1-7) unstable; urgency=low
+
+  * Update to 20080209, taken from the 2.5 release branch.
+  * Build the _bsddb extension with db-4.5 again; 4.6 is seriously
+    broken when used with the _bsddb extension.
+  * Do not run pybench on arm and armel.
+  * python2.5: Provide python2.5-wsgiref.
+  * Fix a pseudo RC report with duplicated attributes in the control
+    file. Closes: #464307.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 10 Feb 2008 00:22:57 +0100
+
+python2.5 (2.5.1-6) unstable; urgency=low
+
+  * Update to 20080102, taken from the 2.5 release branch.
+    - Only define _BSD_SOURCE on OpenBSD systems. Closes: #455400.
+  * Fix handling of packages in linecache.py (Kevin Goodsell). LP: #70902.
+  * Bump debhelper to v5.
+  * Register binfmt for .py[co] files.
+  * Use absolute paths when byte-compiling files. Addresses: #453346.
+    Closes: #413566, LP: #177722.
+  * CVE-2007-4965, http://bugs.python.org/issue1179:
+    Multiple integer overflows in the imageop module in Python 2.5.1 and
+    earlier allow context-dependent attackers to cause a denial of service
+    (application crash) and possibly obtain sensitive information (memory
+    contents) via crafted arguments to (1) the tovideo method, and unspecified
+    other vectors related to (2) imageop.c, (3) rbgimgmodule.c, and other
+    files, which trigger heap-based buffer overflows.
+    Patch prepared by Stephan Herrmann. Closes: #443333, LP: #163845.
+  * Register info docs when doing source only uploads. LP: #174786.
+  * Remove deprecated value from categories in desktop file. LP: #172874.
+  * python2.5-dbg: Don't include the gdbm and _tkinter extensions, now provided
+    in separate packages.
+  * Provide a symlink changelog -> NEWS. Closes: #439271.
+  * Fix build failure on hurd, working around poll() on systems on which it
+    returns an error on invalid FDs. Closes: #438914.
+  * Configure --with-system-ffi on all architectures. Closes: #448520.
+  * Fix version numbers in copyright and README files (Dan O'Huiginn).
+    Closes: #446682.
+  * Move some documents from python2.5 to python2.5-dev.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 02 Jan 2008 22:22:19 +0100
+
+python2.5 (2.5.1-5) unstable; urgency=low
+
+  * Build the _bsddb extension with db-4.6.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 17 Aug 2007 00:39:35 +0200
+
+python2.5 (2.5.1-4) unstable; urgency=low
+
+  * Update to 20070813, taken from the 2.5 release branch.
+  * Include plat-mac/plistlib.py (plat-mac is not in sys.path by default.
+    Closes: #435826.
+  * Use emacs22 to build the documentation in info format. Closes: #434969.
+  * Build-depend on db-dev (>= 4.6). Closes: #434965.
+
+ -- Matthias Klose <doko@debian.org>  Mon, 13 Aug 2007 22:22:44 +0200
+
+python2.5 (2.5.1-3) unstable; urgency=high
+
+  * Support mixed-endian IEEE floating point, as found in the ARM old-ABI
+    (Aurelien Jarno). Closes: #434905.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 27 Jul 2007 20:01:35 +0200
+
+python2.5 (2.5.1-2) unstable; urgency=low
+
+  * Update to 20070717, taken from the 2.5 release branch.
+  * Fix reference count for sys.pydebug variable. Addresses: #431393.
+  * Build depend on libbluetooth-dev instead of libbluetooth2-dev.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 17 Jul 2007 14:09:47 +0200
+
+python2.5 (2.5.1-1) unstable; urgency=low
+
+  * Python-2.5.1 release.
+  * Build-depend on gcc-4.1 (>= 4.1.2-4) on alpha, powerpc, s390, sparc.
+  * Merge from Ubuntu:
+    - Add debian/patches/subprocess-eintr-safety.dpatch (LP: #87292):
+      - Create and use wrappers around read(), write(), and os.waitpid() in the
+        subprocess module which retry the operation on an EINTR (which happens
+        if e. g. an alarm was raised while the system call was in progress).
+        It is incredibly hard and inconvenient to sensibly handle this in
+        applications, so let's fix this at the right level.
+      - Patch based on original proposal of Peter <C3><85>strand
+        in http://python.org/sf/1068268.
+      - Add two test cases.
+    - Change the interpreter to build and install python extensions
+      built with the python-dbg interpreter with a different name into
+      the same path (by appending `_d' to the extension name). The debug build
+      of the interpreter tries to first load a foo_d.so or foomodule_d.so
+      extension, then tries again with the normal name.
+    - When trying to import the profile and pstats modules, don't
+      exit, add a hint to the exception pointing to the python-profiler
+      package, don't exit.
+    - Keep the module version in the .egg-info name, only remove the
+      python version.
+    - python2.5-dbg: Install Misc/SpecialBuilds.txt, document the
+      debug changes in README.debug.
+  * Update to 20070425, taken from the 2.5 release branch.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 25 Apr 2007 22:12:50 +0200
+
+python2.5 (2.5-6) unstable; urgency=medium
+
+  * webbrowser.py: Recognize other browsers: www-browser, x-www-browser,
+    iceweasel, iceape.
+  * Move pyconfig.h from the python2.5-dev into the python2.5 package;
+    required by builds for pure python modules without having python2.5-dev
+    installed (matching the functionality in python2.4).
+  * Move the unicodedata module into python2.5-minimal; allows byte compilation
+    of UTF8 encoded files.
+  * Do not install anymore outdated debhelper sample scripts.
+  * Install Misc/SpecialBuilds.txt as python2.5-dbg document.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 21 Feb 2007 01:17:12 +0100
+
+python2.5 (2.5-5) unstable; urgency=high
+
+  * Do not run the python benchmark on m68k. Timer problems.
+    Fixes FTBFS on m68k.
+  * Update to 20061209, taken from the 2.5 release branch.
+    -  Fixes building the library reference in info format.
+
+ -- Matthias Klose <doko@debian.org>  Sat,  9 Dec 2006 13:40:48 +0100
+
+python2.5 (2.5-4) unstable; urgency=medium
+
+  * Update to 20061203, taken from the 2.5 release branch.
+    - Fixes build failures on knetfreebsd and the hurd. Closes: #397000.
+  * Clarify README about distutils. Closes: #396394.
+  * Move python2.5-config to python2.5-dev. Closes: #401451.
+  * Cleanup build-conflicts. Addresses: #394512.
+
+ -- Matthias Klose <doko@debian.org>  Sun,  3 Dec 2006 18:22:49 +0100
+
+python2.5 (2.5-3.1) unstable; urgency=low
+
+  * Non-maintainer upload.
+  * python2.5-minimal depends on python-minimal (>= 2.4.4-1) because it's the
+    first version which lists python2.5 as an unsupported runtime (ie a
+    runtime that is available but for which modules are not auto-compiled).
+    And being listed there is required for python-central to accept the
+    installation of python2.5-minimal. Closes: #397006
+
+ -- Raphael Hertzog <hertzog@debian.org>  Wed, 22 Nov 2006 15:41:06 +0100
+
+python2.5 (2.5-3) unstable; urgency=medium
+
+  * Update to 20061029 (2.4.4 was released on 20061019), taken from
+    the 2.5 release branch. We do not want to have regressions in
+    2.5 compared to the 2.4.4 release.
+  * Don't run pybench on m68k, fails in the calibration loop. Closes: #391030.
+  * Run the installation/removal hooks. Closes: #383292, #391036.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 29 Oct 2006 11:35:19 +0100
+
+python2.5 (2.5-2) unstable; urgency=medium
+
+  * Update to 20061003, taken from the 2.5 release branch.
+  * On arm and m68k, don't run the pybench in debug mode.
+  * Fix building the source within exec_prefix (Alexander Wirt).
+    Closes: #385336.
+
+ -- Matthias Klose <doko@debian.org>  Tue,  3 Oct 2006 10:08:36 +0200
+
+python2.5 (2.5-1) unstable; urgency=low
+
+  * Python 2.5 release.
+  * Update to 20060926, taken from the 2.5 release branch.
+  * Run the Python benchmark during the build, compare the results
+    of the static and shared builds.
+  * Fix invalid html in python2.5.devhelp.gz.
+  * Add a python2.5 console entry to the menu (hidden by default).
+  * python2.5: Suggest python-profiler.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 26 Sep 2006 02:36:11 +0200
+
+python2.5 (2.5~c1-1) unstable; urgency=low
+
+  * Python 2.5 release candidate 1.
+  * Update to trunk 20060818.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 19 Aug 2006 19:21:05 +0200
+
+python2.5 (2.5~b3-1) unstable; urgency=low
+
+  * Build the _ctypes module for m68k-linux.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 11 Aug 2006 18:19:19 +0000
+
+python2.5 (2.5~b3-0ubuntu1) edgy; urgency=low
+
+  * Python 2.5 beta3 release.
+  * Update to trunk 20060811.
+  * Rebuild the documentation.
+  * Fix value of sys.exec_prefix in the debug build.
+  * Do not build the library reference in info format; fails to build.
+  * Link the interpreter against the shared runtime library. With
+    gcc-4.1 the difference in the pystones benchmark dropped from about
+    12% to about 6%.
+  * Install the statically linked version of the interpreter as
+    python2.5-static for now.
+  * Link the shared libpython with -O1.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 10 Aug 2006 14:04:48 +0000
+
+python2.5 (2.4.3+2.5b2-3) unstable; urgency=low
+
+  * Disable the testsuite on s390; don't care about "minimally configured"
+    buildd's.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 23 Jul 2006 11:45:03 +0200
+
+python2.5 (2.4.3+2.5b2-2) unstable; urgency=low
+
+  * Update to trunk 20060722.
+  * Merge idle-lib from idle-python2.5 into python2.5.
+  * Merge lib-tk from python-tk into python2.5.
+  * Tkinter.py: Suggest installation of python-tk package on failed
+    import of the _tkinter extension.
+  * Don't run the testsuite for the debug build on alpha.
+  * Don't run the test_compiler test on m68k. Just takes too long.
+  * Disable building ctypes on m68k (requires support for closures).
+
+ -- Matthias Klose <doko@debian.org>  Sat, 22 Jul 2006 22:26:42 +0200
+
+python2.5 (2.4.3+2.5b2-1) unstable; urgency=low
+
+  * Python 2.5 beta2 release.
+  * Update to trunk 20060716.
+  * When built on a buildd, do not run the following test which try to
+    access the network: test_codecmaps_cn, test_codecmaps_hk, test_codecmaps_jp,
+    test_codecmaps_kr, test_codecmaps_tw, test_normalization.
+  * When built on a buildd, do not run tests requiring missing write permissions:
+    test_ossaudiodev.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 16 Jul 2006 02:53:50 +0000
+
+python2.5 (2.4.3+2.5b2-0ubuntu1) edgy; urgency=low
+
+  * Python 2.5 beta2 release.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 13 Jul 2006 17:16:52 +0000
+
+python2.5 (2.4.3+2.5b1-1ubuntu2) edgy; urgency=low
+
+  * Fix python-dev dependencies.
+  * Update to trunk 20060709.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun,  9 Jul 2006 18:50:32 +0200
+
+python2.5 (2.4.3+2.5b1-1ubuntu1) edgy; urgency=low
+
+  * Python 2.5 beta1 release.
+  * Update to trunk 20060623.
+  * Merge changes from the python2.4 packages.
+  * python2.5-minimal: Add _struct.
+
+ -- Matthias Klose <doko@ubuntu.com>  Fri, 23 Jun 2006 16:04:46 +0200
+
+python2.5 (2.4.3+2.5a1-1) experimental; urgency=low
+
+  * Update to trunk 20060409.
+  * Run testsuite for debug build as well.
+  * Build-depend on gcc-4.1.
+
+ -- Matthias Klose <doko@debian.org>  Sun,  9 Apr 2006 22:27:05 +0200
+
+python2.5 (2.4.3+2.5a1-0ubuntu1) dapper; urgency=low
+
+  * Python 2.5 alpha1 release.
+  * Drop integrated patches.
+  * Add build dependencies on libsqlite3-dev and libffi4-dev.
+  * Add (build-)dependency on mime-support, libgpmg1 (test suite).
+  * Build using the system FFI.
+  * python2.5 provides python2.5-ctypes and python2.5-pysqlite2,
+    python2.5-elementtree.
+  * Move hashlib.py to python-minimal.
+  * Lib/hotshot/pstats.py: Error out on missing profile/pstats modules.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed,  5 Apr 2006 14:56:15 +0200
+
+python2.4 (2.4.3-8ubuntu1) edgy; urgency=low
+
+  * Resynchronize with Debian unstable. Remaining changes:
+    - Apply langpack-gettext patch.
+    - diff.gz contains pregenerated html and info docs.
+    - Build the -doc package from this source.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 22 Jun 2006 18:39:57 +0200
+
+python2.4 (2.4.3-8) unstable; urgency=low
+
+  * Remove python2.4's dependency on python-central. On installation of
+    the runtime, call hooks /usr/share/python/runtime.d/*.rtinstall.
+    On removal, call hooks /usr/share/python/runtime.d/*.rtremove.
+    Addresses: #372658.
+  * Call the rtinstall hooks only, if it's a new installation, or the first
+    installation using the hooks. Adresses: #373677.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 18 Jun 2006 00:56:13 +0200
+
+python2.4 (2.4.3-7) unstable; urgency=medium
+
+  * Reupload, depend on python-central (>= 0.4.15).
+  * Add build-conflict on python-xml.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 14 Jun 2006 18:56:57 +0200
+
+python2.4 (2.4.3-6) medium; urgency=low
+
+  * idle-python2.4: Remove the old postinst and prerm scripts.
+  * Name the runtime correctly in python2.4-minimal's installation
+    scripts.
+
+ -- Matthias Klose <doko@debian.org>  Mon, 12 Jun 2006 17:39:56 +0000
+
+python2.4 (2.4.3-5) unstable; urgency=low
+
+  * python2.4-prerm: Handle the case, when python-central is not installed.
+  * idle-python2.4: Depend on python-tk instead of python2.4-tk.
+
+ -- Matthias Klose <doko@debian.org>  Fri,  9 Jun 2006 05:17:17 +0200
+
+python2.4 (2.4.3-4) unstable; urgency=low
+
+  * SVN update up to 2006-06-07
+  * Use python-central.
+  * Don't build the -tk and -gdbm packages from this source; now built
+    from the python-stdlib-extensions source.
+  * Remove leftover build dependency on libgmp3-dev.
+  * Do not build-depend on libbluetooth1-dev and libgpmg1-dev on
+    hurd-i386, kfreebsd-i386, kfreebsd-amd64. Closes: #365830.
+  * Do not run the test_tcl test; hangs for unknown reasons on at least
+    the following buildds: vivaldi(m68k), goedel (alpha), mayer (mipsel).
+    And no virtual package to file bug reports for the buildds ...
+    Closes: #364419.
+  * Move the Makefile from python2.4-dev to python2.4. Closes: #366473.
+  * Fix typo in pdb(1). Closes: #365772.
+  * New autoconf likes the mandir in /usr/share instead of /usr; work
+    with both locations. Closes: #367618.
+	
+ -- Matthias Klose <doko@debian.org>  Wed,  7 Jun 2006 21:37:20 +0200
+
+python2.4 (2.4.3-3) unstable; urgency=low
+
+  * SVN update up to 2006-04-21
+  * Update locale aliases from /usr/share/X11/locale/locale.alias.
+  * Start idle with option -n from the desktop menu, so that the program
+    can be started in parallel.
+  * Testsuite related changes only:
+    - Add build dependencies mime-support, libgpmg1 (needed by test cases).
+    - Run the testsuite with bsddb, audio and curses resources enabled.
+    - Re-run the failed tests in verbose mode.
+    - Run the test suite for the debug build as well.
+    - Build depend on netbase, needed by test_socketmodule.
+    - Build depend on libgpmg1, needed by test_curses.
+    - On the buildds do not run the tests needing the network resource.
+  * Update python logo.
+  * Check for the availability of the profile and pstats modules when
+    importing hotshot.pstats. Closes: #334067.
+  * Don't build the -doc package from the python2.4 source.
+  * Set OPT in the installed Makefile to -O2.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 21 Apr 2006 19:58:43 +0200
+
+python2.4 (2.4.3-2) unstable; urgency=low
+
+  * Add (build-)dependency on mime-support.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue,  4 Apr 2006 22:21:41 +0200
+
+python2.4 (2.4.3-1) unstable; urgency=low
+
+  * Python 2.4.3 release.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 30 Mar 2006 23:42:37 +0200
+
+python2.4 (2.4.3-0ubuntu1) dapper; urgency=low
+
+  * Python 2.4.3 release.
+    - Fixed a bug that the gb18030 codec raises RuntimeError on encoding
+      surrogate pair area on UCS4 build. Ubuntu: #29289.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 30 Mar 2006 10:57:32 +0200
+
+python2.4 (2.4.2+2.4.3c1-0ubuntu1) dapper; urgency=low
+
+  * SVN update up to 2006-03-25 (2.4.3 candidate 1).
+    - Regenerate the documentation.
+
+ -- Matthias Klose <doko@ubuntu.com>  Mon, 27 Mar 2006 12:03:05 +0000
+
+python2.4 (2.4.2-1ubuntu3) dapper; urgency=low
+
+  * SVN update up to 2006-03-04
+    - Regenerate the documentation.
+    - map.mmap(-1, size, ...) can return anonymous memory again on Unix.
+      Ubuntu #26201.
+  * Build-depend on libncursesw5-dev, ncursesw5 is preferred for linking.
+    Provides UTF-8 compliant curses bindings.
+  * Fix difflib where certain patterns of differences were making difflib
+    touch the recursion limit.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sat,  4 Mar 2006 21:38:24 +0000
+
+python2.4 (2.4.2-1ubuntu2) dapper; urgency=low
+
+  * SVN update up to 2006-01-17
+    - pwd is now a builtin module, remove it from python-minimal.
+    - Regenerate the documentation.
+  * python2.4-tk: Suggest tix instead of tix8.1.
+  * Move config/Makefile from the -dev package into the runtime package
+    to be able to use the bdist_wininst distutils command. Closes: #348335.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue, 17 Jan 2006 11:02:24 +0000
+
+python2.4 (2.4.2-1ubuntu1) dapper; urgency=low
+
+  * Temporarily remove build dependency on lsb-release.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 20 Nov 2005 17:40:18 +0100
+
+python2.4 (2.4.2-1build1) dapper; urgency=low
+
+  * Rebuild (openssl-0.9.8).
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 20 Nov 2005 15:27:24 +0000
+
+python2.4 (2.4.2-1) unstable; urgency=low
+
+  * Python 2.4.2 release.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 29 Sep 2005 01:49:28 +0200
+
+python2.4 (2.4.1+2.4.2rc1-1) unstable; urgency=low
+
+  * Python 2.4.2 release candidate 1.
+  * Fix "Fatal Python error" from cStringIO's writelines.
+    Patch by Andrew Bennetts.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 22 Sep 2005 10:33:22 +0200
+
+python2.4 (2.4.1-5) unstable; urgency=low
+
+  * CVS update up to 2005-09-14
+    - Regenerate the html and info docs.
+  * Add some more locale aliases.
+  * Fix substitution pf python version in README.python2.4-minimal.
+    Closes: #327487.
+  * On m68k, build using -O2 (closes: #326903).
+  * On Debian, don't configure --with-fpectl, which stopped working with
+    glibc-2.3.5.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 14 Sep 2005 17:32:56 +0200
+
+python2.4 (2.4.1-4) unstable; urgency=low
+
+  * CVS update up to 2005-09-04
+    - teTeX 3.0 related fixes (closes: #322407).
+    - Regenerate the html and info docs.
+  * Add entry for IDLE in the Gnome menus.
+  * Don't build-depend on libbluetooth-dev on the Hurd (closes: #307037).
+  * Reenable the cthreads patch for the Hurd (closes: #307052).
+
+ -- Matthias Klose <doko@debian.org>  Sun,  4 Sep 2005 18:31:42 +0200
+
+python2.4 (2.4.1-3) unstable; urgency=low
+
+  * Synchronise with Ubuntu:
+    - Build a python2.4-minimal package.
+
+ -- Matthias Klose <doko@debian.org>  Tue, 12 Jul 2005 00:23:10 +0000
+
+python2.4 (2.4.1-2ubuntu3) breezy; urgency=low
+
+  * CVS update up to 2005-07-07
+  * Regenerate the documentation.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu,  7 Jul 2005 09:21:28 +0200
+
+python2.4 (2.4.1-2ubuntu2) breezy; urgency=low
+
+  * CVS update up to 2005-06-15
+  * Regenerate the documentation.
+  * Synchronize with Debian. Ubuntu 10485.
+  * idle-python2.4 enhances python2.4. Ubuntu 11562.
+  * README.Debian: Fix reference to the doc directory (closes: #311677).
+
+ -- Matthias Klose <doko@debian.org>  Wed, 15 Jun 2005 08:56:57 +0200
+
+python2.4 (2.4.1-2ubuntu1) breezy; urgency=low
+
+  * Update build dependencies:
+      db4.2-dev -> db4.3-dev,
+      libreadline4-dev -> libreadline5-dev.
+  * python2.4-dev: Add missing templates to generate HTML docs. Ubuntu 11531.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 29 May 2005 00:01:05 +0200
+
+python2.4 (2.4.1-2) unstable; urgency=low
+
+  * Add the debug symbols for the python2.4, python2.4-gdbm
+    and python2.4-tk packages to the python2.4-dbg package.
+  * Add gdbinit example to doc directory.
+
+ -- Matthias Klose <doko@debian.org>  Thu,  5 May 2005 11:12:32 +0200
+
+python2.4 (2.4.1-1ubuntu2) breezy; urgency=low
+
+  * Add the debug symbols for the python2.4, python2.4-minimal, python2.4-gdbm
+    and python2.4-tk packages to the python2.4-dbg package. Ubuntu 10261, 
+  * Add gdbinit example to doc directory.
+  * For os.utime, use utimes(2), correctly working with glibc-2.3.5.
+    Ubuntu 10294.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu,  5 May 2005 09:06:07 +0200
+
+python2.4 (2.4.1-1ubuntu1) breezy; urgency=low
+
+  * Reupload as 2.4.1-1ubuntu1.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 14 Apr 2005 10:46:32 +0200
+
+python2.4 (2.4.1-1) unstable; urgency=low
+
+  * Python 2.4.1 release.
+  * Fix noise in python-doc installation/removal.
+  * New Python section for the info docs.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 30 Mar 2005 19:42:03 +0200
+
+python2.4 (2.4.1-0) hoary; urgency=low
+
+  * Python 2.4.1 release.
+  * Fix noise in python-doc installation/removal.
+  * New Python section for the info docs.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed, 30 Mar 2005 16:35:34 +0200
+
+python2.4 (2.4+2.4.1rc2-2) unstable; urgency=low
+
+  * Add the valgrind support file to /etc/python2.4
+  * Build the -dbg package with -DPy_USING_MEMORY_DEBUGGER.
+  * Lib/locale.py:
+    - correctly parse LANGUAGE as a colon separated list of languages.
+    - prefer LC_ALL, LC_CTYPE and LANG over LANGUAGE to get the correct
+      encoding.
+    - Don't map 'utf8', 'utf-8' to 'utf', which is not a known encoding
+      for glibc.
+  * Fix two typos in python(1). Addresses: #300124.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 19 Mar 2005 21:50:14 +0100
+
+python2.4 (2.4+2.4.1rc2-1) unstable; urgency=low
+
+  * Python 2.4.1 release candidate 2.
+  * Build-depend on libbluetooth1-dev.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 19 Mar 2005 00:57:14 +0100
+
+python2.4 (2.4dfsg-2) unstable; urgency=low
+
+  * CVS update up to 2005-03-03
+
+ -- Matthias Klose <doko@debian.org>  Thu,  3 Mar 2005 22:22:16 +0100
+
+python2.4 (2.4dfsg-1ubuntu4) hoary; urgency=medium
+
+  * Move exception finalisation later in the shutdown process - this
+    fixes the crash seen in bug #1165761, taken from CVS.
+  * codecs.StreamReader: Reset codec when seeking. Ubuntu #6972.
+  * Apply fix for SF1124295, fixing an obscure bit of Zope's security machinery.
+  * distutils: Don't add standard library dirs to library_dirs
+    and runtime_library_dirs. On amd64, runtime paths pointing to /usr/lib64
+    aren't recognized by dpkg-shlibdeps, and the packages containing these
+    libraries aren't added to ${shlibs:Depends}.
+  * Lib/locale.py:
+    - correctly parse LANGUAGE as a colon separated list of languages.
+    - prefer LC_ALL, LC_CTYPE and LANG over LANGUAGE to get the correct
+      encoding.
+    - Don't map 'utf8', 'utf-8' to 'utf', which is not a known encoding
+      for glibc.
+  * os.py: Avoid using items() in environ.update(). Fixes #1124513.
+  * Python/pythonrun.c: 
+  * Build depend on locales, generate the locales needed for the
+    testsuite.
+  * Add build dependency on libbluetooth1-dev, adding some bluetooth
+    functionality to the socket module.
+  * Lib/test/test_sundry.py: Don't fail on import of profile & pstats,
+    which are separated out to the python-profiler package.
+  * Fix typos in manpage.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue, 29 Mar 2005 13:35:53 +0200
+
+
+python2.4 (2.4dfsg-1ubuntu3) hoary; urgency=low
+
+  * debian/patches/langpack-gettext.dpatch:
+    - langpack support for python-gettext added
+
+ -- Michael Vogt <michael.vogt@ubuntu.com>  Tue,  1 Mar 2005 13:13:36 +0100
+
+python2.4 (2.4dfsg-1ubuntu2) hoary; urgency=low
+
+  * Revert 'essential' status on python2.4-minimal. This status on
+    on python-minimal is sufficient (Ubuntu #6392).
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed,  9 Feb 2005 23:09:42 +0100
+
+python2.4 (2.4dfsg-1ubuntu1) hoary; urgency=low
+
+  * Resyncronise with Debian.
+  * Mark the python2.4-minimal package as 'essential'.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed,  9 Feb 2005 13:31:09 +0100
+
+python2.4 (2.4dfsg-1) unstable; urgency=medium
+
+  * Add licenses and acknowledgements for incorporated software in the
+    debian/copyright file (addresses: #293932).
+  * Replace md5 implementation with one having a DFSG conforming license.
+  * Remove the profile.py and pstats.py modules from the source package,
+    not having a DFSG conforming license. The modules can be found in
+    the python2.x-profile package in the non-free section.
+    Addresses: #293932.
+  * Add missing norwegian locales (Tollef Fog Heen).
+  * CVS updates of the release24-maint branch upto 2005-02-08 (date of
+    the Python 2.3.5 release).
+
+ -- Matthias Klose <doko@debian.org>  Tue,  8 Feb 2005 19:13:10 +0100
+
+python2.4 (2.4-7ubuntu1) hoary; urgency=low
+
+  * Fix the name of the python-dbg man page.
+  * Resyncronise with Debian.
+  * Move more modules to -minimal (new code in copy.py requires these):
+    dis, inspect, opcode, token, tokenize.
+
+ -- Matthias Klose <doko@ubuntu.com>  Tue,  8 Feb 2005 19:13:10 +0100
+
+python2.4 (2.4-7) unstable; urgency=medium
+
+  * Add licenses and acknowledgements for incorporated software in the
+    debian/copyright file (addresses: #293932).
+  * Replace md5 implementation with one having a DFSG conforming license.
+  * Add missing norwegian locales (Tollef Fog Heen).
+  * CVS updates of the release24-maint branch upto 2005-02-08 (date of
+    the Python 2.3.5 release).
+
+ -- Matthias Klose <doko@debian.org>  Tue,  8 Feb 2005 19:13:10 +0100
+
+python2.4 (2.4-6) unstable; urgency=low
+
+  * Build a python2.4-dbg package using --with-pydebug. Add a debug
+    directory <prefix>/lib-dynload/debug to sys.path instead of
+    <prefix>/lib-dynload und install the extension modules of the
+    debug build in this directory.
+    Change the module load path to load extension modules from other
+    site-packages/debug directories (for further details see the
+    README in the python2.4-dbg package).  Closes: #5415.
+  * Apply the pydebug-path patch. The package was already built in -5.
+
+ -- Matthias Klose <doko@debian.org>  Fri,  4 Feb 2005 22:15:13 +0100
+
+python2.4 (2.4-5) unstable; urgency=high
+
+  * Fix a flaw in SimpleXMLRPCServerthat can affect any XML-RPC servers.  
+    This affects any programs have been written that allow remote 
+    untrusted users to do unrestricted traversal and can allow them to
+    access or change function internals using the im_* and func_* attributes.
+    References: CAN-2005-0089.
+  * CVS updates of the release24-maint branch upto 2005-02-04.
+
+ -- Matthias Klose <doko@debian.org>  Fri,  4 Feb 2005 08:12:10 +0100
+
+python2.4 (2.4-4) unstable; urgency=medium
+
+  * Update debian/copyright to the 2.4 license text (closes: #290898).
+  * Remove /usr/bin/smtpd.py (closes: #291049).
+
+ -- Matthias Klose <doko@debian.org>  Mon, 17 Jan 2005 23:54:37 +0100
+
+python2.4 (2.4-3ubuntu6) hoary; urgency=low
+
+  * Use old-style dpatches instead of dpatch-run.
+
+ -- Tollef Fog Heen <tfheen@canonical.com>  Mon,  7 Feb 2005 15:58:05 +0100
+
+python2.4 (2.4-3ubuntu5) hoary; urgency=low
+
+  * Actually apply the patch as well (add to list of patches in
+    debian/rules)
+
+ -- Tollef Fog Heen <tfheen@canonical.com>  Sun,  6 Feb 2005 15:12:58 +0100
+
+python2.4 (2.4-3ubuntu4) hoary; urgency=low
+
+  * Add nb_NO and nn_NO locales to Lib/locale.py
+
+ -- Tollef Fog Heen <tfheen@canonical.com>  Sun,  6 Feb 2005 14:33:05 +0100
+
+python2.4 (2.4-3ubuntu3) hoary; urgency=low
+
+  * Fix a flaw in SimpleXMLRPCServerthat can affect any XML-RPC servers.
+    This affects any programs have been written that allow remote
+    untrusted users to do unrestricted traversal and can allow them to
+    access or change function internals using the im_* and func_* attributes.
+    References: CAN-2005-0089.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed,  2 Feb 2005 09:08:20 +0000
+
+python2.4 (2.4-3ubuntu2) hoary; urgency=low
+
+  * Build a python2.4-dbg package using --with-pydebug. Add a debug
+    directory <prefix>/lib-dynload/debug to sys.path instead of
+    <prefix>/lib-dynload und install the extension modules of the
+    debug build in this directory.
+    Change the module load path to load extension modules from other
+    site-packages/debug directories (for further details see the
+    README in the python2.4-dbg package).  Closes: #5415.
+  * Update debian/copyright to the 2.4 license text (closes: #290898).
+  * Add operator and copy to the -minimal package.
+
+ -- Matthias Klose <m@klose.in-berlin.de>  Mon, 17 Jan 2005 23:19:47 +0100
+
+python2.4 (2.4-3ubuntu1) hoary; urgency=low
+
+  * Resynchronise with Debian.
+  * python2.4: Depend on the very same version of python2.4-minimal.
+  * Docment, that time.strptime currently cannot be used, if the
+    python-minimal package is installed without the python package.
+
+ -- Matthias Klose <m@klose.in-berlin.de>  Sun,  9 Jan 2005 19:35:48 +0100
+
+python2.4 (2.4-3) unstable; urgency=medium
+
+  * Build the fpectl module.
+  * Updated to CVS release24-maint 20050107.
+
+ -- Matthias Klose <doko@debian.org>  Sat,  8 Jan 2005 19:05:21 +0100
+
+python2.4 (2.4-2ubuntu5) hoary; urgency=low
+
+  * Updated to CVS release24-maint 20050102.
+  * python-minimal:
+    - os.py: Use dict instead of UserDict, remove UserDict from -minimal.
+    - add pickle, threading, needed for subprocess module.
+    - optparse.py: conditionally import gettext, if not available,
+      define _ as the identity function. Patch taken from the trunk.
+      Avoids import of _locale, locale, gettext, copy, repr, itertools,
+      collections, token, tokenize.
+    - Add a build check to make sure that the minimal module list is
+      closed under dependency.
+  * Fix lintian warnings.
+
+ -- Matthias Klose <m@klose.in-berlin.de>  Sun,  2 Jan 2005 22:00:14 +0100
+
+python2.4 (2.4-2ubuntu4) hoary; urgency=low
+
+  * Add UserDict.py to the -minimal package, since os.py needs it.
+
+ -- Colin Watson <cjwatson@canonical.com>  Thu, 30 Dec 2004 20:41:28 +0000
+
+python2.4 (2.4-2ubuntu3) hoary; urgency=low
+
+  * Add os.py and traceback.py to the -minimal package, get the list
+    of modules from the README.
+
+ -- Matthias Klose <m@klose.in-berlin.de>  Mon, 27 Dec 2004 08:20:45 +0100
+
+python2.4 (2.4-2ubuntu2) hoary; urgency=low
+
+  * Add compileall.py and py_compile.py to the -minimal package, not
+    just to the README ...
+
+ -- Matthias Klose <m@klose.in-berlin.de>  Sat, 25 Dec 2004 22:24:56 +0100
+
+python2.4 (2.4-2ubuntu1) hoary; urgency=low
+
+  * Separate the interpreter and a minimal subset of modules into
+    a python2.4-minimal package. See the README.Debian.gz in this
+    package.
+  * Move site.py to python2.4-minimal as well.
+  * Add documentation files for devhelp.
+
+ -- Matthias Klose <m@klose.in-berlin.de>  Sun, 19 Dec 2004 22:47:32 +0100
+
+python2.4 (2.4-2) unstable; urgency=medium
+
+  * Updated patch for #283108. Thanks to Jim Meyering.
+
+ -- Matthias Klose <doko@debian.org>  Fri,  3 Dec 2004 17:00:16 +0100
+
+python2.4 (2.4-1) unstable; urgency=low
+
+  * Final 2.4 release.
+  * Flush stdout/stderr if closed (SF #1074011).
+
+ -- Matthias Klose <doko@debian.org>  Wed,  1 Dec 2004 07:54:34 +0100
+
+python2.4 (2.3.97-2) unstable; urgency=low
+
+  * Don't run test_tcl, hanging on the buildds.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 19 Nov 2004 23:48:42 +0100
+
+python2.4 (2.3.97-1) unstable; urgency=low
+
+  * Python 2.4 Release Candidate 1.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 19 Nov 2004 21:27:02 +0100
+
+python2.4 (2.3.96-1) experimental; urgency=low
+
+  * Updated to CVS release24-maint 20041113.
+  * Build the docs in info format again.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 13 Nov 2004 21:21:10 +0100
+
+python2.4 (2.3.95-2) experimental; urgency=low
+
+  * Move distutils package from the python2.4-dev into the python2.4
+    package.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 11 Nov 2004 22:56:14 +0100
+
+python2.4 (2.3.95-1) experimental; urgency=low
+
+  * Python 2.4 beta2 release.
+
+ -- Matthias Klose <doko@debian.org>  Thu,  4 Nov 2004 23:43:47 +0100
+
+python2.4 (2.3.94-1) experimental; urgency=low
+
+  * Python 2.4 beta1 release.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 16 Oct 2004 08:33:57 +0200
+
+python2.4 (2.3.93-1) experimental; urgency=low
+
+  * Python 2.4 alpha3 release.
+
+ -- Matthias Klose <doko@debian.org>  Fri,  3 Sep 2004 21:53:47 +0200
+
+python2.4 (2.3.92-1) experimental; urgency=low
+
+  * Python 2.4 alpha2 release.
+
+ -- Matthias Klose <doko@debian.org>  Thu,  5 Aug 2004 23:53:18 +0200
+
+python2.4 (2.3.91-1) experimental; urgency=low
+
+  * Python 2.4 alpha1 release.
+    Highlights: http://www.python.org/2.4/highlights.html
+
+ -- Matthias Klose <doko@debian.org>  Fri,  9 Jul 2004 17:38:54 +0200
+
+python2.4 (2.3.90-1) experimental; urgency=low
+
+  * Package HEAD branch (pre alpha ..).
+
+ -- Matthias Klose <doko@debian.org>  Mon, 14 Jun 2004 23:19:57 +0200
+
+python2.3 (2.3.4-1) unstable; urgency=medium
+
+  * Final Python 2.3.4 Release.
+  * In the API docs, fix signature of PyModule_AddIntConstant (closes: #250826).
+  * locale.getdefaultlocale: don't fail with empty environment variables.
+    Closes: #249816.
+  * Include distutils/command/wininst.exe in -dev package (closes: #249006).
+  * Disable cthreads on the Hurd (Michael Banck). Closes: #247211.
+  * Add a note to pygettext(1), that this program is deprecated in favour
+    of xgettext, which now includes support for Python as well.
+    Closes: #246332.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 28 May 2004 22:59:42 +0200
+
+python2.3 (2.3.3.91-1) unstable; urgency=low
+
+  * Python 2.3.4 Release Candidate 1.
+  * Do not use the default namespace for attributes. Patch taken from the
+    2.3 maintenance branch.
+    The xmllib module is obsolete.  Use xml.sax instead.
+  * http://python.org/sf/945642 - fix nonblocking i/o with ssl socket.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 13 May 2004 21:24:52 +0200
+
+python2.3 (2.3.3-7) unstable; urgency=low
+
+  * Add a workaround for GNU libc nl_langinfo()'s returning NULL.
+    Closes: #239237.
+    Patch taken from 2.3 maintenance branch.
+  * threading.py: Remove calls to currentThread() in _Condition methods that
+    were side-effect. Side-effects were deemed unnecessary and were causing
+    problems at shutdown time when threads were catching exceptions at start
+    time and then triggering exceptions trying to call currentThread() after
+    gc'ed.  Masked the initial exception which was deemed bad.
+    Closes: #195812.
+  * Properly support normalization of empty unicode strings. Closes: #239986.
+    Patch taken from 2.3 maintenance branch.
+  * README.maintainers: Add section where to find the documentation tools.
+  * Fix crash in pyexpat module (closes: #229281).
+  * For the Hurd, set the interpreters recursion limit to 930.
+  * Do not try to byte-compile the test files on installation; this
+    currently breaks the Hurd install.
+
+ -- Matthias Klose <doko@debian.org>  Sat,  1 May 2004 07:50:46 +0200
+
+python2.3 (2.3.3-6) unstable; urgency=low
+
+  * Don't build the unversioned python{,-*} packages anymore. Now
+    built from the python-defaults package.
+  * Update to the proposed python-policy: byte-compile using -E.
+  * Remove python-elisp's dependency on emacs20 (closes: #232785).
+  * Don't build python-elisp from the python2.3 source anymore,
+    get it from python-mode.sf.net as a separate source package.
+  * python2.3-dev suggests libc-dev (closes: #231091).
+  * get LDSHARED and CCSHARED (like, CC, CXX, CPP, CFLAGS) from 
+    the environment
+  * Set CXX in installed config/Makefile (closes: #230273).
+
+ -- Matthias Klose <doko@debian.org>  Tue, 24 Feb 2004 07:07:51 +0100
+
+python2.3 (2.3.3-5) unstable; urgency=low
+
+  * Build-depend on libdb4.2-dev, instead of libdb4.1-dev. According
+    to the docs the file format is compatible.
+
+ -- Matthias Klose <doko@debian.org>  Mon, 12 Jan 2004 10:37:45 +0100
+
+python2.3 (2.3.3-4) unstable; urgency=low
+
+  * Fix broken _bsddb module. setup.py picked up the wrong library.
+
+ -- Matthias Klose <doko@debian.org>  Sun,  4 Jan 2004 11:30:00 +0100
+
+python2.3 (2.3.3-3) unstable; urgency=low
+
+  * Fix typo in patch (closes: #224797, #226064).
+
+ -- Matthias Klose <doko@debian.org>  Sun,  4 Jan 2004 09:23:21 +0100
+
+python2.3 (2.3.3-2) unstable; urgency=medium
+
+  * Lib/email/Charset: use locale unaware function to lower case of locale
+    name (closes: #224797).
+  * Update python-mode to version from python-mode.sf.net. Fixes highlighting
+    problems (closes: #223520).
+  * Backport from mainline: Add IPV6_ socket options from RFCs 3493 and 3542.
+
+ -- Matthias Klose <doko@debian.org>  Fri,  2 Jan 2004 14:03:26 +0100
+
+python2.3 (2.3.3-1) unstable; urgency=low
+
+  * New upstream release.
+  * Copy the templates, tools and scripts from the Doc dir in the source
+    to /usr/share/lib/python2.3/doc in the python2.3-dev package. Needed
+    for packages building documentation like python does (closes: #207337).
+
+ -- Matthias Klose <doko@debian.org>  Fri, 19 Dec 2003 10:57:39 +0100
+
+python2.3 (2.3.2.91-1) unstable; urgency=low
+
+  * New upstream version (2.3.3 release candidate).
+  * Update python-mode.el (closes: #158811, #159630).
+    Closing unreproducible report (closes: #159628).
+
+ -- Matthias Klose <doko@debian.org>  Sat,  6 Dec 2003 14:41:14 +0100
+
+python2.3 (2.3.2-7) unstable; urgency=low
+
+  * Put the conflict in the correct direction. python2.3 (2.3.2-6) doesn't
+    conflict with python (<= 2.3.2-5) but python (2.3.2-6) conflicts with
+    python2.3 (<= 2.3.2-5) (thanks to Brian May). Really closes #221791.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 21 Nov 2003 00:20:02 +0100
+
+python2.3 (2.3.2-6) unstable; urgency=low
+
+  * Add conflicts with older python{,2.3} packages to fix overwrite
+    errors (closes: #221791).
+
+ -- Matthias Klose <doko@debian.org>  Thu, 20 Nov 2003 07:24:36 +0100
+
+python2.3 (2.3.2-5) unstable; urgency=low
+
+  * Updated to CVS release23-maint 20031119.
+  * Re-upgrade the dependency of python2.3 on python (>= 2.3) to
+    a dependency (closes: #221523).
+
+ -- Matthias Klose <doko@debian.org>  Wed, 19 Nov 2003 00:30:27 +0100
+
+python2.3 (2.3.2-4) unstable; urgency=low
+
+  * Don't build-depend on latex2html (moved to non-free), but keep
+    the prebuilt docs in debian/patches (closes: #221347).
+  * Fix typos in the library reference (closes: #220510, #220954).
+  * Fix typo in python-elisp's autoloading code (closes: #220308).
+  * Update proposed python policy: private modules can be installed
+    into /usr/lib/<module> (arch dependent) and into /usr/share/<module>
+    (arch independent).
+
+ -- Matthias Klose <doko@debian.org>  Tue, 18 Nov 2003 00:41:39 +0100
+
+python2.3 (2.3.2-3) unstable; urgency=low
+
+  * Downgrade the dependency of python2.3 on python (>= 2.3) to
+    a recommendation.
+  * Fix path to interpreter in binfmt file.
+  * Fix segfault in unicodedata module (closes: #218697).
+  * Adjust python-elisp autoload code (closes: #219821).
+
+ -- Matthias Klose <doko@debian.org>  Sun,  9 Nov 2003 19:43:37 +0100
+
+python2.3 (2.3.2-2) unstable; urgency=medium
+
+  * Fix broken doc link (closes: #214217).
+  * Disable wrongly detected large file support for GNU/Hurd.
+  * Really fix the  FTBFS for the binary-indep target (closes: #214303).
+
+ -- Matthias Klose <doko@debian.org>  Mon,  6 Oct 2003 07:54:58 +0200
+
+python2.3 (2.3.2-1) unstable; urgency=low
+
+  * New upstream version.
+  * Fix a FTBFS for the binary-indep target.
+
+ -- Matthias Klose <doko@debian.org>  Sat,  4 Oct 2003 10:20:15 +0200
+
+python2.3 (2.3.1-3) unstable; urgency=low
+
+  * Fix names of codec packages in recommends.
+  * On alpha compile using -mieee (see #212912).
+
+ -- Matthias Klose <doko@debian.org>  Sun, 28 Sep 2003 10:48:12 +0200
+
+python2.3 (2.3.1-2) unstable; urgency=low
+
+  * Update python policy draft (closes: #128911, #163785).
+  * Re-add os.fsync function (closes: #212672).
+  * Let python2.3-doc conflict with older python2.3 versions (closes: #211882).
+  * Add recommends for pythonX.Y-japanese-codecs, pythonX.Y-iconvcodec,
+    pythonX.Y-cjkcodecs, pythonX.Y-korean-codecs (closes: #207161).
+  * Generate binfmt file (closes: #208005).
+  * Add IPPROTO_IPV6 option to the socketmodule (closes: #206569).
+  * Bugs reported against python2.2 and fixed in python2.3:
+    - Crashes in idle (closes: #186887, #200084).
+
+ -- Matthias Klose <doko@debian.org>  Sat, 27 Sep 2003 11:21:47 +0200
+
+python2.3 (2.3.1-1) unstable; urgency=low
+
+  * New upstream version (bug fix release).
+
+ -- Matthias Klose <doko@debian.org>  Wed, 24 Sep 2003 11:27:43 +0200
+
+python2.3 (2.3-4) unstable; urgency=high
+
+  * Disable check for utimes function, which is broken in glibc-2.3.2.
+    Packages using distutils had '1970/01/01-01:00:01' timestamps in files.
+  * Bugs fixed by making python2.3 the default python version:
+    - Canvas.scan_dragto() takes a 3rd optional parmeter "gain".
+      Closes: #158168.
+    - New command line parsing module (closes: #38628).
+    - compileall.py allows compiling single files (closes: #139971).
+  * Bugs reported for 2.2 and fixed in 2.3:
+    - Idle does save files with ASCII characters (closes: #179313).
+    - imaplib support for prefix-quoted strings (closes: #150485).
+    - posixpath includes getctime (closes: #173827).
+    - pydoc has support for keywords (closes: #186775).
+  * Bugs reported for 2.1 and fixed in 2.3:
+    - Fix handling of "#anchor" URLs in urlparse (closes: #147844).
+    - Fix readline if C stdin is not a tty, even if sys.stdin is.
+      Closes: #131810.
+  * Updated to CVS release23-maint 20030810 (fixing memory leaks in
+    array and socket modules).
+  * pydoc's usage output uses the basename of the script.
+  * Don't explicitely remove /etc/python2.3 on purge (closes: #202864).
+  * python conflicts with python-xmlbase (closes: #204773).
+  * Add dependency python (>= 2.3) to python2.3, so make sure the
+    unversioned names can be used.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 10 Aug 2003 09:27:52 +0200
+
+python2.3 (2.3-3) unstable; urgency=medium
+
+  * Fix shlibs file.
+
+ -- Matthias Klose <doko@debian.org>  Fri,  8 Aug 2003 08:45:12 +0200
+
+python2.3 (2.3-2) unstable; urgency=medium
+
+  * Make python2.3 the default python version.
+
+ -- Matthias Klose <doko@debian.org>  Tue,  5 Aug 2003 22:13:22 +0200
+
+python2.3 (2.3-1) unstable; urgency=low
+
+  * Python 2.3 final release.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 30 Jul 2003 08:12:28 +0200
+
+python2.3 (2.2.107-1rc2) unstable; urgency=medium
+
+  * Python 2.3 release candidate 2.
+  * Don't compress .txt files referenced by the html docs (closes: #200298).
+  * Include the email/_compat* files (closes: #200349).
+
+ -- Matthias Klose <doko@debian.org>  Fri, 25 Jul 2003 07:08:09 +0200
+
+python2.3 (2.2.106-2beta2) unstable; urgency=medium
+
+  * Python 2.3 beta2 release, updated to CVS 20030704.
+    - Fixes AssertionError in httplib (closed: #192452).
+    - Fixes uncaught division by zero in difflib.py (closed: #199287).
+  * Detect presence of setgroups(2) at configure time (closes: #199839).
+  * Use default gcc on arm as well.
+
+ -- Matthias Klose <doko@debian.org>  Sat,  5 Jul 2003 10:21:33 +0200
+
+python2.3 (2.2.105-1beta2) unstable; urgency=low
+
+  * Python 2.3 beta2 release.
+    - Includes merged idle fork.
+    - Fixed socket.setdefaulttimeout(). Closes: #189380.
+    - socket.ssl works with _socketobj. Closes: #196082.
+  * Do not link libtix to the _tkinter module. It's loaded via
+   'package require tix' at runtime. python2.3-tkinter now
+    suggests tix8.1 instead.
+  * On arm, use gcc-3.2 to build.
+  * Add -fno-strict-aliasing rules to OPT to avoid warnings
+    "dereferencing type-punned pointer will break strict-aliasing rules",
+    when building with gcc-3.3.
+
+ -- Matthias Klose <doko@debian.org>  Mon, 30 Jun 2003 00:19:32 +0200
+
+python2.3 (2.2.104-1beta1.1) unstable; urgency=low
+
+  * Non-maintainer upload with maintainer consent.
+  * debian/control (Build-Depends): s/libgdbmg1-dev/libgdbm-dev/.
+
+ -- James Troup <james@nocrew.org>  Wed,  4 Jun 2003 02:24:27 +0100
+
+python2.3 (2.2.104-1beta1) unstable; urgency=low
+
+  * Python 2.3 beta1 release, updated to CVS 20030514.
+    - build the current documentation.
+  * Reenable Tix support.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 14 May 2003 07:38:57 +0200
+
+python2.3 (2.2.103-1beta1) unstable; urgency=low
+
+  * Python 2.3 beta1 release, updated to CVS 20030506.
+    - updated due to build problems on mips/mipsel.
+    - keep the 2.3b1 documentation (doc build problems with cvs).
+
+ -- Matthias Klose <doko@debian.org>  Wed,  7 May 2003 06:26:39 +0200
+
+python2.3 (2.2.102-1beta1) unstable; urgency=low
+
+  * Python 2.3 beta1 release.
+
+ -- Matthias Klose <doko@debian.org>  Sat,  3 May 2003 22:45:16 +0200
+
+python2.3 (2.2.101-1exp1) unstable; urgency=medium
+
+  * Python 2.3 alpha2 release, updated to CVS 20030321.
+  * Tkinter: Catch exceptions thrown for undefined substitutions in
+    events (needed for tk 8.4.2).
+
+ -- Matthias Klose <doko@debian.org>  Fri, 21 Mar 2003 21:32:14 +0100
+
+python2.3 (2.2.100-1exp1) unstable; urgency=low
+
+  * Python 2.3 alpha2 release, updated to CVS 20030221.
+
+ -- Matthias Klose <doko@debian.org>  Fri, 21 Feb 2003 19:37:17 +0100
+
+python2.3 (2.2.99-1exp1) unstable; urgency=low
+
+  * Python 2.3 alpha1 release updated to CVS 20030123.
+    - should fix the testsuite (and package build) failure on alpha.
+  * Remove build dependency on libexpat1-dev. Merge the python2.3-xmlbase
+    package into python2.3 (closes: #177739).
+
+ -- Matthias Klose <doko@debian.org>  Thu, 23 Jan 2003 22:48:12 +0100
+
+python2.3 (2.2.98-1exp1) unstable; urgency=low
+
+  * Python 2.3 alpha1 release updated to CVS 20030117.
+  * Build using libdb4.1.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 18 Jan 2003 00:14:01 +0100
+
+python2.3 (2.2.97-1exp1) unstable; urgency=low
+
+  * Python 2.3 alpha1 release updated to CVS 20030109.
+  * Build-Depend on g++ (>= 3:3.2).
+  * Python package maintainers: please wait uploading python dependent
+    packages until python2.2 and python2.1 are compiled using gcc-3.2.
+
+ -- Matthias Klose <doko@debian.org>  Thu,  9 Jan 2003 23:56:42 +0100
+
+python2.3 (2.2.96-1exp1) unstable; urgency=low
+
+  * Python 2.3 alpha1 release (not exactly the tarball, but taken from
+    CVS 20030101).
+    - Includes support for linking with threaded tk8.4 (closes: #172714).
+  * Install and register whatsnew document (closes: #173859).
+  * Properly unregister info documentation.
+
+ -- Matthias Klose <doko@debian.org>  Wed,  1 Jan 2003 17:38:54 +0100
+
+python2.3 (2.2.95-1exp1) unstable; urgency=low
+
+  * Experimental packages from CVS 021212.
+    - data in unicodedate module is up to date (closes: #171061).
+  * Fix idle packaging (closes: #170394).
+  * Configure using unicode UCS-4 (closes: #171062).
+    This change breaks compatibility with binary modules, but what do you
+    expect from experimental packages ... Please recompile dependent packages.
+  * Don't strip binaries for now.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 12 Dec 2002 21:42:27 +0100
+
+python2.3 (2.2.94-1exp1) unstable; urgency=low
+
+  * Experimental packages from CVS 021120.
+  * Remove outdated README.dbm.
+  * Depend on tk8.4.
+  * python-elisp: Install emacsen install file with mode 644 (closes: #167718).
+
+ -- Matthias Klose <doko@debian.org>  Thu, 21 Nov 2002 01:04:51 +0100
+
+python2.3 (2.2.93-1exp1) unstable; urgency=medium
+
+  * Experimental packages from CVS 021015.
+  * Build a static library libpython2.3-pic.a.
+  * Enable large file support for the Hurd (closes: #164602).
+
+ -- Matthias Klose <doko@debian.org>  Tue, 15 Oct 2002 21:06:27 +0200
+
+python2.3 (2.2.92-1exp1) unstable; urgency=low
+
+  * Experimental packages from CVS 020922.
+  * Fix build error on ia64 (closes: #161234).
+  * Build depend on gcc-3.2-3.2.1-0pre2 to fix build error on arm.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 22 Sep 2002 18:30:28 +0200
+
+python2.3 (2.2.91-1exp1) unstable; urgency=low
+
+  * Experimental packages from CVS 020906.
+  * idle-python2.3: Fix conflict (closes: #159267).
+  * Fix location of python-mode.el (closes: #159564, #159619).
+  * Use tix8.1.
+  * Apply fix for distutils/ccompiler problem (closes: #159288).
+
+ -- Matthias Klose <doko@debian.org>  Sat,  7 Sep 2002 09:55:07 +0200
+
+python2.3 (2.2.90-1exp1) unstable; urgency=low
+
+  * Experimental packages from CVS 020820.
+  * Don't build python2.3-elisp, but put the latest version into
+    python-elisp.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 22 Aug 2002 21:52:04 +0200
+
+python2.2 (2.2.1-6) unstable; urgency=low
+
+  * CVS updates of the release22-maint branch upto 2002-07-23.
+  * Enable IPv6 support (closes: #152543).
+  * Add python2.2-tk suggestion for python2.2 (pydoc -g).
+  * Fix from SF patch #527518: proxy config with user+pass authentication.
+  * Point pydoc to the correct location of the docs (closes: #147579).
+  * Remove '*.py[co]' files, when removing the python package,
+    not when purging (closes: #147130).
+  * Update to new py2texi.el version (Milan Zamazal).
+
+ -- Matthias Klose <doko@debian.org>  Mon, 29 Jul 2002 23:11:32 +0200
+
+python2.2 (2.2.1-5) unstable; urgency=low
+
+  * CVS updates of the release22-maint branch upto 2002-05-03.
+  * Build the info docs (closes: #145653).
+
+ -- Matthias Klose <doko@debian.org>  Fri,  3 May 2002 22:35:46 +0200
+
+python2.2 (2.2.1-4) unstable; urgency=high
+
+  * Fix indentation errors introduced in last upload (closes: #143809).
+
+ -- Matthias Klose <doko@debian.org>  Sun, 21 Apr 2002 01:00:14 +0200
+
+python2.2 (2.2.1-3) unstable; urgency=high
+
+  * Add Build-Conflicts: tcl8.0-dev, tk8.0-dev, tcl8.2-dev, tk8.2-dev.
+    Closes: #143534 (build a working _tkinter module, on machines, where
+    8.0's tk.h gets included).
+  * CVS updates of the release22-maint branch upto 2002-04-20.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 20 Apr 2002 09:22:37 +0200
+
+python2.2 (2.2.1-2) unstable; urgency=low
+
+  * Forgot to copy the dlmodule patch from the 2.1.3 package. Really
+    closes: #141681.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 13 Apr 2002 01:28:05 +0200
+
+python2.2 (2.2.1-1) unstable; urgency=high
+
+  * Final 2.2.1 release.
+  * According to report #131813, the python interpreter is much faster on some
+    architectures, when beeing linked statically with the python library (25%).
+    Gregor and me tested on i386, m68k and alpha, but we could not reproduce
+    such a speedup (generally between 5% and 10%). But we are linking the
+    python executable now statically ...
+  * Build info docs from the tex source, merge the python-doc-info
+    package into the python-doc package.
+  * Always build the dl module. Failure in case of
+        sizeof(int)!=sizeof(long)!=sizeof(void*)
+    is delayed until dl.open is called. Closes: #141681.
+
+ -- Matthias Klose <doko@debian.org>  Thu, 11 Apr 2002 00:19:19 +0200
+
+python2.2 (2.2.0.92-0) unstable; urgency=low
+
+  * Package CVS sources, omit cvs-updates.dpatch (closes: #140977).
+
+ -- Matthias Klose <doko@debian.org>  Wed,  3 Apr 2002 08:20:52 +0200
+
+python2.2 (2.2-6) unstable; urgency=medium
+
+  * Update to python-2.2.1 release candidate 2 (final release scheduled
+    for April 10).
+  * Enable dl module (closes: #138992).
+  * Build doc files with python binary from package (closes: #139657).
+  * Build _tkinter module with BLT and Tix support.
+  * python2.2-elisp: Conflict with python2-elisp (closes: #138970).
+  * string.split docs updated in python-2.2.1 (closes: #129272).
+
+ -- Matthias Klose <doko@debian.org>  Mon,  1 Apr 2002 13:52:36 +0200
+
+python2.2 (2.2-5) unstable; urgency=low
+
+  * CVS updates of the release22-maint branch upto 20020310 (aproaching
+    the first 2.2.1 release candidate).
+  * Stolen from HEAD: check argument of locale.nl_langinfo (closes: #137371).
+
+ -- Matthias Klose <doko@debian.org>  Fri, 15 Mar 2002 01:05:59 +0100
+
+python2.2 (2.2-4) unstable; urgency=medium
+
+  * Include test/{__init__.py,README,pystone.py} in package (closes: #129013).
+  * Fix python-elisp conflict (closes: #129046).
+  * Don't compress stylesheets (closes: #133179).
+  * CVS updates of the release22-maint branch upto 20020310.
+
+ -- Matthias Klose <doko@debian.org>  Sun, 10 Mar 2002 23:32:28 +0100
+
+python2.2 (2.2-3) unstable; urgency=medium
+
+  * Updates from the CVS python22-maint branch up to 20020107.
+    webbrowser.py: properly escape url's.
+  * The Hurd does not have large file support: disabled.
+
+ -- Matthias Klose <doko@debian.org>  Mon,  7 Jan 2002 21:55:57 +0100
+
+python2.2 (2.2-2) unstable; urgency=medium
+
+  * CVS updates of the release22-maint branch upto 20011229. Fixes:
+    - Include TCP_CORK flag in plat-linux2 headers (fixes: #84340).
+    - Update CDROM.py module (fixes: #125785).
+  * Add missing chunk of the GNU/Hurd patch (therefore urgency medium).
+  * Send anonymous password when using anonftp (closes: #126814).
+
+ -- Matthias Klose <doko@debian.org>  Sat, 29 Dec 2001 20:18:26 +0100
+
+python2.2 (2.2-1) unstable; urgency=low
+
+  * New upstream version: 2.2.
+  * Bugs fixed upstream:
+    - Docs for os.kill reference the signal module for constants.
+    - Documentation strings in the tutorial end with a period (closes: #94770).
+    - Tk: grid_location method moved from Grid to Misc (closes: #98338).
+    - mhlib.SubMessage.getbodytext takes decode parameter (closes: #31876).
+    - Strings in modules are locale aware (closes: #51444).
+    - Printable 8-bit characters in strings are correctly printed
+      (closes: #64354).
+    - Dictionary can be updated with abstract mapping object (closes: #46566).
+  * Make site.py a config files.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 22 Dec 2001 00:51:46 +0100
+
+python2.2 (2.1.99c1-1) unstable; urgency=low
+
+  * New upstream version: 2.2c1 (release candidate).
+  * Do not provide python2.2-base anymore.
+  * Install correct README.Debian for python2.2 package. Include hint
+    where to find Makefile.pre.in.
+  * Suggest installation of python-ssl.
+  * Remove idle config files on purge.
+  * Remove empty /usr/lib/python2.2 directory on purge.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 15 Dec 2001 17:56:27 +0100
+
+python2.2 (2.1.99beta2-1) unstable; urgency=high
+
+  * debian/rules: Reflect removal of regrtest package (closes: #122278).
+    Resulted in build failures on all architectures.
+  * Build -doc package from source.
+
+ -- Matthias Klose <doko@debian.org>  Sat,  8 Dec 2001 00:38:41 +0100
+
+python2.2 (2.1.99beta2-0.1) unstable; urgency=low
+
+  * Non maintainer upload.
+  * New upstream version (this is 2.2beta2).
+  * Do not build the python-regrtest package anymore; keep the test framework
+    components test/regrtest.py and test/test_support.py in the python
+    package (closes: #119408).
+
+ -- Gregor Hoffleit <flight@debian.org>  Tue, 27 Nov 2001 09:53:26 +0100
+
+python2.2 (2.1.99beta1-4) unstable; urgency=low
+
+  * Configure with --with-fpectl (closes: #118125).
+  * setup.py: Remove broken check for _curses_panel module (#116081).
+  * idle: Move config-* files to /etc and mark as conffiles (#106390).
+  * Move idle packages to section `devel'.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 31 Oct 2001 10:56:45 +0100
+
+python2.2 (2.1.99beta1-3) unstable; urgency=low
+
+  * Fix shlibs file (was still referring to 2.1). Closes: #116810.
+  * README.Debian: point to draft of python-policy in the python package.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 31 Oct 2001 10:56:45 +0100
+
+python2.2 (2.1.99beta1-2) unstable; urgency=medium
+
+  * Fix shlibs file (was still referring to 2.1). Closes: #116810.
+  * Rename package python2.2-base to python2.2.
+
+ -- Matthias Klose <doko@debian.org>  Wed, 24 Oct 2001 23:00:50 +0200
+
+python2.2 (2.1.99beta1-1) unstable; urgency=low
+
+  * New upstream version (beta). Call the package version 2.1.99beta1-1.
+  * New maintainer until the final 2.2 release.
+  * Updated the debian patches.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 20 Oct 2001 18:56:26 +0200
+
+python2.1 (2.1.1-1.2) unstable; urgency=low
+
+  * Really remove the python alternative.
+
+ -- Matthias Klose <doko@debian.org>  Sat, 20 Oct 2001 15:16:56 +0200
+
+python2.1 (2.1.1-1.1) unstable; urgency=low
+
+  * README FOR PACKAGE MAINTAINERS: It is planned to remove the python2-XXX
+    packages from unstable and move on to python2.1.
+    If you repackage/adapt your modules for python2.1, don't build
+    python2-XXX and python2.1-XXX packages from the same source package,
+    so that the python2-XXX package can be removed without influencing the
+    python2.1-XXX package.
+
+    See the debian-python mailing list at http://lists.debian.org/devel.html
+    for details and the current discussion and a draft for a debian-python
+    policy (August to October 2001).
+
+  * Remove alternative for /usr/bin/python. The python-base package now
+    provides the default python version.
+
+  * Regenerate control file to fix build dependencies (closes: #116190).
+  * Remove alternative for /usr/bin/{python,pydoc}.
+  * Provide a libpython2.1.so symlink in /usr/lib/python2.1/config,
+    so that the shared library is found when -L/usr/lib/python2.1/config
+    is specified.
+  * Conflict with old package versions, where /usr/bin/python is a real
+    program (closes: #115943).
+  * python2.1-elisp conflicts with python-elisp (closes: #115895).
+  * We now have 2.1 (closes: #96851, #107849, #110243).
+
+ -- Matthias Klose <doko@debian.org>  Fri, 19 Oct 2001 17:34:41 +0200
+
+python2.1 (2.1.1-1) unstable; urgency=low
+
+  * Incorporated Matthias' modifications.
+
+ -- Gregor Hoffleit <flight@debian.org>  Thu, 11 Oct 2001 00:16:42 +0200
+
+python2.1 (2.1.1-0.2) unstable; urgency=low
+
+  * New upstream 2.1.1.
+  * GPL compatible licence (fixes #84080, #102949, #110643).
+  * Fixed upstream (closes: #99692, #111340).
+  * Build in separate build directory.
+  * Split Debian patches into debian/patches directory.
+  * Build dependencies: Add libgmp3-dev, libexpat1-dev, tighten
+    debhelper dependency.
+  * debian/rules: Updated a "bit".
+  * python-elisp: Remove custom dependency (closes: #87783),
+    fix emacs path (closes: #89712), remove emacs19 dependency (#82694).
+  * Mention distutils in python-dev package description (closes: #108170).
+  * Update README.Debian (closes: #85430).
+  * Run versioned python in postinsts (closes: #113349).
+  * debian/sample.{postinst,prerm}: Change to version independent scripts.
+  * Use '/usr/bin/env python2.1' as interpreter for all python scripts.
+  * Add libssl-dev to Build-Conflicts.
+  * python-elisp: Add support for emacs21 (closes: #98635).
+  * Do not compress .py files in doc directories.
+  * Don't link explicitely with libc.
+
+ -- Matthias Klose <doko@debian.org>  Wed,  3 Oct 2001 09:53:08 +0200
+
+python2.1 (2.1.1-0.1) unstable; urgency=low
+
+  * New upstream version (CVS branch release21-maint, will become 2.1.1):
+    This CVS branch will be released as 2.1.1 under a GPL compatible
+    license.
+
+ -- Gregor Hoffleit <flight@debian.org>  Wed, 27 Jun 2001 22:47:58 +0200
+
+python2 (2.1-0.1) unstable; urgency=low
+
+  * Fixed Makefile.pre.in.
+  * Fixed the postinst files in order to use 2.1 (instead of 2.0).
+  * Mention the immanent release of 2.0.1 and 2.1.1, with a GPL
+    compatible license.
+
+ -- Gregor Hoffleit <flight@debian.org>  Sun, 17 Jun 2001 21:05:25 +0200
+
+python2 (2.1-0) unstable; urgency=low
+
+  * New upstream version.
+  * Experimental packages.
+
+ -- Gregor Hoffleit <flight@debian.org>  Thu, 10 May 2001 00:20:04 +0200
+
+python2 (2.0-7) unstable; urgency=low
+
+  * Rebuilt with recent tcl8.3-dev/tk8.3-dev in order to fix a
+    dependency problem with python2-tk (closes: #87793, #92962).
+  * Change postinst to create and update /usr/local/lib/python2.0 and
+    site-python with permissions and owner as mandated by policy:
+    2775 and root:staff (closes: #89047).
+  * Fix to compileall.py: A superfluous argument made compileall without
+    options fail (cf. #92990 for python).
+  * Move the distutils module into python2-dev. It needs Makefile.pre.in
+    in order to work (closes: #89900).
+  * Remove build-dependency on libgdbm2-dev (which isn't built anyway).
+  * Add a build-dependency on libdb2-dev (cf. #90220 for python).
+
+ -- Gregor Hoffleit <flight@debian.org>  Sat, 14 Apr 2001 21:07:51 +0200
+
+python2 (2.0-6) unstable; urgency=low
+
+  * Remove python-zlib package; merge it into python-base.
+  * Mark that README.python2 is not yet updated.
+
+ -- Gregor Hoffleit <flight@debian.org>  Wed, 21 Feb 2001 12:34:18 +0100
+
+python2 (2.0-5) unstable; urgency=low
+
+  * Recompile with tcl/tk8.3 (closes: #82088).
+  * Modifications to README.why-python2 (closes: #82116).
+  * Add menu hint to idle2 menu entry.
+  * idle2 is renamed idle-python2 and now build correctly (closes: #82218).
+  * Add build-dependency on autoconf (closes: #85339).
+  * Build bsddbmodule as shared module (Modules/Setup.config.in),
+    and link libpython2.so with -lm in Makefile (closes: #86027).
+  * various cleanups in debian/rules, e.g. removing dh_suidregister.
+  * Make pdb available as /usr/bin/pdb-python2 in python2-dev
+    (cf. #79870 in python-base).
+  * Remove libgmp3 from build-dependencies, since we currently can't
+    build the mpzmodule for Python2 due to license problems.
+
+ -- Gregor Hoffleit <flight@debian.org>  Sun, 18 Feb 2001 00:12:17 +0100
+
+python2 (2.0-4) unstable; urgency=low
+
+  * control: make python2-elisp conflict with python-elisp (it doesn't
+    make sense to have both of them installed, does it ?)
+  * include build-depend on libxmltok1-dev.
+  * again, build with tcl/tk8.0.
+
+ -- Gregor Hoffleit <flight@debian.org>  Wed, 10 Jan 2001 23:37:01 +0100
+
+python2 (2.0-3) unstable; urgency=low
+
+  * Modules/Setup.in: Added a missing \ that made _tkinter be built
+    incorrectly.
+  * rules: on the fly, change all '#!' python scripts to use python2.
+
+ -- Gregor Hoffleit <flight@debian.org>  Wed, 13 Dec 2000 20:07:24 +0100
+
+python2 (2.0-2) unstable; urgency=low
+
+  * Aaargh. Remove conflicts/provides/replaces on python-base to make
+    parallel installation of python-base and python2-base possible.
+  * Install examples into /usr/share/doc/python2 (not python) and fix
+    symlink to python2.0 (thanks to Rick Younie <younie@home.com> for
+    pointing out this).
+  * Rename man page to python2.1.
+
+ -- Gregor Hoffleit <flight@debian.org>  Wed, 13 Dec 2000 09:31:05 +0100
+
+python2 (2.0-1) unstable; urgency=low
+
+  * New upstream version. Initial release for python2.
+
+ -- Gregor Hoffleit <flight@debian.org>  Mon, 11 Dec 2000 22:39:46 +0100
--- python2.7-2.7.1.orig/debian/pygettext.1
+++ python2.7-2.7.1/debian/pygettext.1
@@ -0,0 +1,108 @@
+.TH PYGETTEXT 1 "" "pygettext 1.4"
+.SH NAME
+pygettext \- Python equivalent of xgettext(1)
+.SH SYNOPSIS
+.B pygettext
+[\fIOPTIONS\fR] \fIINPUTFILE \fR...
+.SH DESCRIPTION
+pygettext is deprecated. The current version of xgettext supports
+many languages, including Python.
+
+pygettext uses Python's standard tokenize module to scan Python
+source code, generating .pot files identical to what GNU xgettext generates
+for C and C++ code.  From there, the standard GNU tools can be used.
+.PP
+pygettext searches only for _() by default, even though GNU xgettext
+recognizes the following keywords: gettext, dgettext, dcgettext,
+and gettext_noop. See the \fB\-k\fR/\fB\--keyword\fR flag below for how to
+augment this.
+.PP
+.SH OPTIONS
+.TP
+\fB\-a\fR, \fB\-\-extract\-all\fR
+Extract all strings.
+.TP
+\fB\-d\fR, \fB\-\-default\-domain\fR=\fINAME\fR
+Rename the default output file from messages.pot to name.pot.
+.TP
+\fB\-E\fR, \fB\-\-escape\fR
+Replace non-ASCII characters with octal escape sequences.
+.TP
+\fB\-D\fR, \fB\-\-docstrings\fR
+Extract module, class, method, and function docstrings.
+These do not need to be wrapped in _() markers, and in fact cannot
+be for Python to consider them docstrings. (See also the \fB\-X\fR option).
+.TP
+\fB\-h\fR, \fB\-\-help\fR
+Print this help message and exit.
+.TP
+\fB\-k\fR, \fB\-\-keyword\fR=\fIWORD\fR
+Keywords to look for in addition to the default set, which are: _
+.IP
+You can have multiple \fB\-k\fR flags on the command line.
+.TP
+\fB\-K\fR, \fB\-\-no\-default\-keywords\fR
+Disable the default set of keywords (see above).
+Any keywords explicitly added with the \fB\-k\fR/\fB\--keyword\fR option
+are still recognized.
+.TP
+\fB\-\-no\-location\fR
+Do not write filename/lineno location comments.
+.TP
+\fB\-n\fR, \fB\-\-add\-location\fR
+Write filename/lineno location comments indicating where each
+extracted string is found in the source.  These lines appear before
+each msgid.  The style of comments is controlled by the
+\fB\-S\fR/\fB\--style\fR option.  This is the default.
+.TP
+\fB\-o\fR, \fB\-\-output\fR=\fIFILENAME\fR
+Rename the default output file from messages.pot to FILENAME.
+If FILENAME is `-' then the output is sent to standard out.
+.TP
+\fB\-p\fR, \fB\-\-output\-dir\fR=\fIDIR\fR
+Output files will be placed in directory DIR.
+.TP
+\fB\-S\fR, \fB\-\-style\fR=\fISTYLENAME\fR
+Specify which style to use for location comments.
+Two styles are supported:
+.RS
+.IP \(bu 4
+Solaris	# File: filename, line: line-number
+.IP \(bu 4
+GNU		#: filename:line
+.RE
+.IP
+The style name is case insensitive.
+GNU style is the default.
+.TP
+\fB\-v\fR, \fB\-\-verbose\fR
+Print the names of the files being processed.
+.TP
+\fB\-V\fR, \fB\-\-version\fR
+Print the version of pygettext and exit.
+.TP
+\fB\-w\fR, \fB\-\-width\fR=\fICOLUMNS\fR
+Set width of output to columns.
+.TP
+\fB\-x\fR, \fB\-\-exclude\-file\fR=\fIFILENAME\fR
+Specify a file that contains a list of strings that are not be
+extracted from the input files.  Each string to be excluded must
+appear on a line by itself in the file.
+.TP
+\fB\-X\fR, \fB\-\-no\-docstrings\fR=\fIFILENAME\fR
+Specify a file that contains a list of files (one per line) that
+should not have their docstrings extracted.  This is only useful in
+conjunction with the \fB\-D\fR option above.
+.PP
+If `INPUTFILE' is -, standard input is read.
+.SH BUGS
+pygettext attempts to be option and feature compatible with GNU xgettext
+where ever possible.  However some options are still missing or are not fully
+implemented.  Also, xgettext's use of command line switches with option
+arguments is broken, and in these cases, pygettext just defines additional
+switches.
+.SH AUTHOR
+pygettext is written by Barry Warsaw <barry@zope.com>.
+.PP
+Joonas Paalasmaa <joonas.paalasmaa@iki.fi> put this manual page together
+based on "pygettext --help".
--- python2.7-2.7.1.orig/debian/patches/disable-utimes.diff
+++ python2.7-2.7.1/debian/patches/disable-utimes.diff
@@ -0,0 +1,13 @@
+# DP: disable check for utimes function, which is broken in glibc-2.3.2
+
+--- a/configure.in
++++ b/configure.in
+@@ -2698,7 +2698,7 @@
+  setsid setpgid setpgrp setuid setvbuf snprintf \
+  sigaction siginterrupt sigrelse strftime \
+  sysconf tcgetpgrp tcsetpgrp tempnam timegm times tmpfile tmpnam tmpnam_r \
+- truncate uname unsetenv utimes waitpid wait3 wait4 wcscoll _getpty)
++ truncate uname unsetenv waitpid wait3 wait4 wcscoll _getpty)
+ 
+ # For some functions, having a definition is not sufficient, since
+ # we want to take their address.
--- python2.7-2.7.1.orig/debian/patches/link-system-expat.diff
+++ python2.7-2.7.1/debian/patches/link-system-expat.diff
@@ -0,0 +1,22 @@
+# DP: Link with the system expat
+
+--- a/Modules/Setup.dist
++++ b/Modules/Setup.dist
+@@ -180,7 +180,7 @@
+ #itertools itertoolsmodule.c	# Functions creating iterators for efficient looping 
+ #strop stropmodule.c		# String manipulations
+ #_functools _functoolsmodule.c	# Tools for working with functions and callable objects
+-#_elementtree -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H -DUSE_PYEXPAT_CAPI _elementtree.c	# elementtree accelerator
++#_elementtree -DUSE_PYEXPAT_CAPI _elementtree.c	# elementtree accelerator
+ #_pickle _pickle.c	# pickle accelerator
+ #datetime datetimemodule.c	# date/time type
+ #_bisect _bisectmodule.c	# Bisection algorithms
+@@ -471,7 +471,7 @@
+ #
+ # More information on Expat can be found at www.libexpat.org.
+ #
+-#pyexpat expat/xmlparse.c expat/xmlrole.c expat/xmltok.c pyexpat.c -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H -DUSE_PYEXPAT_CAPI
++#pyexpat pyexpat.c -lexpat
+ 
+ 
+ # Hye-Shik Chang's CJKCodecs
--- python2.7-2.7.1.orig/debian/patches/site-locations.diff
+++ python2.7-2.7.1/debian/patches/site-locations.diff
@@ -0,0 +1,32 @@
+# DP: Set site-packages/dist-packages
+
+--- a/Lib/site.py
++++ b/Lib/site.py
+@@ -19,6 +19,12 @@
+ resulting directories, if they exist, are appended to sys.path, and
+ also inspected for path configuration files.
+ 
++For Debian and derivatives, this sys.path is augmented with directories
++for packages distributed within the distribution. Local addons go
++into /usr/local/lib/python<version>/dist-packages, Debian addons
++install into /usr/{lib,share}/python<version>/dist-packages.
++/usr/lib/python<version>/site-packages is not used.
++
+ A path configuration file is a file whose name has the form
+ <package>.pth; its contents are additional directories (one per line)
+ to be added to sys.path.  Non-existing directories (or
+@@ -300,10 +306,12 @@
+         if sys.platform in ('os2emx', 'riscos'):
+             sitepackages.append(os.path.join(prefix, "Lib", "site-packages"))
+         elif os.sep == '/':
++            sitepackages.append(os.path.join(prefix, "local/lib",
++                                        "python" + sys.version[:3],
++                                        "dist-packages"))
+             sitepackages.append(os.path.join(prefix, "lib",
+                                         "python" + sys.version[:3],
+-                                        "site-packages"))
+-            sitepackages.append(os.path.join(prefix, "lib", "site-python"))
++                                        "dist-packages"))
+         else:
+             sitepackages.append(prefix)
+             sitepackages.append(os.path.join(prefix, "lib", "site-packages"))
--- python2.7-2.7.1.orig/debian/patches/statvfs-f_flag-constants.diff
+++ python2.7-2.7.1/debian/patches/statvfs-f_flag-constants.diff
@@ -0,0 +1,57 @@
+From 21fda4c78000d78cb1824fdf0373031d07f5325a Mon Sep 17 00:00:00 2001
+From: Peter Jones <pjones@redhat.com>
+Date: Wed, 6 Jan 2010 15:22:38 -0500
+Subject: [PATCH] Add flags for statvfs.f_flag to constant list.
+
+You really need these to figure out what statvfs is trying to say to
+you, so add them here.
+---
+ Modules/posixmodule.c |   37 +++++++++++++++++++++++++++++++++++++
+ 1 files changed, 37 insertions(+), 0 deletions(-)
+
+--- a/Modules/posixmodule.c
++++ b/Modules/posixmodule.c
+@@ -9240,6 +9240,43 @@
+     if (ins(d, "EX_NOTFOUND", (long)EX_NOTFOUND)) return -1;
+ #endif /* EX_NOTFOUND */
+ 
++	/* These came from statvfs.h */
++#ifdef ST_RDONLY
++	if (ins(d, "ST_RDONLY", (long)ST_RDONLY)) return -1;
++#endif /* ST_RDONLY */
++#ifdef ST_NOSUID
++	if (ins(d, "ST_NOSUID", (long)ST_NOSUID)) return -1;
++#endif /* ST_NOSUID */
++
++	/* GNU extensions */
++#ifdef ST_NODEV
++	if (ins(d, "ST_NODEV", (long)ST_NODEV)) return -1;
++#endif /* ST_NODEV */
++#ifdef ST_NOEXEC
++	if (ins(d, "ST_NOEXEC", (long)ST_NOEXEC)) return -1;
++#endif /* ST_NOEXEC */
++#ifdef ST_SYNCHRONOUS
++	if (ins(d, "ST_SYNCHRONOUS", (long)ST_SYNCHRONOUS)) return -1;
++#endif /* ST_SYNCHRONOUS */
++#ifdef ST_MANDLOCK
++	if (ins(d, "ST_MANDLOCK", (long)ST_MANDLOCK)) return -1;
++#endif /* ST_MANDLOCK */
++#ifdef ST_WRITE
++	if (ins(d, "ST_WRITE", (long)ST_WRITE)) return -1;
++#endif /* ST_WRITE */
++#ifdef ST_APPEND
++	if (ins(d, "ST_APPEND", (long)ST_APPEND)) return -1;
++#endif /* ST_APPEND */
++#ifdef ST_NOATIME
++	if (ins(d, "ST_NOATIME", (long)ST_NOATIME)) return -1;
++#endif /* ST_NOATIME */
++#ifdef ST_NODIRATIME
++	if (ins(d, "ST_NODIRATIME", (long)ST_NODIRATIME)) return -1;
++#endif /* ST_NODIRATIME */
++#ifdef ST_RELATIME
++	if (ins(d, "ST_RELATIME", (long)ST_RELATIME)) return -1;
++#endif /* ST_RELATIME */
++
+ #ifdef HAVE_SPAWNV
+ #if defined(PYOS_OS2) && defined(PYCC_GCC)
+     if (ins(d, "P_WAIT", (long)P_WAIT)) return -1;
--- python2.7-2.7.1.orig/debian/patches/deb-locations.diff
+++ python2.7-2.7.1/debian/patches/deb-locations.diff
@@ -0,0 +1,63 @@
+# DP: adjust locations of directories to debian policy
+
+--- a/Demo/tkinter/guido/ManPage.py
++++ b/Demo/tkinter/guido/ManPage.py
+@@ -189,8 +189,9 @@
+ def test():
+     import os
+     import sys
+-    # XXX This directory may be different on your system
+-    MANDIR = '/usr/local/man/mann'
++    # XXX This directory may be different on your system,
++    #     it is here set for Debian GNU/Linux.
++    MANDIR = '/usr/share/man'
+     DEFAULTPAGE = 'Tcl'
+     formatted = 0
+     if sys.argv[1:] and sys.argv[1] == '-f':
+--- a/Demo/tkinter/guido/tkman.py
++++ b/Demo/tkinter/guido/tkman.py
+@@ -9,8 +9,8 @@
+ from Tkinter import *
+ from ManPage import ManPage
+ 
+-MANNDIRLIST = ['/depot/sundry/man/mann','/usr/local/man/mann']
+-MAN3DIRLIST = ['/depot/sundry/man/man3','/usr/local/man/man3']
++MANNDIRLIST = ['/depot/sundry/man/mann','/usr/share/man/mann']
++MAN3DIRLIST = ['/depot/sundry/man/man3','/usr/share/man/man3']
+ 
+ foundmanndir = 0
+ for dir in MANNDIRLIST:
+--- a/Misc/python.man
++++ b/Misc/python.man
+@@ -323,7 +323,7 @@
+ These are subject to difference depending on local installation
+ conventions; ${prefix} and ${exec_prefix} are installation-dependent
+ and should be interpreted as for GNU software; they may be the same.
+-The default for both is \fI/usr/local\fP.
++On Debian GNU/{Hurd,Linux} the default for both is \fI/usr\fP.
+ .IP \fI${exec_prefix}/bin/python\fP
+ Recommended location of the interpreter.
+ .PP
+--- a/Tools/faqwiz/faqconf.py
++++ b/Tools/faqwiz/faqconf.py
+@@ -21,7 +21,7 @@
+ OWNEREMAIL = "nobody@anywhere.org"      # Email for feedback
+ HOMEURL = "http://www.python.org"       # Related home page
+ HOMENAME = "Python home"                # Name of related home page
+-RCSBINDIR = "/usr/local/bin/"           # Directory containing RCS commands
++RCSBINDIR = "/usr/bin/"			# Directory containing RCS commands
+                                         # (must end in a slash)
+ 
+ # Parameters you can normally leave alone
+--- a/Tools/webchecker/webchecker.py
++++ b/Tools/webchecker/webchecker.py
+@@ -19,7 +19,8 @@
+ a directory listing is returned.  Now, you can point webchecker to the
+ document tree in the local file system of your HTTP daemon, and have
+ most of it checked.  In fact the default works this way if your local
+-web tree is located at /usr/local/etc/httpd/htdpcs (the default for
++web tree is located at /var/www, which is the default for Debian
++GNU/Linux. Other systems use /usr/local/etc/httpd/htdocs (the default for
+ the NCSA HTTP daemon and probably others).
+ 
+ Report printed:
--- python2.7-2.7.1.orig/debian/patches/plat-linux2_sparc.diff
+++ python2.7-2.7.1/debian/patches/plat-linux2_sparc.diff
@@ -0,0 +1,72 @@
+Index: Lib/plat-linux2/IN.py
+===================================================================
+--- ./Lib/plat-linux2/IN.py	(Revision 77754)
++++ ./Lib/plat-linux2/IN.py	(Arbeitskopie)
+@@ -442,37 +442,37 @@
+ SIOCGPGRP = 0x8904
+ SIOCATMARK = 0x8905
+ SIOCGSTAMP = 0x8906
+-SOL_SOCKET = 1
+-SO_DEBUG = 1
+-SO_REUSEADDR = 2
+-SO_TYPE = 3
+-SO_ERROR = 4
+-SO_DONTROUTE = 5
+-SO_BROADCAST = 6
+-SO_SNDBUF = 7
+-SO_RCVBUF = 8
+-SO_KEEPALIVE = 9
+-SO_OOBINLINE = 10
+-SO_NO_CHECK = 11
+-SO_PRIORITY = 12
+-SO_LINGER = 13
+-SO_BSDCOMPAT = 14
+-SO_PASSCRED = 16
+-SO_PEERCRED = 17
+-SO_RCVLOWAT = 18
+-SO_SNDLOWAT = 19
+-SO_RCVTIMEO = 20
+-SO_SNDTIMEO = 21
+-SO_SECURITY_AUTHENTICATION = 22
+-SO_SECURITY_ENCRYPTION_TRANSPORT = 23
+-SO_SECURITY_ENCRYPTION_NETWORK = 24
+-SO_BINDTODEVICE = 25
+-SO_ATTACH_FILTER = 26
+-SO_DETACH_FILTER = 27
+-SO_PEERNAME = 28
+-SO_TIMESTAMP = 29
++SOL_SOCKET = 0xffff
++SO_DEBUG = 0x0001
++SO_REUSEADDR = 0x0004
++SO_TYPE = 0x1008
++SO_ERROR = 0x1007
++SO_DONTROUTE = 0x0010
++SO_BROADCAST = 0x0020
++SO_SNDBUF = 0x1001
++SO_RCVBUF = 0x1002
++SO_KEEPALIVE = 0x0008
++SO_OOBINLINE = 0x0100
++SO_NO_CHECK = 0x000b
++SO_PRIORITY = 0x000c
++SO_LINGER = 0x0080
++SO_BSDCOMPAT = 0x0400
++SO_PASSCRED = 0x0002
++SO_PEERCRED = 0x0040
++SO_RCVLOWAT = 0x0800
++SO_SNDLOWAT = 0x1000
++SO_RCVTIMEO = 0x2000
++SO_SNDTIMEO = 0x4000
++SO_SECURITY_AUTHENTICATION = 0x5001
++SO_SECURITY_ENCRYPTION_TRANSPORT = 0x5002
++SO_SECURITY_ENCRYPTION_NETWORK = 0x5004
++SO_BINDTODEVICE = 0x000d
++SO_ATTACH_FILTER = 0x001a
++SO_DETACH_FILTER = 0x001b
++SO_PEERNAME = 0x001c
++SO_TIMESTAMP = 0x001d
+ SCM_TIMESTAMP = SO_TIMESTAMP
+-SO_ACCEPTCONN = 30
++SO_ACCEPTCONN = 0x8000
+ SOCK_STREAM = 1
+ SOCK_DGRAM = 2
+ SOCK_RAW = 3
--- python2.7-2.7.1.orig/debian/patches/bdist-wininst-notfound.diff
+++ python2.7-2.7.1/debian/patches/bdist-wininst-notfound.diff
@@ -0,0 +1,17 @@
+# DP: suggest installation of the pythonX.Y-dev package, if bdist_wininst
+# DP: cannot find the wininst-* files.
+
+--- a/Lib/distutils/command/bdist_wininst.py
++++ b/Lib/distutils/command/bdist_wininst.py
+@@ -356,7 +356,10 @@
+             sfix = ''
+ 
+         filename = os.path.join(directory, "wininst-%.1f%s.exe" % (bv, sfix))
+-        f = open(filename, "rb")
++        try:
++            f = open(filename, "rb")
++        except IOError, msg:
++            raise DistutilsFileError, str(msg) + ', please install the python%s-dev package' % sys.version[:3]
+         try:
+             return f.read()
+         finally:
--- python2.7-2.7.1.orig/debian/patches/arm-float.dpatch
+++ python2.7-2.7.1/debian/patches/arm-float.dpatch
@@ -0,0 +1,119 @@
+#! /bin/sh -e
+
+# DP: Support mixed-endian IEEE floating point, as found in the ARM old-ABI.
+
+dir=
+if [ $# -eq 3 -a "$2" = '-d' ]; then
+    pdir="-d $3"
+    dir="$3/"
+elif [ $# -ne 1 ]; then
+    echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+    exit 1
+fi
+case "$1" in
+    -patch)
+        patch $pdir -f --no-backup-if-mismatch -p0 < $0
+        ;;
+    -unpatch)
+        patch $pdir -f --no-backup-if-mismatch -R -p0 < $0
+        ;;
+    *)
+	echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+        exit 1
+esac
+exit 0
+
+--- Objects/floatobject.c.orig	2006-05-25 10:53:30.000000000 -0500
++++ Objects/floatobject.c	2007-07-27 06:43:15.000000000 -0500
+@@ -982,7 +982,7 @@
+ /* this is for the benefit of the pack/unpack routines below */
+ 
+ typedef enum {
+-	unknown_format, ieee_big_endian_format, ieee_little_endian_format
++	unknown_format, ieee_big_endian_format, ieee_little_endian_format, ieee_mixed_endian_format
+ } float_format_type;
+ 
+ static float_format_type double_format, float_format;
+@@ -1021,6 +1021,8 @@
+ 		return PyString_FromString("IEEE, little-endian");
+ 	case ieee_big_endian_format:
+ 		return PyString_FromString("IEEE, big-endian");
++	case ieee_mixed_endian_format:
++		return PyString_FromString("IEEE, mixed-endian");
+ 	default:
+ 		Py_FatalError("insane float_format or double_format");
+ 		return NULL;
+@@ -1073,11 +1075,14 @@
+ 	else if (strcmp(format, "IEEE, big-endian") == 0) {
+ 		f = ieee_big_endian_format;
+ 	}
++	else if (strcmp(format, "IEEE, mixed-endian") == 0) {
++		f = ieee_mixed_endian_format;
++	}
+ 	else {
+ 		PyErr_SetString(PyExc_ValueError,
+ 				"__setformat__() argument 2 must be "
+-				"'unknown', 'IEEE, little-endian' or "
+-				"'IEEE, big-endian'");
++				"'unknown', 'IEEE, little-endian', "
++				"'IEEE, big-endian' or 'IEEE, mixed-endian'");
+ 		return NULL;
+ 
+ 	}
+@@ -1230,6 +1235,8 @@
+ 			detected_double_format = ieee_big_endian_format;
+ 		else if (memcmp(&x, "\x05\x04\x03\x02\x01\xff\x3f\x43", 8) == 0)
+ 			detected_double_format = ieee_little_endian_format;
++		else if (memcmp(&x, "\x01\xff\x3f\x43\x05\x04\x03\x02", 8) == 0)
++			detected_double_format = ieee_mixed_endian_format;
+ 		else 
+ 			detected_double_format = unknown_format;
+ 	}
+@@ -1565,8 +1572,19 @@
+ 			p += 7;
+ 			incr = -1;
+ 		}
++		else if (double_format == ieee_mixed_endian_format) {
++			if (le)
++				p += 4;
++			else {
++				p += 3;
++				incr = -1;
++			}
++		}
+ 		
+ 		for (i = 0; i < 8; i++) {
++			if (double_format == ieee_mixed_endian_format && i == 4)
++				p += -8 * incr;
++
+ 			*p = *s++;
+ 			p += incr;
+ 		}
+@@ -1739,6 +1757,27 @@
+ 			}
+ 			memcpy(&x, buf, 8);
+ 		}
++		else if (double_format == ieee_mixed_endian_format) {
++			char buf[8];
++			char *d;
++			int i, incr = 1;
++
++			if (le)
++				d = &buf[4];
++			else
++				d = &buf[3];
++			
++			for (i = 0; i < 4; i++) {
++				*d = *p++;
++				d += incr;
++			}
++			d += -8 * incr;
++			for (i = 0; i < 4; i++) {
++				*d = *p++;
++				d += incr;
++			}
++			memcpy(&x, buf, 8);
++		}
+ 		else {
+ 			memcpy(&x, p, 8);
+ 		}
--- python2.7-2.7.1.orig/debian/patches/doc-faq.dpatch
+++ python2.7-2.7.1/debian/patches/doc-faq.dpatch
@@ -0,0 +1,54 @@
+#! /bin/sh -e
+
+# DP: Mention the FAQ on the documentation index page.
+
+dir=
+if [ $# -eq 3 -a "$2" = '-d' ]; then
+    pdir="-d $3"
+    dir="$3/"
+elif [ $# -ne 1 ]; then
+    echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+    exit 1
+fi
+case "$1" in
+    -patch)
+        patch $pdir -f --no-backup-if-mismatch -p0 < $0
+        #cd ${dir}gcc && autoconf
+        ;;
+    -unpatch)
+        patch $pdir -f --no-backup-if-mismatch -R -p0 < $0
+        #rm ${dir}gcc/configure
+        ;;
+    *)
+	echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+        exit 1
+esac
+exit 0
+
+--- Doc/html/index.html.in~	2002-04-01 18:11:27.000000000 +0200
++++ Doc/html/index.html.in	2003-04-05 13:33:35.000000000 +0200
+@@ -123,6 +123,24 @@
+           </ul>
+           </td>
+         </tr>
++        <tr>
++          <td valign="baseline" class="left-column">
++          &nbsp;
++          <ul>
++            <li> <a href="../../python/FAQ.html" class="title"
++                >FAQ (local copy)</a>
++              <br>(python package must be installed)
++          </ul>
++          </td>
++          <td valign="baseline" class="right-column">
++          &nbsp;
++          <ul>
++            <li> <a href="http://www.python.org/cgi-bin/faqw.py" class="title"
++                >FAQ (online wizard)</a>
++              <br>(maybe more recent)
++          </ul>
++          </td>
++        </tr>
+       </tbody>
+     </table>
+     <p>
--- python2.7-2.7.1.orig/debian/patches/site-builddir.diff
+++ python2.7-2.7.1/debian/patches/site-builddir.diff
@@ -0,0 +1,32 @@
+--- site.py~	2010-06-29 00:20:33.000000000 +0200
++++ site.py	2010-06-29 00:26:17.440243273 +0200
+@@ -115,19 +115,6 @@
+     sys.path[:] = L
+     return known_paths
+ 
+-# XXX This should not be part of site.py, since it is needed even when
+-# using the -S option for Python.  See http://www.python.org/sf/586680
+-def addbuilddir():
+-    """Append ./build/lib.<platform> in case we're running in the build dir
+-    (especially for Guido :-)"""
+-    from sysconfig import get_platform
+-    s = "build/lib.%s-%.3s" % (get_platform(), sys.version)
+-    if hasattr(sys, 'gettotalrefcount'):
+-        s += '-pydebug'
+-    s = os.path.join(os.path.dirname(sys.path.pop()), s)
+-    sys.path.append(s)
+-
+-
+ def _init_pathinfo():
+     """Return a set containing all existing directory entries from sys.path"""
+     d = set()
+@@ -538,9 +525,6 @@
+ 
+     abs__file__()
+     known_paths = removeduppaths()
+-    if (os.name == "posix" and sys.path and
+-        os.path.basename(sys.path[-1]) == "Modules"):
+-        addbuilddir()
+     if ENABLE_USER_SITE is None:
+         ENABLE_USER_SITE = check_enableusersite()
+     known_paths = addusersitepackages(known_paths)
--- python2.7-2.7.1.orig/debian/patches/hotshot-import.diff
+++ python2.7-2.7.1/debian/patches/hotshot-import.diff
@@ -0,0 +1,17 @@
+# DP: hotshot: Check for the availability of the profile and pstats modules.
+
+--- a/Lib/hotshot/stats.py
++++ b/Lib/hotshot/stats.py
+@@ -1,7 +1,10 @@
+ """Statistics analyzer for HotShot."""
+ 
+-import profile
+-import pstats
++try:
++    import profile
++    import pstats
++except ImportError, e:
++    raise ImportError, str(e) + '; please install the python-profiler package'
+ 
+ import hotshot.log
+ 
--- python2.7-2.7.1.orig/debian/patches/make-pydoc-more-robust.diff
+++ python2.7-2.7.1/debian/patches/make-pydoc-more-robust.diff
@@ -0,0 +1,18 @@
+--- a/Lib/pydoc.py
++++ b/Lib/pydoc.py
+@@ -1964,10 +1964,14 @@
+         if modname[-9:] == '.__init__':
+             modname = modname[:-9] + ' (package)'
+         print modname, desc and '- ' + desc
++    def onerror(modname):
++        # Ignore non-ImportError exceptions raised whilst trying to
++        # import modules
++        pass
+     try: import warnings
+     except ImportError: pass
+     else: warnings.filterwarnings('ignore') # ignore problems during import
+-    ModuleScanner().run(callback, key)
++    ModuleScanner().run(callback, key, onerror=onerror)
+ 
+ # --------------------------------------------------- web browser interface
+ 
--- python2.7-2.7.1.orig/debian/patches/plat-linux2_mips.diff
+++ python2.7-2.7.1/debian/patches/plat-linux2_mips.diff
@@ -0,0 +1,88 @@
+Index: Lib/plat-linux2/DLFCN.py
+===================================================================
+--- ./Lib/plat-linux2/DLFCN.py	(Revision 77754)
++++ ./Lib/plat-linux2/DLFCN.py	(Arbeitskopie)
+@@ -77,7 +77,7 @@
+ RTLD_LAZY = 0x00001
+ RTLD_NOW = 0x00002
+ RTLD_BINDING_MASK = 0x3
+-RTLD_NOLOAD = 0x00004
+-RTLD_GLOBAL = 0x00100
++RTLD_NOLOAD = 0x00008
++RTLD_GLOBAL = 0x00004
+ RTLD_LOCAL = 0
+ RTLD_NODELETE = 0x01000
+Index: Lib/plat-linux2/IN.py
+===================================================================
+--- ./Lib/plat-linux2/IN.py	(Revision 77754)
++++ ./Lib/plat-linux2/IN.py	(Arbeitskopie)
+@@ -436,33 +436,33 @@
+ # Included from asm/socket.h
+ 
+ # Included from asm/sockios.h
+-FIOSETOWN = 0x8901
+-SIOCSPGRP = 0x8902
+-FIOGETOWN = 0x8903
+-SIOCGPGRP = 0x8904
+-SIOCATMARK = 0x8905
++FIOSETOWN = 0x8004667c
++SIOCSPGRP = 0x80047308
++FIOGETOWN = 0x4004667b
++SIOCGPGRP = 0x40047309
++SIOCATMARK = 0x40047307
+ SIOCGSTAMP = 0x8906
+-SOL_SOCKET = 1
+-SO_DEBUG = 1
+-SO_REUSEADDR = 2
+-SO_TYPE = 3
+-SO_ERROR = 4
+-SO_DONTROUTE = 5
+-SO_BROADCAST = 6
+-SO_SNDBUF = 7
+-SO_RCVBUF = 8
+-SO_KEEPALIVE = 9
+-SO_OOBINLINE = 10
++SOL_SOCKET = 0xffff
++SO_DEBUG = 0x0001
++SO_REUSEADDR = 0x0004
++SO_TYPE = 0x1008
++SO_ERROR = 0x1007
++SO_DONTROUTE = 0x0010
++SO_BROADCAST = 0x0020
++SO_SNDBUF = 0x1001
++SO_RCVBUF = 0x1002
++SO_KEEPALIVE = 0x0008
++SO_OOBINLINE = 0x0100
+ SO_NO_CHECK = 11
+ SO_PRIORITY = 12
+-SO_LINGER = 13
++SO_LINGER = 0x0080
+ SO_BSDCOMPAT = 14
+-SO_PASSCRED = 16
+-SO_PEERCRED = 17
+-SO_RCVLOWAT = 18
+-SO_SNDLOWAT = 19
+-SO_RCVTIMEO = 20
+-SO_SNDTIMEO = 21
++SO_PASSCRED = 17
++SO_PEERCRED = 18
++SO_RCVLOWAT = 0x1004
++SO_SNDLOWAT = 0x1003
++SO_RCVTIMEO = 0x1006
++SO_SNDTIMEO = 0x1005
+ SO_SECURITY_AUTHENTICATION = 22
+ SO_SECURITY_ENCRYPTION_TRANSPORT = 23
+ SO_SECURITY_ENCRYPTION_NETWORK = 24
+@@ -472,9 +472,9 @@
+ SO_PEERNAME = 28
+ SO_TIMESTAMP = 29
+ SCM_TIMESTAMP = SO_TIMESTAMP
+-SO_ACCEPTCONN = 30
+-SOCK_STREAM = 1
+-SOCK_DGRAM = 2
++SO_ACCEPTCONN = 0x1009
++SOCK_STREAM = 2
++SOCK_DGRAM = 1
+ SOCK_RAW = 3
+ SOCK_RDM = 4
+ SOCK_SEQPACKET = 5
--- python2.7-2.7.1.orig/debian/patches/setup-modules.dpatch
+++ python2.7-2.7.1/debian/patches/setup-modules.dpatch
@@ -0,0 +1,75 @@
+#! /bin/sh -e
+
+# DP: Modules/Setup.dist: patches to build some extensions statically
+
+dir=
+if [ $# -eq 3 -a "$2" = '-d' ]; then
+    pdir="-d $3"
+    dir="$3/"
+elif [ $# -ne 1 ]; then
+    echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+    exit 1
+fi
+case "$1" in
+    -patch)
+        patch $pdir -f --no-backup-if-mismatch -p0 < $0
+        ;;
+    -unpatch)
+        patch $pdir -f --no-backup-if-mismatch -R -p0 < $0
+        ;;
+    *)
+	echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+        exit 1
+esac
+exit 0
+
+--- Modules/_elementtree.c~	2008-11-27 10:01:33.000000000 +0100
++++ Modules/_elementtree.c	2008-11-27 10:03:30.000000000 +0100
+@@ -1837,7 +1837,10 @@
+ static struct PyExpat_CAPI* expat_capi;
+ #define EXPAT(func) (expat_capi->func)
+ #else
+-#define EXPAT(func) (XML_##func)
++#define EXPAT(func) (PyExpat_XML_##func)
++#define PyExpat_XML_GetErrorLineNumber   PyExpat_XML_GetCurrentLineNumber
++#define PyExpat_XML_GetErrorColumnNumber PyExpat_XML_GetCurrentColumnNumber
++#define PyExpat_XML_GetErrorByteIndex    PyExpat_XML_GetCurrentByteIndex
+ #endif
+ 
+ typedef struct {
+--- Modules/Setup.dist~	2008-11-27 10:59:37.000000000 +0100
++++ Modules/Setup.dist	2008-11-27 11:00:26.000000000 +0100
+@@ -165,7 +165,7 @@
+ #itertools itertoolsmodule.c	# Functions creating iterators for efficient looping 
+ #atexit atexitmodule.c      # Register functions to be run at interpreter-shutdown
+ #_functools _functoolsmodule.c	# Tools for working with functions and callable objects
+-#_elementtree -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H -DUSE_PYEXPAT_CAPI _elementtree.c	# elementtree accelerator
++#_elementtree -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H _elementtree.c	# elementtree accelerator
+ #_pickle _pickle.c	# pickle accelerator
+ #datetime datetimemodule.c	# date/time type
+ #_bisect _bisectmodule.c	# Bisection algorithms
+@@ -257,6 +257,7 @@
+ #_sha256 sha256module.c
+ #_sha512 sha512module.c
+ 
++#_hashlib _hashopenssl.c -lssl -lcrypto
+ 
+ # SGI IRIX specific modules -- off by default.
+ 
+@@ -341,6 +341,7 @@
+ #DBLIB=$(DB)/lib
+ #_bsddb _bsddb.c -I$(DBINC) -L$(DBLIB) -ldb-$(DBLIBVER)
+ 
++#_ctypes _ctypes/_ctypes.c _ctypes/callbacks.c _ctypes/callproc.c _ctypes/stgdict.c _ctypes/cfield.c _ctypes/malloc_closure.c -Wl,-Bstatic -lffi -Wl,-Bdynamic
+ 
+ # Helper module for various ascii-encoders
+ #binascii binascii.c
+@@ -382,7 +382,7 @@
+ #
+ # More information on Expat can be found at www.libexpat.org.
+ #
+-#pyexpat expat/xmlparse.c expat/xmlrole.c expat/xmltok.c pyexpat.c -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H -DUSE_PYEXPAT_CAPI
++#pyexpat expat/xmlparse.c expat/xmlrole.c expat/xmltok.c pyexpat.c -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H
+ 
+ # Hye-Shik Chang's CJKCodecs
+ 
--- python2.7-2.7.1.orig/debian/patches/platform-lsbrelease.diff
+++ python2.7-2.7.1/debian/patches/platform-lsbrelease.diff
@@ -0,0 +1,41 @@
+# DP: Use /etc/lsb-release to identify the platform.
+
+--- a/Lib/platform.py
++++ b/Lib/platform.py
+@@ -288,6 +288,10 @@
+             id = l[1]
+     return '', version, id
+ 
++_distributor_id_file_re = re.compile("(?:DISTRIB_ID\s*=)\s*(.*)", re.I)
++_release_file_re = re.compile("(?:DISTRIB_RELEASE\s*=)\s*(.*)", re.I)
++_codename_file_re = re.compile("(?:DISTRIB_CODENAME\s*=)\s*(.*)", re.I)
++
+ def linux_distribution(distname='', version='', id='',
+ 
+                        supported_dists=_supported_dists,
+@@ -312,6 +316,25 @@
+         args given as parameters.
+ 
+     """
++    # check for the Debian/Ubuntu /etc/lsb-release file first, needed so
++    # that the distribution doesn't get identified as Debian.
++    try:
++        etclsbrel = open("/etc/lsb-release", "rU")
++        for line in etclsbrel:
++            m = _distributor_id_file_re.search(line)
++            if m:
++                _u_distname = m.group(1).strip()
++            m = _release_file_re.search(line)
++            if m:
++                _u_version = m.group(1).strip()
++            m = _codename_file_re.search(line)
++            if m:
++                _u_id = m.group(1).strip()
++        if _u_distname and _u_version:
++            return (_u_distname, _u_version, _u_id)
++    except (EnvironmentError, UnboundLocalError):
++            pass
++
+     try:
+         etc = os.listdir('/etc')
+     except os.error:
--- python2.7-2.7.1.orig/debian/patches/profile-doc.diff
+++ python2.7-2.7.1/debian/patches/profile-doc.diff
@@ -0,0 +1,32 @@
+# DP: hotshot/pstats.py: Error out on missing profile/pstats modules.
+# DP: Add a note to the library documentation, that the profile and pstats
+# DP: modules can be found in the python2.x-profiler package.
+
+--- a/Doc/library/profile.rst
++++ b/Doc/library/profile.rst
+@@ -5,6 +5,12 @@
+ The Python Profilers
+ ********************
+ 
++Debian note: The license for the :mod:`profile` and :mod:`pstats`
++modules doesn't conform to the Debian Free Software Guidelines (DFSG).
++These modules can be found in the *python-profiler* package in the
++*non-free* section of the Debian archives or in the the *multiverse*
++section of the Ubuntu archives.
++
+ .. sectionauthor:: James Roskind
+ 
+ .. module:: profile
+@@ -243,6 +249,12 @@
+    :synopsis: Python profiler
+ 
+ 
++Debian note: The license for the :mod:`profile` and :mod:`pstats`
++modules doesn't conform to the Debian Free Software Guidelines (DFSG).
++These modules can be found in the *python-profiler* package in the
++*non-free* section of the Debian archives or in the the *multiverse*
++section of the Ubuntu archives.
++
+ The primary entry point for the profiler is the global function
+ :func:`profile.run` (resp. :func:`cProfile.run`). It is typically used to create
+ any profile information.  The reports are formatted and printed using methods of
--- python2.7-2.7.1.orig/debian/patches/subprocess-eintr-safety.dpatch
+++ python2.7-2.7.1/debian/patches/subprocess-eintr-safety.dpatch
@@ -0,0 +1,81 @@
+#! /bin/sh -e
+
+dir=
+if [ $# -eq 3 -a "$2" = '-d' ]; then
+    pdir="-d $3"
+    dir="$3/"
+elif [ $# -ne 1 ]; then
+    echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+    exit 1
+fi
+case "$1" in
+    -patch)
+        patch $pdir -f --no-backup-if-mismatch -p0 < $0
+        #cd ${dir}gcc && autoconf
+        ;;
+    -unpatch)
+        patch $pdir -f --no-backup-if-mismatch -R -p0 < $0
+        #rm ${dir}gcc/configure
+        ;;
+    *)
+	echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+        exit 1
+esac
+exit 0
+
+--- Lib/test/test_subprocess.py	2007-03-14 19:16:36.000000000 +0100
++++ Lib/test/test_subprocess.py	2007-03-14 19:18:57.000000000 +0100
+@@ -580,6 +578,34 @@ class ProcessTestCase(unittest.TestCase)
+             os.remove(fname)
+             self.assertEqual(rc, 47)
+ 
++        def test_eintr(self):
++            # retries on EINTR for an argv
++
++            # send ourselves a signal that causes EINTR
++            prev_handler = signal.signal(signal.SIGALRM, lambda x,y: 1)
++            signal.alarm(1)
++            time.sleep(0.5)
++
++            rc = subprocess.Popen(['sleep', '1'])
++            self.assertEqual(rc.wait(), 0)
++
++            signal.signal(signal.SIGALRM, prev_handler)
++
++        def test_eintr_out(self):
++            # retries on EINTR for a shell call and pipelining
++
++            # send ourselves a signal that causes EINTR
++            prev_handler = signal.signal(signal.SIGALRM, lambda x,y: 1)
++            signal.alarm(1)
++            time.sleep(0.5)
++
++            rc = subprocess.Popen("sleep 1; echo hello",
++                shell=True, stdout=subprocess.PIPE)
++            out = rc.communicate()[0]
++            self.assertEqual(rc.returncode, 0)
++            self.assertEqual(out, "hello\n")
++
++            signal.signal(signal.SIGALRM, prev_handler)
+ 
+     #
+     # Windows tests
+--- Lib/subprocess.py~	2008-07-15 15:41:24.000000000 +0200
++++ Lib/subprocess.py	2008-07-15 15:42:49.000000000 +0200
+@@ -657,13 +657,13 @@
+             stderr = None
+             if self.stdin:
+                 if input:
+-                    self.stdin.write(input)
++                    self._fo_write_no_intr(self.stdin, input)
+                 self.stdin.close()
+             elif self.stdout:
+-                stdout = self.stdout.read()
++                stdout = self._fo_read_no_intr(self.stdout)
+                 self.stdout.close()
+             elif self.stderr:
+-                stderr = self.stderr.read()
++                stderr = self._fo_read_no_intr(self.stderr)
+                 self.stderr.close()
+             self.wait()
+             return (stdout, stderr)
--- python2.7-2.7.1.orig/debian/patches/setup-modules-ssl.diff
+++ python2.7-2.7.1/debian/patches/setup-modules-ssl.diff
@@ -0,0 +1,24 @@
+# DP: Modules/Setup.dist: patch to build _hashlib and _ssl extensions statically
+
+--- a/Modules/Setup.dist
++++ b/Modules/Setup.dist
+@@ -211,10 +211,7 @@
+ 
+ # Socket module helper for SSL support; you must comment out the other
+ # socket line above, and possibly edit the SSL variable:
+-#SSL=/usr/local/ssl
+-#_ssl _ssl.c \
+-#	-DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \
+-#	-L$(SSL)/lib -lssl -lcrypto
++#_ssl _ssl.c -lssl -lcrypto
+ 
+ # The crypt module is now disabled by default because it breaks builds
+ # on many systems (where -lcrypt is needed), e.g. Linux (I believe).
+@@ -257,6 +254,7 @@
+ #_sha256 sha256module.c
+ #_sha512 sha512module.c
+ 
++#_hashlib _hashopenssl.c -lssl -lcrypto
+ 
+ # SGI IRIX specific modules -- off by default.
+ 
--- python2.7-2.7.1.orig/debian/patches/distutils-link.diff
+++ python2.7-2.7.1/debian/patches/distutils-link.diff
@@ -0,0 +1,18 @@
+# DP: Don't add standard library dirs to library_dirs and runtime_library_dirs.
+
+--- a/Lib/distutils/unixccompiler.py
++++ b/Lib/distutils/unixccompiler.py
+@@ -213,7 +213,12 @@
+         objects, output_dir = self._fix_object_args(objects, output_dir)
+         libraries, library_dirs, runtime_library_dirs = \
+             self._fix_lib_args(libraries, library_dirs, runtime_library_dirs)
+-
++        # filter out standard library paths, which are not explicitely needed
++        # for linking
++        library_dirs = [dir for dir in library_dirs
++                        if not dir in ('/lib', '/lib64', '/usr/lib', '/usr/lib64')]
++        runtime_library_dirs = [dir for dir in runtime_library_dirs
++                                if not dir in ('/lib', '/lib64', '/usr/lib', '/usr/lib64')]
+         lib_opts = gen_lib_options(self, library_dirs, runtime_library_dirs,
+                                    libraries)
+         if type(output_dir) not in (StringType, NoneType):
--- python2.7-2.7.1.orig/debian/patches/issue9054.diff
+++ python2.7-2.7.1/debian/patches/issue9054.diff
@@ -0,0 +1,14 @@
+# DP: Proposed fix for issue 9054.
+
+--- a/Modules/pyexpat.c
++++ b/Modules/pyexpat.c
+@@ -418,6 +418,9 @@
+     if (!have_handler(self, CharacterData))
+         return -1;
+ 
++    if (!have_handler(self, CharacterData))
++        return -1;
++
+     args = PyTuple_New(1);
+     if (args == NULL)
+         return -1;
--- python2.7-2.7.1.orig/debian/patches/plat-gnukfreebsd.diff
+++ python2.7-2.7.1/debian/patches/plat-gnukfreebsd.diff
@@ -0,0 +1,2478 @@
+--- /dev/null
++++ b/Lib/plat-gnukfreebsd7/IN.py
+@@ -0,0 +1,809 @@
++# Generated by h2py from /usr/include/netinet/in.h
++_NETINET_IN_H = 1
++
++# Included from features.h
++_FEATURES_H = 1
++__USE_ANSI = 1
++__FAVOR_BSD = 1
++_ISOC99_SOURCE = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 200809L
++_XOPEN_SOURCE = 700
++_XOPEN_SOURCE_EXTENDED = 1
++_LARGEFILE64_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++_ATFILE_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++__USE_ISOC99 = 1
++__USE_ISOC95 = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 2
++_POSIX_C_SOURCE = 199506L
++_POSIX_C_SOURCE = 200112L
++_POSIX_C_SOURCE = 200809L
++__USE_POSIX_IMPLICITLY = 1
++__USE_POSIX = 1
++__USE_POSIX2 = 1
++__USE_POSIX199309 = 1
++__USE_POSIX199506 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN2K8 = 1
++_ATFILE_SOURCE = 1
++__USE_XOPEN = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_UNIX98 = 1
++_LARGEFILE_SOURCE = 1
++__USE_XOPEN2K8 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_FILE_OFFSET64 = 1
++__USE_MISC = 1
++__USE_BSD = 1
++__USE_SVID = 1
++__USE_ATFILE = 1
++__USE_GNU = 1
++__USE_REENTRANT = 1
++__USE_FORTIFY_LEVEL = 2
++__USE_FORTIFY_LEVEL = 1
++__USE_FORTIFY_LEVEL = 0
++
++# Included from bits/predefs.h
++__STDC_IEC_559__ = 1
++__STDC_IEC_559_COMPLEX__ = 1
++__STDC_ISO_10646__ = 200009L
++__GNU_LIBRARY__ = 6
++__GLIBC__ = 2
++__GLIBC_MINOR__ = 11
++__GLIBC_HAVE_LONG_LONG = 1
++
++# Included from sys/cdefs.h
++_SYS_CDEFS_H = 1
++def __NTH(fct): return fct
++
++def __NTH(fct): return fct
++
++def __P(args): return args
++
++def __PMT(args): return args
++
++def __STRING(x): return #x
++
++def __bos(ptr): return __builtin_object_size (ptr, __USE_FORTIFY_LEVEL > 1)
++
++def __bos0(ptr): return __builtin_object_size (ptr, 0)
++
++def __warnattr(msg): return __attribute__((__warning__ (msg)))
++
++__flexarr = []
++__flexarr = [0]
++__flexarr = []
++__flexarr = [1]
++def __ASMNAME(cname): return __ASMNAME2 (__USER_LABEL_PREFIX__, cname)
++
++def __attribute__(xyz): return  
++
++def __attribute_format_arg__(x): return __attribute__ ((__format_arg__ (x)))
++
++def __attribute_format_arg__(x): return  
++
++
++# Included from bits/wordsize.h
++__WORDSIZE = 32
++__LDBL_COMPAT = 1
++def __LDBL_REDIR_DECL(name): return \
++
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_EXTERN_INLINES = 1
++__USE_EXTERN_INLINES_IN_LIBC = 1
++
++# Included from gnu/stubs.h
++
++# Included from stdint.h
++_STDINT_H = 1
++
++# Included from bits/wchar.h
++_BITS_WCHAR_H = 1
++__WCHAR_MAX = (2147483647)
++__WCHAR_MIN = (-__WCHAR_MAX - 1)
++def __INT64_C(c): return c ## L
++
++def __UINT64_C(c): return c ## UL
++
++def __INT64_C(c): return c ## LL
++
++def __UINT64_C(c): return c ## ULL
++
++INT8_MIN = (-128)
++INT16_MIN = (-32767-1)
++INT32_MIN = (-2147483647-1)
++INT64_MIN = (-__INT64_C(9223372036854775807)-1)
++INT8_MAX = (127)
++INT16_MAX = (32767)
++INT32_MAX = (2147483647)
++INT64_MAX = (__INT64_C(9223372036854775807))
++UINT8_MAX = (255)
++UINT16_MAX = (65535)
++UINT64_MAX = (__UINT64_C(18446744073709551615))
++INT_LEAST8_MIN = (-128)
++INT_LEAST16_MIN = (-32767-1)
++INT_LEAST32_MIN = (-2147483647-1)
++INT_LEAST64_MIN = (-__INT64_C(9223372036854775807)-1)
++INT_LEAST8_MAX = (127)
++INT_LEAST16_MAX = (32767)
++INT_LEAST32_MAX = (2147483647)
++INT_LEAST64_MAX = (__INT64_C(9223372036854775807))
++UINT_LEAST8_MAX = (255)
++UINT_LEAST16_MAX = (65535)
++UINT_LEAST64_MAX = (__UINT64_C(18446744073709551615))
++INT_FAST8_MIN = (-128)
++INT_FAST16_MIN = (-9223372036854775807L-1)
++INT_FAST32_MIN = (-9223372036854775807L-1)
++INT_FAST16_MIN = (-2147483647-1)
++INT_FAST32_MIN = (-2147483647-1)
++INT_FAST64_MIN = (-__INT64_C(9223372036854775807)-1)
++INT_FAST8_MAX = (127)
++INT_FAST16_MAX = (9223372036854775807L)
++INT_FAST32_MAX = (9223372036854775807L)
++INT_FAST16_MAX = (2147483647)
++INT_FAST32_MAX = (2147483647)
++INT_FAST64_MAX = (__INT64_C(9223372036854775807))
++UINT_FAST8_MAX = (255)
++UINT_FAST64_MAX = (__UINT64_C(18446744073709551615))
++INTPTR_MIN = (-9223372036854775807L-1)
++INTPTR_MAX = (9223372036854775807L)
++INTPTR_MIN = (-2147483647-1)
++INTPTR_MAX = (2147483647)
++INTMAX_MIN = (-__INT64_C(9223372036854775807)-1)
++INTMAX_MAX = (__INT64_C(9223372036854775807))
++UINTMAX_MAX = (__UINT64_C(18446744073709551615))
++PTRDIFF_MIN = (-9223372036854775807L-1)
++PTRDIFF_MAX = (9223372036854775807L)
++PTRDIFF_MIN = (-2147483647-1)
++PTRDIFF_MAX = (2147483647)
++SIG_ATOMIC_MIN = (-2147483647-1)
++SIG_ATOMIC_MAX = (2147483647)
++WCHAR_MIN = __WCHAR_MIN
++WCHAR_MAX = __WCHAR_MAX
++def INT8_C(c): return c
++
++def INT16_C(c): return c
++
++def INT32_C(c): return c
++
++def INT64_C(c): return c ## L
++
++def INT64_C(c): return c ## LL
++
++def UINT8_C(c): return c
++
++def UINT16_C(c): return c
++
++def UINT32_C(c): return c ## U
++
++def UINT64_C(c): return c ## UL
++
++def UINT64_C(c): return c ## ULL
++
++def INTMAX_C(c): return c ## L
++
++def UINTMAX_C(c): return c ## UL
++
++def INTMAX_C(c): return c ## LL
++
++def UINTMAX_C(c): return c ## ULL
++
++
++# Included from sys/socket.h
++_SYS_SOCKET_H = 1
++
++# Included from sys/uio.h
++_SYS_UIO_H = 1
++from TYPES import *
++
++# Included from bits/uio.h
++_BITS_UIO_H = 1
++from TYPES import *
++UIO_MAXIOV = 1024
++
++# Included from bits/sigset.h
++_SIGSET_H_types = 1
++_SIGSET_H_fns = 1
++def __sigword(sig): return (((sig) - 1) >> 5)
++
++def __sigemptyset(set): return \
++
++def __sigfillset(set): return \
++
++def __sigisemptyset(set): return \
++
++
++# Included from bits/socket.h
++__BITS_SOCKET_H = 1
++
++# Included from limits.h
++_LIBC_LIMITS_H_ = 1
++MB_LEN_MAX = 16
++_LIMITS_H = 1
++CHAR_BIT = 8
++SCHAR_MIN = (-128)
++SCHAR_MAX = 127
++UCHAR_MAX = 255
++CHAR_MIN = 0
++CHAR_MAX = UCHAR_MAX
++CHAR_MIN = SCHAR_MIN
++CHAR_MAX = SCHAR_MAX
++SHRT_MIN = (-32768)
++SHRT_MAX = 32767
++USHRT_MAX = 65535
++INT_MAX = 2147483647
++LONG_MAX = 9223372036854775807L
++LONG_MAX = 2147483647L
++LONG_MIN = (-LONG_MAX - 1L)
++
++# Included from bits/posix1_lim.h
++_BITS_POSIX1_LIM_H = 1
++_POSIX_AIO_LISTIO_MAX = 2
++_POSIX_AIO_MAX = 1
++_POSIX_ARG_MAX = 4096
++_POSIX_CHILD_MAX = 25
++_POSIX_CHILD_MAX = 6
++_POSIX_DELAYTIMER_MAX = 32
++_POSIX_HOST_NAME_MAX = 255
++_POSIX_LINK_MAX = 8
++_POSIX_LOGIN_NAME_MAX = 9
++_POSIX_MAX_CANON = 255
++_POSIX_MAX_INPUT = 255
++_POSIX_MQ_OPEN_MAX = 8
++_POSIX_MQ_PRIO_MAX = 32
++_POSIX_NAME_MAX = 14
++_POSIX_NGROUPS_MAX = 8
++_POSIX_NGROUPS_MAX = 0
++_POSIX_OPEN_MAX = 20
++_POSIX_OPEN_MAX = 16
++_POSIX_FD_SETSIZE = _POSIX_OPEN_MAX
++_POSIX_PATH_MAX = 256
++_POSIX_PIPE_BUF = 512
++_POSIX_RE_DUP_MAX = 255
++_POSIX_RTSIG_MAX = 8
++_POSIX_SEM_NSEMS_MAX = 256
++_POSIX_SEM_VALUE_MAX = 32767
++_POSIX_SIGQUEUE_MAX = 32
++_POSIX_SSIZE_MAX = 32767
++_POSIX_STREAM_MAX = 8
++_POSIX_SYMLINK_MAX = 255
++_POSIX_SYMLOOP_MAX = 8
++_POSIX_TIMER_MAX = 32
++_POSIX_TTY_NAME_MAX = 9
++_POSIX_TZNAME_MAX = 6
++_POSIX_QLIMIT = 1
++_POSIX_HIWAT = _POSIX_PIPE_BUF
++_POSIX_UIO_MAXIOV = 16
++_POSIX_CLOCKRES_MIN = 20000000
++
++# Included from bits/local_lim.h
++
++# Included from sys/syslimits.h
++ARG_MAX = 262144
++CHILD_MAX = 40
++LINK_MAX = 32767
++MAX_CANON = 255
++MAX_INPUT = 255
++NAME_MAX = 255
++NGROUPS_MAX = 1023
++OPEN_MAX = 64
++PATH_MAX = 1024
++PIPE_BUF = 512
++IOV_MAX = 1024
++_POSIX_THREAD_KEYS_MAX = 128
++PTHREAD_KEYS_MAX = 1024
++_POSIX_THREAD_DESTRUCTOR_ITERATIONS = 4
++PTHREAD_DESTRUCTOR_ITERATIONS = _POSIX_THREAD_DESTRUCTOR_ITERATIONS
++_POSIX_THREAD_THREADS_MAX = 64
++PTHREAD_THREADS_MAX = 1024
++AIO_PRIO_DELTA_MAX = 20
++PTHREAD_STACK_MIN = 16384
++TIMER_MAX = 256
++DELAYTIMER_MAX = 2147483647
++SSIZE_MAX = LONG_MAX
++NGROUPS_MAX = 8
++
++# Included from bits/posix2_lim.h
++_BITS_POSIX2_LIM_H = 1
++_POSIX2_BC_BASE_MAX = 99
++_POSIX2_BC_DIM_MAX = 2048
++_POSIX2_BC_SCALE_MAX = 99
++_POSIX2_BC_STRING_MAX = 1000
++_POSIX2_COLL_WEIGHTS_MAX = 2
++_POSIX2_EXPR_NEST_MAX = 32
++_POSIX2_LINE_MAX = 2048
++_POSIX2_RE_DUP_MAX = 255
++_POSIX2_CHARCLASS_NAME_MAX = 14
++BC_BASE_MAX = _POSIX2_BC_BASE_MAX
++BC_DIM_MAX = _POSIX2_BC_DIM_MAX
++BC_SCALE_MAX = _POSIX2_BC_SCALE_MAX
++BC_STRING_MAX = _POSIX2_BC_STRING_MAX
++COLL_WEIGHTS_MAX = 255
++EXPR_NEST_MAX = _POSIX2_EXPR_NEST_MAX
++LINE_MAX = _POSIX2_LINE_MAX
++CHARCLASS_NAME_MAX = 2048
++RE_DUP_MAX = (0x7fff)
++
++# Included from bits/xopen_lim.h
++_XOPEN_LIM_H = 1
++
++# Included from bits/stdio_lim.h
++L_tmpnam = 20
++TMP_MAX = 238328
++FILENAME_MAX = 1024
++L_ctermid = 9
++L_cuserid = 9
++FOPEN_MAX = 64
++IOV_MAX = 1024
++_XOPEN_IOV_MAX = _POSIX_UIO_MAXIOV
++NL_ARGMAX = _POSIX_ARG_MAX
++NL_LANGMAX = _POSIX2_LINE_MAX
++NL_MSGMAX = INT_MAX
++NL_NMAX = INT_MAX
++NL_SETMAX = INT_MAX
++NL_TEXTMAX = INT_MAX
++NZERO = 20
++WORD_BIT = 16
++WORD_BIT = 32
++WORD_BIT = 64
++WORD_BIT = 16
++WORD_BIT = 32
++WORD_BIT = 64
++WORD_BIT = 32
++LONG_BIT = 32
++LONG_BIT = 64
++LONG_BIT = 32
++LONG_BIT = 64
++LONG_BIT = 64
++LONG_BIT = 32
++
++# Included from bits/types.h
++_BITS_TYPES_H = 1
++__S32_TYPE = int
++__SWORD_TYPE = int
++__SLONG32_TYPE = int
++
++# Included from bits/typesizes.h
++_BITS_TYPESIZES_H = 1
++__PID_T_TYPE = __S32_TYPE
++__CLOCK_T_TYPE = __S32_TYPE
++__SWBLK_T_TYPE = __S32_TYPE
++__CLOCKID_T_TYPE = __S32_TYPE
++__TIMER_T_TYPE = __S32_TYPE
++__SSIZE_T_TYPE = __SWORD_TYPE
++__FD_SETSIZE = 1024
++PF_UNSPEC = 0
++PF_LOCAL = 1
++PF_UNIX = PF_LOCAL
++PF_FILE = PF_LOCAL
++PF_INET = 2
++PF_IMPLINK = 3
++PF_PUP = 4
++PF_CHAOS = 5
++PF_NS = 6
++PF_ISO = 7
++PF_OSI = PF_ISO
++PF_ECMA = 8
++PF_DATAKIT = 9
++PF_CCITT = 10
++PF_SNA = 11
++PF_DECnet = 12
++PF_DLI = 13
++PF_LAT = 14
++PF_HYLINK = 15
++PF_APPLETALK = 16
++PF_ROUTE = 17
++PF_LINK = 18
++PF_XTP = 19
++PF_COIP = 20
++PF_CNT = 21
++PF_RTIP = 22
++PF_IPX = 23
++PF_SIP = 24
++PF_PIP = 25
++PF_ISDN = 26
++PF_KEY = 27
++PF_INET6 = 28
++PF_NATM = 29
++PF_ATM = 30
++PF_HDRCMPLT = 31
++PF_NETGRAPH = 32
++PF_MAX = 33
++AF_UNSPEC = PF_UNSPEC
++AF_LOCAL = PF_LOCAL
++AF_UNIX = PF_UNIX
++AF_FILE = PF_FILE
++AF_INET = PF_INET
++AF_IMPLINK = PF_IMPLINK
++AF_PUP = PF_PUP
++AF_CHAOS = PF_CHAOS
++AF_NS = PF_NS
++AF_ISO = PF_ISO
++AF_OSI = PF_OSI
++AF_ECMA = PF_ECMA
++AF_DATAKIT = PF_DATAKIT
++AF_CCITT = PF_CCITT
++AF_SNA = PF_SNA
++AF_DECnet = PF_DECnet
++AF_DLI = PF_DLI
++AF_LAT = PF_LAT
++AF_HYLINK = PF_HYLINK
++AF_APPLETALK = PF_APPLETALK
++AF_ROUTE = PF_ROUTE
++AF_LINK = PF_LINK
++pseudo_AF_XTP = PF_XTP
++AF_COIP = PF_COIP
++AF_CNT = PF_CNT
++pseudo_AF_RTIP = PF_RTIP
++AF_IPX = PF_IPX
++AF_SIP = PF_SIP
++pseudo_AF_PIP = PF_PIP
++AF_ISDN = PF_ISDN
++AF_E164 = AF_ISDN
++pseudo_AF_KEY = PF_KEY
++AF_INET6 = PF_INET6
++AF_NATM = PF_NATM
++AF_ATM = PF_ATM
++pseudo_AF_HDRCMPLT = PF_HDRCMPLT
++AF_NETGRAPH = PF_NETGRAPH
++AF_MAX = PF_MAX
++SOMAXCONN = 128
++
++# Included from bits/sockaddr.h
++_BITS_SOCKADDR_H = 1
++def __SOCKADDR_COMMON(sa_prefix): return \
++
++_HAVE_SA_LEN = 1
++_SS_SIZE = 128
++def CMSG_FIRSTHDR(mhdr): return \
++
++CMGROUP_MAX = 16
++SOL_SOCKET = 0xffff
++LOCAL_PEERCRED = 0x001
++LOCAL_CREDS = 0x002
++LOCAL_CONNWAIT = 0x004
++
++# Included from bits/socket2.h
++def IN_CLASSA(a): return ((((in_addr_t)(a)) & (-2147483648)) == 0)
++
++IN_CLASSA_NET = (-16777216)
++IN_CLASSA_NSHIFT = 24
++IN_CLASSA_HOST = ((-1) & ~IN_CLASSA_NET)
++IN_CLASSA_MAX = 128
++def IN_CLASSB(a): return ((((in_addr_t)(a)) & (-1073741824)) == (-2147483648))
++
++IN_CLASSB_NET = (-65536)
++IN_CLASSB_NSHIFT = 16
++IN_CLASSB_HOST = ((-1) & ~IN_CLASSB_NET)
++IN_CLASSB_MAX = 65536
++def IN_CLASSC(a): return ((((in_addr_t)(a)) & (-536870912)) == (-1073741824))
++
++IN_CLASSC_NET = (-256)
++IN_CLASSC_NSHIFT = 8
++IN_CLASSC_HOST = ((-1) & ~IN_CLASSC_NET)
++def IN_CLASSD(a): return ((((in_addr_t)(a)) & (-268435456)) == (-536870912))
++
++def IN_MULTICAST(a): return IN_CLASSD(a)
++
++def IN_EXPERIMENTAL(a): return ((((in_addr_t)(a)) & (-536870912)) == (-536870912))
++
++def IN_BADCLASS(a): return ((((in_addr_t)(a)) & (-268435456)) == (-268435456))
++
++IN_LOOPBACKNET = 127
++INET_ADDRSTRLEN = 16
++INET6_ADDRSTRLEN = 46
++
++# Included from bits/in.h
++IMPLINK_IP = 155
++IMPLINK_LOWEXPER = 156
++IMPLINK_HIGHEXPER = 158
++IPPROTO_DIVERT = 258
++SOL_IP = 0
++IP_OPTIONS = 1
++IP_HDRINCL = 2
++IP_TOS = 3
++IP_TTL = 4
++IP_RECVOPTS = 5
++IP_RECVRETOPTS = 6
++IP_RECVDSTADDR = 7
++IP_SENDSRCADDR = IP_RECVDSTADDR
++IP_RETOPTS = 8
++IP_MULTICAST_IF = 9
++IP_MULTICAST_TTL = 10
++IP_MULTICAST_LOOP = 11
++IP_ADD_MEMBERSHIP = 12
++IP_DROP_MEMBERSHIP = 13
++IP_MULTICAST_VIF = 14
++IP_RSVP_ON = 15
++IP_RSVP_OFF = 16
++IP_RSVP_VIF_ON = 17
++IP_RSVP_VIF_OFF = 18
++IP_PORTRANGE = 19
++IP_RECVIF = 20
++IP_IPSEC_POLICY = 21
++IP_FAITH = 22
++IP_ONESBCAST = 23
++IP_NONLOCALOK = 24
++IP_FW_TABLE_ADD = 40
++IP_FW_TABLE_DEL = 41
++IP_FW_TABLE_FLUSH = 42
++IP_FW_TABLE_GETSIZE = 43
++IP_FW_TABLE_LIST = 44
++IP_FW_ADD = 50
++IP_FW_DEL = 51
++IP_FW_FLUSH = 52
++IP_FW_ZERO = 53
++IP_FW_GET = 54
++IP_FW_RESETLOG = 55
++IP_FW_NAT_CFG = 56
++IP_FW_NAT_DEL = 57
++IP_FW_NAT_GET_CONFIG = 58
++IP_FW_NAT_GET_LOG = 59
++IP_DUMMYNET_CONFIGURE = 60
++IP_DUMMYNET_DEL = 61
++IP_DUMMYNET_FLUSH = 62
++IP_DUMMYNET_GET = 64
++IP_RECVTTL = 65
++IP_MINTTL = 66
++IP_DONTFRAG = 67
++IP_ADD_SOURCE_MEMBERSHIP = 70
++IP_DROP_SOURCE_MEMBERSHIP = 71
++IP_BLOCK_SOURCE = 72
++IP_UNBLOCK_SOURCE = 73
++IP_MSFILTER = 74
++MCAST_JOIN_GROUP = 80
++MCAST_LEAVE_GROUP = 81
++MCAST_JOIN_SOURCE_GROUP = 82
++MCAST_LEAVE_SOURCE_GROUP = 83
++MCAST_BLOCK_SOURCE = 84
++MCAST_UNBLOCK_SOURCE = 85
++IP_DEFAULT_MULTICAST_TTL = 1
++IP_DEFAULT_MULTICAST_LOOP = 1
++IP_MIN_MEMBERSHIPS = 31
++IP_MAX_MEMBERSHIPS = 4095
++IP_MAX_SOURCE_FILTER = 1024
++MCAST_UNDEFINED = 0
++MCAST_INCLUDE = 1
++MCAST_EXCLUDE = 2
++IP_PORTRANGE_DEFAULT = 0
++IP_PORTRANGE_HIGH = 1
++IP_PORTRANGE_LOW = 2
++IPCTL_FORWARDING = 1
++IPCTL_SENDREDIRECTS = 2
++IPCTL_DEFTTL = 3
++IPCTL_DEFMTU = 4
++IPCTL_RTEXPIRE = 5
++IPCTL_RTMINEXPIRE = 6
++IPCTL_RTMAXCACHE = 7
++IPCTL_SOURCEROUTE = 8
++IPCTL_DIRECTEDBROADCAST = 9
++IPCTL_INTRQMAXLEN = 10
++IPCTL_INTRQDROPS = 11
++IPCTL_STATS = 12
++IPCTL_ACCEPTSOURCEROUTE = 13
++IPCTL_FASTFORWARDING = 14
++IPCTL_KEEPFAITH = 15
++IPCTL_GIF_TTL = 16
++IPCTL_MAXID = 17
++IPV6_SOCKOPT_RESERVED1 = 3
++IPV6_UNICAST_HOPS = 4
++IPV6_MULTICAST_IF = 9
++IPV6_MULTICAST_HOPS = 10
++IPV6_MULTICAST_LOOP = 11
++IPV6_JOIN_GROUP = 12
++IPV6_LEAVE_GROUP = 13
++IPV6_PORTRANGE = 14
++ICMP6_FILTER = 18
++IPV6_CHECKSUM = 26
++IPV6_V6ONLY = 27
++IPV6_IPSEC_POLICY = 28
++IPV6_FAITH = 29
++IPV6_FW_ADD = 30
++IPV6_FW_DEL = 31
++IPV6_FW_FLUSH = 32
++IPV6_FW_ZERO = 33
++IPV6_FW_GET = 34
++IPV6_RTHDRDSTOPTS = 35
++IPV6_RECVPKTINFO = 36
++IPV6_RECVHOPLIMIT = 37
++IPV6_RECVRTHDR = 38
++IPV6_RECVHOPOPTS = 39
++IPV6_RECVDSTOPTS = 40
++IPV6_USE_MIN_MTU = 42
++IPV6_RECVPATHMTU = 43
++IPV6_PATHMTU = 44
++IPV6_PKTINFO = 46
++IPV6_HOPLIMIT = 47
++IPV6_NEXTHOP = 48
++IPV6_HOPOPTS = 49
++IPV6_DSTOPTS = 50
++IPV6_RTHDR = 51
++IPV6_RECVTCLASS = 57
++IPV6_AUTOFLOWLABEL = 59
++IPV6_TCLASS = 61
++IPV6_DONTFRAG = 62
++IPV6_PREFER_TEMPADDR = 63
++IPV6_ADD_MEMBERSHIP = IPV6_JOIN_GROUP
++IPV6_DROP_MEMBERSHIP = IPV6_LEAVE_GROUP
++IPV6_RXHOPOPTS = IPV6_HOPOPTS
++IPV6_RXDSTOPTS = IPV6_DSTOPTS
++SOL_IPV6 = 41
++SOL_ICMPV6 = 58
++IPV6_DEFAULT_MULTICAST_HOPS = 1
++IPV6_DEFAULT_MULTICAST_LOOP = 1
++IPV6_PORTRANGE_DEFAULT = 0
++IPV6_PORTRANGE_HIGH = 1
++IPV6_PORTRANGE_LOW = 2
++IPV6_RTHDR_LOOSE = 0
++IPV6_RTHDR_STRICT = 1
++IPV6_RTHDR_TYPE_0 = 0
++IPV6CTL_FORWARDING = 1
++IPV6CTL_SENDREDIRECTS = 2
++IPV6CTL_DEFHLIM = 3
++IPV6CTL_FORWSRCRT = 5
++IPV6CTL_STATS = 6
++IPV6CTL_MRTSTATS = 7
++IPV6CTL_MRTPROTO = 8
++IPV6CTL_MAXFRAGPACKETS = 9
++IPV6CTL_SOURCECHECK = 10
++IPV6CTL_SOURCECHECK_LOGINT = 11
++IPV6CTL_ACCEPT_RTADV = 12
++IPV6CTL_KEEPFAITH = 13
++IPV6CTL_LOG_INTERVAL = 14
++IPV6CTL_HDRNESTLIMIT = 15
++IPV6CTL_DAD_COUNT = 16
++IPV6CTL_AUTO_FLOWLABEL = 17
++IPV6CTL_DEFMCASTHLIM = 18
++IPV6CTL_GIF_HLIM = 19
++IPV6CTL_KAME_VERSION = 20
++IPV6CTL_USE_DEPRECATED = 21
++IPV6CTL_RR_PRUNE = 22
++IPV6CTL_V6ONLY = 24
++IPV6CTL_RTEXPIRE = 25
++IPV6CTL_RTMINEXPIRE = 26
++IPV6CTL_RTMAXCACHE = 27
++IPV6CTL_USETEMPADDR = 32
++IPV6CTL_TEMPPLTIME = 33
++IPV6CTL_TEMPVLTIME = 34
++IPV6CTL_AUTO_LINKLOCAL = 35
++IPV6CTL_RIP6STATS = 36
++IPV6CTL_PREFER_TEMPADDR = 37
++IPV6CTL_ADDRCTLPOLICY = 38
++IPV6CTL_USE_DEFAULTZONE = 39
++IPV6CTL_MAXFRAGS = 41
++IPV6CTL_MCAST_PMTU = 44
++IPV6CTL_STEALTH = 45
++ICMPV6CTL_ND6_ONLINKNSRFC4861 = 47
++IPV6CTL_MAXID = 48
++
++# Included from endian.h
++_ENDIAN_H = 1
++__LITTLE_ENDIAN = 1234
++__BIG_ENDIAN = 4321
++__PDP_ENDIAN = 3412
++
++# Included from bits/endian.h
++__BYTE_ORDER = __LITTLE_ENDIAN
++__FLOAT_WORD_ORDER = __BYTE_ORDER
++LITTLE_ENDIAN = __LITTLE_ENDIAN
++BIG_ENDIAN = __BIG_ENDIAN
++PDP_ENDIAN = __PDP_ENDIAN
++BYTE_ORDER = __BYTE_ORDER
++
++# Included from bits/byteswap.h
++_BITS_BYTESWAP_H = 1
++def __bswap_constant_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_constant_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_constant_64(x): return \
++
++def __bswap_64(x): return \
++
++def htobe16(x): return __bswap_16 (x)
++
++def htole16(x): return (x)
++
++def be16toh(x): return __bswap_16 (x)
++
++def le16toh(x): return (x)
++
++def htobe32(x): return __bswap_32 (x)
++
++def htole32(x): return (x)
++
++def be32toh(x): return __bswap_32 (x)
++
++def le32toh(x): return (x)
++
++def htobe64(x): return __bswap_64 (x)
++
++def htole64(x): return (x)
++
++def be64toh(x): return __bswap_64 (x)
++
++def le64toh(x): return (x)
++
++def htobe16(x): return (x)
++
++def htole16(x): return __bswap_16 (x)
++
++def be16toh(x): return (x)
++
++def le16toh(x): return __bswap_16 (x)
++
++def htobe32(x): return (x)
++
++def htole32(x): return __bswap_32 (x)
++
++def be32toh(x): return (x)
++
++def le32toh(x): return __bswap_32 (x)
++
++def htobe64(x): return (x)
++
++def htole64(x): return __bswap_64 (x)
++
++def be64toh(x): return (x)
++
++def le64toh(x): return __bswap_64 (x)
++
++def ntohl(x): return (x)
++
++def ntohs(x): return (x)
++
++def htonl(x): return (x)
++
++def htons(x): return (x)
++
++def ntohl(x): return __bswap_32 (x)
++
++def ntohs(x): return __bswap_16 (x)
++
++def htonl(x): return __bswap_32 (x)
++
++def htons(x): return __bswap_16 (x)
++
++def IN6_IS_ADDR_UNSPECIFIED(a): return \
++
++def IN6_IS_ADDR_LOOPBACK(a): return \
++
++def IN6_IS_ADDR_LINKLOCAL(a): return \
++
++def IN6_IS_ADDR_SITELOCAL(a): return \
++
++def IN6_IS_ADDR_V4MAPPED(a): return \
++
++def IN6_IS_ADDR_V4COMPAT(a): return \
++
++def IN6_IS_ADDR_MC_NODELOCAL(a): return \
++
++def IN6_IS_ADDR_MC_LINKLOCAL(a): return \
++
++def IN6_IS_ADDR_MC_SITELOCAL(a): return \
++
++def IN6_IS_ADDR_MC_ORGLOCAL(a): return \
++
++def IN6_IS_ADDR_MC_GLOBAL(a): return \
++
+--- /dev/null
++++ b/Lib/plat-gnukfreebsd7/TYPES.py
+@@ -0,0 +1,303 @@
++# Generated by h2py from /usr/include/sys/types.h
++_SYS_TYPES_H = 1
++
++# Included from features.h
++_FEATURES_H = 1
++__USE_ANSI = 1
++__FAVOR_BSD = 1
++_ISOC99_SOURCE = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 200809L
++_XOPEN_SOURCE = 700
++_XOPEN_SOURCE_EXTENDED = 1
++_LARGEFILE64_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++_ATFILE_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++__USE_ISOC99 = 1
++__USE_ISOC95 = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 2
++_POSIX_C_SOURCE = 199506L
++_POSIX_C_SOURCE = 200112L
++_POSIX_C_SOURCE = 200809L
++__USE_POSIX_IMPLICITLY = 1
++__USE_POSIX = 1
++__USE_POSIX2 = 1
++__USE_POSIX199309 = 1
++__USE_POSIX199506 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN2K8 = 1
++_ATFILE_SOURCE = 1
++__USE_XOPEN = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_UNIX98 = 1
++_LARGEFILE_SOURCE = 1
++__USE_XOPEN2K8 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_FILE_OFFSET64 = 1
++__USE_MISC = 1
++__USE_BSD = 1
++__USE_SVID = 1
++__USE_ATFILE = 1
++__USE_GNU = 1
++__USE_REENTRANT = 1
++__USE_FORTIFY_LEVEL = 2
++__USE_FORTIFY_LEVEL = 1
++__USE_FORTIFY_LEVEL = 0
++
++# Included from bits/predefs.h
++__STDC_IEC_559__ = 1
++__STDC_IEC_559_COMPLEX__ = 1
++__STDC_ISO_10646__ = 200009L
++__GNU_LIBRARY__ = 6
++__GLIBC__ = 2
++__GLIBC_MINOR__ = 11
++__GLIBC_HAVE_LONG_LONG = 1
++
++# Included from sys/cdefs.h
++_SYS_CDEFS_H = 1
++def __NTH(fct): return fct
++
++def __NTH(fct): return fct
++
++def __P(args): return args
++
++def __PMT(args): return args
++
++def __STRING(x): return #x
++
++def __bos(ptr): return __builtin_object_size (ptr, __USE_FORTIFY_LEVEL > 1)
++
++def __bos0(ptr): return __builtin_object_size (ptr, 0)
++
++def __warnattr(msg): return __attribute__((__warning__ (msg)))
++
++__flexarr = []
++__flexarr = [0]
++__flexarr = []
++__flexarr = [1]
++def __ASMNAME(cname): return __ASMNAME2 (__USER_LABEL_PREFIX__, cname)
++
++def __attribute__(xyz): return  
++
++def __attribute_format_arg__(x): return __attribute__ ((__format_arg__ (x)))
++
++def __attribute_format_arg__(x): return  
++
++
++# Included from bits/wordsize.h
++__WORDSIZE = 32
++__LDBL_COMPAT = 1
++def __LDBL_REDIR_DECL(name): return \
++
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_EXTERN_INLINES = 1
++__USE_EXTERN_INLINES_IN_LIBC = 1
++
++# Included from gnu/stubs.h
++
++# Included from bits/types.h
++_BITS_TYPES_H = 1
++__S32_TYPE = int
++__SWORD_TYPE = int
++__SLONG32_TYPE = int
++
++# Included from bits/typesizes.h
++_BITS_TYPESIZES_H = 1
++__PID_T_TYPE = __S32_TYPE
++__CLOCK_T_TYPE = __S32_TYPE
++__SWBLK_T_TYPE = __S32_TYPE
++__CLOCKID_T_TYPE = __S32_TYPE
++__TIMER_T_TYPE = __S32_TYPE
++__SSIZE_T_TYPE = __SWORD_TYPE
++__FD_SETSIZE = 1024
++
++# Included from time.h
++_TIME_H = 1
++
++# Included from bits/time.h
++_BITS_TIME_H = 1
++CLOCKS_PER_SEC = 1000000l
++CLK_TCK = 128
++CLOCK_REALTIME = 0
++CLOCK_PROCESS_CPUTIME_ID = 2
++CLOCK_THREAD_CPUTIME_ID = 3
++CLOCK_MONOTONIC = 4
++CLOCK_VIRTUAL = 1
++CLOCK_PROF = 2
++CLOCK_UPTIME = 5
++CLOCK_UPTIME_PRECISE = 7
++CLOCK_UPTIME_FAST = 8
++CLOCK_REALTIME_PRECISE = 9
++CLOCK_REALTIME_FAST = 10
++CLOCK_MONOTONIC_PRECISE = 11
++CLOCK_MONOTONIC_FAST = 12
++CLOCK_SECOND = 13
++TIMER_RELTIME = 0
++TIMER_ABSTIME = 1
++_STRUCT_TIMEVAL = 1
++CLK_TCK = CLOCKS_PER_SEC
++__clock_t_defined = 1
++__time_t_defined = 1
++__clockid_t_defined = 1
++__timer_t_defined = 1
++__timespec_defined = 1
++
++# Included from xlocale.h
++_XLOCALE_H = 1
++def __isleap(year): return \
++
++__BIT_TYPES_DEFINED__ = 1
++
++# Included from endian.h
++_ENDIAN_H = 1
++__LITTLE_ENDIAN = 1234
++__BIG_ENDIAN = 4321
++__PDP_ENDIAN = 3412
++
++# Included from bits/endian.h
++__BYTE_ORDER = __LITTLE_ENDIAN
++__FLOAT_WORD_ORDER = __BYTE_ORDER
++LITTLE_ENDIAN = __LITTLE_ENDIAN
++BIG_ENDIAN = __BIG_ENDIAN
++PDP_ENDIAN = __PDP_ENDIAN
++BYTE_ORDER = __BYTE_ORDER
++
++# Included from bits/byteswap.h
++_BITS_BYTESWAP_H = 1
++def __bswap_constant_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_constant_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_constant_64(x): return \
++
++def __bswap_64(x): return \
++
++def htobe16(x): return __bswap_16 (x)
++
++def htole16(x): return (x)
++
++def be16toh(x): return __bswap_16 (x)
++
++def le16toh(x): return (x)
++
++def htobe32(x): return __bswap_32 (x)
++
++def htole32(x): return (x)
++
++def be32toh(x): return __bswap_32 (x)
++
++def le32toh(x): return (x)
++
++def htobe64(x): return __bswap_64 (x)
++
++def htole64(x): return (x)
++
++def be64toh(x): return __bswap_64 (x)
++
++def le64toh(x): return (x)
++
++def htobe16(x): return (x)
++
++def htole16(x): return __bswap_16 (x)
++
++def be16toh(x): return (x)
++
++def le16toh(x): return __bswap_16 (x)
++
++def htobe32(x): return (x)
++
++def htole32(x): return __bswap_32 (x)
++
++def be32toh(x): return (x)
++
++def le32toh(x): return __bswap_32 (x)
++
++def htobe64(x): return (x)
++
++def htole64(x): return __bswap_64 (x)
++
++def be64toh(x): return (x)
++
++def le64toh(x): return __bswap_64 (x)
++
++
++# Included from sys/select.h
++_SYS_SELECT_H = 1
++
++# Included from bits/select.h
++def __FD_ZERO(fdsp): return \
++
++def __FD_ZERO(set): return \
++
++
++# Included from bits/sigset.h
++_SIGSET_H_types = 1
++_SIGSET_H_fns = 1
++def __sigword(sig): return (((sig) - 1) >> 5)
++
++def __sigemptyset(set): return \
++
++def __sigfillset(set): return \
++
++def __sigisemptyset(set): return \
++
++def __FDELT(d): return ((d) / __NFDBITS)
++
++FD_SETSIZE = __FD_SETSIZE
++def FD_ZERO(fdsetp): return __FD_ZERO (fdsetp)
++
++
++# Included from sys/sysmacros.h
++_SYS_SYSMACROS_H = 1
++def minor(dev): return ((int)((dev) & (-65281)))
++
++def gnu_dev_major(dev): return major (dev)
++
++def gnu_dev_minor(dev): return minor (dev)
++
++
++# Included from bits/pthreadtypes.h
++_BITS_PTHREADTYPES_H = 1
++
++# Included from bits/sched.h
++SCHED_OTHER = 2
++SCHED_FIFO = 1
++SCHED_RR = 3
++CSIGNAL = 0x000000ff
++CLONE_VM = 0x00000100
++CLONE_FS = 0x00000200
++CLONE_FILES = 0x00000400
++CLONE_SIGHAND = 0x00000800
++CLONE_PTRACE = 0x00002000
++CLONE_VFORK = 0x00004000
++CLONE_SYSVSEM = 0x00040000
++__defined_schedparam = 1
++__CPU_SETSIZE = 128
++def __CPUELT(cpu): return ((cpu) / __NCPUBITS)
++
++def __CPU_ALLOC_SIZE(count): return \
++
++def __CPU_ALLOC(count): return __sched_cpualloc (count)
++
++def __CPU_FREE(cpuset): return __sched_cpufree (cpuset)
++
+--- /dev/null
++++ b/Lib/plat-gnukfreebsd7/DLFCN.py
+@@ -0,0 +1,118 @@
++# Generated by h2py from /usr/include/dlfcn.h
++_DLFCN_H = 1
++
++# Included from features.h
++_FEATURES_H = 1
++__USE_ANSI = 1
++__FAVOR_BSD = 1
++_ISOC99_SOURCE = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 200809L
++_XOPEN_SOURCE = 700
++_XOPEN_SOURCE_EXTENDED = 1
++_LARGEFILE64_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++_ATFILE_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++__USE_ISOC99 = 1
++__USE_ISOC95 = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 2
++_POSIX_C_SOURCE = 199506L
++_POSIX_C_SOURCE = 200112L
++_POSIX_C_SOURCE = 200809L
++__USE_POSIX_IMPLICITLY = 1
++__USE_POSIX = 1
++__USE_POSIX2 = 1
++__USE_POSIX199309 = 1
++__USE_POSIX199506 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN2K8 = 1
++_ATFILE_SOURCE = 1
++__USE_XOPEN = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_UNIX98 = 1
++_LARGEFILE_SOURCE = 1
++__USE_XOPEN2K8 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_FILE_OFFSET64 = 1
++__USE_MISC = 1
++__USE_BSD = 1
++__USE_SVID = 1
++__USE_ATFILE = 1
++__USE_GNU = 1
++__USE_REENTRANT = 1
++__USE_FORTIFY_LEVEL = 2
++__USE_FORTIFY_LEVEL = 1
++__USE_FORTIFY_LEVEL = 0
++
++# Included from bits/predefs.h
++__STDC_IEC_559__ = 1
++__STDC_IEC_559_COMPLEX__ = 1
++__STDC_ISO_10646__ = 200009L
++__GNU_LIBRARY__ = 6
++__GLIBC__ = 2
++__GLIBC_MINOR__ = 11
++__GLIBC_HAVE_LONG_LONG = 1
++
++# Included from sys/cdefs.h
++_SYS_CDEFS_H = 1
++def __NTH(fct): return fct
++
++def __NTH(fct): return fct
++
++def __P(args): return args
++
++def __PMT(args): return args
++
++def __STRING(x): return #x
++
++def __bos(ptr): return __builtin_object_size (ptr, __USE_FORTIFY_LEVEL > 1)
++
++def __bos0(ptr): return __builtin_object_size (ptr, 0)
++
++def __warnattr(msg): return __attribute__((__warning__ (msg)))
++
++__flexarr = []
++__flexarr = [0]
++__flexarr = []
++__flexarr = [1]
++def __ASMNAME(cname): return __ASMNAME2 (__USER_LABEL_PREFIX__, cname)
++
++def __attribute__(xyz): return  
++
++def __attribute_format_arg__(x): return __attribute__ ((__format_arg__ (x)))
++
++def __attribute_format_arg__(x): return  
++
++
++# Included from bits/wordsize.h
++__WORDSIZE = 32
++__LDBL_COMPAT = 1
++def __LDBL_REDIR_DECL(name): return \
++
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_EXTERN_INLINES = 1
++__USE_EXTERN_INLINES_IN_LIBC = 1
++
++# Included from gnu/stubs.h
++
++# Included from bits/dlfcn.h
++RTLD_LAZY = 0x00001
++RTLD_NOW = 0x00002
++RTLD_BINDING_MASK = 0x3
++RTLD_NOLOAD = 0x00004
++RTLD_DEEPBIND = 0x00008
++RTLD_GLOBAL = 0x00100
++RTLD_LOCAL = 0
++RTLD_NODELETE = 0x01000
++LM_ID_BASE = 0
++LM_ID_NEWLM = -1
+--- /dev/null
++++ b/Lib/plat-gnukfreebsd8/IN.py
+@@ -0,0 +1,809 @@
++# Generated by h2py from /usr/include/netinet/in.h
++_NETINET_IN_H = 1
++
++# Included from features.h
++_FEATURES_H = 1
++__USE_ANSI = 1
++__FAVOR_BSD = 1
++_ISOC99_SOURCE = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 200809L
++_XOPEN_SOURCE = 700
++_XOPEN_SOURCE_EXTENDED = 1
++_LARGEFILE64_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++_ATFILE_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++__USE_ISOC99 = 1
++__USE_ISOC95 = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 2
++_POSIX_C_SOURCE = 199506L
++_POSIX_C_SOURCE = 200112L
++_POSIX_C_SOURCE = 200809L
++__USE_POSIX_IMPLICITLY = 1
++__USE_POSIX = 1
++__USE_POSIX2 = 1
++__USE_POSIX199309 = 1
++__USE_POSIX199506 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN2K8 = 1
++_ATFILE_SOURCE = 1
++__USE_XOPEN = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_UNIX98 = 1
++_LARGEFILE_SOURCE = 1
++__USE_XOPEN2K8 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_FILE_OFFSET64 = 1
++__USE_MISC = 1
++__USE_BSD = 1
++__USE_SVID = 1
++__USE_ATFILE = 1
++__USE_GNU = 1
++__USE_REENTRANT = 1
++__USE_FORTIFY_LEVEL = 2
++__USE_FORTIFY_LEVEL = 1
++__USE_FORTIFY_LEVEL = 0
++
++# Included from bits/predefs.h
++__STDC_IEC_559__ = 1
++__STDC_IEC_559_COMPLEX__ = 1
++__STDC_ISO_10646__ = 200009L
++__GNU_LIBRARY__ = 6
++__GLIBC__ = 2
++__GLIBC_MINOR__ = 11
++__GLIBC_HAVE_LONG_LONG = 1
++
++# Included from sys/cdefs.h
++_SYS_CDEFS_H = 1
++def __NTH(fct): return fct
++
++def __NTH(fct): return fct
++
++def __P(args): return args
++
++def __PMT(args): return args
++
++def __STRING(x): return #x
++
++def __bos(ptr): return __builtin_object_size (ptr, __USE_FORTIFY_LEVEL > 1)
++
++def __bos0(ptr): return __builtin_object_size (ptr, 0)
++
++def __warnattr(msg): return __attribute__((__warning__ (msg)))
++
++__flexarr = []
++__flexarr = [0]
++__flexarr = []
++__flexarr = [1]
++def __ASMNAME(cname): return __ASMNAME2 (__USER_LABEL_PREFIX__, cname)
++
++def __attribute__(xyz): return  
++
++def __attribute_format_arg__(x): return __attribute__ ((__format_arg__ (x)))
++
++def __attribute_format_arg__(x): return  
++
++
++# Included from bits/wordsize.h
++__WORDSIZE = 32
++__LDBL_COMPAT = 1
++def __LDBL_REDIR_DECL(name): return \
++
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_EXTERN_INLINES = 1
++__USE_EXTERN_INLINES_IN_LIBC = 1
++
++# Included from gnu/stubs.h
++
++# Included from stdint.h
++_STDINT_H = 1
++
++# Included from bits/wchar.h
++_BITS_WCHAR_H = 1
++__WCHAR_MAX = (2147483647)
++__WCHAR_MIN = (-__WCHAR_MAX - 1)
++def __INT64_C(c): return c ## L
++
++def __UINT64_C(c): return c ## UL
++
++def __INT64_C(c): return c ## LL
++
++def __UINT64_C(c): return c ## ULL
++
++INT8_MIN = (-128)
++INT16_MIN = (-32767-1)
++INT32_MIN = (-2147483647-1)
++INT64_MIN = (-__INT64_C(9223372036854775807)-1)
++INT8_MAX = (127)
++INT16_MAX = (32767)
++INT32_MAX = (2147483647)
++INT64_MAX = (__INT64_C(9223372036854775807))
++UINT8_MAX = (255)
++UINT16_MAX = (65535)
++UINT64_MAX = (__UINT64_C(18446744073709551615))
++INT_LEAST8_MIN = (-128)
++INT_LEAST16_MIN = (-32767-1)
++INT_LEAST32_MIN = (-2147483647-1)
++INT_LEAST64_MIN = (-__INT64_C(9223372036854775807)-1)
++INT_LEAST8_MAX = (127)
++INT_LEAST16_MAX = (32767)
++INT_LEAST32_MAX = (2147483647)
++INT_LEAST64_MAX = (__INT64_C(9223372036854775807))
++UINT_LEAST8_MAX = (255)
++UINT_LEAST16_MAX = (65535)
++UINT_LEAST64_MAX = (__UINT64_C(18446744073709551615))
++INT_FAST8_MIN = (-128)
++INT_FAST16_MIN = (-9223372036854775807L-1)
++INT_FAST32_MIN = (-9223372036854775807L-1)
++INT_FAST16_MIN = (-2147483647-1)
++INT_FAST32_MIN = (-2147483647-1)
++INT_FAST64_MIN = (-__INT64_C(9223372036854775807)-1)
++INT_FAST8_MAX = (127)
++INT_FAST16_MAX = (9223372036854775807L)
++INT_FAST32_MAX = (9223372036854775807L)
++INT_FAST16_MAX = (2147483647)
++INT_FAST32_MAX = (2147483647)
++INT_FAST64_MAX = (__INT64_C(9223372036854775807))
++UINT_FAST8_MAX = (255)
++UINT_FAST64_MAX = (__UINT64_C(18446744073709551615))
++INTPTR_MIN = (-9223372036854775807L-1)
++INTPTR_MAX = (9223372036854775807L)
++INTPTR_MIN = (-2147483647-1)
++INTPTR_MAX = (2147483647)
++INTMAX_MIN = (-__INT64_C(9223372036854775807)-1)
++INTMAX_MAX = (__INT64_C(9223372036854775807))
++UINTMAX_MAX = (__UINT64_C(18446744073709551615))
++PTRDIFF_MIN = (-9223372036854775807L-1)
++PTRDIFF_MAX = (9223372036854775807L)
++PTRDIFF_MIN = (-2147483647-1)
++PTRDIFF_MAX = (2147483647)
++SIG_ATOMIC_MIN = (-2147483647-1)
++SIG_ATOMIC_MAX = (2147483647)
++WCHAR_MIN = __WCHAR_MIN
++WCHAR_MAX = __WCHAR_MAX
++def INT8_C(c): return c
++
++def INT16_C(c): return c
++
++def INT32_C(c): return c
++
++def INT64_C(c): return c ## L
++
++def INT64_C(c): return c ## LL
++
++def UINT8_C(c): return c
++
++def UINT16_C(c): return c
++
++def UINT32_C(c): return c ## U
++
++def UINT64_C(c): return c ## UL
++
++def UINT64_C(c): return c ## ULL
++
++def INTMAX_C(c): return c ## L
++
++def UINTMAX_C(c): return c ## UL
++
++def INTMAX_C(c): return c ## LL
++
++def UINTMAX_C(c): return c ## ULL
++
++
++# Included from sys/socket.h
++_SYS_SOCKET_H = 1
++
++# Included from sys/uio.h
++_SYS_UIO_H = 1
++from TYPES import *
++
++# Included from bits/uio.h
++_BITS_UIO_H = 1
++from TYPES import *
++UIO_MAXIOV = 1024
++
++# Included from bits/sigset.h
++_SIGSET_H_types = 1
++_SIGSET_H_fns = 1
++def __sigword(sig): return (((sig) - 1) >> 5)
++
++def __sigemptyset(set): return \
++
++def __sigfillset(set): return \
++
++def __sigisemptyset(set): return \
++
++
++# Included from bits/socket.h
++__BITS_SOCKET_H = 1
++
++# Included from limits.h
++_LIBC_LIMITS_H_ = 1
++MB_LEN_MAX = 16
++_LIMITS_H = 1
++CHAR_BIT = 8
++SCHAR_MIN = (-128)
++SCHAR_MAX = 127
++UCHAR_MAX = 255
++CHAR_MIN = 0
++CHAR_MAX = UCHAR_MAX
++CHAR_MIN = SCHAR_MIN
++CHAR_MAX = SCHAR_MAX
++SHRT_MIN = (-32768)
++SHRT_MAX = 32767
++USHRT_MAX = 65535
++INT_MAX = 2147483647
++LONG_MAX = 9223372036854775807L
++LONG_MAX = 2147483647L
++LONG_MIN = (-LONG_MAX - 1L)
++
++# Included from bits/posix1_lim.h
++_BITS_POSIX1_LIM_H = 1
++_POSIX_AIO_LISTIO_MAX = 2
++_POSIX_AIO_MAX = 1
++_POSIX_ARG_MAX = 4096
++_POSIX_CHILD_MAX = 25
++_POSIX_CHILD_MAX = 6
++_POSIX_DELAYTIMER_MAX = 32
++_POSIX_HOST_NAME_MAX = 255
++_POSIX_LINK_MAX = 8
++_POSIX_LOGIN_NAME_MAX = 9
++_POSIX_MAX_CANON = 255
++_POSIX_MAX_INPUT = 255
++_POSIX_MQ_OPEN_MAX = 8
++_POSIX_MQ_PRIO_MAX = 32
++_POSIX_NAME_MAX = 14
++_POSIX_NGROUPS_MAX = 8
++_POSIX_NGROUPS_MAX = 0
++_POSIX_OPEN_MAX = 20
++_POSIX_OPEN_MAX = 16
++_POSIX_FD_SETSIZE = _POSIX_OPEN_MAX
++_POSIX_PATH_MAX = 256
++_POSIX_PIPE_BUF = 512
++_POSIX_RE_DUP_MAX = 255
++_POSIX_RTSIG_MAX = 8
++_POSIX_SEM_NSEMS_MAX = 256
++_POSIX_SEM_VALUE_MAX = 32767
++_POSIX_SIGQUEUE_MAX = 32
++_POSIX_SSIZE_MAX = 32767
++_POSIX_STREAM_MAX = 8
++_POSIX_SYMLINK_MAX = 255
++_POSIX_SYMLOOP_MAX = 8
++_POSIX_TIMER_MAX = 32
++_POSIX_TTY_NAME_MAX = 9
++_POSIX_TZNAME_MAX = 6
++_POSIX_QLIMIT = 1
++_POSIX_HIWAT = _POSIX_PIPE_BUF
++_POSIX_UIO_MAXIOV = 16
++_POSIX_CLOCKRES_MIN = 20000000
++
++# Included from bits/local_lim.h
++
++# Included from sys/syslimits.h
++ARG_MAX = 262144
++CHILD_MAX = 40
++LINK_MAX = 32767
++MAX_CANON = 255
++MAX_INPUT = 255
++NAME_MAX = 255
++NGROUPS_MAX = 1023
++OPEN_MAX = 64
++PATH_MAX = 1024
++PIPE_BUF = 512
++IOV_MAX = 1024
++_POSIX_THREAD_KEYS_MAX = 128
++PTHREAD_KEYS_MAX = 1024
++_POSIX_THREAD_DESTRUCTOR_ITERATIONS = 4
++PTHREAD_DESTRUCTOR_ITERATIONS = _POSIX_THREAD_DESTRUCTOR_ITERATIONS
++_POSIX_THREAD_THREADS_MAX = 64
++PTHREAD_THREADS_MAX = 1024
++AIO_PRIO_DELTA_MAX = 20
++PTHREAD_STACK_MIN = 16384
++TIMER_MAX = 256
++DELAYTIMER_MAX = 2147483647
++SSIZE_MAX = LONG_MAX
++NGROUPS_MAX = 8
++
++# Included from bits/posix2_lim.h
++_BITS_POSIX2_LIM_H = 1
++_POSIX2_BC_BASE_MAX = 99
++_POSIX2_BC_DIM_MAX = 2048
++_POSIX2_BC_SCALE_MAX = 99
++_POSIX2_BC_STRING_MAX = 1000
++_POSIX2_COLL_WEIGHTS_MAX = 2
++_POSIX2_EXPR_NEST_MAX = 32
++_POSIX2_LINE_MAX = 2048
++_POSIX2_RE_DUP_MAX = 255
++_POSIX2_CHARCLASS_NAME_MAX = 14
++BC_BASE_MAX = _POSIX2_BC_BASE_MAX
++BC_DIM_MAX = _POSIX2_BC_DIM_MAX
++BC_SCALE_MAX = _POSIX2_BC_SCALE_MAX
++BC_STRING_MAX = _POSIX2_BC_STRING_MAX
++COLL_WEIGHTS_MAX = 255
++EXPR_NEST_MAX = _POSIX2_EXPR_NEST_MAX
++LINE_MAX = _POSIX2_LINE_MAX
++CHARCLASS_NAME_MAX = 2048
++RE_DUP_MAX = (0x7fff)
++
++# Included from bits/xopen_lim.h
++_XOPEN_LIM_H = 1
++
++# Included from bits/stdio_lim.h
++L_tmpnam = 20
++TMP_MAX = 238328
++FILENAME_MAX = 1024
++L_ctermid = 9
++L_cuserid = 9
++FOPEN_MAX = 64
++IOV_MAX = 1024
++_XOPEN_IOV_MAX = _POSIX_UIO_MAXIOV
++NL_ARGMAX = _POSIX_ARG_MAX
++NL_LANGMAX = _POSIX2_LINE_MAX
++NL_MSGMAX = INT_MAX
++NL_NMAX = INT_MAX
++NL_SETMAX = INT_MAX
++NL_TEXTMAX = INT_MAX
++NZERO = 20
++WORD_BIT = 16
++WORD_BIT = 32
++WORD_BIT = 64
++WORD_BIT = 16
++WORD_BIT = 32
++WORD_BIT = 64
++WORD_BIT = 32
++LONG_BIT = 32
++LONG_BIT = 64
++LONG_BIT = 32
++LONG_BIT = 64
++LONG_BIT = 64
++LONG_BIT = 32
++
++# Included from bits/types.h
++_BITS_TYPES_H = 1
++__S32_TYPE = int
++__SWORD_TYPE = int
++__SLONG32_TYPE = int
++
++# Included from bits/typesizes.h
++_BITS_TYPESIZES_H = 1
++__PID_T_TYPE = __S32_TYPE
++__CLOCK_T_TYPE = __S32_TYPE
++__SWBLK_T_TYPE = __S32_TYPE
++__CLOCKID_T_TYPE = __S32_TYPE
++__TIMER_T_TYPE = __S32_TYPE
++__SSIZE_T_TYPE = __SWORD_TYPE
++__FD_SETSIZE = 1024
++PF_UNSPEC = 0
++PF_LOCAL = 1
++PF_UNIX = PF_LOCAL
++PF_FILE = PF_LOCAL
++PF_INET = 2
++PF_IMPLINK = 3
++PF_PUP = 4
++PF_CHAOS = 5
++PF_NS = 6
++PF_ISO = 7
++PF_OSI = PF_ISO
++PF_ECMA = 8
++PF_DATAKIT = 9
++PF_CCITT = 10
++PF_SNA = 11
++PF_DECnet = 12
++PF_DLI = 13
++PF_LAT = 14
++PF_HYLINK = 15
++PF_APPLETALK = 16
++PF_ROUTE = 17
++PF_LINK = 18
++PF_XTP = 19
++PF_COIP = 20
++PF_CNT = 21
++PF_RTIP = 22
++PF_IPX = 23
++PF_SIP = 24
++PF_PIP = 25
++PF_ISDN = 26
++PF_KEY = 27
++PF_INET6 = 28
++PF_NATM = 29
++PF_ATM = 30
++PF_HDRCMPLT = 31
++PF_NETGRAPH = 32
++PF_MAX = 33
++AF_UNSPEC = PF_UNSPEC
++AF_LOCAL = PF_LOCAL
++AF_UNIX = PF_UNIX
++AF_FILE = PF_FILE
++AF_INET = PF_INET
++AF_IMPLINK = PF_IMPLINK
++AF_PUP = PF_PUP
++AF_CHAOS = PF_CHAOS
++AF_NS = PF_NS
++AF_ISO = PF_ISO
++AF_OSI = PF_OSI
++AF_ECMA = PF_ECMA
++AF_DATAKIT = PF_DATAKIT
++AF_CCITT = PF_CCITT
++AF_SNA = PF_SNA
++AF_DECnet = PF_DECnet
++AF_DLI = PF_DLI
++AF_LAT = PF_LAT
++AF_HYLINK = PF_HYLINK
++AF_APPLETALK = PF_APPLETALK
++AF_ROUTE = PF_ROUTE
++AF_LINK = PF_LINK
++pseudo_AF_XTP = PF_XTP
++AF_COIP = PF_COIP
++AF_CNT = PF_CNT
++pseudo_AF_RTIP = PF_RTIP
++AF_IPX = PF_IPX
++AF_SIP = PF_SIP
++pseudo_AF_PIP = PF_PIP
++AF_ISDN = PF_ISDN
++AF_E164 = AF_ISDN
++pseudo_AF_KEY = PF_KEY
++AF_INET6 = PF_INET6
++AF_NATM = PF_NATM
++AF_ATM = PF_ATM
++pseudo_AF_HDRCMPLT = PF_HDRCMPLT
++AF_NETGRAPH = PF_NETGRAPH
++AF_MAX = PF_MAX
++SOMAXCONN = 128
++
++# Included from bits/sockaddr.h
++_BITS_SOCKADDR_H = 1
++def __SOCKADDR_COMMON(sa_prefix): return \
++
++_HAVE_SA_LEN = 1
++_SS_SIZE = 128
++def CMSG_FIRSTHDR(mhdr): return \
++
++CMGROUP_MAX = 16
++SOL_SOCKET = 0xffff
++LOCAL_PEERCRED = 0x001
++LOCAL_CREDS = 0x002
++LOCAL_CONNWAIT = 0x004
++
++# Included from bits/socket2.h
++def IN_CLASSA(a): return ((((in_addr_t)(a)) & (-2147483648)) == 0)
++
++IN_CLASSA_NET = (-16777216)
++IN_CLASSA_NSHIFT = 24
++IN_CLASSA_HOST = ((-1) & ~IN_CLASSA_NET)
++IN_CLASSA_MAX = 128
++def IN_CLASSB(a): return ((((in_addr_t)(a)) & (-1073741824)) == (-2147483648))
++
++IN_CLASSB_NET = (-65536)
++IN_CLASSB_NSHIFT = 16
++IN_CLASSB_HOST = ((-1) & ~IN_CLASSB_NET)
++IN_CLASSB_MAX = 65536
++def IN_CLASSC(a): return ((((in_addr_t)(a)) & (-536870912)) == (-1073741824))
++
++IN_CLASSC_NET = (-256)
++IN_CLASSC_NSHIFT = 8
++IN_CLASSC_HOST = ((-1) & ~IN_CLASSC_NET)
++def IN_CLASSD(a): return ((((in_addr_t)(a)) & (-268435456)) == (-536870912))
++
++def IN_MULTICAST(a): return IN_CLASSD(a)
++
++def IN_EXPERIMENTAL(a): return ((((in_addr_t)(a)) & (-536870912)) == (-536870912))
++
++def IN_BADCLASS(a): return ((((in_addr_t)(a)) & (-268435456)) == (-268435456))
++
++IN_LOOPBACKNET = 127
++INET_ADDRSTRLEN = 16
++INET6_ADDRSTRLEN = 46
++
++# Included from bits/in.h
++IMPLINK_IP = 155
++IMPLINK_LOWEXPER = 156
++IMPLINK_HIGHEXPER = 158
++IPPROTO_DIVERT = 258
++SOL_IP = 0
++IP_OPTIONS = 1
++IP_HDRINCL = 2
++IP_TOS = 3
++IP_TTL = 4
++IP_RECVOPTS = 5
++IP_RECVRETOPTS = 6
++IP_RECVDSTADDR = 7
++IP_SENDSRCADDR = IP_RECVDSTADDR
++IP_RETOPTS = 8
++IP_MULTICAST_IF = 9
++IP_MULTICAST_TTL = 10
++IP_MULTICAST_LOOP = 11
++IP_ADD_MEMBERSHIP = 12
++IP_DROP_MEMBERSHIP = 13
++IP_MULTICAST_VIF = 14
++IP_RSVP_ON = 15
++IP_RSVP_OFF = 16
++IP_RSVP_VIF_ON = 17
++IP_RSVP_VIF_OFF = 18
++IP_PORTRANGE = 19
++IP_RECVIF = 20
++IP_IPSEC_POLICY = 21
++IP_FAITH = 22
++IP_ONESBCAST = 23
++IP_NONLOCALOK = 24
++IP_FW_TABLE_ADD = 40
++IP_FW_TABLE_DEL = 41
++IP_FW_TABLE_FLUSH = 42
++IP_FW_TABLE_GETSIZE = 43
++IP_FW_TABLE_LIST = 44
++IP_FW_ADD = 50
++IP_FW_DEL = 51
++IP_FW_FLUSH = 52
++IP_FW_ZERO = 53
++IP_FW_GET = 54
++IP_FW_RESETLOG = 55
++IP_FW_NAT_CFG = 56
++IP_FW_NAT_DEL = 57
++IP_FW_NAT_GET_CONFIG = 58
++IP_FW_NAT_GET_LOG = 59
++IP_DUMMYNET_CONFIGURE = 60
++IP_DUMMYNET_DEL = 61
++IP_DUMMYNET_FLUSH = 62
++IP_DUMMYNET_GET = 64
++IP_RECVTTL = 65
++IP_MINTTL = 66
++IP_DONTFRAG = 67
++IP_ADD_SOURCE_MEMBERSHIP = 70
++IP_DROP_SOURCE_MEMBERSHIP = 71
++IP_BLOCK_SOURCE = 72
++IP_UNBLOCK_SOURCE = 73
++IP_MSFILTER = 74
++MCAST_JOIN_GROUP = 80
++MCAST_LEAVE_GROUP = 81
++MCAST_JOIN_SOURCE_GROUP = 82
++MCAST_LEAVE_SOURCE_GROUP = 83
++MCAST_BLOCK_SOURCE = 84
++MCAST_UNBLOCK_SOURCE = 85
++IP_DEFAULT_MULTICAST_TTL = 1
++IP_DEFAULT_MULTICAST_LOOP = 1
++IP_MIN_MEMBERSHIPS = 31
++IP_MAX_MEMBERSHIPS = 4095
++IP_MAX_SOURCE_FILTER = 1024
++MCAST_UNDEFINED = 0
++MCAST_INCLUDE = 1
++MCAST_EXCLUDE = 2
++IP_PORTRANGE_DEFAULT = 0
++IP_PORTRANGE_HIGH = 1
++IP_PORTRANGE_LOW = 2
++IPCTL_FORWARDING = 1
++IPCTL_SENDREDIRECTS = 2
++IPCTL_DEFTTL = 3
++IPCTL_DEFMTU = 4
++IPCTL_RTEXPIRE = 5
++IPCTL_RTMINEXPIRE = 6
++IPCTL_RTMAXCACHE = 7
++IPCTL_SOURCEROUTE = 8
++IPCTL_DIRECTEDBROADCAST = 9
++IPCTL_INTRQMAXLEN = 10
++IPCTL_INTRQDROPS = 11
++IPCTL_STATS = 12
++IPCTL_ACCEPTSOURCEROUTE = 13
++IPCTL_FASTFORWARDING = 14
++IPCTL_KEEPFAITH = 15
++IPCTL_GIF_TTL = 16
++IPCTL_MAXID = 17
++IPV6_SOCKOPT_RESERVED1 = 3
++IPV6_UNICAST_HOPS = 4
++IPV6_MULTICAST_IF = 9
++IPV6_MULTICAST_HOPS = 10
++IPV6_MULTICAST_LOOP = 11
++IPV6_JOIN_GROUP = 12
++IPV6_LEAVE_GROUP = 13
++IPV6_PORTRANGE = 14
++ICMP6_FILTER = 18
++IPV6_CHECKSUM = 26
++IPV6_V6ONLY = 27
++IPV6_IPSEC_POLICY = 28
++IPV6_FAITH = 29
++IPV6_FW_ADD = 30
++IPV6_FW_DEL = 31
++IPV6_FW_FLUSH = 32
++IPV6_FW_ZERO = 33
++IPV6_FW_GET = 34
++IPV6_RTHDRDSTOPTS = 35
++IPV6_RECVPKTINFO = 36
++IPV6_RECVHOPLIMIT = 37
++IPV6_RECVRTHDR = 38
++IPV6_RECVHOPOPTS = 39
++IPV6_RECVDSTOPTS = 40
++IPV6_USE_MIN_MTU = 42
++IPV6_RECVPATHMTU = 43
++IPV6_PATHMTU = 44
++IPV6_PKTINFO = 46
++IPV6_HOPLIMIT = 47
++IPV6_NEXTHOP = 48
++IPV6_HOPOPTS = 49
++IPV6_DSTOPTS = 50
++IPV6_RTHDR = 51
++IPV6_RECVTCLASS = 57
++IPV6_AUTOFLOWLABEL = 59
++IPV6_TCLASS = 61
++IPV6_DONTFRAG = 62
++IPV6_PREFER_TEMPADDR = 63
++IPV6_ADD_MEMBERSHIP = IPV6_JOIN_GROUP
++IPV6_DROP_MEMBERSHIP = IPV6_LEAVE_GROUP
++IPV6_RXHOPOPTS = IPV6_HOPOPTS
++IPV6_RXDSTOPTS = IPV6_DSTOPTS
++SOL_IPV6 = 41
++SOL_ICMPV6 = 58
++IPV6_DEFAULT_MULTICAST_HOPS = 1
++IPV6_DEFAULT_MULTICAST_LOOP = 1
++IPV6_PORTRANGE_DEFAULT = 0
++IPV6_PORTRANGE_HIGH = 1
++IPV6_PORTRANGE_LOW = 2
++IPV6_RTHDR_LOOSE = 0
++IPV6_RTHDR_STRICT = 1
++IPV6_RTHDR_TYPE_0 = 0
++IPV6CTL_FORWARDING = 1
++IPV6CTL_SENDREDIRECTS = 2
++IPV6CTL_DEFHLIM = 3
++IPV6CTL_FORWSRCRT = 5
++IPV6CTL_STATS = 6
++IPV6CTL_MRTSTATS = 7
++IPV6CTL_MRTPROTO = 8
++IPV6CTL_MAXFRAGPACKETS = 9
++IPV6CTL_SOURCECHECK = 10
++IPV6CTL_SOURCECHECK_LOGINT = 11
++IPV6CTL_ACCEPT_RTADV = 12
++IPV6CTL_KEEPFAITH = 13
++IPV6CTL_LOG_INTERVAL = 14
++IPV6CTL_HDRNESTLIMIT = 15
++IPV6CTL_DAD_COUNT = 16
++IPV6CTL_AUTO_FLOWLABEL = 17
++IPV6CTL_DEFMCASTHLIM = 18
++IPV6CTL_GIF_HLIM = 19
++IPV6CTL_KAME_VERSION = 20
++IPV6CTL_USE_DEPRECATED = 21
++IPV6CTL_RR_PRUNE = 22
++IPV6CTL_V6ONLY = 24
++IPV6CTL_RTEXPIRE = 25
++IPV6CTL_RTMINEXPIRE = 26
++IPV6CTL_RTMAXCACHE = 27
++IPV6CTL_USETEMPADDR = 32
++IPV6CTL_TEMPPLTIME = 33
++IPV6CTL_TEMPVLTIME = 34
++IPV6CTL_AUTO_LINKLOCAL = 35
++IPV6CTL_RIP6STATS = 36
++IPV6CTL_PREFER_TEMPADDR = 37
++IPV6CTL_ADDRCTLPOLICY = 38
++IPV6CTL_USE_DEFAULTZONE = 39
++IPV6CTL_MAXFRAGS = 41
++IPV6CTL_MCAST_PMTU = 44
++IPV6CTL_STEALTH = 45
++ICMPV6CTL_ND6_ONLINKNSRFC4861 = 47
++IPV6CTL_MAXID = 48
++
++# Included from endian.h
++_ENDIAN_H = 1
++__LITTLE_ENDIAN = 1234
++__BIG_ENDIAN = 4321
++__PDP_ENDIAN = 3412
++
++# Included from bits/endian.h
++__BYTE_ORDER = __LITTLE_ENDIAN
++__FLOAT_WORD_ORDER = __BYTE_ORDER
++LITTLE_ENDIAN = __LITTLE_ENDIAN
++BIG_ENDIAN = __BIG_ENDIAN
++PDP_ENDIAN = __PDP_ENDIAN
++BYTE_ORDER = __BYTE_ORDER
++
++# Included from bits/byteswap.h
++_BITS_BYTESWAP_H = 1
++def __bswap_constant_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_constant_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_constant_64(x): return \
++
++def __bswap_64(x): return \
++
++def htobe16(x): return __bswap_16 (x)
++
++def htole16(x): return (x)
++
++def be16toh(x): return __bswap_16 (x)
++
++def le16toh(x): return (x)
++
++def htobe32(x): return __bswap_32 (x)
++
++def htole32(x): return (x)
++
++def be32toh(x): return __bswap_32 (x)
++
++def le32toh(x): return (x)
++
++def htobe64(x): return __bswap_64 (x)
++
++def htole64(x): return (x)
++
++def be64toh(x): return __bswap_64 (x)
++
++def le64toh(x): return (x)
++
++def htobe16(x): return (x)
++
++def htole16(x): return __bswap_16 (x)
++
++def be16toh(x): return (x)
++
++def le16toh(x): return __bswap_16 (x)
++
++def htobe32(x): return (x)
++
++def htole32(x): return __bswap_32 (x)
++
++def be32toh(x): return (x)
++
++def le32toh(x): return __bswap_32 (x)
++
++def htobe64(x): return (x)
++
++def htole64(x): return __bswap_64 (x)
++
++def be64toh(x): return (x)
++
++def le64toh(x): return __bswap_64 (x)
++
++def ntohl(x): return (x)
++
++def ntohs(x): return (x)
++
++def htonl(x): return (x)
++
++def htons(x): return (x)
++
++def ntohl(x): return __bswap_32 (x)
++
++def ntohs(x): return __bswap_16 (x)
++
++def htonl(x): return __bswap_32 (x)
++
++def htons(x): return __bswap_16 (x)
++
++def IN6_IS_ADDR_UNSPECIFIED(a): return \
++
++def IN6_IS_ADDR_LOOPBACK(a): return \
++
++def IN6_IS_ADDR_LINKLOCAL(a): return \
++
++def IN6_IS_ADDR_SITELOCAL(a): return \
++
++def IN6_IS_ADDR_V4MAPPED(a): return \
++
++def IN6_IS_ADDR_V4COMPAT(a): return \
++
++def IN6_IS_ADDR_MC_NODELOCAL(a): return \
++
++def IN6_IS_ADDR_MC_LINKLOCAL(a): return \
++
++def IN6_IS_ADDR_MC_SITELOCAL(a): return \
++
++def IN6_IS_ADDR_MC_ORGLOCAL(a): return \
++
++def IN6_IS_ADDR_MC_GLOBAL(a): return \
++
+--- /dev/null
++++ b/Lib/plat-gnukfreebsd8/TYPES.py
+@@ -0,0 +1,303 @@
++# Generated by h2py from /usr/include/sys/types.h
++_SYS_TYPES_H = 1
++
++# Included from features.h
++_FEATURES_H = 1
++__USE_ANSI = 1
++__FAVOR_BSD = 1
++_ISOC99_SOURCE = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 200809L
++_XOPEN_SOURCE = 700
++_XOPEN_SOURCE_EXTENDED = 1
++_LARGEFILE64_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++_ATFILE_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++__USE_ISOC99 = 1
++__USE_ISOC95 = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 2
++_POSIX_C_SOURCE = 199506L
++_POSIX_C_SOURCE = 200112L
++_POSIX_C_SOURCE = 200809L
++__USE_POSIX_IMPLICITLY = 1
++__USE_POSIX = 1
++__USE_POSIX2 = 1
++__USE_POSIX199309 = 1
++__USE_POSIX199506 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN2K8 = 1
++_ATFILE_SOURCE = 1
++__USE_XOPEN = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_UNIX98 = 1
++_LARGEFILE_SOURCE = 1
++__USE_XOPEN2K8 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_FILE_OFFSET64 = 1
++__USE_MISC = 1
++__USE_BSD = 1
++__USE_SVID = 1
++__USE_ATFILE = 1
++__USE_GNU = 1
++__USE_REENTRANT = 1
++__USE_FORTIFY_LEVEL = 2
++__USE_FORTIFY_LEVEL = 1
++__USE_FORTIFY_LEVEL = 0
++
++# Included from bits/predefs.h
++__STDC_IEC_559__ = 1
++__STDC_IEC_559_COMPLEX__ = 1
++__STDC_ISO_10646__ = 200009L
++__GNU_LIBRARY__ = 6
++__GLIBC__ = 2
++__GLIBC_MINOR__ = 11
++__GLIBC_HAVE_LONG_LONG = 1
++
++# Included from sys/cdefs.h
++_SYS_CDEFS_H = 1
++def __NTH(fct): return fct
++
++def __NTH(fct): return fct
++
++def __P(args): return args
++
++def __PMT(args): return args
++
++def __STRING(x): return #x
++
++def __bos(ptr): return __builtin_object_size (ptr, __USE_FORTIFY_LEVEL > 1)
++
++def __bos0(ptr): return __builtin_object_size (ptr, 0)
++
++def __warnattr(msg): return __attribute__((__warning__ (msg)))
++
++__flexarr = []
++__flexarr = [0]
++__flexarr = []
++__flexarr = [1]
++def __ASMNAME(cname): return __ASMNAME2 (__USER_LABEL_PREFIX__, cname)
++
++def __attribute__(xyz): return  
++
++def __attribute_format_arg__(x): return __attribute__ ((__format_arg__ (x)))
++
++def __attribute_format_arg__(x): return  
++
++
++# Included from bits/wordsize.h
++__WORDSIZE = 32
++__LDBL_COMPAT = 1
++def __LDBL_REDIR_DECL(name): return \
++
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_EXTERN_INLINES = 1
++__USE_EXTERN_INLINES_IN_LIBC = 1
++
++# Included from gnu/stubs.h
++
++# Included from bits/types.h
++_BITS_TYPES_H = 1
++__S32_TYPE = int
++__SWORD_TYPE = int
++__SLONG32_TYPE = int
++
++# Included from bits/typesizes.h
++_BITS_TYPESIZES_H = 1
++__PID_T_TYPE = __S32_TYPE
++__CLOCK_T_TYPE = __S32_TYPE
++__SWBLK_T_TYPE = __S32_TYPE
++__CLOCKID_T_TYPE = __S32_TYPE
++__TIMER_T_TYPE = __S32_TYPE
++__SSIZE_T_TYPE = __SWORD_TYPE
++__FD_SETSIZE = 1024
++
++# Included from time.h
++_TIME_H = 1
++
++# Included from bits/time.h
++_BITS_TIME_H = 1
++CLOCKS_PER_SEC = 1000000l
++CLK_TCK = 128
++CLOCK_REALTIME = 0
++CLOCK_PROCESS_CPUTIME_ID = 2
++CLOCK_THREAD_CPUTIME_ID = 3
++CLOCK_MONOTONIC = 4
++CLOCK_VIRTUAL = 1
++CLOCK_PROF = 2
++CLOCK_UPTIME = 5
++CLOCK_UPTIME_PRECISE = 7
++CLOCK_UPTIME_FAST = 8
++CLOCK_REALTIME_PRECISE = 9
++CLOCK_REALTIME_FAST = 10
++CLOCK_MONOTONIC_PRECISE = 11
++CLOCK_MONOTONIC_FAST = 12
++CLOCK_SECOND = 13
++TIMER_RELTIME = 0
++TIMER_ABSTIME = 1
++_STRUCT_TIMEVAL = 1
++CLK_TCK = CLOCKS_PER_SEC
++__clock_t_defined = 1
++__time_t_defined = 1
++__clockid_t_defined = 1
++__timer_t_defined = 1
++__timespec_defined = 1
++
++# Included from xlocale.h
++_XLOCALE_H = 1
++def __isleap(year): return \
++
++__BIT_TYPES_DEFINED__ = 1
++
++# Included from endian.h
++_ENDIAN_H = 1
++__LITTLE_ENDIAN = 1234
++__BIG_ENDIAN = 4321
++__PDP_ENDIAN = 3412
++
++# Included from bits/endian.h
++__BYTE_ORDER = __LITTLE_ENDIAN
++__FLOAT_WORD_ORDER = __BYTE_ORDER
++LITTLE_ENDIAN = __LITTLE_ENDIAN
++BIG_ENDIAN = __BIG_ENDIAN
++PDP_ENDIAN = __PDP_ENDIAN
++BYTE_ORDER = __BYTE_ORDER
++
++# Included from bits/byteswap.h
++_BITS_BYTESWAP_H = 1
++def __bswap_constant_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_16(x): return \
++
++def __bswap_constant_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_32(x): return \
++
++def __bswap_constant_64(x): return \
++
++def __bswap_64(x): return \
++
++def htobe16(x): return __bswap_16 (x)
++
++def htole16(x): return (x)
++
++def be16toh(x): return __bswap_16 (x)
++
++def le16toh(x): return (x)
++
++def htobe32(x): return __bswap_32 (x)
++
++def htole32(x): return (x)
++
++def be32toh(x): return __bswap_32 (x)
++
++def le32toh(x): return (x)
++
++def htobe64(x): return __bswap_64 (x)
++
++def htole64(x): return (x)
++
++def be64toh(x): return __bswap_64 (x)
++
++def le64toh(x): return (x)
++
++def htobe16(x): return (x)
++
++def htole16(x): return __bswap_16 (x)
++
++def be16toh(x): return (x)
++
++def le16toh(x): return __bswap_16 (x)
++
++def htobe32(x): return (x)
++
++def htole32(x): return __bswap_32 (x)
++
++def be32toh(x): return (x)
++
++def le32toh(x): return __bswap_32 (x)
++
++def htobe64(x): return (x)
++
++def htole64(x): return __bswap_64 (x)
++
++def be64toh(x): return (x)
++
++def le64toh(x): return __bswap_64 (x)
++
++
++# Included from sys/select.h
++_SYS_SELECT_H = 1
++
++# Included from bits/select.h
++def __FD_ZERO(fdsp): return \
++
++def __FD_ZERO(set): return \
++
++
++# Included from bits/sigset.h
++_SIGSET_H_types = 1
++_SIGSET_H_fns = 1
++def __sigword(sig): return (((sig) - 1) >> 5)
++
++def __sigemptyset(set): return \
++
++def __sigfillset(set): return \
++
++def __sigisemptyset(set): return \
++
++def __FDELT(d): return ((d) / __NFDBITS)
++
++FD_SETSIZE = __FD_SETSIZE
++def FD_ZERO(fdsetp): return __FD_ZERO (fdsetp)
++
++
++# Included from sys/sysmacros.h
++_SYS_SYSMACROS_H = 1
++def minor(dev): return ((int)((dev) & (-65281)))
++
++def gnu_dev_major(dev): return major (dev)
++
++def gnu_dev_minor(dev): return minor (dev)
++
++
++# Included from bits/pthreadtypes.h
++_BITS_PTHREADTYPES_H = 1
++
++# Included from bits/sched.h
++SCHED_OTHER = 2
++SCHED_FIFO = 1
++SCHED_RR = 3
++CSIGNAL = 0x000000ff
++CLONE_VM = 0x00000100
++CLONE_FS = 0x00000200
++CLONE_FILES = 0x00000400
++CLONE_SIGHAND = 0x00000800
++CLONE_PTRACE = 0x00002000
++CLONE_VFORK = 0x00004000
++CLONE_SYSVSEM = 0x00040000
++__defined_schedparam = 1
++__CPU_SETSIZE = 128
++def __CPUELT(cpu): return ((cpu) / __NCPUBITS)
++
++def __CPU_ALLOC_SIZE(count): return \
++
++def __CPU_ALLOC(count): return __sched_cpualloc (count)
++
++def __CPU_FREE(cpuset): return __sched_cpufree (cpuset)
++
+--- /dev/null
++++ b/Lib/plat-gnukfreebsd8/DLFCN.py
+@@ -0,0 +1,118 @@
++# Generated by h2py from /usr/include/dlfcn.h
++_DLFCN_H = 1
++
++# Included from features.h
++_FEATURES_H = 1
++__USE_ANSI = 1
++__FAVOR_BSD = 1
++_ISOC99_SOURCE = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 200809L
++_XOPEN_SOURCE = 700
++_XOPEN_SOURCE_EXTENDED = 1
++_LARGEFILE64_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++_ATFILE_SOURCE = 1
++_BSD_SOURCE = 1
++_SVID_SOURCE = 1
++__USE_ISOC99 = 1
++__USE_ISOC95 = 1
++_POSIX_SOURCE = 1
++_POSIX_C_SOURCE = 2
++_POSIX_C_SOURCE = 199506L
++_POSIX_C_SOURCE = 200112L
++_POSIX_C_SOURCE = 200809L
++__USE_POSIX_IMPLICITLY = 1
++__USE_POSIX = 1
++__USE_POSIX2 = 1
++__USE_POSIX199309 = 1
++__USE_POSIX199506 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN2K8 = 1
++_ATFILE_SOURCE = 1
++__USE_XOPEN = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_UNIX98 = 1
++_LARGEFILE_SOURCE = 1
++__USE_XOPEN2K8 = 1
++__USE_XOPEN2K = 1
++__USE_ISOC99 = 1
++__USE_XOPEN_EXTENDED = 1
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_FILE_OFFSET64 = 1
++__USE_MISC = 1
++__USE_BSD = 1
++__USE_SVID = 1
++__USE_ATFILE = 1
++__USE_GNU = 1
++__USE_REENTRANT = 1
++__USE_FORTIFY_LEVEL = 2
++__USE_FORTIFY_LEVEL = 1
++__USE_FORTIFY_LEVEL = 0
++
++# Included from bits/predefs.h
++__STDC_IEC_559__ = 1
++__STDC_IEC_559_COMPLEX__ = 1
++__STDC_ISO_10646__ = 200009L
++__GNU_LIBRARY__ = 6
++__GLIBC__ = 2
++__GLIBC_MINOR__ = 11
++__GLIBC_HAVE_LONG_LONG = 1
++
++# Included from sys/cdefs.h
++_SYS_CDEFS_H = 1
++def __NTH(fct): return fct
++
++def __NTH(fct): return fct
++
++def __P(args): return args
++
++def __PMT(args): return args
++
++def __STRING(x): return #x
++
++def __bos(ptr): return __builtin_object_size (ptr, __USE_FORTIFY_LEVEL > 1)
++
++def __bos0(ptr): return __builtin_object_size (ptr, 0)
++
++def __warnattr(msg): return __attribute__((__warning__ (msg)))
++
++__flexarr = []
++__flexarr = [0]
++__flexarr = []
++__flexarr = [1]
++def __ASMNAME(cname): return __ASMNAME2 (__USER_LABEL_PREFIX__, cname)
++
++def __attribute__(xyz): return  
++
++def __attribute_format_arg__(x): return __attribute__ ((__format_arg__ (x)))
++
++def __attribute_format_arg__(x): return  
++
++
++# Included from bits/wordsize.h
++__WORDSIZE = 32
++__LDBL_COMPAT = 1
++def __LDBL_REDIR_DECL(name): return \
++
++__USE_LARGEFILE = 1
++__USE_LARGEFILE64 = 1
++__USE_EXTERN_INLINES = 1
++__USE_EXTERN_INLINES_IN_LIBC = 1
++
++# Included from gnu/stubs.h
++
++# Included from bits/dlfcn.h
++RTLD_LAZY = 0x00001
++RTLD_NOW = 0x00002
++RTLD_BINDING_MASK = 0x3
++RTLD_NOLOAD = 0x00004
++RTLD_DEEPBIND = 0x00008
++RTLD_GLOBAL = 0x00100
++RTLD_LOCAL = 0
++RTLD_NODELETE = 0x01000
++LM_ID_BASE = 0
++LM_ID_NEWLM = -1
--- python2.7-2.7.1.orig/debian/patches/apport-support.dpatch
+++ python2.7-2.7.1/debian/patches/apport-support.dpatch
@@ -0,0 +1,42 @@
+#! /bin/sh -e
+
+dir=
+if [ $# -eq 3 -a "$2" = '-d' ]; then
+    pdir="-d $3"
+    dir="$3/"
+elif [ $# -ne 1 ]; then
+    echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+    exit 1
+fi
+case "$1" in
+    -patch)
+        patch $pdir -f --no-backup-if-mismatch -p0 < $0
+        #cd ${dir}gcc && autoconf
+        ;;
+    -unpatch)
+        patch $pdir -f --no-backup-if-mismatch -R -p0 < $0
+        #rm ${dir}gcc/configure
+        ;;
+    *)
+	echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+        exit 1
+esac
+exit 0
+
+--- Lib/site.py	2004-07-20 12:28:28.000000000 +1000
++++ Lib/site.py	2006-11-09 09:28:32.000000000 +1100
+@@ -393,6 +393,14 @@
+     # this module is run as a script, because this code is executed twice.
+     if hasattr(sys, "setdefaultencoding"):
+         del sys.setdefaultencoding
++    # install the apport exception handler if available
++    try:
++        import apport_python_hook
++    except ImportError:
++        pass
++    else:
++        apport_python_hook.install()
++
+ 
+ main()
+ 
--- python2.7-2.7.1.orig/debian/patches/no-zip-on-sys.path.diff
+++ python2.7-2.7.1/debian/patches/no-zip-on-sys.path.diff
@@ -0,0 +1,52 @@
+# DP: Do not add /usr/lib/pythonXY.zip on sys.path.
+
+--- a/Modules/getpath.c
++++ b/Modules/getpath.c
+@@ -380,7 +380,9 @@
+     char *path = getenv("PATH");
+     char *prog = Py_GetProgramName();
+     char argv0_path[MAXPATHLEN+1];
++#ifdef WITH_ZIP_PATH
+     char zip_path[MAXPATHLEN+1];
++#endif
+     int pfound, efound; /* 1 if found; -1 if found build directory */
+     char *buf;
+     size_t bufsz;
+@@ -520,6 +522,7 @@
+     else
+         reduce(prefix);
+ 
++#ifdef WITH_ZIP_PATH
+     strncpy(zip_path, prefix, MAXPATHLEN);
+     zip_path[MAXPATHLEN] = '\0';
+     if (pfound > 0) { /* Use the reduced prefix returned by Py_GetPrefix() */
+@@ -532,6 +535,7 @@
+     bufsz = strlen(zip_path);   /* Replace "00" with version */
+     zip_path[bufsz - 6] = VERSION[0];
+     zip_path[bufsz - 5] = VERSION[2];
++#endif
+ 
+     if (!(efound = search_for_exec_prefix(argv0_path, home))) {
+         if (!Py_FrozenFlag)
+@@ -571,7 +575,9 @@
+         defpath = delim + 1;
+     }
+ 
++#ifdef WITH_ZIP_PATH
+     bufsz += strlen(zip_path) + 1;
++#endif
+     bufsz += strlen(exec_prefix) + 1;
+ 
+     /* This is the only malloc call in this file */
+@@ -592,9 +598,11 @@
+         else
+             buf[0] = '\0';
+ 
++#ifdef WITH_ZIP_PATH
+         /* Next is the default zip path */
+         strcat(buf, zip_path);
+         strcat(buf, delimiter);
++#endif
+ 
+         /* Next goes merge of compile-time $PYTHONPATH with
+          * dynamically located prefix.
--- python2.7-2.7.1.orig/debian/patches/doc-nodownload.diff
+++ python2.7-2.7.1/debian/patches/doc-nodownload.diff
@@ -0,0 +1,13 @@
+# DP: Don't try to download documentation tools
+
+--- a/Doc/Makefile
++++ b/Doc/Makefile
+@@ -57,7 +57,7 @@
+ 
+ update: clean checkout
+ 
+-build: checkout
++build:
+ 	mkdir -p build/$(BUILDER) build/doctrees
+ 	$(PYTHON) tools/sphinx-build.py $(ALLSPHINXOPTS)
+ 	@echo
--- python2.7-2.7.1.orig/debian/patches/cthreads.diff
+++ python2.7-2.7.1/debian/patches/cthreads.diff
@@ -0,0 +1,39 @@
+# DP: Remove cthreads detection
+
+--- a/configure.in
++++ b/configure.in
+@@ -2154,7 +2154,6 @@
+ 
+ # Templates for things AC_DEFINEd more than once.
+ # For a single AC_DEFINE, no template is needed.
+-AH_TEMPLATE(C_THREADS,[Define if you have the Mach cthreads package])
+ AH_TEMPLATE(_REENTRANT,
+   [Define to force use of thread-safe errno, h_errno, and other functions])
+ AH_TEMPLATE(WITH_THREAD,
+@@ -2236,17 +2235,6 @@
+     AC_MSG_RESULT($unistd_defines_pthreads)
+ 
+     AC_DEFINE(_REENTRANT)
+-    AC_CHECK_HEADER(cthreads.h, [AC_DEFINE(WITH_THREAD)
+-    AC_DEFINE(C_THREADS)
+-    AC_DEFINE(HURD_C_THREADS, 1,
+-    [Define if you are using Mach cthreads directly under /include])
+-    LIBS="$LIBS -lthreads"
+-    THREADOBJ="Python/thread.o"],[
+-    AC_CHECK_HEADER(mach/cthreads.h, [AC_DEFINE(WITH_THREAD)
+-    AC_DEFINE(C_THREADS)
+-    AC_DEFINE(MACH_C_THREADS, 1,
+-    [Define if you are using Mach cthreads under mach /])
+-    THREADOBJ="Python/thread.o"],[
+     AC_MSG_CHECKING(for --with-pth)
+     AC_ARG_WITH([pth],
+                 AS_HELP_STRING([--with-pth], [use GNU pth threading libraries]),
+@@ -2301,7 +2289,7 @@
+     LIBS="$LIBS -lcma"
+     THREADOBJ="Python/thread.o"],[
+     USE_THREAD_MODULE="#"])
+-    ])])])])])])])])])])
++    ])])])])])])])])
+ 
+     AC_CHECK_LIB(mpc, usconfig, [AC_DEFINE(WITH_THREAD)
+     LIBS="$LIBS -lmpc"
--- python2.7-2.7.1.orig/debian/patches/profiled-build.diff
+++ python2.7-2.7.1/debian/patches/profiled-build.diff
@@ -0,0 +1,17 @@
+# DP: Fix profiled build; don't use Python/thread.gc*, gcc complains
+
+--- a/Makefile.pre.in
++++ b/Makefile.pre.in
+@@ -383,10 +383,10 @@
+ 	$(MAKE) all CFLAGS="$(CFLAGS) -fprofile-generate" LIBS="$(LIBS) -lgcov"
+ 
+ run_profile_task:
+-	./$(BUILDPYTHON) $(PROFILE_TASK)
++	-./$(BUILDPYTHON) $(PROFILE_TASK)
+ 
+ build_all_use_profile:
+-	$(MAKE) all CFLAGS="$(CFLAGS) -fprofile-use"
++	$(MAKE) all CFLAGS="$(CFLAGS) -fprofile-use -fprofile-correction"
+ 
+ coverage:
+ 	@echo "Building with support for coverage checking:"
--- python2.7-2.7.1.orig/debian/patches/autoconf-version.diff
+++ python2.7-2.7.1/debian/patches/autoconf-version.diff
@@ -0,0 +1,20 @@
+# DP: remove autoconf version check
+
+--- a/configure.in
++++ b/configure.in
+@@ -5,15 +5,6 @@
+ # Set VERSION so we only need to edit in one place (i.e., here)
+ m4_define(PYTHON_VERSION, 2.7)
+ 
+-dnl Some m4 magic to ensure that the configure script is generated
+-dnl by the correct autoconf version.
+-m4_define([version_required],
+-[m4_if(m4_version_compare(m4_defn([m4_PACKAGE_VERSION]), [$1]), 0,
+-       [],
+-       [m4_fatal([Autoconf version $1 is required for Python], 63)])
+-])
+-version_required(2.65)
+-
+ AC_REVISION($Revision: 86076 $)
+ AC_INIT(python, PYTHON_VERSION, http://bugs.python.org/)
+ AC_CONFIG_SRCDIR([Include/object.h])
--- python2.7-2.7.1.orig/debian/patches/issue762963.diff
+++ python2.7-2.7.1/debian/patches/issue762963.diff
@@ -0,0 +1,69 @@
+# DP: Fix issue #762963, python loses current timezone.
+
+Index: python2.6-2.6.5+20100521/Lib/test/test_time.py
+===================================================================
+--- python2.6-2.6.5+20100521.orig/Lib/test/test_time.py	2010-05-21 16:20:32.980725082 +0200
++++ python2.6-2.6.5+20100521/Lib/test/test_time.py	2010-05-21 16:20:33.004709833 +0200
+@@ -1,4 +1,5 @@
+ from test import test_support
++from os import environ
+ import time
+ import unittest
+ 
+@@ -218,6 +219,37 @@
+         t1 = time.mktime(lt1)
+         self.assert_(0 <= (t1-t0) < 0.2)
+ 
++    # Check for problems with tm_gmtoff in struct time. These can bite us
++    # on BSD-derived libc's. The primary (only?) sympton is to break the
++    # strftime %z format.
++    def test_tm_gmtoff1(self):
++        # The %z format is not guaranteed to be supported by the libc
++        # strftime(), but strftime(fmt) is documented to work the same as
++        # as strftime(fmt, localtime()) in all cases.
++        self.failUnlessEqual(
++                time.strftime("%z"), time.strftime("%z", time.localtime()))
++
++    @unittest.skipUnless(hasattr(time, "tzset"), "tzset not available")
++    def test_tm_gmtoff2(self):
++        # The %z format is not guaranteed to be supported by the libc
++        # strftime(), but if it is US Eastern timezone should never 
++        # return +0.
++        eastern = "EST+05EDT,M4.1.0,M10.5.0"
++        org_TZ = environ.get("TZ", None)
++        try:
++            environ["TZ"] = eastern
++            time.tzset()
++            self.assertNotEqual(
++                    time.strftime("%z", time.localtime()), "+0000")
++        finally:
++            # Repair TZ environment variable in case any other tests
++            # rely on it.
++            if org_TZ is not None:
++                environ["TZ"] = org_TZ
++            elif "TZ" in environ:
++                del environ["TZ"]
++            time.tzset()
++
+ def test_main():
+     test_support.run_unittest(TimeTestCase)
+ 
+Index: python2.6-2.6.5+20100521/Modules/timemodule.c
+===================================================================
+--- python2.6-2.6.5+20100521.orig/Modules/timemodule.c	2010-05-21 16:20:33.000710163 +0200
++++ python2.6-2.6.5+20100521/Modules/timemodule.c	2010-05-21 16:20:33.008710342 +0200
+@@ -345,6 +345,14 @@
+     int y;
+     memset((void *) p, '\0', sizeof(struct tm));
+ 
++#ifdef HAVE_TM_ZONE
++	/* Use mktime to normalize the struct tm field tm_gmtoff to
++	   the current timezone offset for the benefit of the
++	   BSD-style struct tm's that have it.  Without this we would
++	   lie to these libc's by using a struct tm that says we are
++	   in GMT.  */
++	mktime(p);
++#endif
+     if (!PyArg_Parse(args, "(iiiiiiiii)",
+                      &y,
+                      &p->tm_mon,
--- python2.7-2.7.1.orig/debian/patches/link-opt.diff
+++ python2.7-2.7.1/debian/patches/link-opt.diff
@@ -0,0 +1,24 @@
+# DP: Call the linker with -O1 -Bsymbolic-functions
+
+--- a/configure.in
++++ b/configure.in
+@@ -1836,8 +1836,8 @@
+ 		fi
+ 		;;
+ 	Linux*|GNU*|QNX*)
+-		LDSHARED='$(CC) -shared'
+-		LDCXXSHARED='$(CXX) -shared';;
++		LDSHARED='$(CC) -shared -Wl,-O1 -Wl,-Bsymbolic-functions'
++		LDCXXSHARED='$(CXX) -shared -Wl,-O1 -Wl,-Bsymbolic-functions';;
+ 	BSD/OS*/4*)
+ 		LDSHARED="gcc -shared"
+ 		LDCXXSHARED="g++ -shared";;
+@@ -1939,7 +1939,7 @@
+ 	    LINKFORSHARED="-Wl,-E -Wl,+s";;
+ #	    LINKFORSHARED="-Wl,-E -Wl,+s -Wl,+b\$(BINLIBDEST)/lib-dynload";;
+ 	BSD/OS/4*) LINKFORSHARED="-Xlinker -export-dynamic";;
+-	Linux*|GNU*) LINKFORSHARED="-Xlinker -export-dynamic";;
++	Linux*|GNU*) LINKFORSHARED="-Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions";;
+ 	# -u libsys_s pulls in all symbols in libsys
+ 	Darwin/*) 
+ 		# -u _PyMac_Error is needed to pull in the mac toolbox glue,
--- python2.7-2.7.1.orig/debian/patches/no-large-file-support.diff
+++ python2.7-2.7.1/debian/patches/no-large-file-support.diff
@@ -0,0 +1,14 @@
+# DP: disable large file support for GNU/Hurd
+
+--- a/configure.in
++++ b/configure.in
+@@ -1434,6 +1434,9 @@
+   use_lfs=no
+ fi
+ 
++# Don't use largefile support anyway.
++use_lfs=no
++
+ if test "$use_lfs" = "yes"; then
+ # Two defines needed to enable largefile support on various platforms
+ # These may affect some typedefs
--- python2.7-2.7.1.orig/debian/patches/pydebug-path.dpatch
+++ python2.7-2.7.1/debian/patches/pydebug-path.dpatch
@@ -0,0 +1,100 @@
+#! /bin/sh -e
+
+# DP: When built with --with-pydebug, add a debug directory
+# DP: <prefix>/lib-dynload/debug to sys.path just before
+# DP: <prefix>/lib-dynload und install the extension modules
+# DP: of the debug build in this directory.
+
+dir=
+if [ $# -eq 3 -a "$2" = '-d' ]; then
+    pdir="-d $3"
+    dir="$3/"
+elif [ $# -ne 1 ]; then
+    echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+    exit 1
+fi
+case "$1" in
+    -patch)
+        patch $pdir -f --no-backup-if-mismatch -p0 < $0
+        ;;
+    -unpatch)
+        patch $pdir -f --no-backup-if-mismatch -R -p0 < $0
+        ;;
+    *)
+	echo >&2 "usage: `basename $0`: -patch|-unpatch [-d <srcdir>]"
+        exit 1
+esac
+exit 0
+
+--- Modules/getpath.c.orig	2005-01-18 00:56:31.571961744 +0100
++++ Modules/getpath.c	2005-01-18 01:02:23.811413208 +0100
+@@ -112,9 +112,14 @@
+ #endif
+ 
+ #ifndef PYTHONPATH
++#ifdef Py_DEBUG
++#define PYTHONPATH PREFIX "/lib/python" VERSION ":" \
++              EXEC_PREFIX "/lib/python" VERSION "/lib-dynload/debug"
++#else
+ #define PYTHONPATH PREFIX "/lib/python" VERSION ":" \
+               EXEC_PREFIX "/lib/python" VERSION "/lib-dynload"
+ #endif
++#endif
+ 
+ #ifndef LANDMARK
+ #define LANDMARK "os.py"
+@@ -323,6 +328,9 @@
+             strncpy(exec_prefix, home, MAXPATHLEN);
+         joinpath(exec_prefix, lib_python);
+         joinpath(exec_prefix, "lib-dynload");
++#ifdef Py_DEBUG
++        joinpath(exec_prefix, "debug");
++#endif
+         return 1;
+     }
+ 
+@@ -340,6 +348,9 @@
+         n = strlen(exec_prefix);
+         joinpath(exec_prefix, lib_python);
+         joinpath(exec_prefix, "lib-dynload");
++#ifdef Py_DEBUG
++        joinpath(exec_prefix, "debug");
++#endif
+         if (isdir(exec_prefix))
+             return 1;
+         exec_prefix[n] = '\0';
+@@ -350,6 +361,9 @@
+     strncpy(exec_prefix, EXEC_PREFIX, MAXPATHLEN);
+     joinpath(exec_prefix, lib_python);
+     joinpath(exec_prefix, "lib-dynload");
++#ifdef Py_DEBUG
++    joinpath(exec_prefix, "debug");
++#endif
+     if (isdir(exec_prefix))
+         return 1;
+ 
+@@ -654,6 +654,9 @@
+         reduce(exec_prefix);
+         reduce(exec_prefix);
+         reduce(exec_prefix);
++#ifdef Py_DEBUG
++        reduce(exec_prefix);
++#endif
+ 	if (!exec_prefix[0])
+ 		strcpy(exec_prefix, separator);
+     }
+--- Lib/site.py~	2004-12-04 00:39:05.000000000 +0100
++++ Lib/site.py	2005-01-18 01:33:36.589707632 +0100
+@@ -188,6 +188,12 @@
+                                          "python" + sys.version[:3],
+                                          "site-packages"),
+                             os.path.join(prefix, "lib", "site-python")]
++                try:
++                    # sys.getobjects only available in --with-pydebug build
++                    sys.getobjects
++                    sitedirs.insert(0, os.path.join(sitedirs[0], 'debug'))
++                except AttributeError:
++                    pass
+             else:
+                 sitedirs = [prefix, os.path.join(prefix, "lib", "site-packages")]
+             if sys.platform == 'darwin':
--- python2.7-2.7.1.orig/debian/patches/test-sundry.diff
+++ python2.7-2.7.1/debian/patches/test-sundry.diff
@@ -0,0 +1,17 @@
+# DP: test_sundry: Don't fail on import of the profile and pstats module
+
+--- a/Lib/test/test_sundry.py
++++ b/Lib/test/test_sundry.py
+@@ -62,7 +62,11 @@
+             import os2emxpath
+             import pdb
+             import posixfile
+-            import pstats
++            try:
++                import pstats  # separated out into the python-profiler package
++            except ImportError:
++                if test_support.verbose:
++                    print "skipping profile and pstats"
+             import py_compile
+             import rexec
+             import sched
--- python2.7-2.7.1.orig/debian/patches/linecache.diff
+++ python2.7-2.7.1/debian/patches/linecache.diff
@@ -0,0 +1,16 @@
+# DP: Proper handling of packages in linecache.py
+
+--- a/Lib/linecache.py
++++ b/Lib/linecache.py
+@@ -108,6 +108,11 @@
+         if os.path.isabs(filename):
+             return []
+ 
++        # Take care to handle packages
++        if basename == '__init__.py':
++            # filename referes to a package
++            basename = filename
++
+         for dirname in sys.path:
+             # When using imputil, sys.path may contain things other than
+             # strings; ignore them when it happens.
--- python2.7-2.7.1.orig/debian/patches/tkinter-import.diff
+++ python2.7-2.7.1/debian/patches/tkinter-import.diff
@@ -0,0 +1,16 @@
+# DP: suggest installation of python-tk package on failing _tkinter import
+
+--- a/Lib/lib-tk/Tkinter.py
++++ b/Lib/lib-tk/Tkinter.py
+@@ -36,7 +36,10 @@
+ if sys.platform == "win32":
+     # Attempt to configure Tcl/Tk without requiring PATH
+     import FixTk
+-import _tkinter # If this fails your Python may not be configured for Tk
++try:
++    import _tkinter
++except ImportError, msg:
++    raise ImportError, str(msg) + ', please install the python-tk package'
+ tkinter = _tkinter # b/w compat for export
+ TclError = _tkinter.TclError
+ from types import *
--- python2.7-2.7.1.orig/debian/patches/debug-build.diff
+++ python2.7-2.7.1/debian/patches/debug-build.diff
@@ -0,0 +1,181 @@
+# DP: Change the interpreter to build and install python extensions
+# DP: built with the python-dbg interpreter with a different name into
+# DP: the same path (by appending `_d' to the extension name).
+
+--- a/Lib/distutils/command/build.py
++++ b/Lib/distutils/command/build.py
+@@ -91,7 +91,8 @@
+         # 'lib.<plat>' under the base build directory.  We only use one of
+         # them for a given distribution, though --
+         if self.build_purelib is None:
+-            self.build_purelib = os.path.join(self.build_base, 'lib')
++            self.build_purelib = os.path.join(self.build_base,
++                                              'lib' + plat_specifier)
+         if self.build_platlib is None:
+             self.build_platlib = os.path.join(self.build_base,
+                                               'lib' + plat_specifier)
+--- a/Lib/distutils/sysconfig.py
++++ b/Lib/distutils/sysconfig.py
+@@ -85,7 +85,7 @@
+                 # Include is located in the srcdir
+                 inc_dir = os.path.join(srcdir, "Include")
+             return inc_dir
+-        return os.path.join(prefix, "include", "python" + get_python_version())
++        return os.path.join(prefix, "include", "python" + get_python_version())+(sys.pydebug and "_d" or "")
+     elif os.name == "nt":
+         return os.path.join(prefix, "include")
+     elif os.name == "os2":
+@@ -216,7 +216,7 @@
+     if python_build:
+         return os.path.join(os.path.dirname(sys.executable), "Makefile")
+     lib_dir = get_python_lib(plat_specific=1, standard_lib=1)
+-    return os.path.join(lib_dir, "config", "Makefile")
++    return os.path.join(lib_dir, "config"+(sys.pydebug and "_d" or ""), "Makefile")
+ 
+ 
+ def parse_config_h(fp, g=None):
+--- a/Lib/sysconfig.py
++++ b/Lib/sysconfig.py
+@@ -294,7 +294,7 @@
+ def _get_makefile_filename():
+     if _PYTHON_BUILD:
+         return os.path.join(_PROJECT_BASE, "Makefile")
+-    return os.path.join(get_path('platstdlib').replace("/usr/local","/usr",1), "config", "Makefile")
++    return os.path.join(get_path('platstdlib').replace("/usr/local","/usr",1), "config" + (sys.pydebug and "_d" or ""), "Makefile")
+ 
+ 
+ def _init_posix(vars):
+@@ -394,7 +394,7 @@
+         else:
+             inc_dir = _PROJECT_BASE
+     else:
+-        inc_dir = get_path('platinclude').replace("/usr/local","/usr",1)
++        inc_dir = get_path('platinclude').replace("/usr/local","/usr",1)+(sys.pydebug and "_d" or "")
+     return os.path.join(inc_dir, 'pyconfig.h')
+ 
+ def get_scheme_names():
+--- a/Makefile.pre.in
++++ b/Makefile.pre.in
+@@ -99,8 +99,8 @@
+ # Detailed destination directories
+ BINLIBDEST=	$(LIBDIR)/python$(VERSION)
+ LIBDEST=	$(SCRIPTDIR)/python$(VERSION)
+-INCLUDEPY=	$(INCLUDEDIR)/python$(VERSION)
+-CONFINCLUDEPY=	$(CONFINCLUDEDIR)/python$(VERSION)
++INCLUDEPY=	$(INCLUDEDIR)/python$(VERSION)$(DEBUG_EXT)
++CONFINCLUDEPY=	$(CONFINCLUDEDIR)/python$(VERSION)$(DEBUG_EXT)
+ LIBP=		$(LIBDIR)/python$(VERSION)
+ 
+ # Symbols used for using shared libraries
+@@ -114,6 +114,8 @@
+ EXE=		@EXEEXT@
+ BUILDEXE=	@BUILDEXEEXT@
+ 
++DEBUG_EXT=	@DEBUG_EXT@
++
+ # Short name and location for Mac OS X Python framework
+ UNIVERSALSDK=@UNIVERSALSDK@
+ PYTHONFRAMEWORK=	@PYTHONFRAMEWORK@
+@@ -421,7 +423,7 @@
+ 	$(AR) $(ARFLAGS) $@ $(MODOBJS)
+ 	$(RANLIB) $@
+ 
+-libpython$(VERSION).so: $(LIBRARY_OBJS)
++libpython$(VERSION)$(DEBUG_EXT).so: $(LIBRARY_OBJS)
+ 	if test $(INSTSONAME) != $(LDLIBRARY); then \
+ 		$(BLDSHARED) -Wl,-h$(INSTSONAME) -o $(INSTSONAME) $(LIBRARY_OBJS) $(MODLIBS) $(SHLIBS) $(LIBC) $(LIBM) $(LDLAST); \
+ 		$(LN) -f $(INSTSONAME) $@; \
+@@ -979,8 +981,8 @@
+ 	$(INSTALL_DATA) pyconfig.h $(DESTDIR)$(CONFINCLUDEPY)/pyconfig.h
+ 
+ # Install the library and miscellaneous stuff needed for extending/embedding
+-# This goes into $(exec_prefix)
+-LIBPL=		$(LIBP)/config
++# This goes into $(exec_prefix)$(DEBUG_EXT)
++LIBPL=		$(LIBP)/config$(DEBUG_EXT)
+ 
+ # pkgconfig directory
+ LIBPC=		$(LIBDIR)/pkgconfig
+--- a/Misc/python-config.in
++++ b/Misc/python-config.in
+@@ -45,7 +45,7 @@
+ 
+     elif opt in ('--libs', '--ldflags'):
+         libs = getvar('LIBS').split() + getvar('SYSLIBS').split()
+-        libs.append('-lpython'+pyver)
++        libs.append('-lpython' + pyver + (sys.pydebug and "_d" or ""))
+         # add the prefix/lib/pythonX.Y/config dir, but only if there is no
+         # shared library in prefix/lib/.
+         if opt == '--ldflags':
+--- a/Python/dynload_shlib.c
++++ b/Python/dynload_shlib.c
+@@ -46,6 +46,10 @@
+     {"module.exe", "rb", C_EXTENSION},
+     {"MODULE.EXE", "rb", C_EXTENSION},
+ #else
++#ifdef Py_DEBUG
++    {"_d.so", "rb", C_EXTENSION},
++    {"module_d.so", "rb", C_EXTENSION},
++#endif
+     {".so", "rb", C_EXTENSION},
+     {"module.so", "rb", C_EXTENSION},
+ #endif
+--- a/Python/sysmodule.c
++++ b/Python/sysmodule.c
+@@ -1557,6 +1557,12 @@
+                         PyString_FromString("legacy"));
+ #endif
+ 
++#ifdef Py_DEBUG
++	PyDict_SetItemString(sysdict, "pydebug", Py_True);
++#else
++	PyDict_SetItemString(sysdict, "pydebug", Py_False);
++#endif
++
+ #undef SET_SYS_FROM_STRING
+     if (PyErr_Occurred())
+         return NULL;
+--- a/configure.in
++++ b/configure.in
+@@ -632,7 +632,7 @@
+ AC_MSG_CHECKING(LIBRARY)
+ if test -z "$LIBRARY"
+ then
+-	LIBRARY='libpython$(VERSION).a'
++	LIBRARY='libpython$(VERSION)$(DEBUG_EXT).a'
+ fi
+ AC_MSG_RESULT($LIBRARY)
+ 
+@@ -777,8 +777,8 @@
+ 	  INSTSONAME="$LDLIBRARY".$SOVERSION
+           ;;
+     Linux*|GNU*|NetBSD*|FreeBSD*|DragonFly*)
+-	  LDLIBRARY='libpython$(VERSION).so'
+-	  BLDLIBRARY='-L. -lpython$(VERSION)'
++	  LDLIBRARY='libpython$(VERSION)$(DEBUG_EXT).so'
++	  BLDLIBRARY='-L. -lpython$(VERSION)$(DEBUG_EXT)'
+ 	  RUNSHARED=LD_LIBRARY_PATH=`pwd`:${LD_LIBRARY_PATH}
+ 	  case $ac_sys_system in
+ 	      FreeBSD*)
+@@ -887,6 +887,12 @@
+ fi],
+ [AC_MSG_RESULT(no)])
+ 
++if test "$Py_DEBUG" = 'true'
++then
++	DEBUG_EXT=_d
++fi
++AC_SUBST(DEBUG_EXT)
++
+ # XXX Shouldn't the code above that fiddles with BASECFLAGS and OPT be
+ # merged with this chunk of code?
+ 
+@@ -1729,7 +1735,7 @@
+ 		esac
+ 		;;
+ 	CYGWIN*)   SO=.dll;;
+-	*)	   SO=.so;;
++	*)	   SO=$DEBUG_EXT.so;;
+ 	esac
+ else
+ 	# this might also be a termcap variable, see #610332
--- python2.7-2.7.1.orig/debian/patches/distutils-sysconfig.diff
+++ python2.7-2.7.1/debian/patches/distutils-sysconfig.diff
@@ -0,0 +1,31 @@
+# DP: Allow setting BASECFLAGS, OPT and EXTRA_LDFLAGS (like, CC, CXX, CPP,
+# DP: CFLAGS, CPPFLAGS, CCSHARED, LDSHARED) from the environment.
+
+--- a/Lib/distutils/sysconfig.py
++++ b/Lib/distutils/sysconfig.py
+@@ -152,8 +152,9 @@
+     varies across Unices and is stored in Python's Makefile.
+     """
+     if compiler.compiler_type == "unix":
+-        (cc, cxx, opt, cflags, ccshared, ldshared, so_ext) = \
++        (cc, cxx, opt, cflags, opt, extra_cflags, basecflags, ccshared, ldshared, so_ext) = \
+             get_config_vars('CC', 'CXX', 'OPT', 'CFLAGS',
++                            'OPT', 'EXTRA_CFLAGS', 'BASECFLAGS',
+                             'CCSHARED', 'LDSHARED', 'SO')
+ 
+         if 'CC' in os.environ:
+@@ -168,8 +169,13 @@
+             cpp = cc + " -E"           # not always
+         if 'LDFLAGS' in os.environ:
+             ldshared = ldshared + ' ' + os.environ['LDFLAGS']
++        if 'BASECFLAGS' in os.environ:
++            basecflags = os.environ['BASECFLAGS']
++        if 'OPT' in os.environ:
++            opt = os.environ['OPT']
++        cflags = ' '.join(str(x) for x in (basecflags, opt, extra_cflags) if x)
+         if 'CFLAGS' in os.environ:
+-            cflags = opt + ' ' + os.environ['CFLAGS']
++            cflags = ' '.join(str(x) for x in (basecflags, opt, os.environ['CFLAGS'], extra_cflags) if x)
+             ldshared = ldshared + ' ' + os.environ['CFLAGS']
+         if 'CPPFLAGS' in os.environ:
+             cpp = cpp + ' ' + os.environ['CPPFLAGS']
--- python2.7-2.7.1.orig/debian/patches/svn-updates.diff
+++ python2.7-2.7.1/debian/patches/svn-updates.diff
@@ -0,0 +1,12340 @@
+# DP: SVN updates of the 2.7 release branch (until 2011-02-24).
+
+# svn diff http://svn.python.org/projects/python/tags/r271 http://svn.python.org/projects/python/branches/release27-maint | filterdiff --exclude=Lib/pstats.py --exclude=Lib/profile.py --exclude=.*ignore --addoldprefix=a/ --addnewprefix=b/ --remove-timestamps | grep -v '^[I=]'
+
+--- a/Python/ceval.c
++++ b/Python/ceval.c
+@@ -27,10 +27,11 @@
+ 
+ typedef unsigned long long uint64;
+ 
+-#if defined(__ppc__) /* <- Don't know if this is the correct symbol; this
+-                           section should work for GCC on any PowerPC
+-                           platform, irrespective of OS.
+-                           POWER?  Who knows :-) */
++/* PowerPC suppport.
++   "__ppc__" appears to be the preprocessor definition to detect on OS X, whereas
++   "__powerpc__" appears to be the correct one for Linux with GCC
++*/
++#if defined(__ppc__) || defined (__powerpc__)
+ 
+ #define READ_TIMESTAMP(var) ppc_getcounter(&var)
+ 
+--- a/Python/graminit.c
++++ b/Python/graminit.c
+@@ -1526,335 +1526,311 @@
+ static arc arcs_72_0[1] = {
+     {28, 1},
+ };
+-static arc arcs_72_1[1] = {
+-    {23, 2},
+-};
+-static arc arcs_72_2[1] = {
+-    {28, 3},
+-};
+-static arc arcs_72_3[2] = {
+-    {29, 4},
+-    {0, 3},
+-};
+-static arc arcs_72_4[2] = {
+-    {28, 1},
+-    {0, 4},
+-};
+-static state states_72[5] = {
+-    {1, arcs_72_0},
+-    {1, arcs_72_1},
+-    {1, arcs_72_2},
+-    {2, arcs_72_3},
+-    {2, arcs_72_4},
+-};
+-static arc arcs_73_0[1] = {
+-    {28, 1},
+-};
+-static arc arcs_73_1[4] = {
++static arc arcs_72_1[4] = {
+     {23, 2},
+     {157, 3},
+     {29, 4},
+     {0, 1},
+ };
+-static arc arcs_73_2[1] = {
++static arc arcs_72_2[1] = {
+     {28, 5},
+ };
+-static arc arcs_73_3[1] = {
++static arc arcs_72_3[1] = {
+     {0, 3},
+ };
+-static arc arcs_73_4[2] = {
++static arc arcs_72_4[2] = {
+     {28, 6},
+     {0, 4},
+ };
+-static arc arcs_73_5[3] = {
++static arc arcs_72_5[3] = {
+     {157, 3},
+     {29, 7},
+     {0, 5},
+ };
+-static arc arcs_73_6[2] = {
++static arc arcs_72_6[2] = {
+     {29, 4},
+     {0, 6},
+ };
+-static arc arcs_73_7[2] = {
++static arc arcs_72_7[2] = {
+     {28, 8},
+     {0, 7},
+ };
+-static arc arcs_73_8[1] = {
++static arc arcs_72_8[1] = {
+     {23, 9},
+ };
+-static arc arcs_73_9[1] = {
++static arc arcs_72_9[1] = {
+     {28, 10},
+ };
+-static arc arcs_73_10[2] = {
++static arc arcs_72_10[2] = {
+     {29, 7},
+     {0, 10},
+ };
+-static state states_73[11] = {
+-    {1, arcs_73_0},
+-    {4, arcs_73_1},
+-    {1, arcs_73_2},
+-    {1, arcs_73_3},
+-    {2, arcs_73_4},
+-    {3, arcs_73_5},
+-    {2, arcs_73_6},
+-    {2, arcs_73_7},
+-    {1, arcs_73_8},
+-    {1, arcs_73_9},
+-    {2, arcs_73_10},
++static state states_72[11] = {
++    {1, arcs_72_0},
++    {4, arcs_72_1},
++    {1, arcs_72_2},
++    {1, arcs_72_3},
++    {2, arcs_72_4},
++    {3, arcs_72_5},
++    {2, arcs_72_6},
++    {2, arcs_72_7},
++    {1, arcs_72_8},
++    {1, arcs_72_9},
++    {2, arcs_72_10},
+ };
+-static arc arcs_74_0[1] = {
+-    {162, 1},
++static arc arcs_73_0[1] = {
++    {161, 1},
+ };
+-static arc arcs_74_1[1] = {
++static arc arcs_73_1[1] = {
+     {21, 2},
+ };
+-static arc arcs_74_2[2] = {
++static arc arcs_73_2[2] = {
+     {13, 3},
+     {23, 4},
+ };
+-static arc arcs_74_3[2] = {
++static arc arcs_73_3[2] = {
+     {9, 5},
+     {15, 6},
+ };
+-static arc arcs_74_4[1] = {
++static arc arcs_73_4[1] = {
+     {24, 7},
+ };
+-static arc arcs_74_5[1] = {
++static arc arcs_73_5[1] = {
+     {15, 6},
+ };
+-static arc arcs_74_6[1] = {
++static arc arcs_73_6[1] = {
+     {23, 4},
+ };
+-static arc arcs_74_7[1] = {
++static arc arcs_73_7[1] = {
+     {0, 7},
+ };
+-static state states_74[8] = {
+-    {1, arcs_74_0},
+-    {1, arcs_74_1},
+-    {2, arcs_74_2},
+-    {2, arcs_74_3},
+-    {1, arcs_74_4},
+-    {1, arcs_74_5},
+-    {1, arcs_74_6},
+-    {1, arcs_74_7},
++static state states_73[8] = {
++    {1, arcs_73_0},
++    {1, arcs_73_1},
++    {2, arcs_73_2},
++    {2, arcs_73_3},
++    {1, arcs_73_4},
++    {1, arcs_73_5},
++    {1, arcs_73_6},
++    {1, arcs_73_7},
+ };
+-static arc arcs_75_0[3] = {
+-    {163, 1},
++static arc arcs_74_0[3] = {
++    {162, 1},
+     {30, 2},
+     {31, 3},
+ };
+-static arc arcs_75_1[2] = {
++static arc arcs_74_1[2] = {
+     {29, 4},
+     {0, 1},
+ };
+-static arc arcs_75_2[1] = {
++static arc arcs_74_2[1] = {
+     {28, 5},
+ };
+-static arc arcs_75_3[1] = {
++static arc arcs_74_3[1] = {
+     {28, 6},
+ };
+-static arc arcs_75_4[4] = {
+-    {163, 1},
++static arc arcs_74_4[4] = {
++    {162, 1},
+     {30, 2},
+     {31, 3},
+     {0, 4},
+ };
+-static arc arcs_75_5[2] = {
++static arc arcs_74_5[2] = {
+     {29, 7},
+     {0, 5},
+ };
+-static arc arcs_75_6[1] = {
++static arc arcs_74_6[1] = {
+     {0, 6},
+ };
+-static arc arcs_75_7[2] = {
+-    {163, 5},
++static arc arcs_74_7[2] = {
++    {162, 5},
+     {31, 3},
+ };
+-static state states_75[8] = {
+-    {3, arcs_75_0},
+-    {2, arcs_75_1},
+-    {1, arcs_75_2},
+-    {1, arcs_75_3},
+-    {4, arcs_75_4},
+-    {2, arcs_75_5},
+-    {1, arcs_75_6},
+-    {2, arcs_75_7},
++static state states_74[8] = {
++    {3, arcs_74_0},
++    {2, arcs_74_1},
++    {1, arcs_74_2},
++    {1, arcs_74_3},
++    {4, arcs_74_4},
++    {2, arcs_74_5},
++    {1, arcs_74_6},
++    {2, arcs_74_7},
+ };
+-static arc arcs_76_0[1] = {
++static arc arcs_75_0[1] = {
+     {28, 1},
+ };
+-static arc arcs_76_1[3] = {
++static arc arcs_75_1[3] = {
+     {157, 2},
+     {27, 3},
+     {0, 1},
+ };
+-static arc arcs_76_2[1] = {
++static arc arcs_75_2[1] = {
+     {0, 2},
+ };
+-static arc arcs_76_3[1] = {
++static arc arcs_75_3[1] = {
+     {28, 2},
+ };
+-static state states_76[4] = {
+-    {1, arcs_76_0},
+-    {3, arcs_76_1},
+-    {1, arcs_76_2},
+-    {1, arcs_76_3},
++static state states_75[4] = {
++    {1, arcs_75_0},
++    {3, arcs_75_1},
++    {1, arcs_75_2},
++    {1, arcs_75_3},
+ };
+-static arc arcs_77_0[2] = {
++static arc arcs_76_0[2] = {
+     {156, 1},
+-    {165, 1},
++    {164, 1},
+ };
+-static arc arcs_77_1[1] = {
++static arc arcs_76_1[1] = {
+     {0, 1},
+ };
+-static state states_77[2] = {
+-    {2, arcs_77_0},
+-    {1, arcs_77_1},
++static state states_76[2] = {
++    {2, arcs_76_0},
++    {1, arcs_76_1},
+ };
+-static arc arcs_78_0[1] = {
++static arc arcs_77_0[1] = {
+     {96, 1},
+ };
+-static arc arcs_78_1[1] = {
++static arc arcs_77_1[1] = {
+     {61, 2},
+ };
+-static arc arcs_78_2[1] = {
++static arc arcs_77_2[1] = {
+     {85, 3},
+ };
+-static arc arcs_78_3[1] = {
++static arc arcs_77_3[1] = {
+     {105, 4},
+ };
+-static arc arcs_78_4[2] = {
+-    {164, 5},
++static arc arcs_77_4[2] = {
++    {163, 5},
+     {0, 4},
+ };
+-static arc arcs_78_5[1] = {
++static arc arcs_77_5[1] = {
+     {0, 5},
+ };
+-static state states_78[6] = {
+-    {1, arcs_78_0},
+-    {1, arcs_78_1},
+-    {1, arcs_78_2},
+-    {1, arcs_78_3},
+-    {2, arcs_78_4},
+-    {1, arcs_78_5},
++static state states_77[6] = {
++    {1, arcs_77_0},
++    {1, arcs_77_1},
++    {1, arcs_77_2},
++    {1, arcs_77_3},
++    {2, arcs_77_4},
++    {1, arcs_77_5},
+ };
+-static arc arcs_79_0[1] = {
++static arc arcs_78_0[1] = {
+     {92, 1},
+ };
+-static arc arcs_79_1[1] = {
++static arc arcs_78_1[1] = {
+     {106, 2},
+ };
+-static arc arcs_79_2[2] = {
+-    {164, 3},
++static arc arcs_78_2[2] = {
++    {163, 3},
+     {0, 2},
+ };
+-static arc arcs_79_3[1] = {
++static arc arcs_78_3[1] = {
+     {0, 3},
+ };
+-static state states_79[4] = {
+-    {1, arcs_79_0},
+-    {1, arcs_79_1},
+-    {2, arcs_79_2},
+-    {1, arcs_79_3},
++static state states_78[4] = {
++    {1, arcs_78_0},
++    {1, arcs_78_1},
++    {2, arcs_78_2},
++    {1, arcs_78_3},
+ };
+-static arc arcs_80_0[2] = {
++static arc arcs_79_0[2] = {
+     {157, 1},
+-    {167, 1},
++    {166, 1},
+ };
+-static arc arcs_80_1[1] = {
++static arc arcs_79_1[1] = {
+     {0, 1},
+ };
+-static state states_80[2] = {
+-    {2, arcs_80_0},
+-    {1, arcs_80_1},
++static state states_79[2] = {
++    {2, arcs_79_0},
++    {1, arcs_79_1},
+ };
+-static arc arcs_81_0[1] = {
++static arc arcs_80_0[1] = {
+     {96, 1},
+ };
+-static arc arcs_81_1[1] = {
++static arc arcs_80_1[1] = {
+     {61, 2},
+ };
+-static arc arcs_81_2[1] = {
++static arc arcs_80_2[1] = {
+     {85, 3},
+ };
+-static arc arcs_81_3[1] = {
++static arc arcs_80_3[1] = {
+     {107, 4},
+ };
+-static arc arcs_81_4[2] = {
+-    {166, 5},
++static arc arcs_80_4[2] = {
++    {165, 5},
+     {0, 4},
+ };
+-static arc arcs_81_5[1] = {
++static arc arcs_80_5[1] = {
+     {0, 5},
+ };
+-static state states_81[6] = {
+-    {1, arcs_81_0},
+-    {1, arcs_81_1},
+-    {1, arcs_81_2},
+-    {1, arcs_81_3},
+-    {2, arcs_81_4},
+-    {1, arcs_81_5},
++static state states_80[6] = {
++    {1, arcs_80_0},
++    {1, arcs_80_1},
++    {1, arcs_80_2},
++    {1, arcs_80_3},
++    {2, arcs_80_4},
++    {1, arcs_80_5},
+ };
+-static arc arcs_82_0[1] = {
++static arc arcs_81_0[1] = {
+     {92, 1},
+ };
+-static arc arcs_82_1[1] = {
++static arc arcs_81_1[1] = {
+     {106, 2},
+ };
+-static arc arcs_82_2[2] = {
+-    {166, 3},
++static arc arcs_81_2[2] = {
++    {165, 3},
+     {0, 2},
+ };
+-static arc arcs_82_3[1] = {
++static arc arcs_81_3[1] = {
+     {0, 3},
+ };
+-static state states_82[4] = {
+-    {1, arcs_82_0},
+-    {1, arcs_82_1},
+-    {2, arcs_82_2},
+-    {1, arcs_82_3},
++static state states_81[4] = {
++    {1, arcs_81_0},
++    {1, arcs_81_1},
++    {2, arcs_81_2},
++    {1, arcs_81_3},
+ };
+-static arc arcs_83_0[1] = {
++static arc arcs_82_0[1] = {
+     {28, 1},
+ };
+-static arc arcs_83_1[2] = {
++static arc arcs_82_1[2] = {
+     {29, 0},
+     {0, 1},
+ };
+-static state states_83[2] = {
+-    {1, arcs_83_0},
+-    {2, arcs_83_1},
++static state states_82[2] = {
++    {1, arcs_82_0},
++    {2, arcs_82_1},
+ };
+-static arc arcs_84_0[1] = {
++static arc arcs_83_0[1] = {
+     {21, 1},
+ };
+-static arc arcs_84_1[1] = {
++static arc arcs_83_1[1] = {
+     {0, 1},
+ };
+-static state states_84[2] = {
+-    {1, arcs_84_0},
+-    {1, arcs_84_1},
++static state states_83[2] = {
++    {1, arcs_83_0},
++    {1, arcs_83_1},
+ };
+-static arc arcs_85_0[1] = {
+-    {169, 1},
++static arc arcs_84_0[1] = {
++    {168, 1},
+ };
+-static arc arcs_85_1[2] = {
++static arc arcs_84_1[2] = {
+     {9, 2},
+     {0, 1},
+ };
+-static arc arcs_85_2[1] = {
++static arc arcs_84_2[1] = {
+     {0, 2},
+ };
+-static state states_85[3] = {
+-    {1, arcs_85_0},
+-    {2, arcs_85_1},
+-    {1, arcs_85_2},
++static state states_84[3] = {
++    {1, arcs_84_0},
++    {2, arcs_84_1},
++    {1, arcs_84_2},
+ };
+-static dfa dfas[86] = {
++static dfa dfas[85] = {
+     {256, "single_input", 0, 3, states_0,
+-     "\004\050\060\000\000\000\000\124\360\024\114\220\023\040\010\000\200\041\044\015\004\002"},
++     "\004\050\060\000\000\000\000\124\360\024\114\220\023\040\010\000\200\041\044\015\002\001"},
+     {257, "file_input", 0, 2, states_1,
+-     "\204\050\060\000\000\000\000\124\360\024\114\220\023\040\010\000\200\041\044\015\004\002"},
++     "\204\050\060\000\000\000\000\124\360\024\114\220\023\040\010\000\200\041\044\015\002\001"},
+     {258, "eval_input", 0, 3, states_2,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+     {259, "decorator", 0, 7, states_3,
+@@ -1874,11 +1850,11 @@
+     {266, "fplist", 0, 3, states_10,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"},
+     {267, "stmt", 0, 2, states_11,
+-     "\000\050\060\000\000\000\000\124\360\024\114\220\023\040\010\000\200\041\044\015\004\002"},
++     "\000\050\060\000\000\000\000\124\360\024\114\220\023\040\010\000\200\041\044\015\002\001"},
+     {268, "simple_stmt", 0, 4, states_12,
+-     "\000\040\040\000\000\000\000\124\360\024\114\000\000\040\010\000\200\041\044\015\000\002"},
++     "\000\040\040\000\000\000\000\124\360\024\114\000\000\040\010\000\200\041\044\015\000\001"},
+     {269, "small_stmt", 0, 2, states_13,
+-     "\000\040\040\000\000\000\000\124\360\024\114\000\000\040\010\000\200\041\044\015\000\002"},
++     "\000\040\040\000\000\000\000\124\360\024\114\000\000\040\010\000\200\041\044\015\000\001"},
+     {270, "expr_stmt", 0, 6, states_14,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+     {271, "augassign", 0, 2, states_15,
+@@ -1890,7 +1866,7 @@
+     {274, "pass_stmt", 0, 2, states_18,
+      "\000\000\000\000\000\000\000\100\000\000\000\000\000\000\000\000\000\000\000\000\000\000"},
+     {275, "flow_stmt", 0, 2, states_19,
+-     "\000\000\000\000\000\000\000\000\360\000\000\000\000\000\000\000\000\000\000\000\000\002"},
++     "\000\000\000\000\000\000\000\000\360\000\000\000\000\000\000\000\000\000\000\000\000\001"},
+     {276, "break_stmt", 0, 2, states_20,
+      "\000\000\000\000\000\000\000\000\020\000\000\000\000\000\000\000\000\000\000\000\000\000"},
+     {277, "continue_stmt", 0, 2, states_21,
+@@ -1898,7 +1874,7 @@
+     {278, "return_stmt", 0, 3, states_22,
+      "\000\000\000\000\000\000\000\000\100\000\000\000\000\000\000\000\000\000\000\000\000\000"},
+     {279, "yield_stmt", 0, 2, states_23,
+-     "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\002"},
++     "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\001"},
+     {280, "raise_stmt", 0, 7, states_24,
+      "\000\000\000\000\000\000\000\000\200\000\000\000\000\000\000\000\000\000\000\000\000\000"},
+     {281, "import_stmt", 0, 2, states_25,
+@@ -1924,7 +1900,7 @@
+     {291, "assert_stmt", 0, 5, states_35,
+      "\000\000\000\000\000\000\000\000\000\000\100\000\000\000\000\000\000\000\000\000\000\000"},
+     {292, "compound_stmt", 0, 2, states_36,
+-     "\000\010\020\000\000\000\000\000\000\000\000\220\023\000\000\000\000\000\000\000\004\000"},
++     "\000\010\020\000\000\000\000\000\000\000\000\220\023\000\000\000\000\000\000\000\002\000"},
+     {293, "if_stmt", 0, 8, states_37,
+      "\000\000\000\000\000\000\000\000\000\000\000\020\000\000\000\000\000\000\000\000\000\000"},
+     {294, "while_stmt", 0, 8, states_38,
+@@ -1940,7 +1916,7 @@
+     {299, "except_clause", 0, 5, states_43,
+      "\000\000\000\000\000\000\000\000\000\000\000\000\100\000\000\000\000\000\000\000\000\000"},
+     {300, "suite", 0, 5, states_44,
+-     "\004\040\040\000\000\000\000\124\360\024\114\000\000\040\010\000\200\041\044\015\000\002"},
++     "\004\040\040\000\000\000\000\124\360\024\114\000\000\040\010\000\200\041\044\015\000\001"},
+     {301, "testlist_safe", 0, 5, states_45,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+     {302, "old_test", 0, 2, states_46,
+@@ -1995,36 +1971,34 @@
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\000\000\000\200\041\044\015\000\000"},
+     {327, "testlist", 0, 3, states_71,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+-    {328, "dictmaker", 0, 5, states_72,
++    {328, "dictorsetmaker", 0, 11, states_72,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+-    {329, "dictorsetmaker", 0, 11, states_73,
+-     "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+-    {330, "classdef", 0, 8, states_74,
+-     "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\004\000"},
+-    {331, "arglist", 0, 8, states_75,
++    {329, "classdef", 0, 8, states_73,
++     "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\002\000"},
++    {330, "arglist", 0, 8, states_74,
+      "\000\040\040\300\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+-    {332, "argument", 0, 4, states_76,
++    {331, "argument", 0, 4, states_75,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+-    {333, "list_iter", 0, 2, states_77,
++    {332, "list_iter", 0, 2, states_76,
+      "\000\000\000\000\000\000\000\000\000\000\000\020\001\000\000\000\000\000\000\000\000\000"},
+-    {334, "list_for", 0, 6, states_78,
++    {333, "list_for", 0, 6, states_77,
+      "\000\000\000\000\000\000\000\000\000\000\000\000\001\000\000\000\000\000\000\000\000\000"},
+-    {335, "list_if", 0, 4, states_79,
++    {334, "list_if", 0, 4, states_78,
+      "\000\000\000\000\000\000\000\000\000\000\000\020\000\000\000\000\000\000\000\000\000\000"},
+-    {336, "comp_iter", 0, 2, states_80,
++    {335, "comp_iter", 0, 2, states_79,
+      "\000\000\000\000\000\000\000\000\000\000\000\020\001\000\000\000\000\000\000\000\000\000"},
+-    {337, "comp_for", 0, 6, states_81,
++    {336, "comp_for", 0, 6, states_80,
+      "\000\000\000\000\000\000\000\000\000\000\000\000\001\000\000\000\000\000\000\000\000\000"},
+-    {338, "comp_if", 0, 4, states_82,
++    {337, "comp_if", 0, 4, states_81,
+      "\000\000\000\000\000\000\000\000\000\000\000\020\000\000\000\000\000\000\000\000\000\000"},
+-    {339, "testlist1", 0, 2, states_83,
++    {338, "testlist1", 0, 2, states_82,
+      "\000\040\040\000\000\000\000\000\000\000\000\000\000\040\010\000\200\041\044\015\000\000"},
+-    {340, "encoding_decl", 0, 2, states_84,
++    {339, "encoding_decl", 0, 2, states_83,
+      "\000\000\040\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"},
+-    {341, "yield_expr", 0, 3, states_85,
+-     "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\002"},
++    {340, "yield_expr", 0, 3, states_84,
++     "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\001"},
+ };
+-static label labels[170] = {
++static label labels[169] = {
+     {0, "EMPTY"},
+     {256, 0},
+     {4, 0},
+@@ -2039,11 +2013,11 @@
+     {50, 0},
+     {288, 0},
+     {7, 0},
+-    {331, 0},
++    {330, 0},
+     {8, 0},
+     {260, 0},
+     {261, 0},
+-    {330, 0},
++    {329, 0},
+     {262, 0},
+     {1, "def"},
+     {1, 0},
+@@ -2070,7 +2044,7 @@
+     {290, 0},
+     {291, 0},
+     {271, 0},
+-    {341, 0},
++    {340, 0},
+     {37, 0},
+     {38, 0},
+     {39, 0},
+@@ -2175,30 +2149,29 @@
+     {319, 0},
+     {10, 0},
+     {26, 0},
+-    {329, 0},
++    {328, 0},
+     {27, 0},
+     {25, 0},
+-    {339, 0},
++    {338, 0},
+     {2, 0},
+     {3, 0},
+-    {334, 0},
+-    {337, 0},
++    {333, 0},
++    {336, 0},
+     {323, 0},
+     {324, 0},
+     {325, 0},
+-    {328, 0},
+     {1, "class"},
++    {331, 0},
+     {332, 0},
+-    {333, 0},
++    {334, 0},
+     {335, 0},
+-    {336, 0},
+-    {338, 0},
+-    {340, 0},
++    {337, 0},
++    {339, 0},
+     {1, "yield"},
+ };
+ grammar _PyParser_Grammar = {
+-    86,
++    85,
+     dfas,
+-    {170, labels},
++    {169, labels},
+     256
+ };
+--- a/Python/getcopyright.c
++++ b/Python/getcopyright.c
+@@ -4,7 +4,7 @@
+ 
+ static char cprt[] = 
+ "\
+-Copyright (c) 2001-2010 Python Software Foundation.\n\
++Copyright (c) 2001-2011 Python Software Foundation.\n\
+ All Rights Reserved.\n\
+ \n\
+ Copyright (c) 2000 BeOpen.com.\n\
+--- a/Python/modsupport.c
++++ b/Python/modsupport.c
+@@ -34,8 +34,9 @@
+ {
+     PyObject *m, *d, *v, *n;
+     PyMethodDef *ml;
+-    if (!Py_IsInitialized())
+-        Py_FatalError("Interpreter not initialized (version mismatch?)");
++    PyInterpreterState *interp = PyThreadState_Get()->interp;
++    if (interp->modules == NULL)
++        Py_FatalError("Python import machinery not initialized");
+     if (module_api_version != PYTHON_API_VERSION) {
+         char message[512];
+         PyOS_snprintf(message, sizeof(message),
+--- a/PCbuild/build_ssl.py
++++ b/PCbuild/build_ssl.py
+@@ -47,7 +47,7 @@
+ # is available.
+ def find_working_perl(perls):
+     for perl in perls:
+-        fh = os.popen(perl + ' -e "use Win32;"')
++        fh = os.popen('"%s" -e "use Win32;"' % perl)
+         fh.read()
+         rc = fh.close()
+         if rc:
+@@ -184,10 +184,10 @@
+     # as "well known" locations
+     perls = find_all_on_path("perl.exe", ["\\perl\\bin", "C:\\perl\\bin"])
+     perl = find_working_perl(perls)
+-    if perl is None:
++    if perl:
++        print("Found a working perl at '%s'" % (perl,))
++    else:
+         print("No Perl installation was found. Existing Makefiles are used.")
+-
+-    print("Found a working perl at '%s'" % (perl,))
+     sys.stdout.flush()
+     # Look for SSL 2 levels up from pcbuild - ie, same place zlib etc all live.
+     ssl_dir = find_best_ssl_dir(("..\\..",))
+--- a/PCbuild/readme.txt
++++ b/PCbuild/readme.txt
+@@ -159,7 +159,7 @@
+     nasmw.exe.
+ 
+     You can also install ActivePerl from
+-        http://www.activestate.com/Products/ActivePerl/
++        http://www.activestate.com/activeperl/
+     if you like to use the official sources instead of the files from 
+     python's subversion repository. The svn version contains pre-build
+     makefiles and assembly files.
+--- a/Include/graminit.h
++++ b/Include/graminit.h
+@@ -72,17 +72,16 @@
+ #define sliceop 325
+ #define exprlist 326
+ #define testlist 327
+-#define dictmaker 328
+-#define dictorsetmaker 329
+-#define classdef 330
+-#define arglist 331
+-#define argument 332
+-#define list_iter 333
+-#define list_for 334
+-#define list_if 335
+-#define comp_iter 336
+-#define comp_for 337
+-#define comp_if 338
+-#define testlist1 339
+-#define encoding_decl 340
+-#define yield_expr 341
++#define dictorsetmaker 328
++#define classdef 329
++#define arglist 330
++#define argument 331
++#define list_iter 332
++#define list_for 333
++#define list_if 334
++#define comp_iter 335
++#define comp_for 336
++#define comp_if 337
++#define testlist1 338
++#define encoding_decl 339
++#define yield_expr 340
+--- a/Include/patchlevel.h
++++ b/Include/patchlevel.h
+@@ -27,7 +27,7 @@
+ #define PY_RELEASE_SERIAL	0
+ 
+ /* Version as a string */
+-#define PY_VERSION      	"2.7.1"
++#define PY_VERSION      	"2.7.1+"
+ /*--end constants--*/
+ 
+ /* Subversion Revision number of this file (not of the repository) */
+--- a/configure.in
++++ b/configure.in
+@@ -1781,8 +1781,8 @@
+ 		fi ;;
+ 	OSF*) LDSHARED="ld -shared -expect_unresolved \"*\"";;
+ 	Darwin/1.3*)
+-		LDSHARED='$(CC) $(LDFLAGS) -bundle'
+-		LDCXXSHARED='$(CXX) $(LDFLAGS) -bundle'
++		LDSHARED='$(CC) -bundle'
++		LDCXXSHARED='$(CXX) -bundle'
+ 		if test "$enable_framework" ; then
+ 			# Link against the framework. All externals should be defined.
+ 			BLDSHARED="$LDSHARED "'$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'
+@@ -1794,8 +1794,8 @@
+ 			LDCXXSHARED="$LDCXXSHARED -undefined suppress"
+ 		fi ;;
+ 	Darwin/1.4*|Darwin/5.*|Darwin/6.*)
+-		LDSHARED='$(CC) $(LDFLAGS) -bundle'
+-		LDCXXSHARED='$(CXX) $(LDFLAGS) -bundle'
++		LDSHARED='$(CC) -bundle'
++		LDCXXSHARED='$(CXX) -bundle'
+ 		if test "$enable_framework" ; then
+ 			# Link against the framework. All externals should be defined.
+ 			BLDSHARED="$LDSHARED "'$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'
+@@ -1816,12 +1816,12 @@
+ 			if test "${enable_universalsdk}"; then
+ 				LDFLAGS="${UNIVERSAL_ARCH_FLAGS} -isysroot ${UNIVERSALSDK} ${LDFLAGS}"
+ 			fi
+-			LDSHARED='$(CC) $(LDFLAGS) -bundle -undefined dynamic_lookup'
+-			LDCXXSHARED='$(CXX) $(LDFLAGS) -bundle -undefined dynamic_lookup'
++			LDSHARED='$(CC) -bundle -undefined dynamic_lookup'
++			LDCXXSHARED='$(CXX) -bundle -undefined dynamic_lookup'
+ 			BLDSHARED="$LDSHARED"
+ 		else
+-			LDSHARED='$(CC) $(LDFLAGS) -bundle'
+-			LDCXXSHARED='$(CXX) $(LDFLAGS) -bundle'
++			LDSHARED='$(CC) -bundle'
++			LDCXXSHARED='$(CXX) -bundle'
+ 			if test "$enable_framework" ; then
+ 				# Link against the framework. All externals should be defined.
+ 				BLDSHARED="$LDSHARED "'$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK)'
+@@ -1844,30 +1844,30 @@
+ 	FreeBSD*)
+ 		if [[ "`$CC -dM -E - </dev/null | grep __ELF__`" != "" ]]
+ 		then
+-			LDSHARED='$(CC) -shared ${LDFLAGS}'
+-			LDCXXSHARED='$(CXX) -shared ${LDFLAGS}'
++			LDSHARED='$(CC) -shared'
++			LDCXXSHARED='$(CXX) -shared'
+ 		else
+-			LDSHARED="ld -Bshareable ${LDFLAGS}"
++			LDSHARED="ld -Bshareable"
+ 		fi;;
+ 	OpenBSD*)
+ 		if [[ "`$CC -dM -E - </dev/null | grep __ELF__`" != "" ]]
+ 		then
+-				LDSHARED='$(CC) -shared $(CCSHARED) ${LDFLAGS}'
+-				LDCXXSHARED='$(CXX) -shared $(CCSHARED) ${LDFLAGS}'
++				LDSHARED='$(CC) -shared $(CCSHARED)'
++				LDCXXSHARED='$(CXX) -shared $(CCSHARED)'
+ 		else
+ 				case `uname -r` in
+ 				[[01]].* | 2.[[0-7]] | 2.[[0-7]].*)
+ 				   LDSHARED="ld -Bshareable ${LDFLAGS}"
+ 				   ;;
+ 				*)
+-				   LDSHARED='$(CC) -shared $(CCSHARED) ${LDFLAGS}'
+-				   LDCXXSHARED='$(CXX) -shared $(CCSHARED) ${LDFLAGS}'
++				   LDSHARED='$(CC) -shared $(CCSHARED)'
++				   LDCXXSHARED='$(CXX) -shared $(CCSHARED)'
+ 				   ;;
+ 				esac
+ 		fi;;
+ 	NetBSD*|DragonFly*)
+-		LDSHARED="cc -shared ${LDFLAGS}"
+-		LDCXXSHARED="c++ -shared ${LDFLAGS}";;
++		LDSHARED='$(CC) -shared'
++		LDCXXSHARED='$(CXX) -shared';;
+ 	OpenUNIX*|UnixWare*)
+ 		if test "$GCC" = "yes" ; then
+ 			LDSHARED='$(CC) -shared'
+@@ -2494,7 +2494,7 @@
+ 			;;
+ 		solaris)
+ 			if test -f /etc/netconfig; then
+-                          if /usr/xpg4/bin/grep -q tcp6 /etc/netconfig; then
++                          if $GREP -q tcp6 /etc/netconfig; then
+ 				ipv6type=$i
+ 				ipv6trylibc=yes
+                           fi
+--- a/Grammar/Grammar
++++ b/Grammar/Grammar
+@@ -114,7 +114,6 @@
+ sliceop: ':' [test]
+ exprlist: expr (',' expr)* [',']
+ testlist: test (',' test)* [',']
+-dictmaker: test ':' test (',' test ':' test)* [',']
+ dictorsetmaker: ( (test ':' test (comp_for | (',' test ':' test)* [','])) |
+                   (test (comp_for | (',' test)* [','])) )
+ 
+--- a/Objects/typeobject.c
++++ b/Objects/typeobject.c
+@@ -313,7 +313,7 @@
+     if (type != &PyType_Type)
+         mod = PyDict_GetItemString(type->tp_dict, "__abstractmethods__");
+     if (!mod) {
+-        PyErr_Format(PyExc_AttributeError, "__abstractmethods__");
++        PyErr_SetString(PyExc_AttributeError, "__abstractmethods__");
+         return NULL;
+     }
+     Py_XINCREF(mod);
+@@ -327,8 +327,17 @@
+        abc.ABCMeta.__new__, so this function doesn't do anything
+        special to update subclasses.
+     */
+-    int res = PyDict_SetItemString(type->tp_dict,
+-                                   "__abstractmethods__", value);
++    int res;
++    if (value != NULL) {
++        res = PyDict_SetItemString(type->tp_dict, "__abstractmethods__", value);
++    }
++    else {
++        res = PyDict_DelItemString(type->tp_dict, "__abstractmethods__");
++        if (res && PyErr_ExceptionMatches(PyExc_KeyError)) {
++            PyErr_SetString(PyExc_AttributeError, "__abstractmethods__");
++            return -1;
++        }
++    }
+     if (res == 0) {
+         PyType_Modified(type);
+         if (value && PyObject_IsTrue(value)) {
+@@ -3002,10 +3011,7 @@
+     Py_ssize_t size;
+     PyObject *slots_a, *slots_b;
+ 
+-    if (base != b->tp_base)
+-        return 0;
+-    if (equiv_structs(a, base) && equiv_structs(b, base))
+-        return 1;
++    assert(base == b->tp_base);
+     size = base->tp_basicsize;
+     if (a->tp_dictoffset == size && b->tp_dictoffset == size)
+         size += sizeof(PyObject *);
+--- a/Objects/memoryobject.c
++++ b/Objects/memoryobject.c
+@@ -34,9 +34,6 @@
+ memory_getbuf(PyMemoryViewObject *self, Py_buffer *view, int flags)
+ {
+     int res = 0;
+-    /* XXX for whatever reason fixing the flags seems necessary */
+-    if (self->view.readonly)
+-        flags &= ~PyBUF_WRITABLE;
+     if (self->view.obj != NULL)
+         res = PyObject_GetBuffer(self->view.obj, view, flags);
+     if (view)
+@@ -411,7 +408,7 @@
+     Py_buffer view;
+     PyObject *res;
+ 
+-    if (PyObject_GetBuffer((PyObject *)self, &view, PyBUF_FULL) < 0)
++    if (PyObject_GetBuffer((PyObject *)self, &view, PyBUF_SIMPLE) < 0)
+         return NULL;
+ 
+     res = PyBytes_FromStringAndSize(NULL, view.len);
+--- a/Objects/obmalloc.c
++++ b/Objects/obmalloc.c
+@@ -682,11 +682,19 @@
+ obmalloc in a small constant time, independent of the number of arenas
+ obmalloc controls.  Since this test is needed at every entry point, it's
+ extremely desirable that it be this fast.
++
++Since Py_ADDRESS_IN_RANGE may be reading from memory which was not allocated
++by Python, it is important that (POOL)->arenaindex is read only once, as
++another thread may be concurrently modifying the value without holding the
++GIL.  To accomplish this, the arenaindex_temp variable is used to store
++(POOL)->arenaindex for the duration of the Py_ADDRESS_IN_RANGE macro's
++execution.  The caller of the macro is responsible for declaring this
++variable.
+ */
+ #define Py_ADDRESS_IN_RANGE(P, POOL)                    \
+-    ((POOL)->arenaindex < maxarenas &&                  \
+-     (uptr)(P) - arenas[(POOL)->arenaindex].address < (uptr)ARENA_SIZE && \
+-     arenas[(POOL)->arenaindex].address != 0)
++    ((arenaindex_temp = (POOL)->arenaindex) < maxarenas &&              \
++     (uptr)(P) - arenas[arenaindex_temp].address < (uptr)ARENA_SIZE && \
++     arenas[arenaindex_temp].address != 0)
+ 
+ 
+ /* This is only useful when running memory debuggers such as
+@@ -945,6 +953,9 @@
+     block *lastfree;
+     poolp next, prev;
+     uint size;
++#ifndef Py_USING_MEMORY_DEBUGGER
++    uint arenaindex_temp;
++#endif
+ 
+     if (p == NULL)      /* free(NULL) has no effect */
+         return;
+@@ -1167,6 +1178,9 @@
+     void *bp;
+     poolp pool;
+     size_t size;
++#ifndef Py_USING_MEMORY_DEBUGGER
++    uint arenaindex_temp;
++#endif
+ 
+     if (p == NULL)
+         return PyObject_Malloc(nbytes);
+@@ -1865,8 +1879,10 @@
+ int
+ Py_ADDRESS_IN_RANGE(void *P, poolp pool)
+ {
+-    return pool->arenaindex < maxarenas &&
+-           (uptr)P - arenas[pool->arenaindex].address < (uptr)ARENA_SIZE &&
+-           arenas[pool->arenaindex].address != 0;
++    uint arenaindex_temp = pool->arenaindex;
++
++    return arenaindex_temp < maxarenas &&
++           (uptr)P - arenas[arenaindex_temp].address < (uptr)ARENA_SIZE &&
++           arenas[arenaindex_temp].address != 0;
+ }
+ #endif
+--- a/Objects/floatobject.c
++++ b/Objects/floatobject.c
+@@ -716,10 +716,20 @@
+ #endif
+     PyFPE_START_PROTECT("modulo", return 0)
+     mod = fmod(vx, wx);
+-    /* note: checking mod*wx < 0 is incorrect -- underflows to
+-       0 if wx < sqrt(smallest nonzero double) */
+-    if (mod && ((wx < 0) != (mod < 0))) {
+-        mod += wx;
++    if (mod) {
++        /* ensure the remainder has the same sign as the denominator */
++        if ((wx < 0) != (mod < 0)) {
++            mod += wx;
++        }
++    }
++    else {
++        /* the remainder is zero, and in the presence of signed zeroes
++           fmod returns different results across platforms; ensure
++           it has the same sign as the denominator; we'd like to do
++           "mod = wx * 0.0", but that may get optimized away */
++        mod *= mod;  /* hide "mod = +0" from optimizer */
++        if (wx < 0.0)
++            mod = -mod;
+     }
+     PyFPE_END_PROTECT(mod)
+     return PyFloat_FromDouble(mod);
+--- a/Misc/PURIFY.README
++++ /dev/null
+@@ -1,97 +0,0 @@
+-Purify (tm) and Quantify (tm) are commercial software quality
+-assurance tools available from IBM <http://www.ibm.com/software/rational/>.
+-Purify is essentially a memory access
+-verifier and leak detector; Quantify is a C level profiler.  The rest
+-of this file assumes you generally know how to use Purify and
+-Quantify, and that you have installed valid licenses for these
+-products.  If you haven't installed such licenses, you can ignore the
+-following since it won't help you a bit!
+-
+-You can easily build a Purify or Quantify instrumented version of the
+-Python interpreter by passing the PURIFY variable to the make command
+-at the top of the Python tree:
+-
+-    make PURIFY=purify
+-
+-This assumes that the `purify' program is on your $PATH.  Note that
+-you cannot both Purify and Quantify the Python interpreter (or any
+-program for that matter) at the same time.  If you want to build a
+-Quantify'd interpreter, do this:
+-
+-    make PURIFY=quantify
+-
+-Starting with Python 2.3, pymalloc is enabled by default.  This
+-will cause many supurious warnings.  Modify Objects/obmalloc.c
+-and enable Py_USING_MEMORY_DEBUGGER by uncommenting it.
+-README.valgrind has more details about why this is necessary.
+-See below about setting up suppressions.  Some tests may not
+-run well with Purify due to heavy memory or CPU usage.  These
+-tests may include: test_largefile, test_import, and test_long.
+-
+-Please report any findings (problems or no warnings) to python-dev@python.org.
+-It may be useful to submit a bug report for any problems.  
+-
+-When running the regression test (make test), I have found it useful
+-to set my PURIFYOPTIONS environment variable using the following
+-(bash) shell function.  Check out the Purify documentation for
+-details:
+-
+-p() {
+-  chainlen='-chain-length=12'
+-  ignoresigs='-ignore-signals="SIGHUP,SIGINT,SIGQUIT,SIGILL,SIGTRAP,SIGAVRT,SIGEMT,SIGFPE,SIGKILL,SIGBUS,SIGSEGV,SIGPIPE,SIGTERM,SIGUSR1,SIGUSR2,SIGPOLL,SIGXCPU,SIGXFSZ,SIGFREEZE,SIGTHAW,SIGRTMIN,SIGRTMAX"'
+-  followchild='-follow-child-processes=yes'
+-  threads='-max-threads=50'
+-  export PURIFYOPTIONS="$chainlen $ignoresigs $followchild $threads"
+-  echo $PURIFYOPTIONS
+-}
+-
+-Note that you may want to crank -chain-length up even further.  A
+-value of 20 should get you the entire stack up into the Python C code
+-in all situations.
+-
+-With the regression test on a fatly configured interpreter
+-(i.e. including as many modules as possible in your Modules/Setup
+-file), you'll probably get a gabillion UMR errors, and a few MLK
+-errors.  I think most of these can be safely suppressed by putting the
+-following in your .purify file:
+-
+-    suppress umr ...; "socketmodule.c"
+-    suppress umr ...; time_strftime
+-    suppress umr ...; "dbmmodule.c"
+-    suppress umr ...; "gdbmmodule.c"
+-    suppress umr ...; "grpmodule.c"
+-    suppress umr ...; "nismodule.c"
+-    suppress umr ...; "pwdmodule.c"
+-
+-Note: this list is very old and may not be accurate any longer.
+-It's possible some of these no longer need to be suppressed.
+-You will also need to suppress warnings (at least umr)
+-from Py_ADDRESS_IN_RANGE.
+-
+-This will still leave you with just a few UMR, mostly in the readline
+-library, which you can safely ignore.  A lot of work has gone into
+-Python 1.5 to plug as many leaks as possible.
+-
+-Using Purify or Quantify in this way will give you coarse grained
+-reports on the whole Python interpreter.  You can actually get more
+-fine grained control over both by linking with the optional `pure'
+-module, which exports (most of) the Purify and Quantify C API's into
+-Python.  To link in this module (it must be statically linked), edit
+-your Modules/Setup file for your site, and rebuild the interpreter.
+-You might want to check out the comments in the Modules/puremodule.c
+-file for some idiosyncrasies.
+-
+-Using this module, you can actually profile or leak test a small
+-section of code, instead of the whole interpreter.  Using this in
+-conjuction with pdb.py, dbx, or the profiler.py module really gives
+-you quite a bit of introspective power.
+-
+-Naturally there are a couple of caveats.  This has only been tested
+-with Purify 4.0.1 and Quantify 2.1-beta on Solaris 2.5.  Purify 4.0.1
+-does not work with Solaris 2.6, but Purify 4.1 which reportedly will,
+-is currently in beta test.  There are funky problems when Purify'ing a 
+-Python interpreter build with threads.  I've had a lot of problems
+-getting this to work, so I generally don't build with threads when I'm 
+-Purify'ing.  If you get this to work, let us know!
+-
+--Barry Warsaw <bwarsaw@cnri.reston.va.us>
+--- a/Misc/maintainers.rst
++++ b/Misc/maintainers.rst
+@@ -65,7 +65,7 @@
+ binhex
+ bisect              rhettinger
+ bz2
+-calendar
++calendar            rhettinger
+ cgi
+ CGIHTTPServer
+ cgitb
+@@ -75,7 +75,8 @@
+ code
+ codecs              lemburg, doerwalter
+ codeop
+-collections         rhettinger, stutzbach
++collections         rhettinger
++collections._abcoll rhettinger, stutzbach
+ colorsys
+ compileall
+ ConfigParser        lukasz.langa
+@@ -84,10 +85,10 @@
+ copy_reg            alexandre.vassalotti
+ cProfile
+ crypt
+-csv
++csv                 skip.montanaro
+ ctypes              theller
+ curses
+-datetime            alexander.belopolsky
++datetime            belopolsky
+ dbm
+ decimal             facundobatista, rhettinger, mark.dickinson
+ difflib             tim_one
+@@ -107,7 +108,7 @@
+ fpectl
+ fractions           mark.dickinson, rhettinger
+ ftplib              giampaolo.rodola
+-functools
++functools           ncoghlan, rhettinger
+ gc                  pitrou
+ getopt
+ getpass
+@@ -130,7 +131,7 @@
+ inspect
+ io                  pitrou, benjamin.peterson, stutzbach
+ itertools           rhettinger
+-json                bob.ippolito (inactive)
++json                bob.ippolito (inactive), rhettinger
+ keyword
+ lib2to3             benjamin.peterson
+ linecache
+@@ -218,18 +219,18 @@
+ test
+ textwrap            georg.brandl
+ threading           pitrou
+-time                alexander.belopolsky
++time                belopolsky
+ timeit              georg.brandl
+ Tkinter             gpolo
+ token               georg.brandl
+ tokenize
+-trace               alexander.belopolsky
++trace               belopolsky
+ traceback           georg.brandl*
+ tty
+ turtle              gregorlingl
+ types
+ unicodedata         loewis, lemburg, ezio.melotti
+-unittest            michael.foord
++unittest            michael.foord, ezio.melotti
+ urllib              orsenthil
+ uu
+ uuid
+@@ -271,7 +272,7 @@
+ FreeBSD
+ HP-UX
+ Linux
+-Mac                 ronaldoussoren
++Mac                 ronaldoussoren, ned.deily
+ NetBSD1
+ OS2/EMX             aimacintyre
+ Solaris
+@@ -305,9 +306,9 @@
+ release management  tarek, lemburg, benjamin.peterson, barry, loewis,
+                     gvanrossum, anthonybaxter
+ str.format          eric.smith
+-testing             michael.foord, pitrou, giampaolo.rodola
++testing             michael.foord, pitrou, giampaolo.rodola, ezio.melotti
+ threads             pitrou
+-time and dates      lemburg
++time and dates      lemburg, belopolsky
+ unicode             lemburg, ezio.melotti, haypo
+ version control
+ ==================  ===========
+--- a/Misc/NEWS
++++ b/Misc/NEWS
+@@ -1,7 +1,226 @@
+-+++++++++++
+ Python News
+ +++++++++++
+ 
++What's New in Python 2.7.2?
++===========================
++
++*Release date: XXXX-XX-XX*
++
++Core and Builtins
++-----------------
++
++- Issue #10451: memoryview objects could allow to mutate a readable buffer.
++  Initial patch by Ross Lagerwall.
++
++- Issue #10892: Don't segfault when trying to delete __abstractmethods__ from a
++  class.
++
++- Issue #8020: Avoid a crash where the small objects allocator would read
++  non-Python managed memory while it is being modified by another thread.
++  Patch by Matt Bandy.
++
++- Issue #11004: Repaired edge case in deque.count().
++
++- Issue #8278: On Windows and with a NTFS filesystem, os.stat() and os.utime()
++  can now handle dates after 2038.
++
++- Issue #4236: Py_InitModule4 now checks the import machinery directly
++  rather than the Py_IsInitialized flag, avoiding a Fatal Python
++  error in certain circumstances when an import is done in __del__.
++
++- Issue #10674: Remove unused 'dictmaker' rule from grammar.
++
++- Issue #10596: Fix float.__mod__ to have the same behaviour as
++  float.__divmod__ with respect to signed zeros.  -4.0 % 4.0 should be
++  0.0, not -0.0.
++
++Library
++-------
++
++- Issue #4681: Allow mmap() to work on file sizes and offsets larger than
++  4GB, even on 32-bit builds.  Initial patch by Ross Lagerwall, adapted for
++  32-bit Windows.
++
++- Issue #11171: Fix detection of config/Makefile when --prefix !=
++  --exec-prefix, which caused Python to not start.
++
++- Issue #11116: any error during addition of a message to a mailbox now causes
++  a rollback, instead of leaving the mailbox partially modified.
++
++- Issue #8275: Fix passing of callback arguments with ctypes under Win64.
++  Patch by Stan Mihai.
++
++- Issue #10940: Workaround an IDLE hang on Mac OS X 10.6 when using the
++  menu accelerators for Open Module, Go to Line, and New Indent Width.
++  The accelerators still work but no longer appear in the menu items.
++
++- Issue #10907: Warn OS X 10.6 IDLE users to use ActiveState Tcl/Tk 8.5, rather
++  than the currently problematic Apple-supplied one, when running with the
++  64-/32-bit installer variant.
++
++- Issue #11052: Correct IDLE menu accelerators on Mac OS X for Save
++  commands.
++
++- Issue #10949: Improved robustness of rotating file handlers.
++
++- Issue #10955: Fix a potential crash when trying to mmap() a file past its
++  length.  Initial patch by Ross Lagerwall.
++
++- Issue #10898: Allow compiling the posix module when the C library defines
++  a symbol named FSTAT.
++
++- Issue #6075: IDLE on Mac OS X now works with both Carbon AquaTk and
++  Cocoa AquaTk.
++
++- Issue #10916: mmap should not segfault when a file is mapped using 0 as
++  length and a non-zero offset, and an attempt to read past the end of file
++  is made (IndexError is raised instead).  Patch by Ross Lagerwall.
++
++- Issue #10875: Update Regular Expression HOWTO; patch by 'SilentGhost'.
++
++- Issue #10827: Changed the rules for 2-digit years.  The time.asctime
++  function will now format any year when ``time.accept2dyear`` is
++  false and will accept years >= 1000 otherwise.  The year range
++  accepted by ``time.mktime`` and ``time.strftime`` is still system
++  dependent, but ``time.mktime`` will now accept full range supported
++  by the OS.  Conversion of 2-digit years to 4-digit is deprecated.
++
++- Issue #10869: Fixed bug where ast.increment_lineno modified the root
++  node twice.
++
++- Issue #7858: Raise an error properly when os.utime() fails under Windows
++  on an existing file.
++
++- Issue #3839: wsgiref should not override a Content-Length header set by
++  the application.  Initial patch by Clovis Fabricio.
++
++- Issue #10806, issue #9905: Fix subprocess pipes when some of the standard
++  file descriptors (0, 1, 2) are closed in the parent process.  Initial
++  patch by Ross Lagerwall.
++
++- Issue #4662: os.tempnam(), os.tmpfile() and os.tmpnam() now raise a py3k
++  DeprecationWarning.
++
++- Subclasses of collections.OrderedDict now work correctly with __missing__.
++
++- Issue 10753 - Characters ';','=' and ',' in the PATH_INFO environment
++  variable won't be quoted when the URI is constructed by the wsgiref.util 's
++  request_uri method. According to RFC 3986, these characters can be a part of
++  params in PATH component of URI and need not be quoted.
++
++- Issue 10738: Fix webbrowser.Opera.raise_opts
++
++- Issue 9824: SimpleCookie now encodes , and ; in values to cater to how
++  browsers actually parse cookies.
++
++- Issue #1379416: eliminated a source of accidental unicode promotion in
++  email.header.Header.encode.
++
++- Issue #5258/#10642: if site.py encounters a .pth file that generates an error,
++  it now prints the filename, line number, and traceback to stderr and skips
++  the rest of that individual file, instead of stopping processing entirely.
++
++- Issue #10750: The ``raw`` attribute of buffered IO objects is now read-only.
++
++- Issue #10242: unittest.TestCase.assertItemsEqual makes too many assumptions
++  about input.
++
++- Issue #10611: SystemExit should not cause a unittest test run to exit.
++
++- Issue #6791: Limit header line length (to 65535 bytes) in http.client,
++  to avoid denial of services from the other party.
++
++- Issue #10404: Use ctl-button-1 on OSX for the context menu in Idle.
++
++- Issue #9907: Fix tab handling on OSX when using editline by calling
++  rl_initialize first, then setting our custom defaults, then reading .editrc.
++
++- Issue #4188: Avoid creating dummy thread objects when logging operations
++  from the threading module (with the internal verbose flag activated).
++
++- Issue #9721: Fix the behavior of urljoin when the relative url starts with a
++  ';' character. Patch by Wes Chow.
++
++- Issue #10714: Limit length of incoming request in http.server to 65536 bytes
++  for security reasons.  Initial patch by Ross Lagerwall.
++
++- Issue #9558: Fix distutils.command.build_ext with VS 8.0.
++
++- Issue #10695: passing the port as a string value to telnetlib no longer
++  causes debug mode to fail.
++
++- Issue #10107: Warn about unsaved files in IDLE on OSX.
++
++- Issue #10406: Enable Rstrip IDLE extension on OSX (just like on other
++  platforms).
++
++- Issue #10478: Reentrant calls inside buffered IO objects (for example by
++  way of a signal handler) now raise a RuntimeError instead of freezing the
++  current process.
++
++- Issue #10497: Fix incorrect use of gettext in argparse.
++
++- Issue #10464: netrc now correctly handles lines with embedded '#' characters.
++
++- Issue #1731717: Fixed the problem where subprocess.wait() could cause an
++  OSError exception when The OS had been told to ignore SIGCLD in our process
++  or otherwise not wait for exiting child processes.
++
++- Issue #9509: argparse now properly handles IOErrors raised by
++  argparse.FileType.
++
++Extension Modules
++-----------------
++
++- Issue #678250: Make mmap flush a noop on ACCESS_READ and ACCESS_COPY.
++
++Build
++-----
++
++- Issue #11268: Prevent Mac OS X Installer failure if Documentation
++  package had previously been installed.
++
++- Issue #11079: The /Applications/Python x.x folder created by the Mac
++  OS X installers now includes a link to the installed documentation.
++
++- Issue #11054: Allow Mac OS X installer builds to again work on 10.5 with
++  the system-provided Python.
++
++- Issue #10843: Update third-party library versions used in OS X
++  32-bit installer builds: bzip2 1.0.6, readline 6.1.2, SQLite 3.7.4
++  (with FTS3/FTS4 and RTREE enabled), and ncursesw 5.5 (wide-char
++  support enabled).
++
++- Don't run pgen twice when using make -j.
++
++- Issue #7716: Under Solaris, don't assume existence of /usr/xpg4/bin/grep in
++  the configure script but use $GREP instead.  Patch by Fabian Groffen.
++
++- Issue #10475: Don't hardcode compilers for LDSHARED/LDCXXSHARED on NetBSD
++  and DragonFly BSD.  Patch by Nicolas Joly.
++
++- Issue #10655: Fix the build on PowerPC on Linux with GCC when building with
++  timestamp profiling (--with-tsc): the preprocessor test for the PowerPC
++  support now looks for "__powerpc__" as well as "__ppc__": the latter seems to
++  only be present on OS X; the former is the correct one for Linux with GCC.
++
++Tests
++-----
++
++- Issue #10822: Fix test_posix:test_getgroups failure under Solaris.  Patch
++  by Ross Lagerwall.
++
++- Issue #6293: Have regrtest.py echo back sys.flags.  This is done by default
++  in whole runs and enabled selectively using ``--header`` when running an
++  explicit list of tests.  Original patch by Collin Winter.
++
++- Issue #775964: test_grp now skips YP/NIS entries instead of failing when
++  encountering them.
++
++- Issue #7110: regrtest now sends test failure reports and single-failure
++  tracebacks to stderr rather than stdout.
++
++
+ What's New in Python 2.7.1?
+ ===========================
+ 
+@@ -10,12 +229,25 @@
+ Library
+ -------
+ 
++- Issue #2236: distutils' mkpath ignored the mode parameter.
++
++- Fix typo in one sdist option (medata-check).
++
++- Issue #10323: itertools.islice() now consumes the minimum number of
++  inputs before stopping.  Formerly, the final state of the underlying
++  iterator was undefined.
++
++- Issue #10565: The collections.Iterator ABC now checks for both
++  ``__iter__`` and ``next``.
++
+ - Issue #10092: Properly reset locale in calendar.Locale*Calendar classes.
+ 
+ - Issue #10459: Update CJK character names to Unicode 5.2.
+ 
+ - Issue #6098: Don't claim DOM level 3 conformance in minidom.
+ 
++- Issue #10561: In pdb, clear the breakpoints by the breakpoint number.
++
+ - Issue #5762: Fix AttributeError raised by ``xml.dom.minidom`` when an empty
+   XML namespace attribute is encountered.
+ 
+@@ -1109,7 +1341,7 @@
+   with a non-empty format string. This is an effort to future-proof user
+   code. If a derived class does not currently implement __format__ but later
+   adds its own __format__, it would most likely break user code that had
+-  supplied a format string. This will be changed to a DeprecationWaring in
++  supplied a format string. This will be changed to a DeprecationWarning in
+   Python 3.3 and it will be an error in Python 3.4.
+ 
+ - Issue #8268: Old-style classes (not just instances) now support weak
+@@ -1400,6 +1632,10 @@
+ Library
+ -------
+ 
++- Issue #7904: Changes to urllib.parse.urlsplit to handle schemes as defined by
++  RFC3986. Anything before :// is considered a scheme and is followed by an
++  authority (or netloc) and by '/' led path, which is optional.
++
+ - Issue #1555570: email no longer inserts extra blank lines when a \r\n
+   combo crosses an 8192 byte boundary.
+ 
+--- a/Misc/ACKS
++++ b/Misc/ACKS
+@@ -41,6 +41,7 @@
+ Greg Ball
+ Luigi Ballabio
+ Jeff Balogh
++Matt Bandy
+ Michael J. Barber
+ Chris Barker
+ Nick Barnes
+@@ -129,6 +130,7 @@
+ Per Cederqvist
+ Octavian Cerna
+ Pascal Chambon
++John Chandler
+ Hye-Shik Chang
+ Jeffrey Chang
+ Mitch Chapman
+@@ -241,6 +243,7 @@
+ David Everly
+ Greg Ewing
+ Martijn Faassen
++Clovis Fabricio
+ Andreas Faerber
+ Bill Fancher
+ Troy J. Farrell
+@@ -300,6 +303,7 @@
+ Hans de Graaff
+ Eddy De Greef
+ Duncan Grisby
++Fabian Groffen
+ Dag Gruneau
+ Michael Guravage
+ Lars Gustbel
+@@ -375,6 +379,7 @@
+ Fredrik Hrd
+ Mihai Ibanescu
+ Lars Immisch
++Bobby Impollonia
+ Meador Inge
+ Tony Ingraldi
+ John Interrante
+@@ -395,6 +400,7 @@
+ Fredrik Johansson
+ Gregory K. Johnson
+ Simon Johnston
++Nicolas Joly
+ Evan Jones
+ Jeremy Jones
+ Richard Jones
+@@ -446,6 +452,7 @@
+ Ivan Krsti
+ Andrew Kuchling
+ Vladimir Kushnir
++Ross Lagerwall
+ Cameron Laird
+ ukasz Langa
+ Tino Lange
+@@ -472,6 +479,7 @@
+ Christopher Tur Lesniewski-Laas
+ Mark Levinson
+ William Lewis
++Xuanji Li
+ Robert van Liere
+ Ross Light
+ Shawn Ligocki
+@@ -531,6 +539,7 @@
+ Mike Meyer
+ Steven Miale
+ Trent Mick
++Stan Mihai
+ Aristotelis Mikropoulos
+ Damien Miller
+ Chad Miller
+@@ -790,6 +799,7 @@
+ R Lindsay Todd
+ Bennett Todd
+ Matias Torchinsky
++Sandro Tosi
+ Richard Townsend
+ Laurence Tratt
+ John Tromp
+@@ -825,6 +835,7 @@
+ Charles Waldman
+ Richard Walker
+ Larry Wall
++Kevin Walzer
+ Greg Ward
+ Barry Warsaw
+ Steve Waterbury
+@@ -839,6 +850,7 @@
+ Rickard Westman
+ Jeff Wheeler
+ Christopher White
++David White
+ Mats Wichmann
+ Truida Wiedijk
+ Felix Wiemann
+--- a/Mac/PythonLauncher/Info.plist.in
++++ b/Mac/PythonLauncher/Info.plist.in
+@@ -40,7 +40,7 @@
+ 	<key>CFBundleExecutable</key>
+ 	<string>PythonLauncher</string>
+ 	<key>CFBundleGetInfoString</key>
+-	<string>%VERSION%,  001-2006 Python Software Foundation</string>
++	<string>%VERSION%,  2001-2011 Python Software Foundation</string>
+ 	<key>CFBundleIconFile</key>
+ 	<string>PythonLauncher.icns</string>
+ 	<key>CFBundleIdentifier</key>
+--- a/Mac/BuildScript/build-installer.py
++++ b/Mac/BuildScript/build-installer.py
+@@ -1,12 +1,14 @@
+-#!/usr/bin/env python
++#!/usr/bin/python
+ """
+-This script is used to build the "official unofficial" universal build on
+-Mac OS X. It requires Mac OS X 10.4, Xcode 2.2 and the 10.4u SDK to do its
+-work.  64-bit or four-way universal builds require at least OS X 10.5 and
+-the 10.5 SDK.
+-
+-Please ensure that this script keeps working with Python 2.3, to avoid
+-bootstrap issues (/usr/bin/python is Python 2.3 on OSX 10.4)
++This script is used to build "official" universal installers on Mac OS X.
++It requires at least Mac OS X 10.4, Xcode 2.2 and the 10.4u SDK for
++32-bit builds.  64-bit or four-way universal builds require at least
++OS X 10.5 and the 10.5 SDK.
++
++Please ensure that this script keeps working with Python 2.5, to avoid
++bootstrap issues (/usr/bin/python is Python 2.5 on OSX 10.5).  Sphinx,
++which is used to build the documentation, currently requires at least
++Python 2.4.
+ 
+ Usage: see USAGE variable in the script.
+ """
+@@ -40,16 +42,19 @@
+         if ln.startswith(variable):
+             value = ln[len(variable):].strip()
+             return value[1:-1]
++    raise RuntimeError, "Cannot find variable %s" % variable[:-1]
+ 
+ def getVersion():
+     return grepValue(os.path.join(SRCDIR, 'configure'), 'PACKAGE_VERSION')
+ 
++def getVersionTuple():
++    return tuple([int(n) for n in getVersion().split('.')])
++
+ def getFullVersion():
+     fn = os.path.join(SRCDIR, 'Include', 'patchlevel.h')
+     for ln in open(fn):
+         if 'PY_VERSION' in ln:
+             return ln.split()[-1][1:-1]
+-
+     raise RuntimeError, "Cannot find full version??"
+ 
+ # The directory we'll use to create the build (will be erased and recreated)
+@@ -114,6 +119,8 @@
+ 
+ CC = target_cc_map[DEPTARGET]
+ 
++PYTHON_3 = getVersionTuple() >= (3, 0)
++
+ USAGE = textwrap.dedent("""\
+     Usage: build_python [options]
+ 
+@@ -139,9 +146,9 @@
+     if DEPTARGET < '10.5':
+         result.extend([
+           dict(
+-              name="Bzip2 1.0.5",
+-              url="http://www.bzip.org/1.0.5/bzip2-1.0.5.tar.gz",
+-              checksum='3c15a0c8d1d3ee1c46a1634d00617b1a',
++              name="Bzip2 1.0.6",
++              url="http://bzip.org/1.0.6/bzip2-1.0.6.tar.gz",
++              checksum='00b516f4704d4a7cb50a1d97e6e8e15b',
+               configure=None,
+               install='make install CC=%s PREFIX=%s/usr/local/ CFLAGS="-arch %s -isysroot %s"'%(
+                   CC,
+@@ -164,29 +171,33 @@
+           ),
+           dict(
+               # Note that GNU readline is GPL'd software
+-              name="GNU Readline 5.1.4",
+-              url="http://ftp.gnu.org/pub/gnu/readline/readline-5.1.tar.gz" ,
+-              checksum='7ee5a692db88b30ca48927a13fd60e46',
++              name="GNU Readline 6.1.2",
++              url="http://ftp.gnu.org/pub/gnu/readline/readline-6.1.tar.gz" ,
++              checksum='fc2f7e714fe792db1ce6ddc4c9fb4ef3',
+               patchlevel='0',
+               patches=[
+                   # The readline maintainers don't do actual micro releases, but
+                   # just ship a set of patches.
+-                  'http://ftp.gnu.org/pub/gnu/readline/readline-5.1-patches/readline51-001',
+-                  'http://ftp.gnu.org/pub/gnu/readline/readline-5.1-patches/readline51-002',
+-                  'http://ftp.gnu.org/pub/gnu/readline/readline-5.1-patches/readline51-003',
+-                  'http://ftp.gnu.org/pub/gnu/readline/readline-5.1-patches/readline51-004',
++                  'http://ftp.gnu.org/pub/gnu/readline/readline-6.1-patches/readline61-001',
++                  'http://ftp.gnu.org/pub/gnu/readline/readline-6.1-patches/readline61-002',
+               ]
+           ),
+           dict(
+-              name="SQLite 3.6.11",
+-              url="http://www.sqlite.org/sqlite-3.6.11.tar.gz",
+-              checksum='7ebb099696ab76cc6ff65dd496d17858',
++              name="SQLite 3.7.4",
++              url="http://www.sqlite.org/sqlite-autoconf-3070400.tar.gz",
++              checksum='8f0c690bfb33c3cbbc2471c3d9ba0158',
++              configure_env=('CFLAGS="-Os'
++                                  ' -DSQLITE_ENABLE_FTS3'
++                                  ' -DSQLITE_ENABLE_FTS3_PARENTHESIS'
++                                  ' -DSQLITE_ENABLE_RTREE'
++                                  ' -DSQLITE_TCL=0'
++                                  '"'),
+               configure_pre=[
+                   '--enable-threadsafe',
+-                  '--enable-tempstore',
+                   '--enable-shared=no',
+                   '--enable-static=yes',
+-                  '--disable-tcl',
++                  '--disable-readline',
++                  '--disable-dependency-tracking',
+               ]
+           ),
+           dict(
+@@ -194,6 +205,7 @@
+               url="http://ftp.gnu.org/pub/gnu/ncurses/ncurses-5.5.tar.gz",
+               checksum='e73c1ac10b4bfc46db43b2ddfd6244ef',
+               configure_pre=[
++                  "--enable-widec",
+                   "--without-cxx",
+                   "--without-ada",
+                   "--without-progs",
+@@ -220,24 +232,26 @@
+           ),
+         ])
+ 
+-    result.extend([
+-      dict(
+-          name="Sleepycat DB 4.7.25",
+-          url="http://download.oracle.com/berkeley-db/db-4.7.25.tar.gz",
+-          checksum='ec2b87e833779681a0c3a814aa71359e',
+-          buildDir="build_unix",
+-          configure="../dist/configure",
+-          configure_pre=[
+-              '--includedir=/usr/local/include/db4',
+-          ]
+-      ),
+-    ])
++    if not PYTHON_3:
++        result.extend([
++          dict(
++              name="Sleepycat DB 4.7.25",
++              url="http://download.oracle.com/berkeley-db/db-4.7.25.tar.gz",
++              checksum='ec2b87e833779681a0c3a814aa71359e',
++              buildDir="build_unix",
++              configure="../dist/configure",
++              configure_pre=[
++                  '--includedir=/usr/local/include/db4',
++              ]
++          ),
++        ])
+ 
+     return result
+ 
+ 
+ # Instructions for building packages inside the .mpkg.
+ def pkg_recipes():
++    unselected_for_python3 = ('selected', 'unselected')[PYTHON_3]
+     result = [
+         dict(
+             name="PythonFramework",
+@@ -308,7 +322,7 @@
+             topdir="/Library/Frameworks/Python.framework",
+             source="/empty-dir",
+             required=False,
+-            selected='selected',
++            selected=unselected_for_python3,
+         ),
+     ]
+ 
+@@ -326,7 +340,7 @@
+                 topdir="/Library/Frameworks/Python.framework",
+                 source="/empty-dir",
+                 required=False,
+-                selected='selected',
++                selected=unselected_for_python3,
+             )
+         )
+     return result
+@@ -393,6 +407,9 @@
+     Check that we're running on a supported system.
+     """
+ 
++    if sys.version_info[0:2] < (2, 4):
++        fatal("This script must be run with Python 2.4 or later")
++
+     if platform.system() != 'Darwin':
+         fatal("This script should be run on a Mac OS X 10.4 (or later) system")
+ 
+@@ -412,15 +429,16 @@
+     #       to install a newer patch level.
+ 
+     for framework in ['Tcl', 'Tk']:
+-        fw = dict(lower=framework.lower(),
+-                    upper=framework.upper(),
+-                    cap=framework.capitalize())
+-        fwpth = "Library/Frameworks/%(cap)s.framework/%(lower)sConfig.sh" % fw
+-        sysfw = os.path.join('/System', fwpth)
++        #fw = dict(lower=framework.lower(),
++        #            upper=framework.upper(),
++        #            cap=framework.capitalize())
++        #fwpth = "Library/Frameworks/%(cap)s.framework/%(lower)sConfig.sh" % fw
++        fwpth = 'Library/Frameworks/Tcl.framework/Versions/Current'
++        sysfw = os.path.join(SDKPATH, 'System', fwpth)
+         libfw = os.path.join('/', fwpth)
+         usrfw = os.path.join(os.getenv('HOME'), fwpth)
+-        version = "%(upper)s_VERSION" % fw
+-        if getTclTkVersion(libfw, version) != getTclTkVersion(sysfw, version):
++        #version = "%(upper)s_VERSION" % fw
++        if os.readlink(libfw) != os.readlink(sysfw):
+             fatal("Version of %s must match %s" % (libfw, sysfw) )
+         if os.path.exists(usrfw):
+             fatal("Please rename %s to avoid possible dynamic load issues."
+@@ -690,6 +708,9 @@
+         configure_args.insert(0, configure)
+         configure_args = [ shellQuote(a) for a in configure_args ]
+ 
++        if 'configure_env' in recipe:
++            configure_args.insert(0, recipe['configure_env'])
++
+         print "Running configure for %s"%(name,)
+         runCommand(' '.join(configure_args) + ' 2>&1')
+ 
+@@ -745,9 +766,9 @@
+         shutil.rmtree(buildDir)
+     if os.path.exists(rootDir):
+         shutil.rmtree(rootDir)
+-    os.mkdir(buildDir)
+-    os.mkdir(rootDir)
+-    os.mkdir(os.path.join(rootDir, 'empty-dir'))
++    os.makedirs(buildDir)
++    os.makedirs(rootDir)
++    os.makedirs(os.path.join(rootDir, 'empty-dir'))
+     curdir = os.getcwd()
+     os.chdir(buildDir)
+ 
+@@ -767,18 +788,20 @@
+     print "Running configure..."
+     runCommand("%s -C --enable-framework --enable-universalsdk=%s "
+                "--with-universal-archs=%s "
++               "%s "
+                "LDFLAGS='-g -L%s/libraries/usr/local/lib' "
+                "OPT='-g -O3 -I%s/libraries/usr/local/include' 2>&1"%(
+         shellQuote(os.path.join(SRCDIR, 'configure')), shellQuote(SDKPATH),
+         UNIVERSALARCHS,
++        (' ', '--with-computed-gotos ')[PYTHON_3],
+         shellQuote(WORKDIR)[1:-1],
+         shellQuote(WORKDIR)[1:-1]))
+ 
+     print "Running make"
+     runCommand("make")
+ 
+-    print "Running make frameworkinstall"
+-    runCommand("make frameworkinstall DESTDIR=%s"%(
++    print "Running make install"
++    runCommand("make install DESTDIR=%s"%(
+         shellQuote(rootDir)))
+ 
+     print "Running make frameworkinstallextras"
+@@ -817,12 +840,33 @@
+             os.chmod(p, stat.S_IMODE(st.st_mode) | stat.S_IWGRP)
+             os.chown(p, -1, gid)
+ 
++    if PYTHON_3:
++        LDVERSION=None
++        VERSION=None
++        ABIFLAGS=None
++
++        fp = open(os.path.join(buildDir, 'Makefile'), 'r')
++        for ln in fp:
++            if ln.startswith('VERSION='):
++                VERSION=ln.split()[1]
++            if ln.startswith('ABIFLAGS='):
++                ABIFLAGS=ln.split()[1]
++            if ln.startswith('LDVERSION='):
++                LDVERSION=ln.split()[1]
++        fp.close()
++
++        LDVERSION = LDVERSION.replace('$(VERSION)', VERSION)
++        LDVERSION = LDVERSION.replace('$(ABIFLAGS)', ABIFLAGS)
++        config_suffix = '-' + LDVERSION
++    else:
++        config_suffix = ''      # Python 2.x
++
+     # We added some directories to the search path during the configure
+     # phase. Remove those because those directories won't be there on
+     # the end-users system.
+     path =os.path.join(rootDir, 'Library', 'Frameworks', 'Python.framework',
+                 'Versions', version, 'lib', 'python%s'%(version,),
+-                'config', 'Makefile')
++                'config' + config_suffix, 'Makefile')
+     fp = open(path, 'r')
+     data = fp.read()
+     fp.close()
+@@ -847,7 +891,11 @@
+ 
+     os.chdir(curdir)
+ 
+-
++    if PYTHON_3:
++        # Remove the 'Current' link, that way we don't accidently mess
++        # with an already installed version of python 2
++        os.unlink(os.path.join(rootDir, 'Library', 'Frameworks',
++                            'Python.framework', 'Versions', 'Current'))
+ 
+ def patchFile(inPath, outPath):
+     data = fileContents(inPath)
+--- a/Mac/BuildScript/scripts/postflight.documentation
++++ b/Mac/BuildScript/scripts/postflight.documentation
+@@ -1,11 +1,32 @@
+ #!/bin/sh
+ 
+ PYVER="@PYVER@"
++FWK="/Library/Frameworks/Python.framework/Versions/${PYVER}"
++FWK_DOCDIR_SUBPATH="Resources/English.lproj/Documentation"
++FWK_DOCDIR="${FWK}/${FWK_DOCDIR_SUBPATH}"
++APPDIR="/Applications/Python ${PYVER}"
++DEV_DOCDIR="/Developer/Documentation"
++SHARE_DIR="${FWK}/share"
++SHARE_DOCDIR="${SHARE_DIR}/doc/python${PYVER}"
++SHARE_DOCDIR_TO_FWK="../../.."
+ 
+-if [ -d /Developer/Documentation ]; then
+-	if [ ! -d /Developer/Documentation/Python ]; then
+-		mkdir -p /Developer/Documentation/Python
+-	fi
++# make link in /Developer/Documentation/ for Xcode users
++if [ -d "${DEV_DOCDIR}" ]; then
++    if [ ! -d "${DEV_DOCDIR}/Python" ]; then
++        mkdir -p "${DEV_DOCDIR}/Python"
++    fi
++    ln -fhs "${FWK_DOCDIR}" "${DEV_DOCDIR}/Python/Reference Documentation ${PYVER}"
++fi
++
++# make link in /Applications/Python m.n/ for Finder users
++if [ -d "${APPDIR}" ]; then
++    ln -fhs "${FWK_DOCDIR}/index.html" "${APPDIR}/Python Documentation.html"
++fi
+ 
+-	ln -fhs /Library/Frameworks/Python.framework/Versions/${PYVER}/Resources/English.lproj/Documentation "/Developer/Documentation/Python/Reference Documentation @PYVER@"
++# make share/doc link in framework for command line users
++if [ -d "${SHARE_DIR}" ]; then
++    mkdir -p "${SHARE_DOCDIR}"
++    # make relative link to html doc directory
++    ln -fhs "${SHARE_DOCDIR_TO_FWK}/${FWK_DOCDIR_SUBPATH}" "${SHARE_DOCDIR}/html"
+ fi
++
+--- a/Mac/BuildScript/resources/Welcome.rtf
++++ b/Mac/BuildScript/resources/Welcome.rtf
+@@ -1,18 +1,29 @@
+-{\rtf1\mac\ansicpg10000\cocoartf824\cocoasubrtf410
+-{\fonttbl\f0\fswiss\fcharset77 Helvetica;\f1\fswiss\fcharset77 Helvetica-Bold;}
++{\rtf1\ansi\ansicpg1252\cocoartf1038\cocoasubrtf350
++{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
+ {\colortbl;\red255\green255\blue255;}
+-\paperw11900\paperh16840\margl1440\margr1440\vieww9920\viewh10660\viewkind0
++\paperw11904\paperh16836\margl1440\margr1440\vieww9640\viewh10620\viewkind0
+ \pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\ql\qnatural
+ 
+ \f0\fs24 \cf0 This package will install 
+-\f1\b Python $FULL_VERSION
+-\f0\b0  for 
+-\f1\b Mac OS X $MACOSX_DEPLOYMENT_TARGET
+-\f0\b0 .\
++\b Python $FULL_VERSION
++\b0  for 
++\b Mac OS X $MACOSX_DEPLOYMENT_TARGET
++\b0 .\
+ \
+-Python consists of the Python programming language interpreter, plus a set of programs to allow easy access to it for Mac users including an integrated development environment \b IDLE\b0  plus a set of pre-built extension modules that open up specific Macintosh technologies to Python programs.\
+-\
+-See the ReadMe file for more information.\
++
++\b Python for Mac OS X
++\b0  consists of the Python programming language interpreter, plus a set of programs to allow easy access to it for Mac OS X users including an integrated development environment 
++\b IDLE
++\b0  and a set of pre-built extension modules that open up specific Macintosh technologies to Python programs.\
+ \
++See the ReadMe file and the Python documentation for more information.\
+ \
+-This package will by default update your shell profile to ensure that this version of Python is on the search path of your shell. Please deselect the "Shell profile updater" package on the package customization screen if you want to avoid this modification.  Double-click \b Update Shell Profile\b0  at any time to make $FULL_VERSION the default Python.}
++
++\b IMPORTANT:
++\b0  
++\b IDLE
++\b0  and other programs using the 
++\b tkinter
++\b0  graphical user interface toolkit require specific versions of the 
++\b Tcl/Tk
++\b0  platform independent windowing toolkit.  Visit {\field{\*\fldinst{HYPERLINK "http://www.python.org/download/mac/tcltk/"}}{\fldrslt http://www.python.org/download/mac/tcltk/}} for current information on supported and recommended versions of Tcl/Tk for this version of Python and Mac OS X.}
+\ No newline at end of file
+--- a/Mac/BuildScript/resources/ReadMe.txt
++++ b/Mac/BuildScript/resources/ReadMe.txt
+@@ -1,27 +1,36 @@
+ This package will install Python $FULL_VERSION for Mac OS X
+-$MACOSX_DEPLOYMENT_TARGET for the following 
+-architecture(s): $ARCHITECTURES.
++$MACOSX_DEPLOYMENT_TARGET for the following architecture(s):
++$ARCHITECTURES.
+ 
+-Separate installers are available for older versions
+-of Mac OS X, see the homepage, below.
++Installation requires approximately $INSTALL_SIZE MB of disk space,
++ignore the message that it will take zero bytes.
+ 
+-Installation requires approximately $INSTALL_SIZE MB of disk
+-space, ignore the message that it will take zero bytes.
++You must install onto your current boot disk, even though the
++installer does not enforce this, otherwise things will not work.
+ 
+-You must install onto your current boot disk, even
+-though the installer does not enforce this, otherwise
+-things will not work.
+-
+-Python consists of the Python programming language
+-interpreter, plus a set of programs to allow easy
+-access to it for Mac users including an integrated development
+-environment, IDLE, plus a set of pre-built extension modules
+-that open up specific Macintosh technologies to Python programs.
+-
+-The installer puts the applications in "Python $VERSION" 
+-in your Applications folder, command-line tools in
+-/usr/local/bin and the underlying machinery in
+-$PYTHONFRAMEWORKINSTALLDIR.
++Python consists of the Python programming language interpreter, plus
++a set of programs to allow easy access to it for Mac users including
++an integrated development environment, IDLE, plus a set of pre-built
++extension modules that open up specific Macintosh technologies to
++Python programs.
++
++                    **** IMPORTANT ****
++                    
++Before using IDLE or other programs using the tkinter graphical user
++interface toolkit, visit http://www.python.org/download/mac/tcltk/
++for current information about supported and recommended versions
++of Tcl/Tk for this version of Python and Mac OS X.
++
++                    *******************
++
++The installer puts applications, an "Update Shell Profile" command,
++and an Extras folder containing demo programs and tools into the
++"Python $VERSION" subfolder of the system Applications folder,
++and puts the underlying machinery into the folder
++$PYTHONFRAMEWORKINSTALLDIR. It can
++optionally place links to the command-line tools in /usr/local/bin as
++well. Double-click on the "Update Shell Profile" command to add the
++"bin" directory inside the framework to your shell's search path.
+ 
+ More information on Python in general can be found at
+ http://www.python.org.
+--- a/Mac/BuildScript/README.txt
++++ b/Mac/BuildScript/README.txt
+@@ -1,78 +1,147 @@
+-Building a MacPython distribution
+-=================================
++Building a Python Mac OS X distribution
++=======================================
+ 
+-The ``build-install.py`` script creates MacPython distributions, including
+-sleepycat db4, sqlite3 and readline support.  It builds a complete 
++The ``build-install.py`` script creates Python distributions, including
++certain third-party libraries as necessary.  It builds a complete 
+ framework-based Python out-of-tree, installs it in a funny place with 
+ $DESTROOT, massages that installation to remove .pyc files and such, creates 
+ an Installer package from the installation plus other files in ``resources`` 
+ and ``scripts`` and placed that on a ``.dmg`` disk image.
+ 
+-Prerequisites
+--------------
++As of Python 2.7.x and 3.2, PSF practice is to build two installer variants
++for each release:
+ 
+-* A MacOS X 10.4 (or later)
++1.  32-bit-only, i386 and PPC universal, capable on running on all machines
++    supported by Mac OS X 10.3.9 through (at least) 10.6::
+ 
+-* XCode 2.2 (or later), with the universal SDK
++        python build-installer.py \
++            --sdk-path=/Developer/SDKs/MacOSX10.4u.sdk \
++            --universal-archs=32-bit \
++            --dep-target=10.3 
++            # These are the current default options
+ 
+-* No Fink (in ``/sw``) or DarwinPorts (in ``/opt/local``), those could
++    - builds the following third-party libraries
++
++        * Bzip2
++        * Zlib 1.2.3
++        * GNU Readline (GPL)
++        * SQLite 3
++        * NCurses
++        * Oracle Sleepycat DB 4.8 (Python 2.x only)
++
++    - requires ActiveState ``Tcl/Tk 8.4`` (currently 8.4.19) to be installed for building
++
++    - current target build environment:
++        
++        * Mac OS X 10.5.8 PPC or Intel
++        * Xcode 3.1.4 (or later)
++        * ``MacOSX10.4u`` SDK (later SDKs do not support PPC G3 processors)
++        * ``MACOSX_DEPLOYMENT_TARGET=10.3``
++        * Apple ``gcc-4.0``
++        * Python 2.n (n >= 4) for documentation build with Sphinx
++
++    - alternate build environments:
++
++        * Mac OS X 10.4.11 with Xcode 2.5
++        * Mac OS X 10.6.6 with Xcode 3.2.5
++            - need to change ``/System/Library/Frameworks/{Tcl,Tk}.framework/Version/Current`` to ``8.4``
++
++2.  64-bit / 32-bit, x86_64 and i386 universal, for OS X 10.6 (and later)::
++
++        python build-installer.py \
++            --sdk-path=/Developer/SDKs/MacOSX10.6.sdk \
++            --universal-archs=intel \
++            --dep-target=10.6
++
++    - uses system-supplied versions of third-party libraries
++    
++        * readline module links with Apple BSD editline (libedit)
++        * builds Oracle Sleepycat DB 4.8 (Python 2.x only)
++
++    - requires ActiveState Tcl/Tk 8.5.9 (or later) to be installed for building
++
++    - current target build environment:
++        
++        * Mac OS X 10.6.6 (or later)
++        * Xcode 3.2.5 (or later)
++        * ``MacOSX10.6`` SDK
++        * ``MACOSX_DEPLOYMENT_TARGET=10.6``
++        * Apple ``gcc-4.2``
++        * Python 2.n (n >= 4) for documentation build with Sphinx
++
++    - alternate build environments:
++
++        * none
++
++
++General Prerequisites
++---------------------
++
++* No Fink (in ``/sw``) or MacPorts (in ``/opt/local``) or other local
++  libraries or utilities (in ``/usr/local``) as they could
+   interfere with the build.
+ 
+-* The documentation for the release must be available on python.org
++* The documentation for the release is built using Sphinx
+   because it is included in the installer.
+ 
++* It is safest to start each variant build with an empty source directory
++  populated with a fresh copy of the untarred source.
++
+ 
+ The Recipe
+ ----------
+ 
+-Here are the steps you need to follow to build a MacPython installer:
++Here are the steps you need to follow to build a Python installer:
+ 
+-*  Run ``./build-installer.py``. Optionally you can pass a number of arguments
+-   to specify locations of various files. Please see the top of
++* Run ``build-installer.py``. Optionally you can pass a number of arguments
++  to specify locations of various files. Please see the top of
+   ``build-installer.py`` for its usage.
+ 
+-  Running this script takes some time, I will not only build Python itself
++  Running this script takes some time, it will not only build Python itself
+   but also some 3th-party libraries that are needed for extensions.
+ 
+ * When done the script will tell you where the DMG image is (by default
+   somewhere in ``/tmp/_py``).
+ 
+-Building a 4-way universal installer
+-....................................
++Building other universal installers
++...................................
+ 
+ It is also possible to build a 4-way universal installer that runs on 
+-OSX Leopard or later::
++OS X Leopard or later::
+ 
+-  $ ./build-installer.py --dep-target=10.5 --universal-archs=all --sdk=/
++  python 2.6 /build-installer.py \
++        --dep-target=10.5
++        --universal-archs=all
++        --sdk-path=/Developer/SDKs/MacOSX10.5.sdk
++
++This requires that the deployment target is 10.5, and hence
++also that you are building on at least OS X 10.5.  4-way includes
++``i386``, ``x86_64``, ``ppc``, and ``ppc64`` (G5).  ``ppc64`` executable
++variants can only be run on G5 machines running 10.5.  Note that,
++while OS X 10.6 is only supported on Intel-based machines, it is possible
++to run ``ppc`` (32-bit) executables unmodified thanks to the Rosetta ppc
++emulation in OS X 10.5 and 10.6.
++
++Other ``--universal-archs`` options are ``64-bit`` (``x86_64``, ``ppc64``),
++and ``3-way`` (``ppc``, ``i386``, ``x86_64``).  None of these options
++are regularly exercised; use at your own risk.
+ 
+-This requires that the deployment target is 10.5 (or later), and hence
+-also that your building on at least OSX 10.5.
+ 
+ Testing
+ -------
+ 
+-The resulting binaries should work on MacOSX 10.3.9 or later. I usually run
+-the installer on a 10.3.9, a 10.4.x PPC and a 10.4.x Intel system and then
+-run the testsuite to make sure.
+-
+-
+-Announcements
+--------------
+-
+-(This is mostly of historic interest)
+-
+-When all is done, announcements can be posted to at least the following
+-places:
+--   pythonmac-sig@python.org
+--   python-dev@python.org
+--   python-announce@python.org
+--   archivist@info-mac.org
+--   adcnews@apple.com
+--   news@macnn.com
+--   http://www.macupdate.com
+--   http://guide.apple.com/usindex.lasso
+--   http://www.apple.com/downloads/macosx/submit
+--   http://www.versiontracker.com/ (userid Jack.Jansen@oratrix.com)
+--   http://www.macshareware.net (userid jackjansen)
++Ideally, the resulting binaries should be installed and the test suite run
++on all supported OS X releases and architectures.  As a practical matter,
++that is generally not possible.  At a minimum, variant 1 should be run on
++at least one Intel, one PPC G4, and one PPC G3 system and one each of 
++OS X 10.6, 10.5, 10.4, and 10.3.9.  Not all tests run on 10.3.9.
++Variant 2 should be run on 10.6 in both 32-bit and 64-bit modes.::
++
++    arch -i386 /usr/local/bin/pythonn.n -m test.regrtest -w -u all 
++    arch -X86_64 /usr/local/bin/pythonn.n -m test.regrtest -w -u all
++    
++Certain tests will be skipped and some cause the interpreter to fail
++which will likely generate ``Python quit unexpectedly`` alert messages
++to be generated at several points during a test run.  These can
++be ignored.
+ 
+-Also, check out Stephan Deibels http://pythonology.org/market contact list
+--- a/Mac/Resources/app/Info.plist.in
++++ b/Mac/Resources/app/Info.plist.in
+@@ -20,7 +20,7 @@
+ 	<key>CFBundleExecutable</key>
+ 	<string>Python</string>
+ 	<key>CFBundleGetInfoString</key>
+-	<string>%version%, (c) 2004-2010 Python Software Foundation.</string>
++	<string>%version%, (c) 2004-2011 Python Software Foundation.</string>
+ 	<key>CFBundleHelpBookFolder</key>
+ 	<array>
+ 		<string>Documentation</string>
+@@ -37,7 +37,7 @@
+ 	<key>CFBundleInfoDictionaryVersion</key>
+ 	<string>6.0</string>
+ 	<key>CFBundleLongVersionString</key>
+-	<string>%version%, (c) 2004-2010 Python Software Foundation.</string>
++	<string>%version%, (c) 2004-2011 Python Software Foundation.</string>
+ 	<key>CFBundleName</key>
+ 	<string>Python</string>
+ 	<key>CFBundlePackageType</key>
+@@ -55,6 +55,6 @@
+ 	<key>NSAppleScriptEnabled</key>
+ 	<true/>
+ 	<key>NSHumanReadableCopyright</key>
+-	<string>(c) 2004 Python Software Foundation.</string>
++	<string>(c) 2011 Python Software Foundation.</string>
+ </dict>
+ </plist>
+--- a/Mac/Resources/framework/Info.plist.in
++++ b/Mac/Resources/framework/Info.plist.in
+@@ -17,9 +17,9 @@
+ 	<key>CFBundlePackageType</key>
+ 	<string>FMWK</string>
+ 	<key>CFBundleShortVersionString</key>
+-	<string>%VERSION%, (c) 2004-2008 Python Software Foundation.</string>
++	<string>%VERSION%, (c) 2004-2011 Python Software Foundation.</string>
+ 	<key>CFBundleLongVersionString</key>
+-	<string>%VERSION%, (c) 2004-2008 Python Software Foundation.</string>
++	<string>%VERSION%, (c) 2004-2011 Python Software Foundation.</string>
+ 	<key>CFBundleSignature</key>
+ 	<string>????</string>
+ 	<key>CFBundleVersion</key>
+--- a/Mac/IDLE/config-extensions.def
++++ b/Mac/IDLE/config-extensions.def
+@@ -86,3 +86,8 @@
+ fgcolor=Black
+ [CodeContext_bindings]
+ toggle-code-context=
++
++[RstripExtension]
++enable=1
++enable_shell=0
++enable_editor=1
+--- a/Mac/IDLE/Info.plist.in
++++ b/Mac/IDLE/Info.plist.in
+@@ -36,7 +36,7 @@
+ 	<key>CFBundleExecutable</key>
+ 	<string>IDLE</string>
+ 	<key>CFBundleGetInfoString</key>
+-	<string>%VERSION%,  001-2006 Python Software Foundation</string>
++	<string>%VERSION%,  2001-2011 Python Software Foundation</string>
+ 	<key>CFBundleIconFile</key>
+ 	<string>IDLE.icns</string>
+ 	<key>CFBundleIdentifier</key>
+--- a/Tools/buildbot/test.bat
++++ b/Tools/buildbot/test.bat
+@@ -1,3 +1,3 @@
+ @rem Used by the buildbot "test" step.
+ cd PCbuild
+-call rt.bat -d -q -uall -rw
++call rt.bat -d -q -uall -rwW
+--- a/PC/VS8.0/build_ssl.py
++++ b/PC/VS8.0/build_ssl.py
+@@ -8,7 +8,7 @@
+ #   directory.  It is likely you will already find the zlib library and
+ #   any other external packages there.
+ # * Install ActivePerl and ensure it is somewhere on your path.
+-# * Run this script from the PCBuild directory.
++# * Run this script from the PC/VS8.0 directory.
+ #
+ # it should configure and build SSL, then build the _ssl and _hashlib
+ # Python extensions without intervention.
+@@ -46,7 +46,7 @@
+ # is available.
+ def find_working_perl(perls):
+     for perl in perls:
+-        fh = os.popen(perl + ' -e "use Win32;"')
++        fh = os.popen('"%s" -e "use Win32;"' % perl)
+         fh.read()
+         rc = fh.close()
+         if rc:
+@@ -178,12 +178,12 @@
+     # as "well known" locations
+     perls = find_all_on_path("perl.exe", ["\\perl\\bin", "C:\\perl\\bin"])
+     perl = find_working_perl(perls)
+-    if perl is None:
++    if perl:
++        print("Found a working perl at '%s'" % (perl,))
++    else:
+         print("No Perl installation was found. Existing Makefiles are used.")
+-
+-    print("Found a working perl at '%s'" % (perl,))
+     sys.stdout.flush()
+-    # Look for SSL 2 levels up from pcbuild - ie, same place zlib etc all live.
++    # Look for SSL 3 levels up from PC/VS8.0 - ie, same place zlib etc all live.
+     ssl_dir = find_best_ssl_dir(("..\\..\\..",))
+     if ssl_dir is None:
+         sys.exit(1)
+--- a/PC/VC6/build_ssl.py
++++ b/PC/VC6/build_ssl.py
+@@ -13,6 +13,11 @@
+ # it should configure and build SSL, then build the ssl Python extension
+ # without intervention.
+ 
++# Modified by Christian Heimes
++# Now this script supports pre-generated makefiles and assembly files.
++# Developers don't need an installation of Perl anymore to build Python. A svn
++# checkout from our svn repository is enough.
++
+ import os, sys, re, shutil
+ 
+ # Find all "foo.exe" files on the PATH.
+@@ -36,7 +41,7 @@
+ # is available.
+ def find_working_perl(perls):
+     for perl in perls:
+-        fh = os.popen(perl + ' -e "use Win32;"')
++        fh = os.popen('"%s" -e "use Win32;"' % perl)
+         fh.read()
+         rc = fh.close()
+         if rc:
+@@ -120,6 +125,22 @@
+     print do_script
+     os.system(do_script)
+ 
++def cmp(f1, f2):
++    bufsize = 1024 * 8
++    with open(f1, 'rb') as fp1, open(f2, 'rb') as fp2:
++        while True:
++            b1 = fp1.read(bufsize)
++            b2 = fp2.read(bufsize)
++            if b1 != b2:
++                return False
++            if not b1:
++                return True
++
++def copy(src, dst):
++    if os.path.isfile(dst) and cmp(src, dst):
++        return
++    shutil.copy(src, dst)
++
+ def main():
+     debug = "-d" in sys.argv
+     build_all = "-a" in sys.argv
+@@ -129,6 +150,7 @@
+         do_script = "ms\\do_nasm"
+         makefile="ms\\nt.mak"
+         m32 = makefile
++        dirsuffix = "32"
+     configure += " no-idea no-rc5 no-mdc2"
+     make_flags = ""
+     if build_all:
+@@ -137,12 +159,12 @@
+     # as "well known" locations
+     perls = find_all_on_path("perl.exe", ["\\perl\\bin", "C:\\perl\\bin"])
+     perl = find_working_perl(perls)
+-    if perl is None:
+-        print "No Perl installation was found. Existing Makefiles are used."
+-    else:
++    if perl:
+         print "Found a working perl at '%s'" % (perl,)
++    else:
++        print "No Perl installation was found. Existing Makefiles are used."
+     sys.stdout.flush()
+-    # Look for SSL 3 levels up from pcbuild - ie, same place zlib etc all live.
++    # Look for SSL 3 levels up from PC/VC6 - ie, same place zlib etc all live.
+     ssl_dir = find_best_ssl_dir(("..\\..\\..",))
+     if ssl_dir is None:
+         sys.exit(1)
+@@ -173,12 +195,21 @@
+             #    os.system("perl util\mk1mf.pl debug "+configure+" >"+makefile)
+ 
+             fix_makefile(makefile)
+-            shutil.copy(r"crypto\buildinf.h", r"crypto\buildinf_%s.h" % arch)
+-            shutil.copy(r"crypto\opensslconf.h", r"crypto\opensslconf_%s.h" % arch)
++            copy(r"crypto\buildinf.h", r"crypto\buildinf_%s.h" % arch)
++            copy(r"crypto\opensslconf.h", r"crypto\opensslconf_%s.h" % arch)
++
++        # If the assembler files don't exist in tmpXX, copy them there
++        if perl is None:
++            if not os.path.exists("tmp"+dirsuffix):
++                os.mkdir("tmp"+dirsuffix)
++            for f in os.listdir("asm"+dirsuffix):
++                if not f.endswith(".asm"): continue
++                if os.path.isfile(r"tmp%s\%s" % (dirsuffix, f)): continue
++                shutil.copy(r"asm%s\%s" % (dirsuffix, f), "tmp"+dirsuffix)
+ 
+         # Now run make.
+-        shutil.copy(r"crypto\buildinf_%s.h" % arch, r"crypto\buildinf.h")
+-        shutil.copy(r"crypto\opensslconf_%s.h" % arch, r"crypto\opensslconf.h")
++        copy(r"crypto\buildinf_%s.h" % arch, r"crypto\buildinf.h")
++        copy(r"crypto\opensslconf_%s.h" % arch, r"crypto\opensslconf.h")
+ 
+         #makeCommand = "nmake /nologo PERL=\"%s\" -f \"%s\"" %(perl, makefile)
+         makeCommand = "nmake /nologo -f \"%s\"" % makefile
+--- a/PC/VC6/readme.txt
++++ b/PC/VC6/readme.txt
+@@ -202,21 +202,27 @@
+     Get the latest source code for OpenSSL from
+         http://www.openssl.org
+ 
+-    You (probably) don't want the "engine" code.  For example, get
+-        openssl-0.9.8g.tar.gz
+-    not
+-        openssl-engine-0.9.8g.tar.gz
++    You (probably) don't want the "engine" code.  For example, don't get
++        openssl-engine-0.9.6g.tar.gz
+ 
+     Unpack into the "dist" directory, retaining the folder name from
+     the archive - for example, the latest stable OpenSSL will install as
+-        dist/openssl-0.9.8g
++        dist/openssl-1.0.0a
+ 
+     You can (theoretically) use any version of OpenSSL you like - the
+     build process will automatically select the latest version.
+ 
+-    You must also install ActivePerl from
+-        http://www.activestate.com/Products/ActivePerl/
+-    as this is used by the OpenSSL build process.  Complain to them <wink>.
++    You can install the NASM assembler from
++        http://www.nasm.us/
++    for x86 builds.  Put nasmw.exe anywhere in your PATH.
++    Note: recent releases of nasm only have nasm.exe. Just rename it to 
++    nasmw.exe.
++
++    You can also install ActivePerl from
++        http://www.activestate.com/activeperl/
++    if you like to use the official sources instead of the files from 
++    python's subversion repository. The svn version contains pre-build
++    makefiles and assembly files.
+ 
+     The MSVC project simply invokes PC/VC6/build_ssl.py to perform
+     the build.  This Python script locates and builds your OpenSSL
+--- a/Doc/distutils/apiref.rst
++++ b/Doc/distutils/apiref.rst
+@@ -888,7 +888,7 @@
+ .. function:: make_zipfile(base_name, base_dir[, verbose=0, dry_run=0])
+ 
+    Create a zip file from all files in and under *base_dir*.  The output zip file
+-   will be named *base_dir* + :file:`.zip`.  Uses either the  :mod:`zipfile` Python
++   will be named *base_name* + :file:`.zip`.  Uses either the  :mod:`zipfile` Python
+    module (if available) or the InfoZIP :file:`zip`  utility (if installed and
+    found on the default search path).  If neither  tool is available, raises
+    :exc:`DistutilsExecError`.   Returns the name of the output zip file.
+--- a/Doc/c-api/exceptions.rst
++++ b/Doc/c-api/exceptions.rst
+@@ -151,80 +151,10 @@
+ 
+ .. cfunction:: PyObject* PyErr_Format(PyObject *exception, const char *format, ...)
+ 
+-   This function sets the error indicator and returns *NULL*. *exception* should be
+-   a Python exception (class, not an instance).  *format* should be a string,
+-   containing format codes, similar to :cfunc:`printf`. The ``width.precision``
+-   before a format code is parsed, but the width part is ignored.
+-
+-   .. % This should be exactly the same as the table in PyString_FromFormat.
+-   .. % One should just refer to the other.
+-   .. % The descriptions for %zd and %zu are wrong, but the truth is complicated
+-   .. % because not all compilers support the %z width modifier -- we fake it
+-   .. % when necessary via interpolating PY_FORMAT_SIZE_T.
+-   .. % Similar comments apply to the %ll width modifier and
+-   .. % PY_FORMAT_LONG_LONG.
+-   .. % %u, %lu, %zu should have "new in Python 2.5" blurbs.
+-
+-   +-------------------+---------------+--------------------------------+
+-   | Format Characters | Type          | Comment                        |
+-   +===================+===============+================================+
+-   | :attr:`%%`        | *n/a*         | The literal % character.       |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%c`        | int           | A single character,            |
+-   |                   |               | represented as an C int.       |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%d`        | int           | Exactly equivalent to          |
+-   |                   |               | ``printf("%d")``.              |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%u`        | unsigned int  | Exactly equivalent to          |
+-   |                   |               | ``printf("%u")``.              |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%ld`       | long          | Exactly equivalent to          |
+-   |                   |               | ``printf("%ld")``.             |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%lu`       | unsigned long | Exactly equivalent to          |
+-   |                   |               | ``printf("%lu")``.             |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%lld`      | long long     | Exactly equivalent to          |
+-   |                   |               | ``printf("%lld")``.            |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%llu`      | unsigned      | Exactly equivalent to          |
+-   |                   | long long     | ``printf("%llu")``.            |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%zd`       | Py_ssize_t    | Exactly equivalent to          |
+-   |                   |               | ``printf("%zd")``.             |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%zu`       | size_t        | Exactly equivalent to          |
+-   |                   |               | ``printf("%zu")``.             |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%i`        | int           | Exactly equivalent to          |
+-   |                   |               | ``printf("%i")``.              |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%x`        | int           | Exactly equivalent to          |
+-   |                   |               | ``printf("%x")``.              |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%s`        | char\*        | A null-terminated C character  |
+-   |                   |               | array.                         |
+-   +-------------------+---------------+--------------------------------+
+-   | :attr:`%p`        | void\*        | The hex representation of a C  |
+-   |                   |               | pointer. Mostly equivalent to  |
+-   |                   |               | ``printf("%p")`` except that   |
+-   |                   |               | it is guaranteed to start with |
+-   |                   |               | the literal ``0x`` regardless  |
+-   |                   |               | of what the platform's         |
+-   |                   |               | ``printf`` yields.             |
+-   +-------------------+---------------+--------------------------------+
+-
+-   An unrecognized format character causes all the rest of the format string to be
+-   copied as-is to the result string, and any extra arguments discarded.
+-
+-   .. note::
+-
+-      The `"%lld"` and `"%llu"` format specifiers are only available
+-      when :const:`HAVE_LONG_LONG` is defined.
+-
+-   .. versionchanged:: 2.7
+-      Support for `"%lld"` and `"%llu"` added.
++   This function sets the error indicator and returns *NULL*.  *exception*
++   should be a Python exception class.  The *format* and subsequent
++   parameters help format the error message; they have the same meaning and
++   values as in :cfunc:`PyString_FromFormat`.
+ 
+ 
+ .. cfunction:: void PyErr_SetNone(PyObject *type)
+--- a/Doc/c-api/init.rst
++++ b/Doc/c-api/init.rst
+@@ -8,6 +8,10 @@
+ *****************************************
+ 
+ 
++Initializing and finalizing the interpreter
++===========================================
++
++
+ .. cfunction:: void Py_Initialize()
+ 
+    .. index::
+@@ -83,85 +87,8 @@
+    :cfunc:`Py_Finalize` more than once.
+ 
+ 
+-.. cfunction:: PyThreadState* Py_NewInterpreter()
+-
+-   .. index::
+-      module: __builtin__
+-      module: __main__
+-      module: sys
+-      single: stdout (in module sys)
+-      single: stderr (in module sys)
+-      single: stdin (in module sys)
+-
+-   Create a new sub-interpreter.  This is an (almost) totally separate environment
+-   for the execution of Python code.  In particular, the new interpreter has
+-   separate, independent versions of all imported modules, including the
+-   fundamental modules :mod:`__builtin__`, :mod:`__main__` and :mod:`sys`.  The
+-   table of loaded modules (``sys.modules``) and the module search path
+-   (``sys.path``) are also separate.  The new environment has no ``sys.argv``
+-   variable.  It has new standard I/O stream file objects ``sys.stdin``,
+-   ``sys.stdout`` and ``sys.stderr`` (however these refer to the same underlying
+-   :ctype:`FILE` structures in the C library).
+-
+-   The return value points to the first thread state created in the new
+-   sub-interpreter.  This thread state is made in the current thread state.
+-   Note that no actual thread is created; see the discussion of thread states
+-   below.  If creation of the new interpreter is unsuccessful, *NULL* is
+-   returned; no exception is set since the exception state is stored in the
+-   current thread state and there may not be a current thread state.  (Like all
+-   other Python/C API functions, the global interpreter lock must be held before
+-   calling this function and is still held when it returns; however, unlike most
+-   other Python/C API functions, there needn't be a current thread state on
+-   entry.)
+-
+-   .. index::
+-      single: Py_Finalize()
+-      single: Py_Initialize()
+-
+-   Extension modules are shared between (sub-)interpreters as follows: the first
+-   time a particular extension is imported, it is initialized normally, and a
+-   (shallow) copy of its module's dictionary is squirreled away.  When the same
+-   extension is imported by another (sub-)interpreter, a new module is initialized
+-   and filled with the contents of this copy; the extension's ``init`` function is
+-   not called.  Note that this is different from what happens when an extension is
+-   imported after the interpreter has been completely re-initialized by calling
+-   :cfunc:`Py_Finalize` and :cfunc:`Py_Initialize`; in that case, the extension's
+-   ``initmodule`` function *is* called again.
+-
+-   .. index:: single: close() (in module os)
+-
+-   **Bugs and caveats:** Because sub-interpreters (and the main interpreter) are
+-   part of the same process, the insulation between them isn't perfect --- for
+-   example, using low-level file operations like  :func:`os.close` they can
+-   (accidentally or maliciously) affect each other's open files.  Because of the
+-   way extensions are shared between (sub-)interpreters, some extensions may not
+-   work properly; this is especially likely when the extension makes use of
+-   (static) global variables, or when the extension manipulates its module's
+-   dictionary after its initialization.  It is possible to insert objects created
+-   in one sub-interpreter into a namespace of another sub-interpreter; this should
+-   be done with great care to avoid sharing user-defined functions, methods,
+-   instances or classes between sub-interpreters, since import operations executed
+-   by such objects may affect the wrong (sub-)interpreter's dictionary of loaded
+-   modules.  (XXX This is a hard-to-fix bug that will be addressed in a future
+-   release.)
+-
+-   Also note that the use of this functionality is incompatible with extension
+-   modules such as PyObjC and ctypes that use the :cfunc:`PyGILState_\*` APIs (and
+-   this is inherent in the way the :cfunc:`PyGILState_\*` functions work).  Simple
+-   things may work, but confusing behavior will always be near.
+-
+-
+-.. cfunction:: void Py_EndInterpreter(PyThreadState *tstate)
+-
+-   .. index:: single: Py_Finalize()
+-
+-   Destroy the (sub-)interpreter represented by the given thread state. The given
+-   thread state must be the current thread state.  See the discussion of thread
+-   states below.  When the call returns, the current thread state is *NULL*.  All
+-   thread states associated with this interpreter are destroyed.  (The global
+-   interpreter lock must be held before calling this function and is still held
+-   when it returns.)  :cfunc:`Py_Finalize` will destroy all sub-interpreters that
+-   haven't been explicitly destroyed at that point.
++Process-wide parameters
++=======================
+ 
+ 
+ .. cfunction:: void Py_SetProgramName(char *name)
+@@ -419,8 +346,8 @@
+    single: lock, interpreter
+ 
+ The Python interpreter is not fully thread-safe.  In order to support
+-multi-threaded Python programs, there's a global lock, called the :dfn:`global
+-interpreter lock` or :dfn:`GIL`, that must be held by the current thread before
++multi-threaded Python programs, there's a global lock, called the :term:`global
++interpreter lock` or :term:`GIL`, that must be held by the current thread before
+ it can safely access Python objects. Without the lock, even the simplest
+ operations could cause problems in a multi-threaded program: for example, when
+ two threads simultaneously increment the reference count of the same object, the
+@@ -428,39 +355,38 @@
+ 
+ .. index:: single: setcheckinterval() (in module sys)
+ 
+-Therefore, the rule exists that only the thread that has acquired the global
+-interpreter lock may operate on Python objects or call Python/C API functions.
+-In order to support multi-threaded Python programs, the interpreter regularly
+-releases and reacquires the lock --- by default, every 100 bytecode instructions
+-(this can be changed with  :func:`sys.setcheckinterval`).  The lock is also
+-released and reacquired around potentially blocking I/O operations like reading
+-or writing a file, so that other threads can run while the thread that requests
+-the I/O is waiting for the I/O operation to complete.
++Therefore, the rule exists that only the thread that has acquired the
++:term:`GIL` may operate on Python objects or call Python/C API functions.
++In order to emulate concurrency of execution, the interpreter regularly
++tries to switch threads (see :func:`sys.setcheckinterval`).  The lock is also
++released around potentially blocking I/O operations like reading or writing
++a file, so that other Python threads can run in the meantime.
+ 
+ .. index::
+    single: PyThreadState
+    single: PyThreadState
+ 
+-The Python interpreter needs to keep some bookkeeping information separate per
+-thread --- for this it uses a data structure called :ctype:`PyThreadState`.
+-There's one global variable, however: the pointer to the current
+-:ctype:`PyThreadState` structure.  Before the addition of :dfn:`thread-local
+-storage` (:dfn:`TLS`) the current thread state had to be manipulated
+-explicitly.
++The Python interpreter keeps some thread-specific bookkeeping information
++inside a data structure called :ctype:`PyThreadState`.  There's also one
++global variable pointing to the current :ctype:`PyThreadState`: it can
++be retrieved using :cfunc:`PyThreadState_Get`.
+ 
+-This is easy enough in most cases.  Most code manipulating the global
+-interpreter lock has the following simple structure::
++Releasing the GIL from extension code
++-------------------------------------
++
++Most extension code manipulating the :term:`GIL` has the following simple
++structure::
+ 
+    Save the thread state in a local variable.
+    Release the global interpreter lock.
+-   ...Do some blocking I/O operation...
++   ... Do some blocking I/O operation ...
+    Reacquire the global interpreter lock.
+    Restore the thread state from the local variable.
+ 
+ This is so common that a pair of macros exists to simplify it::
+ 
+    Py_BEGIN_ALLOW_THREADS
+-   ...Do some blocking I/O operation...
++   ... Do some blocking I/O operation ...
+    Py_END_ALLOW_THREADS
+ 
+ .. index::
+@@ -469,9 +395,8 @@
+ 
+ The :cmacro:`Py_BEGIN_ALLOW_THREADS` macro opens a new block and declares a
+ hidden local variable; the :cmacro:`Py_END_ALLOW_THREADS` macro closes the
+-block.  Another advantage of using these two macros is that when Python is
+-compiled without thread support, they are defined empty, thus saving the thread
+-state and GIL manipulations.
++block.  These two macros are still available when Python is compiled without
++thread support (they simply have an empty expansion).
+ 
+ When thread support is enabled, the block above expands to the following code::
+ 
+@@ -481,65 +406,60 @@
+    ...Do some blocking I/O operation...
+    PyEval_RestoreThread(_save);
+ 
+-Using even lower level primitives, we can get roughly the same effect as
+-follows::
+-
+-   PyThreadState *_save;
+-
+-   _save = PyThreadState_Swap(NULL);
+-   PyEval_ReleaseLock();
+-   ...Do some blocking I/O operation...
+-   PyEval_AcquireLock();
+-   PyThreadState_Swap(_save);
+-
+ .. index::
+    single: PyEval_RestoreThread()
+-   single: errno
+    single: PyEval_SaveThread()
+-   single: PyEval_ReleaseLock()
+-   single: PyEval_AcquireLock()
+ 
+-There are some subtle differences; in particular, :cfunc:`PyEval_RestoreThread`
+-saves and restores the value of the  global variable :cdata:`errno`, since the
+-lock manipulation does not guarantee that :cdata:`errno` is left alone.  Also,
+-when thread support is disabled, :cfunc:`PyEval_SaveThread` and
+-:cfunc:`PyEval_RestoreThread` don't manipulate the GIL; in this case,
+-:cfunc:`PyEval_ReleaseLock` and :cfunc:`PyEval_AcquireLock` are not available.
+-This is done so that dynamically loaded extensions compiled with thread support
+-enabled can be loaded by an interpreter that was compiled with disabled thread
+-support.
+-
+-The global interpreter lock is used to protect the pointer to the current thread
+-state.  When releasing the lock and saving the thread state, the current thread
+-state pointer must be retrieved before the lock is released (since another
+-thread could immediately acquire the lock and store its own thread state in the
+-global variable). Conversely, when acquiring the lock and restoring the thread
+-state, the lock must be acquired before storing the thread state pointer.
+-
+-It is important to note that when threads are created from C, they don't have
+-the global interpreter lock, nor is there a thread state data structure for
+-them.  Such threads must bootstrap themselves into existence, by first
+-creating a thread state data structure, then acquiring the lock, and finally
+-storing their thread state pointer, before they can start using the Python/C
+-API.  When they are done, they should reset the thread state pointer, release
+-the lock, and finally free their thread state data structure.
+-
+-Beginning with version 2.3, threads can now take advantage of the
+-:cfunc:`PyGILState_\*` functions to do all of the above automatically.  The
+-typical idiom for calling into Python from a C thread is now::
++Here is how these functions work: the global interpreter lock is used to protect the pointer to the
++current thread state.  When releasing the lock and saving the thread state,
++the current thread state pointer must be retrieved before the lock is released
++(since another thread could immediately acquire the lock and store its own thread
++state in the global variable). Conversely, when acquiring the lock and restoring
++the thread state, the lock must be acquired before storing the thread state
++pointer.
++
++.. note::
++   Calling system I/O functions is the most common use case for releasing
++   the GIL, but it can also be useful before calling long-running computations
++   which don't need access to Python objects, such as compression or
++   cryptographic functions operating over memory buffers.  For example, the
++   standard :mod:`zlib` and :mod:`hashlib` modules release the GIL when
++   compressing or hashing data.
++
++Non-Python created threads
++--------------------------
++
++When threads are created using the dedicated Python APIs (such as the
++:mod:`threading` module), a thread state is automatically associated to them
++and the code showed above is therefore correct.  However, when threads are
++created from C (for example by a third-party library with its own thread
++management), they don't hold the GIL, nor is there a thread state structure
++for them.
++
++If you need to call Python code from these threads (often this will be part
++of a callback API provided by the aforementioned third-party library),
++you must first register these threads with the interpreter by
++creating a thread state data structure, then acquiring the GIL, and finally
++storing their thread state pointer, before you can start using the Python/C
++API.  When you are done, you should reset the thread state pointer, release
++the GIL, and finally free the thread state data structure.
++
++The :cfunc:`PyGILState_Ensure` and :cfunc:`PyGILState_Release` functions do
++all of the above automatically.  The typical idiom for calling into Python
++from a C thread is::
+ 
+    PyGILState_STATE gstate;
+    gstate = PyGILState_Ensure();
+ 
+-   /* Perform Python actions here.  */
++   /* Perform Python actions here. */
+    result = CallSomeFunction();
+-   /* evaluate result */
++   /* evaluate result or handle exception */
+ 
+    /* Release the thread. No Python API allowed beyond this point. */
+    PyGILState_Release(gstate);
+ 
+ Note that the :cfunc:`PyGILState_\*` functions assume there is only one global
+-interpreter (created automatically by :cfunc:`Py_Initialize`).  Python still
++interpreter (created automatically by :cfunc:`Py_Initialize`).  Python
+ supports the creation of additional interpreters (using
+ :cfunc:`Py_NewInterpreter`), but mixing multiple interpreters and the
+ :cfunc:`PyGILState_\*` API is unsupported.
+@@ -561,6 +481,13 @@
+ :cfunc:`PyOS_AfterFork` tries to reset the necessary locks, but is not
+ always able to.
+ 
++
++High-level API
++--------------
++
++These are the most commonly used types and functions when writing C extension
++code, or when embedding the Python interpreter:
++
+ .. ctype:: PyInterpreterState
+ 
+    This data structure represents the state shared by a number of cooperating
+@@ -602,21 +529,22 @@
+ 
+    .. index:: module: thread
+ 
+-   When only the main thread exists, no GIL operations are needed. This is a
+-   common situation (most Python programs do not use threads), and the lock
+-   operations slow the interpreter down a bit. Therefore, the lock is not
+-   created initially.  This situation is equivalent to having acquired the lock:
+-   when there is only a single thread, all object accesses are safe.  Therefore,
+-   when this function initializes the global interpreter lock, it also acquires
+-   it.  Before the Python :mod:`thread` module creates a new thread, knowing
+-   that either it has the lock or the lock hasn't been created yet, it calls
+-   :cfunc:`PyEval_InitThreads`.  When this call returns, it is guaranteed that
+-   the lock has been created and that the calling thread has acquired it.
++   .. note::
++      When only the main thread exists, no GIL operations are needed. This is a
++      common situation (most Python programs do not use threads), and the lock
++      operations slow the interpreter down a bit. Therefore, the lock is not
++      created initially.  This situation is equivalent to having acquired the lock:
++      when there is only a single thread, all object accesses are safe.  Therefore,
++      when this function initializes the global interpreter lock, it also acquires
++      it.  Before the Python :mod:`_thread` module creates a new thread, knowing
++      that either it has the lock or the lock hasn't been created yet, it calls
++      :cfunc:`PyEval_InitThreads`.  When this call returns, it is guaranteed that
++      the lock has been created and that the calling thread has acquired it.
+ 
+-   It is **not** safe to call this function when it is unknown which thread (if
+-   any) currently has the global interpreter lock.
++      It is **not** safe to call this function when it is unknown which thread (if
++      any) currently has the global interpreter lock.
+ 
+-   This function is not available when thread support is disabled at compile time.
++      This function is not available when thread support is disabled at compile time.
+ 
+ 
+ .. cfunction:: int PyEval_ThreadsInitialized()
+@@ -629,37 +557,6 @@
+    .. versionadded:: 2.4
+ 
+ 
+-.. cfunction:: void PyEval_AcquireLock()
+-
+-   Acquire the global interpreter lock.  The lock must have been created earlier.
+-   If this thread already has the lock, a deadlock ensues.  This function is not
+-   available when thread support is disabled at compile time.
+-
+-
+-.. cfunction:: void PyEval_ReleaseLock()
+-
+-   Release the global interpreter lock.  The lock must have been created earlier.
+-   This function is not available when thread support is disabled at compile time.
+-
+-
+-.. cfunction:: void PyEval_AcquireThread(PyThreadState *tstate)
+-
+-   Acquire the global interpreter lock and set the current thread state to
+-   *tstate*, which should not be *NULL*.  The lock must have been created earlier.
+-   If this thread already has the lock, deadlock ensues.  This function is not
+-   available when thread support is disabled at compile time.
+-
+-
+-.. cfunction:: void PyEval_ReleaseThread(PyThreadState *tstate)
+-
+-   Reset the current thread state to *NULL* and release the global interpreter
+-   lock.  The lock must have been created earlier and must be held by the current
+-   thread.  The *tstate* argument, which must not be *NULL*, is only used to check
+-   that it represents the current thread state --- if it isn't, a fatal error is
+-   reported. This function is not available when thread support is disabled at
+-   compile time.
+-
+-
+ .. cfunction:: PyThreadState* PyEval_SaveThread()
+ 
+    Release the global interpreter lock (if it has been created and thread
+@@ -678,6 +575,20 @@
+    when thread support is disabled at compile time.)
+ 
+ 
++.. cfunction:: PyThreadState* PyThreadState_Get()
++
++   Return the current thread state.  The global interpreter lock must be held.
++   When the current thread state is *NULL*, this issues a fatal error (so that
++   the caller needn't check for *NULL*).
++
++
++.. cfunction:: PyThreadState* PyThreadState_Swap(PyThreadState *tstate)
++
++   Swap the current thread state with the thread state given by the argument
++   *tstate*, which may be *NULL*.  The global interpreter lock must be held
++   and is not released.
++
++
+ .. cfunction:: void PyEval_ReInitThreads()
+ 
+    This function is called from :cfunc:`PyOS_AfterFork` to ensure that newly
+@@ -685,6 +596,47 @@
+    are not running in the child process.
+ 
+ 
++The following functions use thread-local storage, and are not compatible
++with sub-interpreters:
++
++.. cfunction:: PyGILState_STATE PyGILState_Ensure()
++
++   Ensure that the current thread is ready to call the Python C API regardless
++   of the current state of Python, or of the global interpreter lock. This may
++   be called as many times as desired by a thread as long as each call is
++   matched with a call to :cfunc:`PyGILState_Release`. In general, other
++   thread-related APIs may be used between :cfunc:`PyGILState_Ensure` and
++   :cfunc:`PyGILState_Release` calls as long as the thread state is restored to
++   its previous state before the Release().  For example, normal usage of the
++   :cmacro:`Py_BEGIN_ALLOW_THREADS` and :cmacro:`Py_END_ALLOW_THREADS` macros is
++   acceptable.
++
++   The return value is an opaque "handle" to the thread state when
++   :cfunc:`PyGILState_Ensure` was called, and must be passed to
++   :cfunc:`PyGILState_Release` to ensure Python is left in the same state. Even
++   though recursive calls are allowed, these handles *cannot* be shared - each
++   unique call to :cfunc:`PyGILState_Ensure` must save the handle for its call
++   to :cfunc:`PyGILState_Release`.
++
++   When the function returns, the current thread will hold the GIL and be able
++   to call arbitrary Python code.  Failure is a fatal error.
++
++   .. versionadded:: 2.3
++
++
++.. cfunction:: void PyGILState_Release(PyGILState_STATE)
++
++   Release any resources previously acquired.  After this call, Python's state will
++   be the same as it was prior to the corresponding :cfunc:`PyGILState_Ensure` call
++   (but generally this state will be unknown to the caller, hence the use of the
++   GILState API).
++
++   Every call to :cfunc:`PyGILState_Ensure` must be matched by a call to
++   :cfunc:`PyGILState_Release` on the same thread.
++
++   .. versionadded:: 2.3
++
++
+ The following macros are normally used without a trailing semicolon; look for
+ example usage in the Python source distribution.
+ 
+@@ -718,6 +670,10 @@
+    :cmacro:`Py_BEGIN_ALLOW_THREADS` without the opening brace and variable
+    declaration.  It is a no-op when thread support is disabled at compile time.
+ 
++
++Low-level API
++-------------
++
+ All of the following functions are only available when thread support is enabled
+ at compile time, and must be called only when the global interpreter lock has
+ been created.
+@@ -763,19 +719,6 @@
+    :cfunc:`PyThreadState_Clear`.
+ 
+ 
+-.. cfunction:: PyThreadState* PyThreadState_Get()
+-
+-   Return the current thread state.  The global interpreter lock must be held.
+-   When the current thread state is *NULL*, this issues a fatal error (so that
+-   the caller needn't check for *NULL*).
+-
+-
+-.. cfunction:: PyThreadState* PyThreadState_Swap(PyThreadState *tstate)
+-
+-   Swap the current thread state with the thread state given by the argument
+-   *tstate*, which may be *NULL*.  The global interpreter lock must be held.
+-
+-
+ .. cfunction:: PyObject* PyThreadState_GetDict()
+ 
+    Return a dictionary in which extensions can store thread-specific state
+@@ -802,43 +745,148 @@
+    .. versionadded:: 2.3
+ 
+ 
+-.. cfunction:: PyGILState_STATE PyGILState_Ensure()
++.. cfunction:: void PyEval_AcquireThread(PyThreadState *tstate)
+ 
+-   Ensure that the current thread is ready to call the Python C API regardless
+-   of the current state of Python, or of the global interpreter lock. This may
+-   be called as many times as desired by a thread as long as each call is
+-   matched with a call to :cfunc:`PyGILState_Release`. In general, other
+-   thread-related APIs may be used between :cfunc:`PyGILState_Ensure` and
+-   :cfunc:`PyGILState_Release` calls as long as the thread state is restored to
+-   its previous state before the Release().  For example, normal usage of the
+-   :cmacro:`Py_BEGIN_ALLOW_THREADS` and :cmacro:`Py_END_ALLOW_THREADS` macros is
+-   acceptable.
++   Acquire the global interpreter lock and set the current thread state to
++   *tstate*, which should not be *NULL*.  The lock must have been created earlier.
++   If this thread already has the lock, deadlock ensues.
+ 
+-   The return value is an opaque "handle" to the thread state when
+-   :cfunc:`PyGILState_Ensure` was called, and must be passed to
+-   :cfunc:`PyGILState_Release` to ensure Python is left in the same state. Even
+-   though recursive calls are allowed, these handles *cannot* be shared - each
+-   unique call to :cfunc:`PyGILState_Ensure` must save the handle for its call
+-   to :cfunc:`PyGILState_Release`.
++   :cfunc:`PyEval_RestoreThread` is a higher-level function which is always
++   available (even when thread support isn't enabled or when threads have
++   not been initialized).
+ 
+-   When the function returns, the current thread will hold the GIL. Failure is a
+-   fatal error.
+ 
+-   .. versionadded:: 2.3
++.. cfunction:: void PyEval_ReleaseThread(PyThreadState *tstate)
++
++   Reset the current thread state to *NULL* and release the global interpreter
++   lock.  The lock must have been created earlier and must be held by the current
++   thread.  The *tstate* argument, which must not be *NULL*, is only used to check
++   that it represents the current thread state --- if it isn't, a fatal error is
++   reported.
+ 
++   :cfunc:`PyEval_SaveThread` is a higher-level function which is always
++   available (even when thread support isn't enabled or when threads have
++   not been initialized).
+ 
+-.. cfunction:: void PyGILState_Release(PyGILState_STATE)
+ 
+-   Release any resources previously acquired.  After this call, Python's state will
+-   be the same as it was prior to the corresponding :cfunc:`PyGILState_Ensure` call
+-   (but generally this state will be unknown to the caller, hence the use of the
+-   GILState API.)
++.. cfunction:: void PyEval_AcquireLock()
+ 
+-   Every call to :cfunc:`PyGILState_Ensure` must be matched by a call to
+-   :cfunc:`PyGILState_Release` on the same thread.
++   Acquire the global interpreter lock.  The lock must have been created earlier.
++   If this thread already has the lock, a deadlock ensues.
+ 
+-   .. versionadded:: 2.3
++   .. warning::
++      This function does not change the current thread state.  Please use
++      :cfunc:`PyEval_RestoreThread` or :cfunc:`PyEval_AcquireThread`
++      instead.
++
++
++.. cfunction:: void PyEval_ReleaseLock()
++
++   Release the global interpreter lock.  The lock must have been created earlier.
++
++   .. warning::
++      This function does not change the current thread state.  Please use
++      :cfunc:`PyEval_SaveThread` or :cfunc:`PyEval_ReleaseThread`
++      instead.
++
++
++Sub-interpreter support
++=======================
++
++While in most uses, you will only embed a single Python interpreter, there
++are cases where you need to create several independent interpreters in the
++same process and perhaps even in the same thread.  Sub-interpreters allow
++you to do that.  You can switch between sub-interpreters using the
++:cfunc:`PyThreadState_Swap` function.  You can create and destroy them
++using the following functions:
++
++
++.. cfunction:: PyThreadState* Py_NewInterpreter()
++
++   .. index::
++      module: builtins
++      module: __main__
++      module: sys
++      single: stdout (in module sys)
++      single: stderr (in module sys)
++      single: stdin (in module sys)
++
++   Create a new sub-interpreter.  This is an (almost) totally separate environment
++   for the execution of Python code.  In particular, the new interpreter has
++   separate, independent versions of all imported modules, including the
++   fundamental modules :mod:`builtins`, :mod:`__main__` and :mod:`sys`.  The
++   table of loaded modules (``sys.modules``) and the module search path
++   (``sys.path``) are also separate.  The new environment has no ``sys.argv``
++   variable.  It has new standard I/O stream file objects ``sys.stdin``,
++   ``sys.stdout`` and ``sys.stderr`` (however these refer to the same underlying
++   file descriptors).
++
++   The return value points to the first thread state created in the new
++   sub-interpreter.  This thread state is made in the current thread state.
++   Note that no actual thread is created; see the discussion of thread states
++   below.  If creation of the new interpreter is unsuccessful, *NULL* is
++   returned; no exception is set since the exception state is stored in the
++   current thread state and there may not be a current thread state.  (Like all
++   other Python/C API functions, the global interpreter lock must be held before
++   calling this function and is still held when it returns; however, unlike most
++   other Python/C API functions, there needn't be a current thread state on
++   entry.)
++
++   .. index::
++      single: Py_Finalize()
++      single: Py_Initialize()
++
++   Extension modules are shared between (sub-)interpreters as follows: the first
++   time a particular extension is imported, it is initialized normally, and a
++   (shallow) copy of its module's dictionary is squirreled away.  When the same
++   extension is imported by another (sub-)interpreter, a new module is initialized
++   and filled with the contents of this copy; the extension's ``init`` function is
++   not called.  Note that this is different from what happens when an extension is
++   imported after the interpreter has been completely re-initialized by calling
++   :cfunc:`Py_Finalize` and :cfunc:`Py_Initialize`; in that case, the extension's
++   ``initmodule`` function *is* called again.
++
++   .. index:: single: close() (in module os)
++
++
++.. cfunction:: void Py_EndInterpreter(PyThreadState *tstate)
++
++   .. index:: single: Py_Finalize()
++
++   Destroy the (sub-)interpreter represented by the given thread state. The given
++   thread state must be the current thread state.  See the discussion of thread
++   states below.  When the call returns, the current thread state is *NULL*.  All
++   thread states associated with this interpreter are destroyed.  (The global
++   interpreter lock must be held before calling this function and is still held
++   when it returns.)  :cfunc:`Py_Finalize` will destroy all sub-interpreters that
++   haven't been explicitly destroyed at that point.
++
++
++Bugs and caveats
++----------------
+ 
++Because sub-interpreters (and the main interpreter) are part of the same
++process, the insulation between them isn't perfect --- for example, using
++low-level file operations like  :func:`os.close` they can
++(accidentally or maliciously) affect each other's open files.  Because of the
++way extensions are shared between (sub-)interpreters, some extensions may not
++work properly; this is especially likely when the extension makes use of
++(static) global variables, or when the extension manipulates its module's
++dictionary after its initialization.  It is possible to insert objects created
++in one sub-interpreter into a namespace of another sub-interpreter; this should
++be done with great care to avoid sharing user-defined functions, methods,
++instances or classes between sub-interpreters, since import operations executed
++by such objects may affect the wrong (sub-)interpreter's dictionary of loaded
++modules.
++
++Also note that combining this functionality with :cfunc:`PyGILState_\*` APIs
++is delicate, become these APIs assume a bijection between Python thread states
++and OS-level threads, an assumption broken by the presence of sub-interpreters.
++It is highly recommended that you don't switch sub-interpreters between a pair
++of matching :cfunc:`PyGILState_Ensure` and :cfunc:`PyGILState_Release` calls.
++Furthermore, extensions (such as :mod:`ctypes`) using these APIs to allow calling
++of Python code from non-Python created threads will probably be broken when using
++sub-interpreters.
+ 
+ 
+ Asynchronous Notifications
+--- a/Doc/reference/datamodel.rst
++++ b/Doc/reference/datamodel.rst
+@@ -689,7 +689,7 @@
+       an object passed to the C function as an implicit extra argument.  An example of
+       a built-in method is ``alist.append()``, assuming *alist* is a list object. In
+       this case, the special read-only attribute :attr:`__self__` is set to the object
+-      denoted by *list*.
++      denoted by *alist*.
+ 
+    Class Types
+       Class types, or "new-style classes," are callable.  These objects normally act
+--- a/Doc/reference/executionmodel.rst
++++ b/Doc/reference/executionmodel.rst
+@@ -140,9 +140,9 @@
+ The namespace for a module is automatically created the first time a module is
+ imported.  The main module for a script is always called :mod:`__main__`.
+ 
+-The global statement has the same scope as a name binding operation in the same
+-block.  If the nearest enclosing scope for a free variable contains a global
+-statement, the free variable is treated as a global.
++The :keyword:`global` statement has the same scope as a name binding operation
++in the same block.  If the nearest enclosing scope for a free variable contains
++a global statement, the free variable is treated as a global.
+ 
+ A class definition is an executable statement that may use and define names.
+ These references follow the normal rules for name resolution. The namespace of
+--- a/Doc/ACKS.txt
++++ b/Doc/ACKS.txt
+@@ -137,6 +137,7 @@
+    * Ross Moore
+    * Sjoerd Mullender
+    * Dale Nagata
++   * Michal Nowikowski 
+    * Ng Pheng Siong
+    * Koray Oner
+    * Tomas Oppelstrup
+--- a/Doc/tools/dailybuild.py
++++ b/Doc/tools/dailybuild.py
+@@ -33,9 +33,9 @@
+ 
+ BRANCHES = [
+     # checkout, target, isdev
+-    (BUILDROOT + '/python32', WWWROOT + '/dev', True),
++    (BUILDROOT + '/python33', WWWROOT + '/dev', True),
+     (BUILDROOT + '/python27', WWWROOT, False),
+-    (BUILDROOT + '/python31', WWWROOT + '/py3k', False),
++    (BUILDROOT + '/python32', WWWROOT + '/py3k', False),
+ ]
+ 
+ 
+--- a/Doc/tools/sphinxext/indexsidebar.html
++++ b/Doc/tools/sphinxext/indexsidebar.html
+@@ -3,8 +3,8 @@
+ 	    <h3>Docs for other versions</h3>
+ 	    <ul>
+ 	      <li><a href="http://docs.python.org/2.6/">Python 2.6 (stable)</a></li>
+-	      <li><a href="http://docs.python.org/3.1/">Python 3.1 (stable)</a></li>
+-	      <li><a href="http://docs.python.org/dev/py3k/">Python 3.2 (in development)</a></li>
++	      <li><a href="http://docs.python.org/3.2/">Python 3.2 (stable)</a></li>
++	      <li><a href="http://docs.python.org/dev/">Python 3.3 (in development)</a></li>
+               <li><a href="http://www.python.org/doc/versions/">Old versions</a></li>
+             </ul>
+ 
+--- a/Doc/tools/sphinxext/static/basic.css
++++ b/Doc/tools/sphinxext/static/basic.css
+@@ -342,7 +342,7 @@
+ }
+ 
+ .footnote:target  {
+-    background-color: #ffa
++    background-color: #ffa;
+ }
+ 
+ .impl-detail {
+@@ -364,6 +364,7 @@
+ 
+ pre {
+     overflow: auto;
++    overflow-y: hidden;
+ }
+ 
+ td.linenos pre {
+--- a/Doc/howto/regex.rst
++++ b/Doc/howto/regex.rst
+@@ -5,7 +5,6 @@
+ ****************************
+ 
+ :Author: A.M. Kuchling <amk@amk.ca>
+-:Release: 0.05
+ 
+ .. TODO:
+    Document lookbehind assertions
+@@ -113,7 +112,10 @@
+ Some of the special sequences beginning with ``'\'`` represent predefined sets
+ of characters that are often useful, such as the set of digits, the set of
+ letters, or the set of anything that isn't whitespace.  The following predefined
+-special sequences are available:
++special sequences are a subset of those available. The equivalent classes are
++for byte string patterns. For a complete list of sequences and expanded class
++definitions for Unicode string patterns, see the last part of
++:ref:`Regular Expression Syntax <re-syntax>`.
+ 
+ ``\d``
+    Matches any decimal digit; this is equivalent to the class ``[0-9]``.
+@@ -264,7 +266,7 @@
+    >>> import re
+    >>> p = re.compile('ab*')
+    >>> print p
+-   <_sre.SRE_Pattern object at 80b4150>
++   <_sre.SRE_Pattern object at 0x...>
+ 
+ :func:`re.compile` also accepts an optional *flags* argument, used to enable
+ various special features and syntax variations.  We'll go over the available
+@@ -377,7 +379,7 @@
+    >>> import re
+    >>> p = re.compile('[a-z]+')
+    >>> p
+-   <_sre.SRE_Pattern object at 80c3c28>
++   <_sre.SRE_Pattern object at 0x...>
+ 
+ Now, you can try matching various strings against the RE ``[a-z]+``.  An empty
+ string shouldn't match at all, since ``+`` means 'one or more repetitions'.
+@@ -395,7 +397,7 @@
+ 
+    >>> m = p.match('tempo')
+    >>> print m
+-   <_sre.SRE_Match object at 80c4f68>
++   <_sre.SRE_Match object at 0x...>
+ 
+ Now you can query the :class:`MatchObject` for information about the matching
+ string.   :class:`MatchObject` instances also have several methods and
+@@ -434,7 +436,7 @@
+    >>> print p.match('::: message')
+    None
+    >>> m = p.search('::: message') ; print m
+-   <re.MatchObject instance at 80c9650>
++   <_sre.SRE_Match object at 0x...>
+    >>> m.group()
+    'message'
+    >>> m.span()
+@@ -485,7 +487,7 @@
+    >>> print re.match(r'From\s+', 'Fromage amk')
+    None
+    >>> re.match(r'From\s+', 'From amk Thu May 14 19:12:10 1998')
+-   <re.MatchObject instance at 80c5978>
++   <_sre.SRE_Match object at 0x...>
+ 
+ Under the hood, these functions simply create a pattern object for you
+ and call the appropriate method on it.  They also store the compiled object in a
+@@ -686,7 +688,7 @@
+    line, the RE to use is ``^From``. ::
+ 
+       >>> print re.search('^From', 'From Here to Eternity')
+-      <re.MatchObject instance at 80c1520>
++      <_sre.SRE_Match object at 0x...>
+       >>> print re.search('^From', 'Reciting From Memory')
+       None
+ 
+@@ -698,11 +700,11 @@
+    or any location followed by a newline character.     ::
+ 
+       >>> print re.search('}$', '{block}')
+-      <re.MatchObject instance at 80adfa8>
++      <_sre.SRE_Match object at 0x...>
+       >>> print re.search('}$', '{block} ')
+       None
+       >>> print re.search('}$', '{block}\n')
+-      <re.MatchObject instance at 80adfa8>
++      <_sre.SRE_Match object at 0x...>
+ 
+    To match a literal ``'$'``, use ``\$`` or enclose it inside a character class,
+    as in  ``[$]``.
+@@ -727,7 +729,7 @@
+ 
+       >>> p = re.compile(r'\bclass\b')
+       >>> print p.search('no class at all')
+-      <re.MatchObject instance at 80c8f28>
++      <_sre.SRE_Match object at 0x...>
+       >>> print p.search('the declassified algorithm')
+       None
+       >>> print p.search('one subclass is')
+@@ -745,7 +747,7 @@
+       >>> print p.search('no class at all')
+       None
+       >>> print p.search('\b' + 'class' + '\b')
+-      <re.MatchObject instance at 80c3ee0>
++      <_sre.SRE_Match object at 0x...>
+ 
+    Second, inside a character class, where there's no use for this assertion,
+    ``\b`` represents the backspace character, for compatibility with Python's
+@@ -1315,7 +1317,7 @@
+ be *very* complicated.  Use an HTML or XML parser module for such tasks.)
+ 
+ 
+-Not Using re.VERBOSE
++Using re.VERBOSE
+ --------------------
+ 
+ By now you've probably noticed that regular expressions are a very compact
+--- a/Doc/howto/sorting.rst
++++ b/Doc/howto/sorting.rst
+@@ -8,8 +8,8 @@
+ 
+ 
+ Python lists have a built-in :meth:`list.sort` method that modifies the list
+-in-place and a :func:`sorted` built-in function that builds a new sorted list
+-from an iterable.
++in-place.  There is also a :func:`sorted` built-in function that builds a new
++sorted list from an iterable.
+ 
+ In this document, we explore the various techniques for sorting data using Python.
+ 
+--- a/Doc/tutorial/inputoutput.rst
++++ b/Doc/tutorial/inputoutput.rst
+@@ -160,7 +160,7 @@
+ 
+ An optional ``':'`` and format specifier can follow the field name. This allows
+ greater control over how the value is formatted.  The following example
+-truncates Pi to three places after the decimal.
++rounds Pi to three places after the decimal.
+ 
+    >>> import math
+    >>> print 'The value of PI is approximately {0:.3f}.'.format(math.pi)
+--- a/Doc/tutorial/interpreter.rst
++++ b/Doc/tutorial/interpreter.rst
+@@ -78,8 +78,9 @@
+ ----------------
+ 
+ When known to the interpreter, the script name and additional arguments
+-thereafter are passed to the script in the variable ``sys.argv``, which is a
+-list of strings.  Its length is at least one; when no script and no arguments
++thereafter are turned into a list of strings and assigned to the ``argv``
++variable in the ``sys`` module.  You can access this list by executing ``import
++sys``.  The length of the list is at least one; when no script and no arguments
+ are given, ``sys.argv[0]`` is an empty string.  When the script name is given as
+ ``'-'`` (meaning  standard input), ``sys.argv[0]`` is set to ``'-'``.  When
+ :option:`-c` *command* is used, ``sys.argv[0]`` is set to ``'-c'``.  When
+--- a/Doc/library/subprocess.rst
++++ b/Doc/library/subprocess.rst
+@@ -450,8 +450,11 @@
+    ==>
+    p1 = Popen(["dmesg"], stdout=PIPE)
+    p2 = Popen(["grep", "hda"], stdin=p1.stdout, stdout=PIPE)
++   p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
+    output = p2.communicate()[0]
+ 
++The p1.stdout.close() call after starting the p2 is important in order for p1
++to receive a SIGPIPE if p2 exits before p1.
+ 
+ Replacing :func:`os.system`
+ ^^^^^^^^^^^^^^^^^^^^^^^^^^^
+--- a/Doc/library/idle.rst
++++ b/Doc/library/idle.rst
+@@ -286,13 +286,13 @@
+ 
+ If there are arguments:
+ 
+-#. If :option:`-e` is used, arguments are files opened for editing and
++#. If ``-e`` is used, arguments are files opened for editing and
+    ``sys.argv`` reflects the arguments passed to IDLE itself.
+ 
+-#. Otherwise, if :option:`-c` is used, all arguments are placed in
++#. Otherwise, if ``-c`` is used, all arguments are placed in
+    ``sys.argv[1:...]``, with ``sys.argv[0]`` set to ``'-c'``.
+ 
+-#. Otherwise, if neither :option:`-e` nor :option:`-c` is used, the first
++#. Otherwise, if neither ``-e`` nor ``-c`` is used, the first
+    argument is a script which is executed with the remaining arguments in
+    ``sys.argv[1:...]``  and ``sys.argv[0]`` set to the script name.  If the script
+    name is '-', no script is executed but an interactive Python session is started;
+--- a/Doc/library/inspect.rst
++++ b/Doc/library/inspect.rst
+@@ -234,14 +234,14 @@
+ 
+    Return a tuple of values that describe how Python will interpret the file
+    identified by *path* if it is a module, or ``None`` if it would not be
+-   identified as a module.  The return tuple is ``(name, suffix, mode, mtype)``,
+-   where *name* is the name of the module without the name of any enclosing
+-   package, *suffix* is the trailing part of the file name (which may not be a
+-   dot-delimited extension), *mode* is the :func:`open` mode that would be used
+-   (``'r'`` or ``'rb'``), and *mtype* is an integer giving the type of the
+-   module.  *mtype* will have a value which can be compared to the constants
+-   defined in the :mod:`imp` module; see the documentation for that module for
+-   more information on module types.
++   identified as a module.  The return tuple is ``(name, suffix, mode,
++   module_type)``, where *name* is the name of the module without the name of
++   any enclosing package, *suffix* is the trailing part of the file name (which
++   may not be a dot-delimited extension), *mode* is the :func:`open` mode that
++   would be used (``'r'`` or ``'rb'``), and *module_type* is an integer giving
++   the type of the module.  *module_type* will have a value which can be
++   compared to the constants defined in the :mod:`imp` module; see the
++   documentation for that module for more information on module types.
+ 
+    .. versionchanged:: 2.6
+       Returns a :term:`named tuple` ``ModuleInfo(name, suffix, mode,
+@@ -464,12 +464,13 @@
+ 
+ .. function:: getargspec(func)
+ 
+-   Get the names and default values of a Python function's arguments. A tuple of four
+-   things is returned: ``(args, varargs, varkw, defaults)``. *args* is a list of
+-   the argument names (it may contain nested lists). *varargs* and *varkw* are the
+-   names of the ``*`` and ``**`` arguments or ``None``. *defaults* is a tuple of
+-   default argument values or None if there are no default arguments; if this tuple
+-   has *n* elements, they correspond to the last *n* elements listed in *args*.
++   Get the names and default values of a Python function's arguments. A tuple of
++   four things is returned: ``(args, varargs, keywords, defaults)``. *args* is a
++   list of the argument names (it may contain nested lists). *varargs* and
++   *keywords* are the names of the ``*`` and ``**`` arguments or
++   ``None``. *defaults* is a tuple of default argument values or None if there
++   are no default arguments; if this tuple has *n* elements, they correspond to
++   the last *n* elements listed in *args*.
+ 
+    .. versionchanged:: 2.6
+       Returns a :term:`named tuple` ``ArgSpec(args, varargs, keywords,
+@@ -478,11 +479,11 @@
+ 
+ .. function:: getargvalues(frame)
+ 
+-   Get information about arguments passed into a particular frame. A tuple of four
+-   things is returned: ``(args, varargs, varkw, locals)``. *args* is a list of the
+-   argument names (it may contain nested lists). *varargs* and *varkw* are the
+-   names of the ``*`` and ``**`` arguments or ``None``. *locals* is the locals
+-   dictionary of the given frame.
++   Get information about arguments passed into a particular frame. A tuple of
++   four things is returned: ``(args, varargs, keywords, locals)``. *args* is a
++   list of the argument names (it may contain nested lists). *varargs* and
++   *keywords* are the names of the ``*`` and ``**`` arguments or ``None``.
++   *locals* is the locals dictionary of the given frame.
+ 
+    .. versionchanged:: 2.6
+       Returns a :term:`named tuple` ``ArgInfo(args, varargs, keywords,
+--- a/Doc/library/py_compile.rst
++++ b/Doc/library/py_compile.rst
+@@ -40,6 +40,11 @@
+    line, if *args* is not specified) are compiled and the resulting bytecode is
+    cached in the normal manner.  This function does not search a directory
+    structure to locate source files; it only compiles files named explicitly.
++   If ``'-'`` is the only parameter in args, the list of files is taken from
++   standard input.
++
++   .. versionchanged:: 2.7
++      Added support for ``'-'``.
+ 
+ When this module is run as a script, the :func:`main` is used to compile all the
+ files named on the command line.  The exit status is nonzero if one of the files
+--- a/Doc/library/pdb.rst
++++ b/Doc/library/pdb.rst
+@@ -129,7 +129,7 @@
+    :data:`sys.last_traceback`.
+ 
+ 
+-The ``run_*`` functions and :func:`set_trace` are aliases for instantiating the
++The ``run*`` functions and :func:`set_trace` are aliases for instantiating the
+ :class:`Pdb` class and calling the method of the same name.  If you want to
+ access further features, you have to do this yourself:
+ 
+@@ -239,7 +239,8 @@
+    Temporary breakpoint, which is removed automatically when it is first hit.  The
+    arguments are the same as break.
+ 
+-cl(ear) [*bpnumber* [*bpnumber ...*]]
++cl(ear) [*filename:lineno* | *bpnumber* [*bpnumber ...*]]
++   With a *filename:lineno* argument, clear all the breakpoints at this line.
+    With a space separated list of breakpoint numbers, clear those breakpoints.
+    Without argument, clear all breaks (but first ask confirmation).
+ 
+--- a/Doc/library/sys.rst
++++ b/Doc/library/sys.rst
+@@ -208,7 +208,7 @@
+ 
+    A string giving the site-specific directory prefix where the platform-dependent
+    Python files are installed; by default, this is also ``'/usr/local'``.  This can
+-   be set at build time with the :option:`--exec-prefix` argument to the
++   be set at build time with the ``--exec-prefix`` argument to the
+    :program:`configure` script.  Specifically, all configuration files (e.g. the
+    :file:`pyconfig.h` header file) are installed in the directory ``exec_prefix +
+    '/lib/pythonversion/config'``, and shared library modules are installed in
+@@ -735,7 +735,7 @@
+ 
+    A string giving the site-specific directory prefix where the platform
+    independent Python files are installed; by default, this is the string
+-   ``'/usr/local'``.  This can be set at build time with the :option:`--prefix`
++   ``'/usr/local'``.  This can be set at build time with the ``--prefix``
+    argument to the :program:`configure` script.  The main collection of Python
+    library modules is installed in the directory ``prefix + '/lib/pythonversion'``
+    while the platform independent header files (all except :file:`pyconfig.h`) are
+@@ -923,7 +923,7 @@
+ 
+    Activate dumping of VM measurements using the Pentium timestamp counter, if
+    *on_flag* is true. Deactivate these dumps if *on_flag* is off. The function is
+-   available only if Python was compiled with :option:`--with-tsc`. To understand
++   available only if Python was compiled with ``--with-tsc``. To understand
+    the output of this dump, read :file:`Python/ceval.c` in the Python sources.
+ 
+    .. versionadded:: 2.4
+--- a/Doc/library/itertools.rst
++++ b/Doc/library/itertools.rst
+@@ -237,7 +237,7 @@
+ 
+       def count(start=0, step=1):
+           # count(10) --> 10 11 12 13 14 ...
+-          # count(2.5, 0.5) -> 3.5 3.0 4.5 ...
++          # count(2.5, 0.5) -> 2.5 3.0 3.5 ...
+           n = start
+           while True:
+               yield n
+--- a/Doc/library/timeit.rst
++++ b/Doc/library/timeit.rst
+@@ -125,27 +125,36 @@
+ 
+    python -m timeit [-n N] [-r N] [-s S] [-t] [-c] [-h] [statement ...]
+ 
+-where the following options are understood:
++Where the following options are understood:
++
++.. program:: timeit
++
++.. cmdoption:: -n N, --number=N
+ 
+--n N/:option:`--number=N`
+    how many times to execute 'statement'
+ 
+--r N/:option:`--repeat=N`
++.. cmdoption:: -r N, --repeat=N
++
+    how many times to repeat the timer (default 3)
+ 
+--s S/:option:`--setup=S`
+-   statement to be executed once initially (default ``'pass'``)
++.. cmdoption:: -s S, --setup=S
++
++   statement to be executed once initially (default ``pass``)
++
++.. cmdoption:: -t, --time
+ 
+--t/:option:`--time`
+    use :func:`time.time` (default on all platforms but Windows)
+ 
+--c/:option:`--clock`
++.. cmdoption:: -c, --clock
++
+    use :func:`time.clock` (default on Windows)
+ 
+--v/:option:`--verbose`
++.. cmdoption:: -v, --verbose
++
+    print raw timing results; repeat for more digits precision
+ 
+--h/:option:`--help`
++.. cmdoption:: -h, --help
++
+    print a short usage message and exit
+ 
+ A multi-line statement may be given by specifying each line as a separate
+--- a/Doc/library/wave.rst
++++ b/Doc/library/wave.rst
+@@ -14,8 +14,8 @@
+ 
+ .. function:: open(file[, mode])
+ 
+-   If *file* is a string, open the file by that name, other treat it as a seekable
+-   file-like object. *mode* can be any of
++   If *file* is a string, open the file by that name, otherwise treat it as a
++   seekable file-like object.  *mode* can be any of
+ 
+    ``'r'``, ``'rb'``
+       Read only mode.
+@@ -26,9 +26,14 @@
+    Note that it does not allow read/write WAV files.
+ 
+    A *mode* of ``'r'`` or ``'rb'`` returns a :class:`Wave_read` object, while a
+-   *mode* of ``'w'`` or ``'wb'`` returns a :class:`Wave_write` object.  If *mode*
+-   is omitted and a file-like  object is passed as *file*, ``file.mode`` is used as
+-   the default value for *mode* (the ``'b'`` flag is still added if  necessary).
++   *mode* of ``'w'`` or ``'wb'`` returns a :class:`Wave_write` object.  If
++   *mode* is omitted and a file-like object is passed as *file*, ``file.mode``
++   is used as the default value for *mode* (the ``'b'`` flag is still added if
++   necessary).
++
++   If you pass in a file-like object, the wave object will not close it when its
++   :meth:`close` method is called; it is the caller's responsibility to close
++   the file object.
+ 
+ 
+ .. function:: openfp(file, mode)
+@@ -52,8 +57,8 @@
+ 
+ .. method:: Wave_read.close()
+ 
+-   Close the stream, and make the instance unusable. This is called automatically
+-   on object collection.
++   Close the stream if it was opened by :mod:`wave`, and make the instance
++   unusable.  This is called automatically on object collection.
+ 
+ 
+ .. method:: Wave_read.getnchannels()
+@@ -139,8 +144,8 @@
+ 
+ .. method:: Wave_write.close()
+ 
+-   Make sure *nframes* is correct, and close the file. This method is called upon
+-   deletion.
++   Make sure *nframes* is correct, and close the file if it was opened by
++   :mod:`wave`.  This method is called upon object collection.
+ 
+ 
+ .. method:: Wave_write.setnchannels(n)
+@@ -192,6 +197,7 @@
+ 
+    Write audio frames and make sure *nframes* is correct.
+ 
++
+ Note that it is invalid to set any parameters after calling :meth:`writeframes`
+ or :meth:`writeframesraw`, and any attempt to do so will raise
+ :exc:`wave.Error`.
+--- a/Doc/library/test.rst
++++ b/Doc/library/test.rst
+@@ -155,35 +155,35 @@
+ 
+ .. _regrtest:
+ 
+-Running tests using :mod:`test.regrtest`
+-----------------------------------------
++Running tests using the command-line interface
++----------------------------------------------
+ 
+-:mod:`test.regrtest` can be used as a script to drive Python's regression test
+-suite. Running the script by itself automatically starts running all regression
++The :mod:`test.regrtest` module can be run as a script to drive Python's regression
++test suite, thanks to the :option:`-m` option: :program:`python -m test.regrtest`.
++Running the script by itself automatically starts running all regression
+ tests in the :mod:`test` package. It does this by finding all modules in the
+ package whose name starts with ``test_``, importing them, and executing the
+ function :func:`test_main` if present. The names of tests to execute may also
+ be passed to the script. Specifying a single regression test (:program:`python
+-regrtest.py` :option:`test_spam.py`) will minimize output and only print
+-whether the test passed or failed and thus minimize output.
++-m test.regrtest test_spam`) will minimize output and only print whether
++the test passed or failed and thus minimize output.
+ 
+ Running :mod:`test.regrtest` directly allows what resources are available for
+ tests to use to be set. You do this by using the :option:`-u` command-line
+-option. Run :program:`python regrtest.py` :option:`-uall` to turn on all
+-resources; specifying :option:`all` as an option for :option:`-u` enables all
++option. Run :program:`python -m test.regrtest -uall` to turn on all
++resources; specifying ``all`` as an option for ``-u`` enables all
+ possible resources. If all but one resource is desired (a more common case), a
+ comma-separated list of resources that are not desired may be listed after
+-:option:`all`. The command :program:`python regrtest.py`
+-:option:`-uall,-audio,-largefile` will run :mod:`test.regrtest` with all
+-resources except the :option:`audio` and :option:`largefile` resources. For a
+-list of all resources and more command-line options, run :program:`python
+-regrtest.py` :option:`-h`.
++``all``. The command :program:`python -m test.regrtest -uall,-audio,-largefile`
++will run :mod:`test.regrtest` with all resources except the ``audio`` and
++``largefile`` resources. For a list of all resources and more command-line
++options, run :program:`python -m test.regrtest -h`.
+ 
+ Some other ways to execute the regression tests depend on what platform the
+-tests are being executed on. On Unix, you can run :program:`make`
+-:option:`test` at the top-level directory where Python was built. On Windows,
+-executing :program:`rt.bat` from your :file:`PCBuild` directory will run all
+-regression tests.
++tests are being executed on. On Unix, you can run :program:`make test` at the
++top-level directory where Python was built. On Windows, executing
++:program:`rt.bat` from your :file:`PCBuild` directory will run all regression
++tests.
+ 
+ 
+ :mod:`test.test_support` --- Utility functions for tests
+--- a/Doc/library/queue.rst
++++ b/Doc/library/queue.rst
+@@ -27,7 +27,7 @@
+ .. seealso::
+ 
+    Latest version of the `queue module Python source code
+-   <http://svn.python.org/view/python/branches/release27-maint/Lib/queue.py?view=markup>`_
++   <http://svn.python.org/view/python/branches/release27-maint/Lib/Queue.py?view=markup>`_.
+ 
+ The :mod:`Queue` module defines the following classes and exceptions:
+ 
+--- a/Doc/library/logging.rst
++++ b/Doc/library/logging.rst
+@@ -2924,6 +2924,8 @@
+     this new subclass, and then :func:`dictConfig` could be called exactly as
+     in the default, uncustomized state.
+ 
++   .. versionadded:: 2.7
++
+ .. function:: fileConfig(fname[, defaults])
+ 
+    Reads the logging configuration from a :mod:`ConfigParser`\-format file named
+--- a/Doc/library/socket.rst
++++ b/Doc/library/socket.rst
+@@ -515,6 +515,9 @@
+    Module :mod:`SocketServer`
+       Classes that simplify writing network servers.
+ 
++   Module :mod:`ssl`
++      A TLS/SSL wrapper for socket objects.
++
+ 
+ .. _socket-objects:
+ 
+@@ -551,6 +554,12 @@
+    remote end will receive no more data (after queued data is flushed). Sockets are
+    automatically closed when they are garbage-collected.
+ 
++   .. note::
++      :meth:`close()` releases the resource associated with a connection but
++      does not necessarily close the connection immediately.  If you want
++      to close the connection in a timely fashion, call :meth:`shutdown()`
++      before :meth:`close()`.
++
+ 
+ .. method:: socket.connect(address)
+ 
+--- a/Doc/library/trace.rst
++++ b/Doc/library/trace.rst
+@@ -18,103 +18,177 @@
+ 
+ .. _trace-cli:
+ 
+-Command Line Usage
++Command-Line Usage
+ ------------------
+ 
+ The :mod:`trace` module can be invoked from the command line.  It can be as
+ simple as ::
+ 
+-   python -m trace --count somefile.py ...
++   python -m trace --count -C . somefile.py ...
+ 
+-The above will generate annotated listings of all Python modules imported during
+-the execution of :file:`somefile.py`.
++The above will execute :file:`somefile.py` and generate annotated listings of
++all Python modules imported during the execution into the current directory.
+ 
+-The following command-line arguments are supported:
++.. program:: trace
++
++.. cmdoption:: --help
++
++   Display usage and exit.
++
++.. cmdoption:: --version
++
++   Display the version of the module and exit.
++
++Main options
++^^^^^^^^^^^^
++
++At least one of the following options must be specified when invoking
++:mod:`trace`.  The :option:`--listfuncs <-l>` option is mutually exclusive with
++the :option:`--trace <-t>` and :option:`--counts <-c>` options . When
++:option:`--listfuncs <-l>` is provided, neither :option:`--counts <-c>` nor
++:option:`--trace <-t>` are accepted, and vice versa.
++
++.. program:: trace
++
++.. cmdoption:: -c, --count
++
++   Produce a set of annotated listing files upon program completion that shows
++   how many times each statement was executed.  See also
++   :option:`--coverdir <-C>`, :option:`--file <-f>` and
++   :option:`--no-report <-R>` below.
++
++.. cmdoption:: -t, --trace
+ 
+-:option:`--trace`, :option:`-t`
+    Display lines as they are executed.
+ 
+-:option:`--count`, :option:`-c`
+-   Produce a set of  annotated listing files upon program completion that shows how
+-   many times each statement was executed.
++.. cmdoption:: -l, --listfuncs
++
++   Display the functions executed by running the program.
++
++.. cmdoption:: -r, --report
+ 
+-:option:`--report`, :option:`-r`
+    Produce an annotated list from an earlier program run that used the
+-   :option:`--count` and :option:`--file` arguments.
++   :option:`--count <-c>` and :option:`--file <-f>` option.  This does not
++   execute any code.
+ 
+-:option:`--no-report`, :option:`-R`
+-   Do not generate annotated listings.  This is useful if you intend to make
+-   several runs with :option:`--count` then produce a single set of annotated
+-   listings at the end.
++.. cmdoption:: -T, --trackcalls
++
++   Display the calling relationships exposed by running the program.
+ 
+-:option:`--listfuncs`, :option:`-l`
+-   List the functions executed by running the program.
++Modifiers
++^^^^^^^^^
+ 
+-:option:`--trackcalls`, :option:`-T`
+-   Generate calling relationships exposed by running the program.
++.. program:: trace
+ 
+-:option:`--file`, :option:`-f`
+-   Name a file containing (or to contain) counts.
++.. cmdoption:: -f, --file=<file>
+ 
+-:option:`--coverdir`, :option:`-C`
+-   Name a directory in which to save annotated listing files.
++   Name of a file to accumulate counts over several tracing runs.  Should be
++   used with the :option:`--count <-c>` option.
++
++.. cmdoption:: -C, --coverdir=<dir>
++
++   Directory where the report files go.  The coverage report for
++   ``package.module`` is written to file :file:`{dir}/{package}/{module}.cover`.
++
++.. cmdoption:: -m, --missing
+ 
+-:option:`--missing`, :option:`-m`
+    When generating annotated listings, mark lines which were not executed with
+-   '``>>>>>>``'.
++   ``>>>>>>``.
+ 
+-:option:`--summary`, :option:`-s`
+-   When using :option:`--count` or :option:`--report`, write a brief summary to
+-   stdout for each file processed.
+-
+-:option:`--ignore-module`
+-   Accepts comma separated list of module names. Ignore each of the named
+-   module and its submodules (if it is a package).  May be given
+-   multiple times.
+-
+-:option:`--ignore-dir`
+-   Ignore all modules and packages in the named directory and subdirectories
+-   (multiple directories can be joined by os.pathsep).  May be given multiple
+-   times.
++.. cmdoption:: -s, --summary
+ 
++   When using :option:`--count <-c>` or :option:`--report <-r>`, write a brief
++   summary to stdout for each file processed.
+ 
+-.. _trace-api:
++.. cmdoption:: -R, --no-report
+ 
+-Programming Interface
+----------------------
++   Do not generate annotated listings.  This is useful if you intend to make
++   several runs with :option:`--count <-c>`, and then produce a single set of
++   annotated listings at the end.
++
++.. cmdoption:: -g, --timing
++
++   Prefix each line with the time since the program started.  Only used while
++   tracing.
++
++Filters
++^^^^^^^
++
++These options may be repeated multiple times.
++
++.. program:: trace
++
++.. cmdoption:: --ignore-module=<mod>
++
++   Ignore each of the given module names and its submodules (if it is a
++   package).  The argument can be a list of names separated by a comma.
++
++.. cmdoption:: --ignore-dir=<dir>
+ 
++   Ignore all modules and packages in the named directory and subdirectories.
++   The argument can be a list of directories separated by :data:`os.pathsep`.
++
++.. _trace-api:
++
++Programmatic Interface
++----------------------
+ 
+ .. class:: Trace([count=1[, trace=1[, countfuncs=0[, countcallers=0[, ignoremods=()[, ignoredirs=()[, infile=None[, outfile=None[, timing=False]]]]]]]]])
+ 
+-   Create an object to trace execution of a single statement or expression. All
+-   parameters are optional.  *count* enables counting of line numbers. *trace*
+-   enables line execution tracing.  *countfuncs* enables listing of the functions
+-   called during the run.  *countcallers* enables call relationship tracking.
+-   *ignoremods* is a list of modules or packages to ignore.  *ignoredirs* is a list
+-   of directories whose modules or packages should be ignored.  *infile* is the
+-   file from which to read stored count information.  *outfile* is a file in which
+-   to write updated count information. *timing* enables a timestamp relative
+-   to when tracing was started to be displayed.
++   Create an object to trace execution of a single statement or expression.  All
++   parameters are optional.  *count* enables counting of line numbers.  *trace*
++   enables line execution tracing.  *countfuncs* enables listing of the
++   functions called during the run.  *countcallers* enables call relationship
++   tracking.  *ignoremods* is a list of modules or packages to ignore.
++   *ignoredirs* is a list of directories whose modules or packages should be
++   ignored.  *infile* is the name of the file from which to read stored count
++   information.  *outfile* is the name of the file in which to write updated
++   count information.  *timing* enables a timestamp relative to when tracing was
++   started to be displayed.
++
++    .. method:: run(cmd)
++
++       Execute the command and gather statistics from the execution with
++       the current tracing parameters.  *cmd* must be a string or code object,
++       suitable for passing into :func:`exec`.
++
++    .. method:: runctx(cmd[, globals=None[, locals=None]])
++
++       Execute the command and gather statistics from the execution with the
++       current tracing parameters, in the defined global and local
++       environments.  If not defined, *globals* and *locals* default to empty
++       dictionaries.
++
++    .. method:: runfunc(func, *args, **kwds)
+ 
++       Call *func* with the given arguments under control of the :class:`Trace`
++       object with the current tracing parameters.
+ 
+-.. method:: Trace.run(cmd)
++    .. method:: results()
+ 
+-   Run *cmd* under control of the Trace object with the current tracing parameters.
++       Return a :class:`CoverageResults` object that contains the cumulative
++       results of all previous calls to ``run``, ``runctx`` and ``runfunc``
++       for the given :class:`Trace` instance.  Does not reset the accumulated
++       trace results.
+ 
++.. class:: CoverageResults
+ 
+-.. method:: Trace.runctx(cmd[, globals=None[, locals=None]])
++   A container for coverage results, created by :meth:`Trace.results`.  Should
++   not be created directly by the user.
+ 
+-   Run *cmd* under control of the Trace object with the current tracing parameters
+-   in the defined global and local environments.  If not defined, *globals* and
+-   *locals* default to empty dictionaries.
++    .. method:: update(other)
+ 
++       Merge in data from another :class:`CoverageResults` object.
+ 
+-.. method:: Trace.runfunc(func, *args, **kwds)
++    .. method:: write_results([show_missing=True[, summary=False[, coverdir=None]]])
+ 
+-   Call *func* with the given arguments under control of the :class:`Trace` object
+-   with the current tracing parameters.
++       Write coverage results.  Set *show_missing* to show lines that had no
++       hits.  Set *summary* to include in the output the coverage summary per
++       module.  *coverdir* specifies the directory into which the coverage
++       result files will be output.  If ``None``, the results for each source
++       file are placed in its directory.
+ 
+-This is a simple example showing the use of this module::
++A simple example demonstrating the use of the programmatic interface::
+ 
+    import sys
+    import trace
+--- a/Doc/library/doctest.rst
++++ b/Doc/library/doctest.rst
+@@ -95,7 +95,7 @@
+    $
+ 
+ There's no output!  That's normal, and it means all the examples worked.  Pass
+-:option:`-v` to the script, and :mod:`doctest` prints a detailed log of what
++``-v`` to the script, and :mod:`doctest` prints a detailed log of what
+ it's trying, and prints a summary at the end::
+ 
+    $ python example.py -v
+@@ -163,7 +163,7 @@
+ final line of output is ``***Test Failed*** N failures.``, where *N* is the
+ number of examples that failed.
+ 
+-Run it with the :option:`-v` switch instead::
++Run it with the ``-v`` switch instead::
+ 
+    python M.py -v
+ 
+@@ -172,7 +172,7 @@
+ 
+ You can force verbose mode by passing ``verbose=True`` to :func:`testmod`, or
+ prohibit it by passing ``verbose=False``.  In either of those cases,
+-``sys.argv`` is not examined by :func:`testmod` (so passing :option:`-v` or not
++``sys.argv`` is not examined by :func:`testmod` (so passing ``-v`` or not
+ has no effect).
+ 
+ Since Python 2.6, there is also a command line shortcut for running
+@@ -242,7 +242,7 @@
+ that can be used to tell it to look for files in other locations.
+ 
+ Like :func:`testmod`, :func:`testfile`'s verbosity can be set with the
+-:option:`-v` command-line switch or with the optional keyword argument
++``-v`` command-line switch or with the optional keyword argument
+ *verbose*.
+ 
+ Since Python 2.6, there is also a command line shortcut for running
+@@ -982,7 +982,7 @@
+ 
+    def load_tests(loader, tests, ignore):
+        tests.addTests(doctest.DocTestSuite(my_module_with_doctests))
+-       return test
++       return tests
+ 
+ There are two main functions for creating :class:`unittest.TestSuite` instances
+ from text files and modules with doctests:
+@@ -1453,7 +1453,7 @@
+    verbosity.  If *verbose* is ``True``, then information is printed about each
+    example, as it is run.  If *verbose* is ``False``, then only failures are
+    printed.  If *verbose* is unspecified, or ``None``, then verbose output is used
+-   iff the command-line switch :option:`-v` is used.
++   iff the command-line switch ``-v`` is used.
+ 
+    The optional keyword argument *optionflags* can be used to control how the test
+    runner compares expected output to actual output, and how it displays failures.
+--- a/Doc/library/tarfile.rst
++++ b/Doc/library/tarfile.rst
+@@ -419,7 +419,9 @@
+ 
+    .. deprecated:: 2.7
+       The *exclude* parameter is deprecated, please use the *filter* parameter
+-      instead.
++      instead.  For maximum portability, *filter* should be used as a keyword
++      argument rather than as a positional argument so that code won't be
++      affected when *exclude* is ultimately removed.
+ 
+ 
+ .. method:: TarFile.addfile(tarinfo, fileobj=None)
+--- a/Doc/library/unittest.rst
++++ b/Doc/library/unittest.rst
+@@ -157,7 +157,7 @@
+ test.
+ 
+ The final block shows a simple way to run the tests. :func:`unittest.main`
+-provides a command line interface to the test script.  When run from the command
++provides a command-line interface to the test script.  When run from the command
+ line, the above script produces an output that looks like this::
+ 
+    ...
+@@ -192,7 +192,7 @@
+ 
+ .. _unittest-command-line-interface:
+ 
+-Command Line Interface
++Command-Line Interface
+ ----------------------
+ 
+ The unittest module can be used from the command line to run tests from
+@@ -209,7 +209,7 @@
+ 
+    python -m unittest -v test_module
+ 
+-For a list of all the command line options::
++For a list of all the command-line options::
+ 
+    python -m unittest -h
+ 
+@@ -218,31 +218,33 @@
+    not modules or classes.
+ 
+ 
+-failfast, catch and buffer command line options
+-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
++Command-line options
++~~~~~~~~~~~~~~~~~~~~
+ 
+-unittest supports three command options.
++:program:`unittest` supports these command-line options:
+ 
+-* :option:`-b` / :option:`--buffer`
++.. program:: unittest
+ 
+-  The standard output and standard error streams are buffered during the test
+-  run. Output during a passing test is discarded. Output is echoed normally
+-  on test fail or error and is added to the failure messages.
++.. cmdoption:: -b, --buffer
+ 
+-* :option:`-c` / :option:`--catch`
++   The standard output and standard error streams are buffered during the test
++   run. Output during a passing test is discarded. Output is echoed normally
++   on test fail or error and is added to the failure messages.
+ 
+-  Control-C during the test run waits for the current test to end and then
+-  reports all the results so far. A second control-C raises the normal
+-  :exc:`KeyboardInterrupt` exception.
++.. cmdoption:: -c, --catch
+ 
+-  See `Signal Handling`_ for the functions that provide this functionality.
++   Control-C during the test run waits for the current test to end and then
++   reports all the results so far. A second control-C raises the normal
++   :exc:`KeyboardInterrupt` exception.
+ 
+-* :option:`-f` / :option:`--failfast`
++   See `Signal Handling`_ for the functions that provide this functionality.
+ 
+-  Stop the test run on the first error or failure.
++.. cmdoption:: -f, --failfast
+ 
+-..  versionadded:: 2.7
+-   The command line options ``-c``, ``-b`` and ``-f`` were added.
++   Stop the test run on the first error or failure.
++
++.. versionadded:: 2.7
++   The command-line options ``-b``, ``-c`` and ``-f`` were added.
+ 
+ The command line can also be used for test discovery, for running all of the
+ tests in a project or just a subset.
+@@ -260,18 +262,30 @@
+ directory of the project (in other words, they must all be in Python packages).
+ 
+ Test discovery is implemented in :meth:`TestLoader.discover`, but can also be
+-used from the command line. The basic command line usage is::
++used from the command line. The basic command-line usage is::
+ 
+    cd project_directory
+    python -m unittest discover
+ 
+ The ``discover`` sub-command has the following options:
+ 
+-   -v, --verbose    Verbose output
+-   -s directory     Directory to start discovery ('.' default)
+-   -p pattern       Pattern to match test files ('test*.py' default)
+-   -t directory     Top level directory of project (default to
+-                    start directory)
++.. program:: unittest discover
++
++.. cmdoption:: -v, --verbose
++
++   Verbose output
++
++.. cmdoption:: -s directory
++
++   Directory to start discovery ('.' default)
++
++.. cmdoption:: -p pattern
++
++   Pattern to match test files ('test*.py' default)
++
++.. cmdoption:: -t directory
++
++   Top level directory of project (defaults to start directory)
+ 
+ The :option:`-s`, :option:`-p`, and :option:`-t` options can be passed in
+ as positional arguments in that order. The following two command lines
+@@ -1725,7 +1739,7 @@
+       >>> main(module='test_module', exit=False)
+ 
+    The ``failfast``, ``catchbreak`` and ``buffer`` parameters have the same
+-   effect as the `failfast, catch and buffer command line options`_.
++   effect as the same-name `command-line options`_.
+ 
+    Calling ``main`` actually returns an instance of the ``TestProgram`` class.
+    This stores the result of the tests run as the ``result`` attribute.
+@@ -1888,12 +1902,12 @@
+ Signal Handling
+ ---------------
+ 
+-The :option:`-c`/:option:`--catch` command line option to unittest, along with the ``catchbreak``
+-parameter to :func:`unittest.main()`, provide more friendly handling of
+-control-C during a test run. With catch break behavior enabled control-C will
+-allow the currently running test to complete, and the test run will then end
+-and report all the results so far. A second control-c will raise a
+-:exc:`KeyboardInterrupt` in the usual way.
++The :option:`-c/--catch <unittest -c>` command-line option to unittest,
++along with the ``catchbreak`` parameter to :func:`unittest.main()`, provide
++more friendly handling of control-C during a test run. With catch break
++behavior enabled control-C will allow the currently running test to complete,
++and the test run will then end and report all the results so far. A second
++control-c will raise a :exc:`KeyboardInterrupt` in the usual way.
+ 
+ The control-c handling signal handler attempts to remain compatible with code or
+ tests that install their own :const:`signal.SIGINT` handler. If the ``unittest``
+--- a/Doc/library/optparse.rst
++++ b/Doc/library/optparse.rst
+@@ -107,26 +107,26 @@
+    an argument used to supply extra information to guide or customize the
+    execution of a program.  There are many different syntaxes for options; the
+    traditional Unix syntax is a hyphen ("-") followed by a single letter,
+-   e.g. ``"-x"`` or ``"-F"``.  Also, traditional Unix syntax allows multiple
+-   options to be merged into a single argument, e.g.  ``"-x -F"`` is equivalent
+-   to ``"-xF"``.  The GNU project introduced ``"--"`` followed by a series of
+-   hyphen-separated words, e.g.  ``"--file"`` or ``"--dry-run"``.  These are the
++   e.g. ``-x`` or ``-F``.  Also, traditional Unix syntax allows multiple
++   options to be merged into a single argument, e.g. ``-x -F`` is equivalent
++   to ``-xF``.  The GNU project introduced ``--`` followed by a series of
++   hyphen-separated words, e.g. ``--file`` or ``--dry-run``.  These are the
+    only two option syntaxes provided by :mod:`optparse`.
+ 
+    Some other option syntaxes that the world has seen include:
+ 
+-   * a hyphen followed by a few letters, e.g. ``"-pf"`` (this is *not* the same
++   * a hyphen followed by a few letters, e.g. ``-pf`` (this is *not* the same
+      as multiple options merged into a single argument)
+ 
+-   * a hyphen followed by a whole word, e.g. ``"-file"`` (this is technically
++   * a hyphen followed by a whole word, e.g. ``-file`` (this is technically
+      equivalent to the previous syntax, but they aren't usually seen in the same
+      program)
+ 
+    * a plus sign followed by a single letter, or a few letters, or a word, e.g.
+-     ``"+f"``, ``"+rgb"``
++     ``+f``, ``+rgb``
+ 
+-   * a slash followed by a letter, or a few letters, or a word, e.g. ``"/f"``,
+-     ``"/file"``
++   * a slash followed by a letter, or a few letters, or a word, e.g. ``/f``,
++     ``/file``
+ 
+    These option syntaxes are not supported by :mod:`optparse`, and they never
+    will be.  This is deliberate: the first three are non-standard on any
+@@ -154,9 +154,9 @@
+    Typically, a given option either takes an argument or it doesn't. Lots of
+    people want an "optional option arguments" feature, meaning that some options
+    will take an argument if they see it, and won't if they don't.  This is
+-   somewhat controversial, because it makes parsing ambiguous: if ``"-a"`` takes
+-   an optional argument and ``"-b"`` is another option entirely, how do we
+-   interpret ``"-ab"``?  Because of this ambiguity, :mod:`optparse` does not
++   somewhat controversial, because it makes parsing ambiguous: if ``-a`` takes
++   an optional argument and ``-b`` is another option entirely, how do we
++   interpret ``-ab``?  Because of this ambiguity, :mod:`optparse` does not
+    support this feature.
+ 
+ positional argument
+@@ -174,9 +174,9 @@
+ 
+    prog -v --report /tmp/report.txt foo bar
+ 
+-``"-v"`` and ``"--report"`` are both options.  Assuming that :option:`--report`
+-takes one argument, ``"/tmp/report.txt"`` is an option argument.  ``"foo"`` and
+-``"bar"`` are positional arguments.
++``-v`` and ``--report`` are both options.  Assuming that ``--report``
++takes one argument, ``/tmp/report.txt`` is an option argument.  ``foo`` and
++``bar`` are positional arguments.
+ 
+ 
+ .. _optparse-what-options-for:
+@@ -261,7 +261,7 @@
+    parser.add_option(opt_str, ...,
+                      attr=value, ...)
+ 
+-Each option has one or more option strings, such as ``"-f"`` or ``"--file"``,
++Each option has one or more option strings, such as ``-f`` or ``--file``,
+ and several option attributes that tell :mod:`optparse` what to expect and what
+ to do when it encounters that option on the command line.
+ 
+@@ -290,7 +290,7 @@
+ :meth:`parse_args` returns two values:
+ 
+ * ``options``, an object containing values for all of your options---e.g. if
+-  ``"--file"`` takes a single string argument, then ``options.file`` will be the
++  ``--file`` takes a single string argument, then ``options.file`` will be the
+   filename supplied by the user, or ``None`` if the user did not supply that
+   option
+ 
+@@ -336,8 +336,8 @@
+    args = ["-f", "foo.txt"]
+    (options, args) = parser.parse_args(args)
+ 
+-When :mod:`optparse` sees the option string ``"-f"``, it consumes the next
+-argument, ``"foo.txt"``, and stores it in ``options.filename``.  So, after this
++When :mod:`optparse` sees the option string ``-f``, it consumes the next
++argument, ``foo.txt``, and stores it in ``options.filename``.  So, after this
+ call to :meth:`parse_args`, ``options.filename`` is ``"foo.txt"``.
+ 
+ Some other option types supported by :mod:`optparse` are ``int`` and ``float``.
+@@ -349,13 +349,13 @@
+ Also, there's no explicit action, since the default is ``store``.
+ 
+ Let's parse another fake command-line.  This time, we'll jam the option argument
+-right up against the option: since ``"-n42"`` (one argument) is equivalent to
+-``"-n 42"`` (two arguments), the code ::
++right up against the option: since ``-n42`` (one argument) is equivalent to
++``-n 42`` (two arguments), the code ::
+ 
+    (options, args) = parser.parse_args(["-n42"])
+    print options.num
+ 
+-will print ``"42"``.
++will print ``42``.
+ 
+ If you don't specify a type, :mod:`optparse` assumes ``string``.  Combined with
+ the fact that the default action is ``store``, that means our first example can
+@@ -365,9 +365,9 @@
+ 
+ If you don't supply a destination, :mod:`optparse` figures out a sensible
+ default from the option strings: if the first long option string is
+-``"--foo-bar"``, then the default destination is ``foo_bar``.  If there are no
++``--foo-bar``, then the default destination is ``foo_bar``.  If there are no
+ long option strings, :mod:`optparse` looks at the first short option string: the
+-default destination for ``"-f"`` is ``f``.
++default destination for ``-f`` is ``f``.
+ 
+ :mod:`optparse` also includes built-in ``long`` and ``complex`` types.  Adding
+ types is covered in section :ref:`optparse-extending-optparse`.
+@@ -381,7 +381,7 @@
+ Flag options---set a variable to true or false when a particular option is seen
+ ---are quite common.  :mod:`optparse` supports them with two separate actions,
+ ``store_true`` and ``store_false``.  For example, you might have a ``verbose``
+-flag that is turned on with ``"-v"`` and off with ``"-q"``::
++flag that is turned on with ``-v`` and off with ``-q``::
+ 
+    parser.add_option("-v", action="store_true", dest="verbose")
+    parser.add_option("-q", action="store_false", dest="verbose")
+@@ -390,8 +390,8 @@
+ OK.  (It just means you have to be a bit careful when setting default values---
+ see below.)
+ 
+-When :mod:`optparse` encounters ``"-v"`` on the command line, it sets
+-``options.verbose`` to ``True``; when it encounters ``"-q"``,
++When :mod:`optparse` encounters ``-v`` on the command line, it sets
++``options.verbose`` to ``True``; when it encounters ``-q``,
+ ``options.verbose`` is set to ``False``.
+ 
+ 
+@@ -431,7 +431,7 @@
+ command line is parsed.
+ 
+ First, consider the verbose/quiet example.  If we want :mod:`optparse` to set
+-``verbose`` to ``True`` unless ``"-q"`` is seen, then we can do this::
++``verbose`` to ``True`` unless ``-q`` is seen, then we can do this::
+ 
+    parser.add_option("-v", action="store_true", dest="verbose", default=True)
+    parser.add_option("-q", action="store_false", dest="verbose")
+@@ -489,7 +489,7 @@
+                      help="interaction mode: novice, intermediate, "
+                           "or expert [default: %default]")
+ 
+-If :mod:`optparse` encounters either ``"-h"`` or ``"--help"`` on the
++If :mod:`optparse` encounters either ``-h`` or ``--help`` on the
+ command-line, or if you just call :meth:`parser.print_help`, it prints the
+ following to standard output:
+ 
+@@ -516,7 +516,7 @@
+ 
+      usage = "usage: %prog [options] arg1 arg2"
+ 
+-  :mod:`optparse` expands ``"%prog"`` in the usage string to the name of the
++  :mod:`optparse` expands ``%prog`` in the usage string to the name of the
+   current program, i.e. ``os.path.basename(sys.argv[0])``.  The expanded string
+   is then printed before the detailed option help.
+ 
+@@ -534,17 +534,17 @@
+      -m MODE, --mode=MODE
+ 
+   Here, "MODE" is called the meta-variable: it stands for the argument that the
+-  user is expected to supply to :option:`-m`/:option:`--mode`.  By default,
++  user is expected to supply to ``-m``/``--mode``.  By default,
+   :mod:`optparse` converts the destination variable name to uppercase and uses
+   that for the meta-variable.  Sometimes, that's not what you want---for
+-  example, the :option:`--filename` option explicitly sets ``metavar="FILE"``,
++  example, the ``--filename`` option explicitly sets ``metavar="FILE"``,
+   resulting in this automatically-generated option description::
+ 
+      -f FILE, --filename=FILE
+ 
+   This is important for more than just saving space, though: the manually
+-  written help text uses the meta-variable "FILE" to clue the user in that
+-  there's a connection between the semi-formal syntax "-f FILE" and the informal
++  written help text uses the meta-variable ``FILE`` to clue the user in that
++  there's a connection between the semi-formal syntax ``-f FILE`` and the informal
+   semantic description "write output to FILE". This is a simple but effective
+   way to make your help text a lot clearer and more useful for end users.
+ 
+@@ -597,11 +597,11 @@
+ 
+    parser = OptionParser(usage="%prog [-f] [-q]", version="%prog 1.0")
+ 
+-``"%prog"`` is expanded just like it is in ``usage``.  Apart from that,
++``%prog`` is expanded just like it is in ``usage``.  Apart from that,
+ ``version`` can contain anything you like.  When you supply it, :mod:`optparse`
+-automatically adds a ``"--version"`` option to your parser. If it encounters
++automatically adds a ``--version`` option to your parser. If it encounters
+ this option on the command line, it expands your ``version`` string (by
+-replacing ``"%prog"``), prints it to stdout, and exits.
++replacing ``%prog``), prints it to stdout, and exits.
+ 
+ For example, if your script is called ``/usr/bin/foo``::
+ 
+@@ -614,7 +614,7 @@
+ 
+    Print the version message for the current program (``self.version``) to
+    *file* (default stdout).  As with :meth:`print_usage`, any occurrence
+-   of ``"%prog"`` in ``self.version`` is replaced with the name of the current
++   of ``%prog`` in ``self.version`` is replaced with the name of the current
+    program.  Does nothing if ``self.version`` is empty or undefined.
+ 
+ .. method:: OptionParser.get_version()
+@@ -637,9 +637,9 @@
+ 
+ Handling user errors is much more important, since they are guaranteed to happen
+ no matter how stable your code is.  :mod:`optparse` can automatically detect
+-some user errors, such as bad option arguments (passing ``"-n 4x"`` where
+-:option:`-n` takes an integer argument), missing arguments (``"-n"`` at the end
+-of the command line, where :option:`-n` takes an argument of any type).  Also,
++some user errors, such as bad option arguments (passing ``-n 4x`` where
++``-n`` takes an integer argument), missing arguments (``-n`` at the end
++of the command line, where ``-n`` takes an argument of any type).  Also,
+ you can call :func:`OptionParser.error` to signal an application-defined error
+ condition::
+ 
+@@ -652,7 +652,7 @@
+ program's usage message and an error message to standard error and exits with
+ error status 2.
+ 
+-Consider the first example above, where the user passes ``"4x"`` to an option
++Consider the first example above, where the user passes ``4x`` to an option
+ that takes an integer::
+ 
+    $ /usr/bin/foo -n 4x
+@@ -745,8 +745,8 @@
+    ``version`` (default: ``None``)
+       A version string to print when the user supplies a version option. If you
+       supply a true value for ``version``, :mod:`optparse` automatically adds a
+-      version option with the single option string ``"--version"``.  The
+-      substring ``"%prog"`` is expanded the same as for ``usage``.
++      version option with the single option string ``--version``.  The
++      substring ``%prog`` is expanded the same as for ``usage``.
+ 
+    ``conflict_handler`` (default: ``"error"``)
+       Specifies what to do when options with conflicting option strings are
+@@ -765,11 +765,11 @@
+       IndentedHelpFormatter and TitledHelpFormatter.
+ 
+    ``add_help_option`` (default: ``True``)
+-      If true, :mod:`optparse` will add a help option (with option strings ``"-h"``
+-      and ``"--help"``) to the parser.
++      If true, :mod:`optparse` will add a help option (with option strings ``-h``
++      and ``--help``) to the parser.
+ 
+    ``prog``
+-      The string to use when expanding ``"%prog"`` in ``usage`` and ``version``
++      The string to use when expanding ``%prog`` in ``usage`` and ``version``
+       instead of ``os.path.basename(sys.argv[0])``.
+ 
+    ``epilog`` (default: ``None``)
+@@ -813,7 +813,7 @@
+ ^^^^^^^^^^^^^^^^
+ 
+ Each Option instance represents a set of synonymous command-line option strings,
+-e.g. :option:`-f` and :option:`--file`.  You can specify any number of short or
++e.g. ``-f`` and ``--file``.  You can specify any number of short or
+ long option strings, but you must specify at least one overall option string.
+ 
+ The canonical way to create an :class:`Option` instance is with the
+@@ -976,7 +976,7 @@
+ .. attribute:: Option.help
+ 
+    Help text to print for this option when listing all available options after
+-   the user supplies a :attr:`~Option.help` option (such as ``"--help"``).  If
++   the user supplies a :attr:`~Option.help` option (such as ``--help``).  If
+    no help text is supplied, the option will be listed without help text.  To
+    hide this option, use the special value :data:`optparse.SUPPRESS_HELP`.
+ 
+@@ -1014,9 +1014,9 @@
+   If :attr:`~Option.type` is not supplied, it defaults to ``"string"``.
+ 
+   If :attr:`~Option.dest` is not supplied, :mod:`optparse` derives a destination
+-  from the first long option string (e.g., ``"--foo-bar"`` implies
++  from the first long option string (e.g., ``--foo-bar`` implies
+   ``foo_bar``). If there are no long option strings, :mod:`optparse` derives a
+-  destination from the first short option string (e.g., ``"-f"`` implies ``f``).
++  destination from the first short option string (e.g., ``-f`` implies ``f``).
+ 
+   Example::
+ 
+@@ -1047,7 +1047,7 @@
+      parser.add_option("--noisy",
+                        action="store_const", const=2, dest="verbose")
+ 
+-  If ``"--noisy"`` is seen, :mod:`optparse` will set  ::
++  If ``--noisy`` is seen, :mod:`optparse` will set  ::
+ 
+      options.verbose = 2
+ 
+@@ -1082,13 +1082,13 @@
+ 
+      parser.add_option("-t", "--tracks", action="append", type="int")
+ 
+-  If ``"-t3"`` is seen on the command-line, :mod:`optparse` does the equivalent
++  If ``-t3`` is seen on the command-line, :mod:`optparse` does the equivalent
+   of::
+ 
+      options.tracks = []
+      options.tracks.append(int("3"))
+ 
+-  If, a little later on, ``"--tracks=4"`` is seen, it does::
++  If, a little later on, ``--tracks=4`` is seen, it does::
+ 
+      options.tracks.append(int("4"))
+ 
+@@ -1110,13 +1110,13 @@
+ 
+      parser.add_option("-v", action="count", dest="verbosity")
+ 
+-  The first time ``"-v"`` is seen on the command line, :mod:`optparse` does the
++  The first time ``-v`` is seen on the command line, :mod:`optparse` does the
+   equivalent of::
+ 
+      options.verbosity = 0
+      options.verbosity += 1
+ 
+-  Every subsequent occurrence of ``"-v"`` results in  ::
++  Every subsequent occurrence of ``-v`` results in  ::
+ 
+      options.verbosity += 1
+ 
+@@ -1159,7 +1159,7 @@
+                        help="Input file to read data from")
+      parser.add_option("--secret", help=SUPPRESS_HELP)
+ 
+-  If :mod:`optparse` sees either ``"-h"`` or ``"--help"`` on the command line,
++  If :mod:`optparse` sees either ``-h`` or ``--help`` on the command line,
+   it will print something like the following help message to stdout (assuming
+   ``sys.argv[0]`` is ``"foo.py"``):
+ 
+@@ -1273,8 +1273,8 @@
+ 
+ .. method:: OptionParser.disable_interspersed_args()
+ 
+-   Set parsing to stop on the first non-option.  For example, if ``"-a"`` and
+-   ``"-b"`` are both simple options that take no arguments, :mod:`optparse`
++   Set parsing to stop on the first non-option.  For example, if ``-a`` and
++   ``-b`` are both simple options that take no arguments, :mod:`optparse`
+    normally accepts this syntax::
+ 
+       prog -a arg1 -b arg2
+@@ -1304,7 +1304,7 @@
+ .. method:: OptionParser.has_option(opt_str)
+ 
+    Return true if the OptionParser has an option with option string *opt_str*
+-   (e.g., ``"-q"`` or ``"--verbose"``).
++   (e.g., ``-q`` or ``--verbose``).
+ 
+ .. method:: OptionParser.remove_option(opt_str)
+ 
+@@ -1357,9 +1357,9 @@
+    parser.add_option("-n", "--noisy", ..., help="be noisy")
+ 
+ At this point, :mod:`optparse` detects that a previously-added option is already
+-using the ``"-n"`` option string.  Since ``conflict_handler`` is ``"resolve"``,
+-it resolves the situation by removing ``"-n"`` from the earlier option's list of
+-option strings.  Now ``"--dry-run"`` is the only way for the user to activate
++using the ``-n`` option string.  Since ``conflict_handler`` is ``"resolve"``,
++it resolves the situation by removing ``-n`` from the earlier option's list of
++option strings.  Now ``--dry-run`` is the only way for the user to activate
+ that option.  If the user asks for help, the help message will reflect that::
+ 
+    options:
+@@ -1375,7 +1375,7 @@
+ 
+    parser.add_option("--dry-run", ..., help="new dry-run option")
+ 
+-At this point, the original :option:`-n/--dry-run` option is no longer
++At this point, the original ``-n``/``--dry-run`` option is no longer
+ accessible, so :mod:`optparse` removes it, leaving this help text::
+ 
+    options:
+@@ -1413,7 +1413,7 @@
+ .. method:: OptionParser.print_usage(file=None)
+ 
+    Print the usage message for the current program (``self.usage``) to *file*
+-   (default stdout).  Any occurrence of the string ``"%prog"`` in ``self.usage``
++   (default stdout).  Any occurrence of the string ``%prog`` in ``self.usage``
+    is replaced with the name of the current program.  Does nothing if
+    ``self.usage`` is empty or not defined.
+ 
+@@ -1477,9 +1477,9 @@
+ 
+ ``callback`` is a function (or other callable object), so you must have already
+ defined ``my_callback()`` when you create this callback option. In this simple
+-case, :mod:`optparse` doesn't even know if :option:`-c` takes any arguments,
++case, :mod:`optparse` doesn't even know if ``-c`` takes any arguments,
+ which usually means that the option takes no arguments---the mere presence of
+-:option:`-c` on the command-line is all it needs to know.  In some
++``-c`` on the command-line is all it needs to know.  In some
+ circumstances, though, you might want your callback to consume an arbitrary
+ number of command-line arguments.  This is where writing callbacks gets tricky;
+ it's covered later in this section.
+@@ -1532,8 +1532,8 @@
+ ``opt_str``
+    is the option string seen on the command-line that's triggering the callback.
+    (If an abbreviated long option was used, ``opt_str`` will be the full,
+-   canonical option string---e.g. if the user puts ``"--foo"`` on the
+-   command-line as an abbreviation for ``"--foobar"``, then ``opt_str`` will be
++   canonical option string---e.g. if the user puts ``--foo`` on the
++   command-line as an abbreviation for ``--foobar``, then ``opt_str`` will be
+    ``"--foobar"``.)
+ 
+ ``value``
+@@ -1608,8 +1608,8 @@
+ Callback example 2: check option order
+ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
+ 
+-Here's a slightly more interesting example: record the fact that ``"-a"`` is
+-seen, but blow up if it comes after ``"-b"`` in the command-line.  ::
++Here's a slightly more interesting example: record the fact that ``-a`` is
++seen, but blow up if it comes after ``-b`` in the command-line.  ::
+ 
+    def check_order(option, opt_str, value, parser):
+        if parser.values.b:
+@@ -1626,7 +1626,7 @@
+ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
+ 
+ If you want to re-use this callback for several similar options (set a flag, but
+-blow up if ``"-b"`` has already been seen), it needs a bit of work: the error
++blow up if ``-b`` has already been seen), it needs a bit of work: the error
+ message and the flag that it sets must be generalized.  ::
+ 
+    def check_order(option, opt_str, value, parser):
+@@ -1696,15 +1696,15 @@
+ built-in capabilities for it.  And you have to deal with certain intricacies of
+ conventional Unix command-line parsing that :mod:`optparse` normally handles for
+ you.  In particular, callbacks should implement the conventional rules for bare
+-``"--"`` and ``"-"`` arguments:
++``--`` and ``-`` arguments:
+ 
+-* either ``"--"`` or ``"-"`` can be option arguments
++* either ``--`` or ``-`` can be option arguments
+ 
+-* bare ``"--"`` (if not the argument to some option): halt command-line
+-  processing and discard the ``"--"``
++* bare ``--`` (if not the argument to some option): halt command-line
++  processing and discard the ``--``
+ 
+-* bare ``"-"`` (if not the argument to some option): halt command-line
+-  processing but keep the ``"-"`` (append it to ``parser.largs``)
++* bare ``-`` (if not the argument to some option): halt command-line
++  processing but keep the ``-`` (append it to ``parser.largs``)
+ 
+ If you want an option that takes a variable number of arguments, there are
+ several subtle, tricky issues to worry about.  The exact implementation you
+@@ -1775,7 +1775,7 @@
+       def check_mytype(option, opt, value)
+ 
+    where ``option`` is an :class:`Option` instance, ``opt`` is an option string
+-   (e.g., ``"-f"``), and ``value`` is the string from the command line that must
++   (e.g., ``-f``), and ``value`` is the string from the command line that must
+    be checked and converted to your desired type.  ``check_mytype()`` should
+    return an object of the hypothetical type ``mytype``.  The value returned by
+    a type-checking function will wind up in the OptionValues instance returned
+@@ -1887,7 +1887,7 @@
+ ``"append"`` action, but instead of taking a single value from the command-line
+ and appending it to an existing list, ``"extend"`` will take multiple values in
+ a single comma-delimited string, and extend an existing list with them.  That
+-is, if ``"--names"`` is an ``"extend"`` option of type ``"string"``, the command
++is, if ``--names`` is an ``"extend"`` option of type ``"string"``, the command
+ line ::
+ 
+    --names=foo,bar --names blah --names ding,dong
+--- a/Doc/library/imaplib.rst
++++ b/Doc/library/imaplib.rst
+@@ -84,9 +84,9 @@
+ 
+ .. function:: Internaldate2tuple(datestr)
+ 
+-   Converts an IMAP4 INTERNALDATE string to Coordinated Universal Time. Returns a
+-   :mod:`time` module tuple.
+-
++   Parse an IMAP4 ``INTERNALDATE`` string and return corresponding local
++   time.  The return value is a :class:`time.struct_time` instance or
++   None if the string has wrong format.
+ 
+ .. function:: Int2AP(num)
+ 
+@@ -101,9 +101,13 @@
+ 
+ .. function:: Time2Internaldate(date_time)
+ 
+-   Converts a :mod:`time` module tuple to an IMAP4 ``INTERNALDATE`` representation.
+-   Returns a string in the form: ``"DD-Mmm-YYYY HH:MM:SS +HHMM"`` (including
+-   double-quotes).
++   Convert *date_time* to an IMAP4 ``INTERNALDATE`` representation.  The
++   return value is a string in the form: ``"DD-Mmm-YYYY HH:MM:SS
++   +HHMM"`` (including double-quotes).  The *date_time* argument can be a
++   number (int or float) represening seconds since epoch (as returned
++   by :func:`time.time`), a 9-tuple representing local time (as returned by
++   :func:`time.localtime`), or a double-quoted string.  In the last case, it
++   is assumed to already be in the correct format.
+ 
+ Note that IMAP4 message numbers change as the mailbox changes; in particular,
+ after an ``EXPUNGE`` command performs deletions the remaining messages are
+@@ -303,9 +307,10 @@
+ 
+ .. method:: IMAP4.open(host, port)
+ 
+-   Opens socket to *port* at *host*. The connection objects established by this
++   Opens socket to *port* at *host*.  This method is implicitly called by
++   the :class:`IMAP4` constructor.  The connection objects established by this
+    method will be used in the ``read``, ``readline``, ``send``, and ``shutdown``
+-   methods. You may override this method.
++   methods.  You may override this method.
+ 
+ 
+ .. method:: IMAP4.partial(message_num, message_part, start, length)
+@@ -401,7 +406,8 @@
+ 
+ .. method:: IMAP4.shutdown()
+ 
+-   Close connection established in ``open``. You may override this method.
++   Close connection established in ``open``.  This method is implicitly
++   called by :meth:`IMAP4.logout`.  You may override this method.
+ 
+ 
+ .. method:: IMAP4.socket()
+--- a/Doc/library/pkgutil.rst
++++ b/Doc/library/pkgutil.rst
+@@ -80,8 +80,8 @@
+    newly created by a path hook.
+ 
+    If there is no importer, a wrapper around the basic import machinery is
+-   returned.  This wrapper is never inserted into the importer cache (None is
+-   inserted instead).
++   returned.  This wrapper is never inserted into the importer cache (``None``
++   is inserted instead).
+ 
+    The cache (or part of it) can be cleared manually if a rescan of
+    :data:`sys.path_hooks` is necessary.
+--- a/Doc/library/codecs.rst
++++ b/Doc/library/codecs.rst
+@@ -760,7 +760,7 @@
+ 
+ Unicode strings are stored internally as sequences of codepoints (to be precise
+ as :ctype:`Py_UNICODE` arrays). Depending on the way Python is compiled (either
+-via :option:`--enable-unicode=ucs2` or :option:`--enable-unicode=ucs4`, with the
++via ``--enable-unicode=ucs2`` or ``--enable-unicode=ucs4``, with the
+ former being the default) :ctype:`Py_UNICODE` is either a 16-bit or 32-bit data
+ type. Once a Unicode object is used outside of CPU and memory, CPU endianness
+ and how these arrays are stored as bytes become an issue.  Transforming a
+--- a/Doc/library/ssl.rst
++++ b/Doc/library/ssl.rst
+@@ -1,8 +1,8 @@
+-:mod:`ssl` --- SSL wrapper for socket objects
+-=============================================
++:mod:`ssl` --- TLS/SSL wrapper for socket objects
++=================================================
+ 
+ .. module:: ssl
+-   :synopsis: SSL wrapper for socket objects
++   :synopsis: TLS/SSL wrapper for socket objects
+ 
+ .. moduleauthor:: Bill Janssen <bill.janssen@gmail.com>
+ 
+@@ -582,13 +582,17 @@
+ for it::
+ 
+    while True:
+-      newsocket, fromaddr = bindsocket.accept()
+-      connstream = ssl.wrap_socket(newsocket,
+-                                   server_side=True,
+-                                   certfile="mycertfile",
+-                                   keyfile="mykeyfile",
+-                                   ssl_version=ssl.PROTOCOL_TLSv1)
+-      deal_with_client(connstream)
++       newsocket, fromaddr = bindsocket.accept()
++       connstream = ssl.wrap_socket(newsocket,
++                                    server_side=True,
++                                    certfile="mycertfile",
++                                    keyfile="mykeyfile",
++                                    ssl_version=ssl.PROTOCOL_TLSv1)
++       try:
++           deal_with_client(connstream)
++       finally:
++           connstream.shutdown(socket.SHUT_RDWR)
++           connstream.close()
+ 
+ Then you'd read data from the ``connstream`` and do something with it till you
+ are finished with the client (or the client is finished with you)::
+@@ -604,7 +608,6 @@
+             break
+          data = connstream.read()
+       # finished with client
+-      connstream.close()
+ 
+ And go back to listening for new client connections.
+ 
+--- a/Doc/library/zipfile.rst
++++ b/Doc/library/zipfile.rst
+@@ -123,9 +123,10 @@
+    and :program:`unzip` commands on Unix (the InfoZIP utilities) don't support
+    these extensions.
+ 
+-   If the file is created with mode ``'a'`` or ``'w'`` and then
+-   :meth:`close`\ d without adding any files to the archive, the appropriate
+-   ZIP structures for an empty archive will be written to the file.
++   .. versionchanged:: 2.7.1
++      If the file is created with mode ``'a'`` or ``'w'`` and then
++      :meth:`close`\ d without adding any files to the archive, the appropriate
++      ZIP structures for an empty archive will be written to the file.
+ 
+    ZipFile is also a context manager and therefore supports the
+    :keyword:`with` statement.  In the example, *myzip* is closed after the
+@@ -302,7 +303,7 @@
+ 
+    .. note::
+ 
+-      When passing a :class:`ZipInfo` instance as the *zinfo_or_acrname* parameter,
++      When passing a :class:`ZipInfo` instance as the *zinfo_or_arcname* parameter,
+       the compression method used will be that specified in the *compress_type*
+       member of the given :class:`ZipInfo` instance.  By default, the
+       :class:`ZipInfo` constructor sets this member to :const:`ZIP_STORED`.
+--- a/Doc/library/msilib.rst
++++ b/Doc/library/msilib.rst
+@@ -353,7 +353,7 @@
+ -----------------
+ 
+ 
+-.. class:: Directory(database, cab, basedir, physical,  logical, default, component, [componentflags])
++.. class:: Directory(database, cab, basedir, physical,  logical, default, [componentflags])
+ 
+    Create a new directory in the Directory table. There is a current component at
+    each point in time for the directory, which is either explicitly created through
+--- a/Doc/library/stdtypes.rst
++++ b/Doc/library/stdtypes.rst
+@@ -360,10 +360,10 @@
+    See :ref:`built-in-funcs` for a full description.
+ 
+ (4)
+-   Complex floor division operator, modulo operator, and :func:`divmod`.
+-
+    .. deprecated:: 2.3
+-      Instead convert to float using :func:`abs` if appropriate.
++      The floor division operator, the modulo operator, and the :func:`divmod`
++      function are no longer defined for complex numbers.  Instead, convert to
++      a floating point number using the :func:`abs` function if appropriate.
+ 
+ (5)
+    Also referred to as integer division.  The resultant value is a whole integer,
+--- a/Doc/library/parser.rst
++++ b/Doc/library/parser.rst
+@@ -273,7 +273,7 @@
+    will only need to be aware of the simple string values.
+ 
+ Note that the functions :func:`compilest`, :func:`expr`, and :func:`suite` may
+-raise exceptions which are normally thrown by the parsing and compilation
++raise exceptions which are normally raised by the parsing and compilation
+ process.  These include the built in exceptions :exc:`MemoryError`,
+ :exc:`OverflowError`, :exc:`SyntaxError`, and :exc:`SystemError`.  In these
+ cases, these exceptions carry all the meaning normally associated with them.
+--- a/Doc/library/collections.rst
++++ b/Doc/library/collections.rst
+@@ -27,10 +27,9 @@
+ :class:`defaultdict`    dict subclass that calls a factory function to supply missing values  .. versionadded:: 2.5
+ =====================   ====================================================================  ===========================
+ 
+-In addition to containers, the collections module provides some ABCs
+-(abstract base classes) that can be used to test whether a class
+-provides a particular interface, for example, whether it is hashable or
+-a mapping.
++In addition to the concrete container classes, the collections module provides
++:ref:`abstract-base-classes` that can be used to test whether a class provides a
++particular interface, for example, whether it is hashable or a mapping.
+ 
+ .. seealso::
+ 
+@@ -854,6 +853,8 @@
+             OrderedDict.__setitem__(self, key, value)
+ 
+ 
++.. _abstract-base-classes:
++
+ ABCs - abstract base classes
+ ----------------------------
+ 
+--- a/Doc/library/os.rst
++++ b/Doc/library/os.rst
+@@ -674,7 +674,7 @@
+ 
+ .. function:: fstat(fd)
+ 
+-   Return status for file descriptor *fd*, like :func:`stat`.
++   Return status for file descriptor *fd*, like :func:`~os.stat`.
+ 
+    Availability: Unix, Windows.
+ 
+@@ -1114,9 +1114,10 @@
+ 
+ .. function:: lstat(path)
+ 
+-   Like :func:`stat`, but do not follow symbolic links.  This is an alias for
+-   :func:`stat` on platforms that do not support symbolic links, such as
+-   Windows.
++   Perform the equivalent of an :cfunc:`lstat` system call on the given path.
++   Similar to :func:`~os.stat`, but does not follow symbolic links.  On
++   platforms that do not support symbolic links, this is an alias for
++   :func:`~os.stat`.
+ 
+ 
+ .. function:: mkfifo(path[, mode])
+@@ -1191,7 +1192,7 @@
+       single: UNC paths; and os.makedirs()
+ 
+    Recursive directory creation function.  Like :func:`mkdir`, but makes all
+-   intermediate-level directories needed to contain the leaf directory.  Throws an
++   intermediate-level directories needed to contain the leaf directory.  Raises an
+    :exc:`error` exception if the leaf directory already exists or cannot be
+    created.  The default *mode* is ``0777`` (octal).  On some systems, *mode* is
+    ignored. Where it is used, the current umask value is first masked out.
+@@ -1314,23 +1315,23 @@
+ 
+ .. function:: stat(path)
+ 
+-   Perform a :cfunc:`stat` system call on the given path.  The return value is an
+-   object whose attributes correspond to the members of the :ctype:`stat`
+-   structure, namely: :attr:`st_mode` (protection bits), :attr:`st_ino` (inode
+-   number), :attr:`st_dev` (device), :attr:`st_nlink` (number of hard links),
+-   :attr:`st_uid` (user id of owner), :attr:`st_gid` (group id of owner),
+-   :attr:`st_size` (size of file, in bytes), :attr:`st_atime` (time of most recent
+-   access), :attr:`st_mtime` (time of most recent content modification),
+-   :attr:`st_ctime` (platform dependent; time of most recent metadata change on
+-   Unix, or the time of creation on Windows)::
++   Perform the equivalent of a :cfunc:`stat` system call on the given path.
++   (This function follows symlinks; to stat a symlink use :func:`lstat`.)
+ 
+-      >>> import os
+-      >>> statinfo = os.stat('somefile.txt')
+-      >>> statinfo
+-      (33188, 422511L, 769L, 1, 1032, 100, 926L, 1105022698,1105022732, 1105022732)
+-      >>> statinfo.st_size
+-      926L
+-      >>>
++   The return value is an object whose attributes correspond to the members
++   of the :ctype:`stat` structure, namely:
++
++   * :attr:`st_mode` - protection bits,
++   * :attr:`st_ino` - inode number,
++   * :attr:`st_dev` - device,
++   * :attr:`st_nlink` - number of hard links,
++   * :attr:`st_uid` - user id of owner,
++   * :attr:`st_gid` - group id of owner,
++   * :attr:`st_size` - size of file, in bytes,
++   * :attr:`st_atime` - time of most recent access,
++   * :attr:`st_mtime` - time of most recent content modification,
++   * :attr:`st_ctime` - platform dependent; time of most recent metadata change on
++     Unix, or the time of creation on Windows)
+ 
+    .. versionchanged:: 2.3
+       If :func:`stat_float_times` returns ``True``, the time values are floats, measuring
+@@ -1339,39 +1340,60 @@
+       discussion.
+ 
+    On some Unix systems (such as Linux), the following attributes may also be
+-   available: :attr:`st_blocks` (number of blocks allocated for file),
+-   :attr:`st_blksize` (filesystem blocksize), :attr:`st_rdev` (type of device if an
+-   inode device). :attr:`st_flags` (user defined flags for file).
++   available:
++
++   * :attr:`st_blocks` - number of blocks allocated for file
++   * :attr:`st_blksize` - filesystem blocksize
++   * :attr:`st_rdev` - type of device if an inode device
++   * :attr:`st_flags` - user defined flags for file
+ 
+    On other Unix systems (such as FreeBSD), the following attributes may be
+-   available (but may be only filled out if root tries to use them): :attr:`st_gen`
+-   (file generation number), :attr:`st_birthtime` (time of file creation).
++   available (but may be only filled out if root tries to use them):
++
++   * :attr:`st_gen` - file generation number
++   * :attr:`st_birthtime` - time of file creation
+ 
+    On Mac OS systems, the following attributes may also be available:
+-   :attr:`st_rsize`, :attr:`st_creator`, :attr:`st_type`.
+ 
+-   On RISCOS systems, the following attributes are also available: :attr:`st_ftype`
+-   (file type), :attr:`st_attrs` (attributes), :attr:`st_obtype` (object type).
++   * :attr:`st_rsize`
++   * :attr:`st_creator`
++   * :attr:`st_type`
++
++   On RISCOS systems, the following attributes are also available:
++
++   * :attr:`st_ftype` (file type)
++   * :attr:`st_attrs` (attributes)
++   * :attr:`st_obtype` (object type).
+ 
+-   .. index:: module: stat
++   .. note::
++
++      The exact meaning and resolution of the :attr:`st_atime`, :attr:`st_mtime`, and
++      :attr:`st_ctime` members depends on the operating system and the file system.
++      For example, on Windows systems using the FAT or FAT32 file systems,
++      :attr:`st_mtime` has 2-second resolution, and :attr:`st_atime` has only 1-day
++      resolution.  See your operating system documentation for details.
+ 
+-   For backward compatibility, the return value of :func:`stat` is also accessible
++   For backward compatibility, the return value of :func:`~os.stat` is also accessible
+    as a tuple of at least 10 integers giving the most important (and portable)
+    members of the :ctype:`stat` structure, in the order :attr:`st_mode`,
+    :attr:`st_ino`, :attr:`st_dev`, :attr:`st_nlink`, :attr:`st_uid`,
+    :attr:`st_gid`, :attr:`st_size`, :attr:`st_atime`, :attr:`st_mtime`,
+    :attr:`st_ctime`. More items may be added at the end by some implementations.
++
++   .. index:: module: stat
++
+    The standard module :mod:`stat` defines functions and constants that are useful
+    for extracting information from a :ctype:`stat` structure. (On Windows, some
+    items are filled with dummy values.)
+ 
+-   .. note::
++   Example::
+ 
+-      The exact meaning and resolution of the :attr:`st_atime`, :attr:`st_mtime`, and
+-      :attr:`st_ctime` members depends on the operating system and the file system.
+-      For example, on Windows systems using the FAT or FAT32 file systems,
+-      :attr:`st_mtime` has 2-second resolution, and :attr:`st_atime` has only 1-day
+-      resolution.  See your operating system documentation for details.
++      >>> import os
++      >>> statinfo = os.stat('somefile.txt')
++      >>> statinfo
++      (33188, 422511, 769, 1, 1032, 100, 926, 1105022698,1105022732, 1105022732)
++      >>> statinfo.st_size
++      926
+ 
+    Availability: Unix, Windows.
+ 
+@@ -1385,7 +1407,7 @@
+ .. function:: stat_float_times([newvalue])
+ 
+    Determine whether :class:`stat_result` represents time stamps as float objects.
+-   If *newvalue* is ``True``, future calls to :func:`stat` return floats, if it is
++   If *newvalue* is ``True``, future calls to :func:`~os.stat` return floats, if it is
+    ``False``, future calls return ints. If *newvalue* is omitted, return the
+    current setting.
+ 
+@@ -1505,8 +1527,8 @@
+    respectively. Whether a directory can be given for *path* depends on whether
+    the operating system implements directories as files (for example, Windows
+    does not).  Note that the exact times you set here may not be returned by a
+-   subsequent :func:`stat` call, depending on the resolution with which your
+-   operating system records access and modification times; see :func:`stat`.
++   subsequent :func:`~os.stat` call, depending on the resolution with which your
++   operating system records access and modification times; see :func:`~os.stat`.
+ 
+    .. versionchanged:: 2.0
+       Added support for ``None`` for *times*.
+--- a/Doc/library/platform.rst
++++ b/Doc/library/platform.rst
+@@ -38,6 +38,16 @@
+    and then only if the executable points to the Python interpreter.  Reasonable
+    defaults are used when the above needs are not met.
+ 
++   .. note::
++
++      On Mac OS X (and perhaps other platforms), executable files may be
++      universal files containing multiple architectures.
++
++      To get at the "64-bitness" of the current interpreter, it is more
++      reliable to query the :attr:`sys.maxsize` attribute::
++
++         is_64bits = sys.maxsize > 2**32
++
+ 
+ .. function:: machine()
+ 
+@@ -194,7 +204,7 @@
+ 
+    .. note::
+ 
+-      Note: this function works best with Mark Hammond's
++      This function works best with Mark Hammond's
+       :mod:`win32all` package installed, but also on Python 2.3 and
+       later (support for this was added in Python 2.6). It obviously
+       only runs on Win32 compatible platforms.
+--- a/Doc/library/grp.rst
++++ b/Doc/library/grp.rst
+@@ -31,7 +31,9 @@
+ The gid is an integer, name and password are strings, and the member list is a
+ list of strings. (Note that most users are not explicitly listed as members of
+ the group they are in according to the password database.  Check both databases
+-to get complete membership information.)
++to get complete membership information.  Also note that a ``gr_name`` that
++starts with a ``+`` or ``-`` is likely to be a YP/NIS reference and may not be
++accessible via :func:`getgrnam` or :func:`getgrgid`.)
+ 
+ It defines the following items:
+ 
+--- a/Doc/library/pyexpat.rst
++++ b/Doc/library/pyexpat.rst
+@@ -157,6 +157,13 @@
+    :attr:`ordered_attributes`, :attr:`returns_unicode` and
+    :attr:`specified_attributes` set to the values of this parser.
+ 
++.. method:: xmlparser.SetParamEntityParsing(flag)
++
++   Control parsing of parameter entities (including the external DTD subset).
++   Possible *flag* values are :const:`XML_PARAM_ENTITY_PARSING_NEVER`,
++   :const:`XML_PARAM_ENTITY_PARSING_UNLESS_STANDALONE` and
++   :const:`XML_PARAM_ENTITY_PARSING_ALWAYS`.  Return true if setting the flag
++   was successful.
+ 
+ .. method:: xmlparser.UseForeignDTD([flag])
+ 
+--- a/Doc/library/argparse.rst
++++ b/Doc/library/argparse.rst
+@@ -120,7 +120,9 @@
+ ArgumentParser objects
+ ----------------------
+ 
+-.. class:: ArgumentParser([description], [epilog], [prog], [usage], [add_help], [argument_default], [parents], [prefix_chars], [conflict_handler], [formatter_class])
++.. class:: ArgumentParser([description], [epilog], [prog], [usage], [add_help], \
++                          [argument_default], [parents], [prefix_chars], \
++                          [conflict_handler], [formatter_class])
+ 
+    Create a new :class:`ArgumentParser` object.  Each parameter has its own more
+    detailed description below, but in short they are:
+@@ -563,7 +565,9 @@
+ The add_argument() method
+ -------------------------
+ 
+-.. method:: ArgumentParser.add_argument(name or flags..., [action], [nargs], [const], [default], [type], [choices], [required], [help], [metavar], [dest])
++.. method:: ArgumentParser.add_argument(name or flags..., [action], [nargs], \
++                           [const], [default], [type], [choices], [required], \
++                           [help], [metavar], [dest])
+ 
+    Define how a single command line argument should be parsed.  Each parameter
+    has its own more detailed description below, but in short they are:
+@@ -777,9 +781,11 @@
+      >>> parser.add_argument('outfile', nargs='?', type=argparse.FileType('w'),
+      ...                     default=sys.stdout)
+      >>> parser.parse_args(['input.txt', 'output.txt'])
+-     Namespace(infile=<open file 'input.txt', mode 'r' at 0x...>, outfile=<open file 'output.txt', mode 'w' at 0x...>)
++     Namespace(infile=<open file 'input.txt', mode 'r' at 0x...>,
++               outfile=<open file 'output.txt', mode 'w' at 0x...>)
+      >>> parser.parse_args([])
+-     Namespace(infile=<open file '<stdin>', mode 'r' at 0x...>, outfile=<open file '<stdout>', mode 'w' at 0x...>)
++     Namespace(infile=<open file '<stdin>', mode 'r' at 0x...>,
++               outfile=<open file '<stdout>', mode 'w' at 0x...>)
+ 
+ * ``'*'``.  All command-line args present are gathered into a list.  Note that
+   it generally doesn't make much sense to have more than one positional argument
+@@ -1648,14 +1654,14 @@
+ .. method:: ArgumentParser.print_usage(file=None)
+ 
+    Print a brief description of how the :class:`ArgumentParser` should be
+-   invoked on the command line.  If *file* is ``None``, :data:`sys.stderr` is
++   invoked on the command line.  If *file* is ``None``, :data:`sys.stdout` is
+    assumed.
+ 
+ .. method:: ArgumentParser.print_help(file=None)
+ 
+    Print a help message, including the program usage and information about the
+    arguments registered with the :class:`ArgumentParser`.  If *file* is
+-   ``None``, :data:`sys.stderr` is assumed.
++   ``None``, :data:`sys.stdout` is assumed.
+ 
+ There are also variants of these methods that simply return a string instead of
+ printing it:
+@@ -1744,11 +1750,12 @@
+ 
+ A partial upgrade path from optparse to argparse:
+ 
+-* Replace all ``add_option()`` calls with :meth:`ArgumentParser.add_argument` calls.
++* Replace all ``add_option()`` calls with :meth:`ArgumentParser.add_argument`
++  calls.
+ 
+ * Replace ``options, args = parser.parse_args()`` with ``args =
+-  parser.parse_args()`` and add additional :meth:`ArgumentParser.add_argument` calls for the
+-  positional arguments.
++  parser.parse_args()`` and add additional :meth:`ArgumentParser.add_argument`
++  calls for the positional arguments.
+ 
+ * Replace callback actions and the ``callback_*`` keyword arguments with
+   ``type`` or ``action`` arguments.
+--- a/Doc/library/pydoc.rst
++++ b/Doc/library/pydoc.rst
+@@ -43,25 +43,25 @@
+    executed on that occasion.  Use an ``if __name__ == '__main__':`` guard to
+    only execute code when a file is invoked as a script and not just imported.
+ 
+-Specifying a :option:`-w` flag before the argument will cause HTML documentation
++Specifying a ``-w`` flag before the argument will cause HTML documentation
+ to be written out to a file in the current directory, instead of displaying text
+ on the console.
+ 
+-Specifying a :option:`-k` flag before the argument will search the synopsis
++Specifying a ``-k`` flag before the argument will search the synopsis
+ lines of all available modules for the keyword given as the argument, again in a
+ manner similar to the Unix :program:`man` command.  The synopsis line of a
+ module is the first line of its documentation string.
+ 
+ You can also use :program:`pydoc` to start an HTTP server on the local machine
+-that will serve documentation to visiting Web browsers. :program:`pydoc`
+-:option:`-p 1234` will start a HTTP server on port 1234, allowing you to browse
++that will serve documentation to visiting Web browsers. :program:`pydoc -p 1234`
++will start a HTTP server on port 1234, allowing you to browse
+ the documentation at ``http://localhost:1234/`` in your preferred Web browser.
+-:program:`pydoc` :option:`-g` will start the server and additionally bring up a
++:program:`pydoc -g` will start the server and additionally bring up a
+ small :mod:`Tkinter`\ -based graphical interface to help you search for
+ documentation pages.
+ 
+ When :program:`pydoc` generates documentation, it uses the current environment
+-and path to locate modules.  Thus, invoking :program:`pydoc` :option:`spam`
++and path to locate modules.  Thus, invoking :program:`pydoc spam`
+ documents precisely the version of the module you would get if you started the
+ Python interpreter and typed ``import spam``.
+ 
+--- a/Doc/library/email.header.rst
++++ b/Doc/library/email.header.rst
+@@ -65,7 +65,7 @@
+    character set is used both as *s*'s initial charset and as the default for
+    subsequent :meth:`append` calls.
+ 
+-   The maximum line length can be specified explicit via *maxlinelen*.  For
++   The maximum line length can be specified explicitly via *maxlinelen*.  For
+    splitting the first line to a shorter value (to account for the field header
+    which isn't included in *s*, e.g. :mailheader:`Subject`) pass in the name of the
+    field in *header_name*.  The default *maxlinelen* is 76, and the default value
+--- a/Doc/library/ast.rst
++++ b/Doc/library/ast.rst
+@@ -127,9 +127,9 @@
+ Apart from the node classes, :mod:`ast` module defines these utility functions
+ and classes for traversing abstract syntax trees:
+ 
+-.. function:: parse(expr, filename='<unknown>', mode='exec')
++.. function:: parse(source, filename='<unknown>', mode='exec')
+ 
+-   Parse an expression into an AST node.  Equivalent to ``compile(expr,
++   Parse the source into an AST node.  Equivalent to ``compile(source,
+    filename, mode, ast.PyCF_ONLY_AST)``.
+ 
+ 
+@@ -187,9 +187,9 @@
+ 
+ .. function:: walk(node)
+ 
+-   Recursively yield all child nodes of *node*, in no specified order.  This is
+-   useful if you only want to modify nodes in place and don't care about the
+-   context.
++   Recursively yield all descendant nodes in the tree starting at *node*
++   (including *node* itself), in no specified order.  This is useful if you only
++   want to modify nodes in place and don't care about the context.
+ 
+ 
+ .. class:: NodeVisitor()
+--- a/Doc/library/io.rst
++++ b/Doc/library/io.rst
+@@ -371,9 +371,9 @@
+ 
+    .. method:: readinto(b)
+ 
+-      Read up to len(b) bytes into bytearray *b* and return the number ofbytes
+-      read.  If the object is in non-blocking mode and no bytes are available,
+-      ``None`` is returned.
++      Read up to len(b) bytes into bytearray *b* and return the number
++      of bytes read.  If the object is in non-blocking mode and no
++      bytes are available, ``None`` is returned.
+ 
+    .. method:: write(b)
+ 
+@@ -515,8 +515,8 @@
+ Buffered Streams
+ ----------------
+ 
+-In many situations, buffered I/O streams will provide higher performance
+-(bandwidth and latency) than raw I/O streams.  Their API is also more usable.
++Buffered I/O streams provide a higher-level interface to an I/O device
++than raw I/O does.
+ 
+ .. class:: BytesIO([initial_bytes])
+ 
+@@ -776,8 +776,74 @@
+       # .getvalue() will now raise an exception.
+       output.close()
+ 
++
+ .. class:: IncrementalNewlineDecoder
+ 
+    A helper codec that decodes newlines for universal newlines mode.  It
+    inherits :class:`codecs.IncrementalDecoder`.
+ 
++
++Advanced topics
++---------------
++
++Here we will discuss several advanced topics pertaining to the concrete
++I/O implementations described above.
++
++Performance
++^^^^^^^^^^^
++
++Binary I/O
++""""""""""
++
++By reading and writing only large chunks of data even when the user asks
++for a single byte, buffered I/O is designed to hide any inefficiency in
++calling and executing the operating system's unbuffered I/O routines.  The
++gain will vary very much depending on the OS and the kind of I/O which is
++performed (for example, on some contemporary OSes such as Linux, unbuffered
++disk I/O can be as fast as buffered I/O).  The bottom line, however, is
++that buffered I/O will offer you predictable performance regardless of the
++platform and the backing device.  Therefore, it is most always preferable to
++use buffered I/O rather than unbuffered I/O.
++
++Text I/O
++""""""""
++
++Text I/O over a binary storage (such as a file) is significantly slower than
++binary I/O over the same storage, because it implies conversions from
++unicode to binary data using a character codec.  This can become noticeable
++if you handle huge amounts of text data (for example very large log files).
++Also, :meth:`TextIOWrapper.tell` and :meth:`TextIOWrapper.seek` are both
++quite slow due to the reconstruction algorithm used.
++
++:class:`StringIO`, however, is a native in-memory unicode container and will
++exhibit similar speed to :class:`BytesIO`.
++
++Multi-threading
++^^^^^^^^^^^^^^^
++
++:class:`FileIO` objects are thread-safe to the extent that the operating
++system calls (such as ``read(2)`` under Unix) they are wrapping are thread-safe
++too.
++
++Binary buffered objects (instances of :class:`BufferedReader`,
++:class:`BufferedWriter`, :class:`BufferedRandom` and :class:`BufferedRWPair`)
++protect their internal structures using a lock; it is therefore safe to call
++them from multiple threads at once.
++
++:class:`TextIOWrapper` objects are not thread-safe.
++
++Reentrancy
++^^^^^^^^^^
++
++Binary buffered objects (instances of :class:`BufferedReader`,
++:class:`BufferedWriter`, :class:`BufferedRandom` and :class:`BufferedRWPair`)
++are not reentrant.  While reentrant calls will not happen in normal situations,
++they can arise if you are doing I/O in a :mod:`signal` handler.  If it is
++attempted to enter a buffered object again while already being accessed
++*from the same thread*, then a :exc:`RuntimeError` is raised.
++
++The above implicitly extends to text files, since the :func:`open()`
++function will wrap a buffered object inside a :class:`TextIOWrapper`.  This
++includes standard streams and therefore affects the built-in function
++:func:`print()` as well.
++
+--- a/Doc/library/sets.rst
++++ b/Doc/library/sets.rst
+@@ -14,7 +14,7 @@
+ .. versionadded:: 2.3
+ 
+ .. deprecated:: 2.6
+-   The built-in ``set``/``frozenset`` types replace this module.
++   The built-in :class:`set`/:class:`frozenset` types replace this module.
+ 
+ The :mod:`sets` module provides classes for constructing and manipulating
+ unordered collections of unique elements.  Common uses include membership
+--- a/Doc/library/compileall.rst
++++ b/Doc/library/compileall.rst
+@@ -1,4 +1,3 @@
+-
+ :mod:`compileall` --- Byte-compile Python libraries
+ ===================================================
+ 
+@@ -7,41 +6,117 @@
+ 
+ 
+ This module provides some utility functions to support installing Python
+-libraries.  These functions compile Python source files in a directory tree,
+-allowing users without permission to write to the libraries to take advantage of
+-cached byte-code files.
+-
+-This module may also be used as a script (using the :option:`-m` Python flag) to
+-compile Python sources.  Directories to recursively traverse (passing
+-:option:`-l` stops the recursive behavior) for sources are listed on the command
+-line.  If no arguments are given, the invocation is equivalent to ``-l
+-sys.path``.  Printing lists of the files compiled can be disabled with the
+-:option:`-q` flag.  In addition, the :option:`-x` option takes a regular
+-expression argument.  All files that match the expression will be skipped.
++libraries.  These functions compile Python source files in a directory tree.
++This module can be used to create the cached byte-code files at library
++installation time, which makes them available for use even by users who don't
++have write permission to the library directories.
++
++
++Command-line use
++----------------
++
++This module can work as a script (using :program:`python -m compileall`) to
++compile Python sources.
++
++.. program:: compileall
++
++.. cmdoption:: [directory|file]...
++
++   Positional arguments are files to compile or directories that contain
++   source files, traversed recursively.  If no argument is given, behave as if
++   the command line was ``-l <directories from sys.path>``.
++
++.. cmdoption:: -l
++
++   Do not recurse into subdirectories, only compile source code files directly
++   contained in the named or implied directories.
++
++.. cmdoption:: -f
++
++   Force rebuild even if timestamps are up-to-date.
++
++.. cmdoption:: -q
++
++   Do not print the list of files compiled, print only error messages.
++
++.. cmdoption:: -d destdir
++
++   Directory prepended to the path to each file being compiled.  This will
++   appear in compilation time tracebacks, and is also compiled in to the
++   byte-code file, where it will be used in tracebacks and other messages in
++   cases where the source file does not exist at the time the byte-code file is
++   executed.
++
++.. cmdoption:: -x regex
+ 
++   regex is used to search the full path to each file considered for
++   compilation, and if the regex produces a match, the file is skipped.
+ 
+-.. function:: compile_dir(dir[, maxlevels[, ddir[, force[,  rx[, quiet]]]]])
++.. cmdoption:: -i list
++
++   Read the file ``list`` and add each line that it contains to the list of
++   files and directories to compile.  If ``list`` is ``-``, read lines from
++   ``stdin``.
++
++.. versionchanged:: 2.7
++   Added the ``-i``  option.
++
++
++Public functions
++----------------
++
++.. function:: compile_dir(dir[, maxlevels[, ddir[, force[, rx[, quiet]]]]])
+ 
+    Recursively descend the directory tree named by *dir*, compiling all :file:`.py`
+-   files along the way.  The *maxlevels* parameter is used to limit the depth of
+-   the recursion; it defaults to ``10``.  If *ddir* is given, it is used as the
+-   base path from  which the filenames used in error messages will be generated.
++   files along the way.
++
++   The *maxlevels* parameter is used to limit the depth of the recursion; it
++   defaults to ``10``.
++
++   If *ddir* is given, it is prepended to the path to each file being compiled
++   for use in compilation time tracebacks, and is also compiled in to the
++   byte-code file, where it will be used in tracebacks and other messages in
++   cases where the source file does not exist at the time the byte-code file is
++   executed.
++
+    If *force* is true, modules are re-compiled even if the timestamps are up to
+    date.
+ 
+-   If *rx* is given, it specifies a regular expression of file names to exclude
+-   from the search; that expression is searched for in the full path.
++   If *rx* is given, its search method is called on the complete path to each
++   file considered for compilation, and if it returns a true value, the file
++   is skipped.
+ 
+-   If *quiet* is true, nothing is printed to the standard output in normal
+-   operation.
++   If *quiet* is true, nothing is printed to the standard output unless errors
++   occur.
++
++
++.. function:: compile_file(fullname[, ddir[, force[, rx[, quiet]]]])
++
++   Compile the file with path *fullname*.
++
++   If *ddir* is given, it is prepended to the path to the file being compiled
++   for use in compilation time tracebacks, and is also compiled in to the
++   byte-code file, where it will be used in tracebacks and other messages in
++   cases where the source file does not exist at the time the byte-code file is
++   executed.
++
++   If *rx* is given, its search method is passed the full path name to the
++   file being compiled, and if it returns a true value, the file is not
++   compiled and ``True`` is returned.
++
++   If *quiet* is true, nothing is printed to the standard output unless errors
++   occur.
++
++   .. versionadded:: 2.7
+ 
+ 
+ .. function:: compile_path([skip_curdir[, maxlevels[, force]]])
+ 
+    Byte-compile all the :file:`.py` files found along ``sys.path``. If
+-   *skip_curdir* is true (the default), the current directory is not included in
+-   the search.  The *maxlevels* and *force* parameters default to ``0`` and are
+-   passed to the :func:`compile_dir` function.
++   *skip_curdir* is true (the default), the current directory is not included
++   in the search.  All other parameters are passed to the :func:`compile_dir`
++   function.  Note that unlike the other compile functions, ``maxlevels``
++   defaults to ``0``.
+ 
+ To force a recompile of all the :file:`.py` files in the :file:`Lib/`
+ subdirectory and all its subdirectories::
+@@ -59,4 +134,3 @@
+ 
+    Module :mod:`py_compile`
+       Byte-compile a single source file.
+-
+--- a/Doc/library/exceptions.rst
++++ b/Doc/library/exceptions.rst
+@@ -26,7 +26,7 @@
+ 
+ The built-in exceptions listed below can be generated by the interpreter or
+ built-in functions.  Except where mentioned, they have an "associated value"
+-indicating the detailed cause of the error. This may be a string or a tuple
++indicating the detailed cause of the error.  This may be a string or a tuple
+ containing several items of information (e.g., an error code and a string
+ explaining the code). The associated value is the second argument to the
+ :keyword:`raise` statement.  If the exception class is derived from the standard
+@@ -46,18 +46,35 @@
+ 
+ The following exceptions are only used as base classes for other exceptions.
+ 
+-
+ .. exception:: BaseException
+ 
+    The base class for all built-in exceptions.  It is not meant to be directly
+-   inherited by user-defined classes (for that use :exc:`Exception`).  If
++   inherited by user-defined classes (for that, use :exc:`Exception`).  If
+    :func:`str` or :func:`unicode` is called on an instance of this class, the
+-   representation of the argument(s) to the instance are returned or the empty
+-   string when there were no arguments.  All arguments are  stored in :attr:`args`
+-   as a tuple.
++   representation of the argument(s) to the instance are returned, or the empty
++   string when there were no arguments.
+ 
+    .. versionadded:: 2.5
+ 
++   .. attribute:: args
++
++      The tuple of arguments given to the exception constructor.  Some built-in
++      exceptions (like :exc:`IOError`) expect a certain number of arguments and
++      assign a special meaning to the elements of this tuple, while others are
++      usually called only with a single string giving an error message.
++
++   .. method:: with_traceback(tb)
++
++      This method sets *tb* as the new traceback for the exception and returns
++      the exception object.  It is usually used in exception handling code like
++      this::
++
++         try:
++             ...
++         except SomeException:
++             tb = sys.exc_info()[2]
++             raise OtherException(...).with_traceback(tb)
++
+ 
+ .. exception:: Exception
+ 
+@@ -141,7 +158,7 @@
+ 
+    Raised when a floating point operation fails.  This exception is always defined,
+    but can only be raised when Python is configured with the
+-   :option:`--with-fpectl` option, or the :const:`WANT_SIGFPE_HANDLER` symbol is
++   ``--with-fpectl`` option, or the :const:`WANT_SIGFPE_HANDLER` symbol is
+    defined in the :file:`pyconfig.h` file.
+ 
+ 
+--- a/Doc/library/webbrowser.rst
++++ b/Doc/library/webbrowser.rst
+@@ -32,8 +32,8 @@
+ 
+ The script :program:`webbrowser` can be used as a command-line interface for the
+ module. It accepts an URL as the argument. It accepts the following optional
+-parameters: :option:`-n` opens the URL in a new browser window, if possible;
+-:option:`-t` opens the URL in a new browser page ("tab"). The options are,
++parameters: ``-n`` opens the URL in a new browser window, if possible;
++``-t`` opens the URL in a new browser page ("tab"). The options are,
+ naturally, mutually exclusive.
+ 
+ The following exception is defined:
+@@ -68,7 +68,6 @@
+    Open *url* in a new window of the default browser, if possible, otherwise, open
+    *url* in the only browser window.
+ 
+-
+ .. function:: open_new_tab(url)
+ 
+    Open *url* in a new page ("tab") of the default browser, if possible, otherwise
+--- a/Doc/library/getopt.rst
++++ b/Doc/library/getopt.rst
+@@ -41,14 +41,14 @@
+       non-GNU Unix systems work.
+ 
+    *long_options*, if specified, must be a list of strings with the names of the
+-   long options which should be supported.  The leading ``'-``\ ``-'``
++   long options which should be supported.  The leading ``'--'``
+    characters should not be included in the option name.  Long options which
+    require an argument should be followed by an equal sign (``'='``).  Optional
+    arguments are not supported.  To accept only long options, *options* should
+    be an empty string.  Long options on the command line can be recognized so
+    long as they provide a prefix of the option name that matches exactly one of
+    the accepted options.  For example, if *long_options* is ``['foo', 'frob']``,
+-   the option :option:`--fo` will match as :option:`--foo`, but :option:`--f`
++   the option ``--fo`` will match as ``--foo``, but ``--f``
+    will not match uniquely, so :exc:`GetoptError` will be raised.
+ 
+    The return value consists of two elements: the first is a list of ``(option,
+@@ -56,7 +56,7 @@
+    option list was stripped (this is a trailing slice of *args*).  Each
+    option-and-value pair returned has the option as its first element, prefixed
+    with a hyphen for short options (e.g., ``'-x'``) or two hyphens for long
+-   options (e.g., ``'-``\ ``-long-option'``), and the option argument as its
++   options (e.g., ``'--long-option'``), and the option argument as its
+    second element, or an empty string if the option has no argument.  The
+    options occur in the list in the same order in which they were found, thus
+    allowing multiple occurrences.  Long and short options may be mixed.
+@@ -69,7 +69,7 @@
+    intermixed. The :func:`getopt` function stops processing options as soon as a
+    non-option argument is encountered.
+ 
+-   If the first character of the option string is '+', or if the environment
++   If the first character of the option string is ``'+'``, or if the environment
+    variable :envvar:`POSIXLY_CORRECT` is set, then option processing stops as
+    soon as a non-option argument is encountered.
+ 
+--- a/Doc/library/email.message.rst
++++ b/Doc/library/email.message.rst
+@@ -266,7 +266,12 @@
+       taken as the parameter name, with underscores converted to dashes (since
+       dashes are illegal in Python identifiers).  Normally, the parameter will
+       be added as ``key="value"`` unless the value is ``None``, in which case
+-      only the key will be added.
++      only the key will be added.  If the value contains non-ASCII characters,
++      it must be specified as a three tuple in the format
++      ``(CHARSET, LANGUAGE, VALUE)``, where ``CHARSET`` is a string naming the
++      charset to be used to encode the value, ``LANGUAGE`` can usually be set
++      to ``None`` or the empty string (see :RFC:`2231` for other possibilities),
++      and ``VALUE`` is the string value containing non-ASCII code points.
+ 
+       Here's an example::
+ 
+@@ -276,6 +281,15 @@
+ 
+          Content-Disposition: attachment; filename="bud.gif"
+ 
++      An example with with non-ASCII characters::
++
++         msg.add_header('Content-Disposition', 'attachment',
++                        filename=('iso-8859-1', '', 'Fuballer.ppt'))
++
++      Which produces ::
++
++         Content-Disposition: attachment; filename*="iso-8859-1''Fu%DFballer.ppt"
++
+ 
+    .. method:: replace_header(_name, _value)
+ 
+@@ -380,7 +394,7 @@
+       :rfc:`2231`, you can collapse the parameter value by calling
+       :func:`email.utils.collapse_rfc2231_value`, passing in the return value
+       from :meth:`get_param`.  This will return a suitably decoded Unicode
+-      string whn the value is a tuple, or the original string unquoted if it
++      string when the value is a tuple, or the original string unquoted if it
+       isn't.  For example::
+ 
+          rawparam = msg.get_param('foo')
+--- a/Doc/library/threading.rst
++++ b/Doc/library/threading.rst
+@@ -26,11 +26,22 @@
+    Starting with Python 2.5, several Thread methods raise :exc:`RuntimeError`
+    instead of :exc:`AssertionError` if called erroneously.
+ 
++.. impl-detail::
++
++   Due to the :term:`Global Interpreter Lock`, in CPython only one thread
++   can execute Python code at once (even though certain performance-oriented
++   libraries might overcome this limitation).
++   If you want your application to make better of use of the computational
++   resources of multi-core machines, you are advised to use
++   :mod:`multiprocessing`. However, threading is still an appropriate model
++   if you want to run multiple I/O-bound tasks simultaneously.
++
+ .. seealso::
+ 
+    Latest version of the `threading module Python source code
+    <http://svn.python.org/view/python/branches/release27-maint/Lib/threading.py?view=markup>`_
+ 
++
+ This module defines the following functions and objects:
+ 
+ .. function:: active_count()
+@@ -279,7 +290,7 @@
+       It must be called at most once per thread object.  It arranges for the
+       object's :meth:`run` method to be invoked in a separate thread of control.
+ 
+-      This method will raise a :exc:`RuntimeException` if called more than once
++      This method will raise a :exc:`RuntimeError` if called more than once
+       on the same thread object.
+ 
+    .. method:: run()
+@@ -388,7 +399,7 @@
+ All methods are executed atomically.
+ 
+ 
+-.. method:: Lock.acquire([blocking=1])
++.. method:: Lock.acquire([blocking])
+ 
+    Acquire a lock, blocking or non-blocking.
+ 
+@@ -644,9 +655,9 @@
+ ^^^^^^^^^^^^^^^^^^^^^^^^^^
+ 
+ Semaphores are often used to guard resources with limited capacity, for example,
+-a database server.  In any situation where the size of the resource size is
+-fixed, you should use a bounded semaphore.  Before spawning any worker threads,
+-your main thread would initialize the semaphore::
++a database server.  In any situation where the size of the resource is fixed,
++you should use a bounded semaphore.  Before spawning any worker threads, your
++main thread would initialize the semaphore::
+ 
+    maxconnections = 5
+    ...
+--- a/Doc/includes/tzinfo-examples.py
++++ b/Doc/includes/tzinfo-examples.py
+@@ -71,7 +71,7 @@
+     def _isdst(self, dt):
+         tt = (dt.year, dt.month, dt.day,
+               dt.hour, dt.minute, dt.second,
+-              dt.weekday(), 0, -1)
++              dt.weekday(), 0, 0)
+         stamp = _time.mktime(tt)
+         tt = _time.localtime(stamp)
+         return tt.tm_isdst > 0
+--- a/Doc/install/index.rst
++++ b/Doc/install/index.rst
+@@ -932,15 +932,34 @@
+ GNU C / Cygwin / MinGW
+ ^^^^^^^^^^^^^^^^^^^^^^
+ 
+-These instructions only apply if you're using a version of Python prior  to
+-2.4.1 with a MinGW prior to 3.0.0 (with binutils-2.13.90-20030111-1).
+-
+ This section describes the necessary steps to use Distutils with the GNU C/C++
+ compilers in their Cygwin and MinGW distributions. [#]_ For a Python interpreter
+ that was built with Cygwin, everything should work without any of these
+ following steps.
+ 
+-These compilers require some special libraries. This task is more complex than
++Not all extensions can be built with MinGW or Cygwin, but many can.  Extensions
++most likely to not work are those that use C++ or depend on Microsoft Visual C
++extensions.
++
++To let Distutils compile your extension with Cygwin you have to type::
++
++   python setup.py build --compiler=cygwin
++
++and for Cygwin in no-cygwin mode [#]_ or for MinGW type::
++
++   python setup.py build --compiler=mingw32
++
++If you want to use any of these options/compilers as default, you should
++consider writing it in your personal or system-wide configuration file for
++Distutils (see section :ref:`inst-config-files`.)
++
++Older Versions of Python and MinGW
++""""""""""""""""""""""""""""""""""
++The following instructions only apply if you're using a version of Python
++inferior to 2.4.1 with a MinGW inferior to 3.0.0 (with
++binutils-2.13.90-20030111-1).
++
++These compilers require some special libraries.  This task is more complex than
+ for Borland's C++, because there is no program to convert the library.  First
+ you have to create a list of symbols which the Python DLL exports. (You can find
+ a good program for this task at
+@@ -970,18 +989,6 @@
+ them too. The converted files have to reside in the same directories as the
+ normal libraries do.
+ 
+-To let Distutils compile your extension with Cygwin you now have to type ::
+-
+-   python setup.py build --compiler=cygwin
+-
+-and for Cygwin in no-cygwin mode [#]_ or for MinGW type::
+-
+-   python setup.py build --compiler=mingw32
+-
+-If you want to use any of these options/compilers as default, you should
+-consider to write it in your personal or system-wide configuration file for
+-Distutils (see section :ref:`inst-config-files`.)
+-
+ 
+ .. seealso::
+ 
+--- a/Doc/glossary.rst
++++ b/Doc/glossary.rst
+@@ -27,7 +27,7 @@
+       :ref:`2to3-reference`.
+ 
+    abstract base class
+-      Abstract Base Classes (abbreviated ABCs) complement :term:`duck-typing` by
++      :ref:`abstract-base-classes` complement :term:`duck-typing` by
+       providing a way to define interfaces when other techniques like
+       :func:`hasattr` would be clumsy. Python comes with many built-in ABCs for
+       data structures (in the :mod:`collections` module), numbers (in the
+@@ -106,9 +106,10 @@
+       See :pep:`343`.
+ 
+    CPython
+-      The canonical implementation of the Python programming language.  The
+-      term "CPython" is used in contexts when necessary to distinguish this
+-      implementation from others such as Jython or IronPython.
++      The canonical implementation of the Python programming language, as
++      distributed on `python.org <http://python.org>`_.  The term "CPython"
++      is used when necessary to distinguish this implementation from others
++      such as Jython or IronPython.
+ 
+    decorator
+       A function returning another function, usually applied as a function
+@@ -253,16 +254,25 @@
+       See :term:`global interpreter lock`.
+ 
+    global interpreter lock
+-      The lock used by Python threads to assure that only one thread
+-      executes in the :term:`CPython` :term:`virtual machine` at a time.
+-      This simplifies the CPython implementation by assuring that no two
+-      processes can access the same memory at the same time.  Locking the
+-      entire interpreter makes it easier for the interpreter to be
+-      multi-threaded, at the expense of much of the parallelism afforded by
+-      multi-processor machines.  Efforts have been made in the past to
+-      create a "free-threaded" interpreter (one which locks shared data at a
+-      much finer granularity), but so far none have been successful because
+-      performance suffered in the common single-processor case.
++      The mechanism used by the :term:`CPython` interpreter to assure that
++      only one thread executes Python :term:`bytecode` at a time.
++      This simplifies the CPython implementation by making the object model
++      (including critical built-in types such as :class:`dict`) implicitly
++      safe against concurrent access.  Locking the entire interpreter
++      makes it easier for the interpreter to be multi-threaded, at the
++      expense of much of the parallelism afforded by multi-processor
++      machines.
++
++      However, some extension modules, either standard or third-party,
++      are designed so as to release the GIL when doing computationally-intensive
++      tasks such as compression or hashing.  Also, the GIL is always released
++      when doing I/O.
++
++      Past efforts to create a "free-threaded" interpreter (one which locks
++      shared data at a much finer granularity) have not been successful
++      because performance suffered in the common single-processor case. It
++      is believed that overcoming this performance issue would make the
++      implementation much more complicated and therefore costlier to maintain.
+ 
+    hashable
+       An object is *hashable* if it has a hash value which never changes during
+@@ -432,9 +442,11 @@
+       :term:`finder`. See :pep:`302` for details.
+ 
+    mapping
+-      A container object (such as :class:`dict`) which supports arbitrary key
+-      lookups using the special method :meth:`__getitem__`.  Mappings also
+-      support :meth:`__len__`, :meth:`__iter__`, and :meth:`__contains__`.
++      A container object that supports arbitrary key lookups and implements the
++      methods specified in the :class:`Mapping` or :class:`MutableMapping`
++      :ref:`abstract base classes <abstract-base-classes>`. Examples include
++      :class:`dict`, :class:`collections.defaultdict`,
++      :class:`collections.OrderedDict` and :class:`collections.Counter`.
+ 
+    metaclass
+       The class of a class.  Class definitions create a class name, a class
+--- a/Lib/site.py
++++ b/Lib/site.py
+@@ -61,6 +61,7 @@
+ import sys
+ import os
+ import __builtin__
++import traceback
+ 
+ # Prefixes for site-packages; add additional prefixes like /usr/local here
+ PREFIXES = [sys.prefix, sys.exec_prefix]
+@@ -155,17 +156,26 @@
+     except IOError:
+         return
+     with f:
+-        for line in f:
++        for n, line in enumerate(f):
+             if line.startswith("#"):
+                 continue
+-            if line.startswith(("import ", "import\t")):
+-                exec line
+-                continue
+-            line = line.rstrip()
+-            dir, dircase = makepath(sitedir, line)
+-            if not dircase in known_paths and os.path.exists(dir):
+-                sys.path.append(dir)
+-                known_paths.add(dircase)
++            try:
++                if line.startswith(("import ", "import\t")):
++                    exec line
++                    continue
++                line = line.rstrip()
++                dir, dircase = makepath(sitedir, line)
++                if not dircase in known_paths and os.path.exists(dir):
++                    sys.path.append(dir)
++                    known_paths.add(dircase)
++            except Exception as err:
++                print >>sys.stderr, "Error processing line {:d} of {}:\n".format(
++                    n+1, fullname)
++                for record in traceback.format_exception(*sys.exc_info()):
++                    for line in record.splitlines():
++                        print >>sys.stderr, '  '+line
++                print >>sys.stderr, "\nRemainder of file ignored"
++                break
+     if reset:
+         known_paths = None
+     return known_paths
+--- a/Lib/symbol.py
++++ b/Lib/symbol.py
+@@ -82,20 +82,19 @@
+ sliceop = 325
+ exprlist = 326
+ testlist = 327
+-dictmaker = 328
+-dictorsetmaker = 329
+-classdef = 330
+-arglist = 331
+-argument = 332
+-list_iter = 333
+-list_for = 334
+-list_if = 335
+-comp_iter = 336
+-comp_for = 337
+-comp_if = 338
+-testlist1 = 339
+-encoding_decl = 340
+-yield_expr = 341
++dictorsetmaker = 328
++classdef = 329
++arglist = 330
++argument = 331
++list_iter = 332
++list_for = 333
++list_if = 334
++comp_iter = 335
++comp_for = 336
++comp_if = 337
++testlist1 = 338
++encoding_decl = 339
++yield_expr = 340
+ #--end constants--
+ 
+ sym_name = {}
+--- a/Lib/idlelib/Bindings.py
++++ b/Lib/idlelib/Bindings.py
+@@ -98,14 +98,6 @@
+     # menu
+     del menudefs[-1][1][0:2]
+ 
+-    menudefs.insert(0,
+-            ('application', [
+-                ('About IDLE', '<<about-idle>>'),
+-                None,
+-                ('_Preferences....', '<<open-config-dialog>>'),
+-            ]))
+-
+-
+ default_keydefs = idleConf.GetCurrentKeySet()
+ 
+ del sys
+--- a/Lib/idlelib/PyShell.py
++++ b/Lib/idlelib/PyShell.py
+@@ -1432,6 +1432,13 @@
+             shell.interp.prepend_syspath(script)
+             shell.interp.execfile(script)
+ 
++    # Check for problematic OS X Tk versions and print a warning message
++    # in the IDLE shell window; this is less intrusive than always opening
++    # a separate window.
++    tkversionwarning = macosxSupport.tkVersionWarning(root)
++    if tkversionwarning:
++        shell.interp.runcommand(''.join(("print('", tkversionwarning, "')")))
++
+     root.mainloop()
+     root.destroy()
+ 
+--- a/Lib/idlelib/config-keys.def
++++ b/Lib/idlelib/config-keys.def
+@@ -176,7 +176,7 @@
+ redo = <Shift-Command-Key-Z>
+ close-window = <Command-Key-w>
+ restart-shell = <Control-Key-F6>
+-save-window-as-file = <Command-Key-S>
++save-window-as-file = <Shift-Command-Key-S>
+ close-all-windows = <Command-Key-q>
+ view-restart = <Key-F6>
+ tabify-region = <Control-Key-5>
+@@ -208,7 +208,7 @@
+ open-module = <Command-Key-m>
+ find-selection = <Shift-Command-Key-F3>
+ python-context-help = <Shift-Key-F1>
+-save-copy-of-window-as-file = <Shift-Command-Key-s>
++save-copy-of-window-as-file = <Option-Command-Key-s>
+ open-window-from-file = <Command-Key-o>
+ python-docs = <Key-F1>
+ 
+--- a/Lib/idlelib/EditorWindow.py
++++ b/Lib/idlelib/EditorWindow.py
+@@ -136,6 +136,14 @@
+         if macosxSupport.runningAsOSXApp():
+             # Command-W on editorwindows doesn't work without this.
+             text.bind('<<close-window>>', self.close_event)
++            # Some OS X systems have only one mouse button,
++            # so use control-click for pulldown menus there.
++            #  (Note, AquaTk defines <2> as the right button if
++            #   present and the Tk Text widget already binds <2>.)
++            text.bind("<Control-Button-1>",self.right_menu_event)
++        else:
++            # Elsewhere, use right-click for pulldown menus.
++            text.bind("<3>",self.right_menu_event)
+         text.bind("<<cut>>", self.cut)
+         text.bind("<<copy>>", self.copy)
+         text.bind("<<paste>>", self.paste)
+@@ -154,7 +162,6 @@
+         text.bind("<<find-selection>>", self.find_selection_event)
+         text.bind("<<replace>>", self.replace_event)
+         text.bind("<<goto-line>>", self.goto_line_event)
+-        text.bind("<3>", self.right_menu_event)
+         text.bind("<<smart-backspace>>",self.smart_backspace_event)
+         text.bind("<<newline-and-indent>>",self.newline_and_indent_event)
+         text.bind("<<smart-indent>>",self.smart_indent_event)
+@@ -385,7 +392,7 @@
+             menudict[name] = menu = Menu(mbar, name=name)
+             mbar.add_cascade(label=label, menu=menu, underline=underline)
+ 
+-        if macosxSupport.runningAsOSXApp():
++        if macosxSupport.isCarbonAquaTk(self.root):
+             # Insert the application menu
+             menudict['application'] = menu = Menu(mbar, name='apple')
+             mbar.add_cascade(label='IDLE', menu=menu)
+@@ -445,7 +452,11 @@
+ 
+     def python_docs(self, event=None):
+         if sys.platform[:3] == 'win':
+-            os.startfile(self.help_url)
++            try:
++                os.startfile(self.help_url)
++            except WindowsError as why:
++                tkMessageBox.showerror(title='Document Start Failure',
++                    message=str(why), parent=self.text)
+         else:
+             webbrowser.open(self.help_url)
+         return "break"
+@@ -740,9 +751,13 @@
+         "Create a callback with the helpfile value frozen at definition time"
+         def display_extra_help(helpfile=helpfile):
+             if not helpfile.startswith(('www', 'http')):
+-                url = os.path.normpath(helpfile)
++                helpfile = os.path.normpath(helpfile)
+             if sys.platform[:3] == 'win':
+-                os.startfile(helpfile)
++                try:
++                    os.startfile(helpfile)
++                except WindowsError as why:
++                    tkMessageBox.showerror(title='Document Start Failure',
++                        message=str(why), parent=self.text)
+             else:
+                 webbrowser.open(helpfile)
+         return display_extra_help
+@@ -1526,7 +1541,12 @@
+ 
+ def get_accelerator(keydefs, eventname):
+     keylist = keydefs.get(eventname)
+-    if not keylist:
++    # issue10940: temporary workaround to prevent hang with OS X Cocoa Tk 8.5
++    # if not keylist:
++    if (not keylist) or (macosxSupport.runningAsOSXApp() and eventname in {
++                            "<<open-module>>",
++                            "<<goto-line>>",
++                            "<<change-indentwidth>>"}):
+         return ""
+     s = keylist[0]
+     s = re.sub(r"-[a-z]\b", lambda m: m.group().upper(), s)
+--- a/Lib/idlelib/FileList.py
++++ b/Lib/idlelib/FileList.py
+@@ -43,7 +43,7 @@
+     def new(self, filename=None):
+         return self.EditorWindow(self, filename)
+ 
+-    def close_all_callback(self, event):
++    def close_all_callback(self, *args, **kwds):
+         for edit in self.inversedict.keys():
+             reply = edit.close()
+             if reply == "cancel":
+--- a/Lib/idlelib/macosxSupport.py
++++ b/Lib/idlelib/macosxSupport.py
+@@ -4,6 +4,7 @@
+ """
+ import sys
+ import Tkinter
++from os import path
+ 
+ 
+ _appbundle = None
+@@ -19,6 +20,37 @@
+         _appbundle = (sys.platform == 'darwin' and '.app' in sys.executable)
+     return _appbundle
+ 
++_carbonaquatk = None
++
++def isCarbonAquaTk(root):
++    """
++    Returns True if IDLE is using a Carbon Aqua Tk (instead of the
++    newer Cocoa Aqua Tk).
++    """
++    global _carbonaquatk
++    if _carbonaquatk is None:
++        _carbonaquatk = (runningAsOSXApp() and
++                         'aqua' in root.tk.call('tk', 'windowingsystem') and
++                         'AppKit' not in root.tk.call('winfo', 'server', '.'))
++    return _carbonaquatk
++
++def tkVersionWarning(root):
++    """
++    Returns a string warning message if the Tk version in use appears to
++    be one known to cause problems with IDLE.  The Apple Cocoa-based Tk 8.5
++    that was shipped with Mac OS X 10.6.
++    """
++
++    if (runningAsOSXApp() and
++            ('AppKit' in root.tk.call('winfo', 'server', '.')) and
++            (root.tk.call('info', 'patchlevel') == '8.5.7') ):
++        return (r"WARNING: The version of Tcl/Tk (8.5.7) in use may"
++                r" be unstable.\n"
++                r"Visit http://www.python.org/download/mac/tcltk/"
++                r" for current information.")
++    else:
++        return False
++
+ def addOpenEventSupport(root, flist):
+     """
+     This ensures that the application will respont to open AppleEvents, which
+@@ -79,9 +111,6 @@
+         WindowList.add_windows_to_menu(menu)
+     WindowList.register_callback(postwindowsmenu)
+ 
+-    menudict['application'] = menu = Menu(menubar, name='apple')
+-    menubar.add_cascade(label='IDLE', menu=menu)
+-
+     def about_dialog(event=None):
+         from idlelib import aboutDialog
+         aboutDialog.AboutDialog(root, 'About IDLE')
+@@ -91,41 +120,45 @@
+         root.instance_dict = flist.inversedict
+         configDialog.ConfigDialog(root, 'Settings')
+ 
++    def help_dialog(event=None):
++        from idlelib import textView
++        fn = path.join(path.abspath(path.dirname(__file__)), 'help.txt')
++        textView.view_file(root, 'Help', fn)
+ 
+     root.bind('<<about-idle>>', about_dialog)
+     root.bind('<<open-config-dialog>>', config_dialog)
++    root.createcommand('::tk::mac::ShowPreferences', config_dialog)
+     if flist:
+         root.bind('<<close-all-windows>>', flist.close_all_callback)
+ 
+-
+-    ###check if Tk version >= 8.4.14; if so, use hard-coded showprefs binding
+-    tkversion = root.tk.eval('info patchlevel')
+-    # Note: we cannot check if the string tkversion >= '8.4.14', because
+-    # the string '8.4.7' is greater than the string '8.4.14'.
+-    if tuple(map(int, tkversion.split('.'))) >= (8, 4, 14):
+-        Bindings.menudefs[0] =  ('application', [
++        # The binding above doesn't reliably work on all versions of Tk
++        # on MacOSX. Adding command definition below does seem to do the
++        # right thing for now.
++        root.createcommand('exit', flist.close_all_callback)
++
++    if isCarbonAquaTk(root):
++        # for Carbon AquaTk, replace the default Tk apple menu
++        menudict['application'] = menu = Menu(menubar, name='apple')
++        menubar.add_cascade(label='IDLE', menu=menu)
++        Bindings.menudefs.insert(0,
++            ('application', [
+                 ('About IDLE', '<<about-idle>>'),
+-                None,
+-            ])
+-        root.createcommand('::tk::mac::ShowPreferences', config_dialog)
++                    None,
++                ]))
++        tkversion = root.tk.eval('info patchlevel')
++        if tuple(map(int, tkversion.split('.'))) < (8, 4, 14):
++            # for earlier AquaTk versions, supply a Preferences menu item
++            Bindings.menudefs[0][1].append(
++                    ('_Preferences....', '<<open-config-dialog>>'),
++                )
+     else:
+-        for mname, entrylist in Bindings.menudefs:
+-            menu = menudict.get(mname)
+-            if not menu:
+-                continue
+-            else:
+-                for entry in entrylist:
+-                    if not entry:
+-                        menu.add_separator()
+-                    else:
+-                        label, eventname = entry
+-                        underline, label = prepstr(label)
+-                        accelerator = get_accelerator(Bindings.default_keydefs,
+-                        eventname)
+-                        def command(text=root, eventname=eventname):
+-                            text.event_generate(eventname)
+-                        menu.add_command(label=label, underline=underline,
+-                        command=command, accelerator=accelerator)
++        # assume Cocoa AquaTk
++        # replace default About dialog with About IDLE one
++        root.createcommand('tkAboutDialog', about_dialog)
++        # replace default "Help" item in Help menu
++        root.createcommand('::tk::mac::ShowHelp', help_dialog)
++        # remove redundant "IDLE Help" from menu
++        del Bindings.menudefs[-1][1][0]
+ 
+ def setupApp(root, flist):
+     """
+--- a/Lib/wsgiref/util.py
++++ b/Lib/wsgiref/util.py
+@@ -64,7 +64,7 @@
+     """Return the full request URI, optionally including the query string"""
+     url = application_uri(environ)
+     from urllib import quote
+-    path_info = quote(environ.get('PATH_INFO',''))
++    path_info = quote(environ.get('PATH_INFO',''),safe='/;=,')
+     if not environ.get('SCRIPT_NAME'):
+         url += path_info[1:]
+     else:
+--- a/Lib/wsgiref/handlers.py
++++ b/Lib/wsgiref/handlers.py
+@@ -240,7 +240,9 @@
+     def finish_content(self):
+         """Ensure headers and content have both been sent"""
+         if not self.headers_sent:
+-            self.headers['Content-Length'] = "0"
++            # Only zero Content-Length if not set by the application (so
++            # that HEAD requests can be satisfied properly, see #3839)
++            self.headers.setdefault('Content-Length', "0")
+             self.send_headers()
+         else:
+             pass # XXX check if content-length was too short?
+--- a/Lib/unittest/test/test_suite.py
++++ b/Lib/unittest/test/test_suite.py
+@@ -353,11 +353,15 @@
+                 unittest.TestSuite.__call__(self, *args, **kw)
+ 
+         suite = MySuite()
++        result = unittest.TestResult()
+         wrapper = unittest.TestSuite()
+         wrapper.addTest(suite)
+-        wrapper(unittest.TestResult())
++        wrapper(result)
+         self.assertTrue(suite.called)
+ 
++        # reusing results should be permitted even if abominable
++        self.assertFalse(result._testRunEntered)
++
+ 
+ if __name__ == '__main__':
+     unittest.main()
+--- a/Lib/unittest/test/test_assertions.py
++++ b/Lib/unittest/test/test_assertions.py
+@@ -165,13 +165,13 @@
+ 
+     def testAssertTrue(self):
+         self.assertMessages('assertTrue', (False,),
+-                            ["^False is not True$", "^oops$", "^False is not True$",
+-                             "^False is not True : oops$"])
++                            ["^False is not true$", "^oops$", "^False is not true$",
++                             "^False is not true : oops$"])
+ 
+     def testAssertFalse(self):
+         self.assertMessages('assertFalse', (True,),
+-                            ["^True is not False$", "^oops$", "^True is not False$",
+-                             "^True is not False : oops$"])
++                            ["^True is not false$", "^oops$", "^True is not false$",
++                             "^True is not false : oops$"])
+ 
+     def testNotEqual(self):
+         self.assertMessages('assertNotEqual', (1, 1),
+--- a/Lib/unittest/test/test_case.py
++++ b/Lib/unittest/test/test_case.py
+@@ -711,6 +711,11 @@
+         self.assertRaises(self.failureException, self.assertItemsEqual,
+                           [1, {'b': 2}, None, True], [{'b': 2}, True, None])
+ 
++        # Same elements which don't reliably compare, in
++        # different order, see issue 10242
++        a = [{2,4}, {1,2}]
++        b = a[::-1]
++        self.assertItemsEqual(a, b)
+ 
+     def testAssertSetEqual(self):
+         set1 = set()
+@@ -999,6 +1004,58 @@
+         # This shouldn't blow up
+         deepcopy(test)
+ 
++    def testKeyboardInterrupt(self):
++        def _raise(self=None):
++            raise KeyboardInterrupt
++        def nothing(self):
++            pass
++
++        class Test1(unittest.TestCase):
++            test_something = _raise
++
++        class Test2(unittest.TestCase):
++            setUp = _raise
++            test_something = nothing
++
++        class Test3(unittest.TestCase):
++            test_something = nothing
++            tearDown = _raise
++
++        class Test4(unittest.TestCase):
++            def test_something(self):
++                self.addCleanup(_raise)
++
++        for klass in (Test1, Test2, Test3, Test4):
++            with self.assertRaises(KeyboardInterrupt):
++                klass('test_something').run()
++
++    def testSystemExit(self):
++        def _raise(self=None):
++            raise SystemExit
++        def nothing(self):
++            pass
++
++        class Test1(unittest.TestCase):
++            test_something = _raise
++
++        class Test2(unittest.TestCase):
++            setUp = _raise
++            test_something = nothing
++
++        class Test3(unittest.TestCase):
++            test_something = nothing
++            tearDown = _raise
++
++        class Test4(unittest.TestCase):
++            def test_something(self):
++                self.addCleanup(_raise)
++
++        for klass in (Test1, Test2, Test3, Test4):
++            result = unittest.TestResult()
++            klass('test_something').run(result)
++            self.assertEqual(len(result.errors), 1)
++            self.assertEqual(result.testsRun, 1)
++
+ 
+ if __name__ == '__main__':
+     unittest.main()
+--- a/Lib/unittest/suite.py
++++ b/Lib/unittest/suite.py
+@@ -107,6 +107,7 @@
+         if topLevel:
+             self._tearDownPreviousClass(None, result)
+             self._handleModuleTearDown(result)
++            result._testRunEntered = False
+         return result
+ 
+     def debug(self):
+--- a/Lib/unittest/case.py
++++ b/Lib/unittest/case.py
+@@ -1,5 +1,6 @@
+ """Test case implementation"""
+ 
++import collections
+ import sys
+ import functools
+ import difflib
+@@ -311,11 +312,15 @@
+                 self.setUp()
+             except SkipTest as e:
+                 self._addSkip(result, str(e))
+-            except Exception:
++            except KeyboardInterrupt:
++                raise
++            except:
+                 result.addError(self, sys.exc_info())
+             else:
+                 try:
+                     testMethod()
++                except KeyboardInterrupt:
++                    raise
+                 except self.failureException:
+                     result.addFailure(self, sys.exc_info())
+                 except _ExpectedFailure as e:
+@@ -336,14 +341,16 @@
+                         result.addFailure(self, sys.exc_info())
+                 except SkipTest as e:
+                     self._addSkip(result, str(e))
+-                except Exception:
++                except:
+                     result.addError(self, sys.exc_info())
+                 else:
+                     success = True
+ 
+                 try:
+                     self.tearDown()
+-                except Exception:
++                except KeyboardInterrupt:
++                    raise
++                except:
+                     result.addError(self, sys.exc_info())
+                     success = False
+ 
+@@ -367,7 +374,9 @@
+             function, args, kwargs = self._cleanups.pop(-1)
+             try:
+                 function(*args, **kwargs)
+-            except Exception:
++            except KeyboardInterrupt:
++                raise
++            except:
+                 ok = False
+                 result.addError(self, sys.exc_info())
+         return ok
+@@ -393,15 +402,15 @@
+         raise self.failureException(msg)
+ 
+     def assertFalse(self, expr, msg=None):
+-        "Fail the test if the expression is true."
++        """Check that the expression is false."""
+         if expr:
+-            msg = self._formatMessage(msg, "%s is not False" % safe_repr(expr))
++            msg = self._formatMessage(msg, "%s is not false" % safe_repr(expr))
+             raise self.failureException(msg)
+ 
+     def assertTrue(self, expr, msg=None):
+-        """Fail the test unless the expression is true."""
++        """Check that the expression is true."""
+         if not expr:
+-            msg = self._formatMessage(msg, "%s is not True" % safe_repr(expr))
++            msg = self._formatMessage(msg, "%s is not true" % safe_repr(expr))
+             raise self.failureException(msg)
+ 
+     def _formatMessage(self, msg, standardMsg):
+@@ -842,14 +851,12 @@
+         self.fail(self._formatMessage(msg, standardMsg))
+ 
+     def assertItemsEqual(self, expected_seq, actual_seq, msg=None):
+-        """An unordered sequence / set specific comparison. It asserts that
+-        expected_seq and actual_seq contain the same elements. It is
+-        the equivalent of::
++        """An unordered sequence specific comparison. It asserts that
++        actual_seq and expected_seq have the same element counts.
++        Equivalent to::
+ 
+-            self.assertEqual(sorted(expected_seq), sorted(actual_seq))
+-
+-        Raises with an error message listing which elements of expected_seq
+-        are missing from actual_seq and vice versa if any.
++            self.assertEqual(Counter(iter(actual_seq)),
++                             Counter(iter(expected_seq)))
+ 
+         Asserts that each element has the same count in both sequences.
+         Example:
+@@ -864,17 +871,18 @@
+                              "comparing unequal types"]:
+                     warnings.filterwarnings("ignore", _msg, DeprecationWarning)
+             try:
+-                expected = sorted(expected_seq)
+-                actual = sorted(actual_seq)
++                actual = collections.Counter(iter(actual_seq))
++                expected = collections.Counter(iter(expected_seq))
+             except TypeError:
+                 # Unsortable items (example: set(), complex(), ...)
+-                expected = list(expected_seq)
+                 actual = list(actual_seq)
+-                missing, unexpected = unorderable_list_difference(
+-                    expected, actual, ignore_duplicate=False
+-                )
++                expected = list(expected_seq)
++                missing, unexpected = unorderable_list_difference(expected, actual)
+             else:
+-                return self.assertSequenceEqual(expected, actual, msg=msg)
++                if actual == expected:
++                    return
++                missing = list(expected - actual)
++                unexpected = list(actual - expected)
+ 
+         errors = []
+         if missing:
+--- a/Lib/_abcoll.py
++++ b/Lib/_abcoll.py
+@@ -82,7 +82,7 @@
+     @classmethod
+     def __subclasshook__(cls, C):
+         if cls is Iterator:
+-            if _hasattr(C, "next"):
++            if _hasattr(C, "next") and _hasattr(C, "__iter__"):
+                 return True
+         return NotImplemented
+ 
+--- a/Lib/xmlrpclib.py
++++ b/Lib/xmlrpclib.py
+@@ -1446,8 +1446,13 @@
+ 
+     def parse_response(self, response):
+         # read response data from httpresponse, and parse it
+-        if response.getheader("Content-Encoding", "") == "gzip":
+-            stream = GzipDecodedResponse(response)
++
++        # Check for new http response object, else it is a file object
++        if hasattr(response,'getheader'):
++            if response.getheader("Content-Encoding", "") == "gzip":
++                stream = GzipDecodedResponse(response)
++            else:
++                stream = response
+         else:
+             stream = response
+ 
+--- a/Lib/multiprocessing/pool.py
++++ b/Lib/multiprocessing/pool.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/pool.py
+ #
+-# Copyright (c) 2007-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = ['Pool']
+--- a/Lib/multiprocessing/synchronize.py
++++ b/Lib/multiprocessing/synchronize.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/synchronize.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = [
+--- a/Lib/multiprocessing/reduction.py
++++ b/Lib/multiprocessing/reduction.py
+@@ -4,7 +4,33 @@
+ #
+ # multiprocessing/reduction.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = []
+--- a/Lib/multiprocessing/heap.py
++++ b/Lib/multiprocessing/heap.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/heap.py
+ #
+-# Copyright (c) 2007-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ import bisect
+--- a/Lib/multiprocessing/managers.py
++++ b/Lib/multiprocessing/managers.py
+@@ -4,7 +4,33 @@
+ #
+ # multiprocessing/managers.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = [ 'BaseManager', 'SyncManager', 'BaseProxy', 'Token' ]
+--- a/Lib/multiprocessing/util.py
++++ b/Lib/multiprocessing/util.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/util.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ import itertools
+--- a/Lib/multiprocessing/process.py
++++ b/Lib/multiprocessing/process.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/process.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = ['Process', 'current_process', 'active_children']
+--- a/Lib/multiprocessing/sharedctypes.py
++++ b/Lib/multiprocessing/sharedctypes.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/sharedctypes.py
+ #
+-# Copyright (c) 2007-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ import sys
+--- a/Lib/multiprocessing/__init__.py
++++ b/Lib/multiprocessing/__init__.py
+@@ -38,6 +38,7 @@
+ # HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ # LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ # OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __version__ = '0.70a1'
+--- a/Lib/multiprocessing/connection.py
++++ b/Lib/multiprocessing/connection.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/connection.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = [ 'Client', 'Listener', 'Pipe' ]
+--- a/Lib/multiprocessing/forking.py
++++ b/Lib/multiprocessing/forking.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/forking.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ import os
+--- a/Lib/multiprocessing/dummy/__init__.py
++++ b/Lib/multiprocessing/dummy/__init__.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/dummy/__init__.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = [
+--- a/Lib/multiprocessing/dummy/connection.py
++++ b/Lib/multiprocessing/dummy/connection.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/dummy/connection.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = [ 'Client', 'Listener', 'Pipe' ]
+--- a/Lib/multiprocessing/queues.py
++++ b/Lib/multiprocessing/queues.py
+@@ -3,7 +3,33 @@
+ #
+ # multiprocessing/queues.py
+ #
+-# Copyright (c) 2006-2008, R Oudkerk --- see COPYING.txt
++# Copyright (c) 2006-2008, R Oudkerk
++# All rights reserved.
++#
++# Redistribution and use in source and binary forms, with or without
++# modification, are permitted provided that the following conditions
++# are met:
++#
++# 1. Redistributions of source code must retain the above copyright
++#    notice, this list of conditions and the following disclaimer.
++# 2. Redistributions in binary form must reproduce the above copyright
++#    notice, this list of conditions and the following disclaimer in the
++#    documentation and/or other materials provided with the distribution.
++# 3. Neither the name of author nor the names of any contributors may be
++#    used to endorse or promote products derived from this software
++#    without specific prior written permission.
++#
++# THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
++# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
++# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
++# ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
++# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
++# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
++# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
++# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
++# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
++# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
++# SUCH DAMAGE.
+ #
+ 
+ __all__ = ['Queue', 'SimpleQueue', 'JoinableQueue']
+--- a/Lib/threading.py
++++ b/Lib/threading.py
+@@ -63,8 +63,14 @@
+         def _note(self, format, *args):
+             if self.__verbose:
+                 format = format % args
+-                format = "%s: %s\n" % (
+-                    current_thread().name, format)
++                # Issue #4188: calling current_thread() can incur an infinite
++                # recursion if it has to create a DummyThread on the fly.
++                ident = _get_ident()
++                try:
++                    name = _active[ident].name
++                except KeyError:
++                    name = "<OS thread %d>" % ident
++                format = "%s: %s\n" % (name, format)
+                 _sys.stderr.write(format)
+ 
+ else:
+@@ -367,6 +373,10 @@
+         self.__cond = Condition(Lock())
+         self.__flag = False
+ 
++    def _reset_internal_locks(self):
++        # private!  called by Thread._reset_internal_locks by _after_fork()
++        self.__cond.__init__()
++
+     def isSet(self):
+         return self.__flag
+ 
+@@ -443,6 +453,18 @@
+         # sys.exc_info since it can be changed between instances
+         self.__stderr = _sys.stderr
+ 
++    def _reset_internal_locks(self):
++        # private!  Called by _after_fork() to reset our internal locks as
++        # they may be in an invalid state leading to a deadlock or crash.
++        if hasattr(self, '_Thread__block'):  # DummyThread deletes self.__block
++            self.__block.__init__()
++        self.__started._reset_internal_locks()
++
++    @property
++    def _block(self):
++        # used by a unittest
++        return self.__block
++
+     def _set_daemon(self):
+         # Overridden in _MainThread and _DummyThread
+         return current_thread().daemon
+@@ -861,6 +883,10 @@
+                 # its new value since it can have changed.
+                 ident = _get_ident()
+                 thread._Thread__ident = ident
++                # Any condition variables hanging off of the active thread may
++                # be in an invalid state, so we reinitialize them.
++                if hasattr(thread, '_reset_internal_locks'):
++                    thread._reset_internal_locks()
+                 new_active[ident] = thread
+             else:
+                 # All the others are already stopped.
+--- a/Lib/imaplib.py
++++ b/Lib/imaplib.py
+@@ -1321,9 +1321,10 @@
+         'Jul': 7, 'Aug': 8, 'Sep': 9, 'Oct': 10, 'Nov': 11, 'Dec': 12}
+ 
+ def Internaldate2tuple(resp):
+-    """Convert IMAP4 INTERNALDATE to UT.
++    """Parse an IMAP4 INTERNALDATE string.
+ 
+-    Returns Python time module tuple.
++    Return corresponding local time.  The return value is a
++    time.struct_time instance or None if the string has wrong format.
+     """
+ 
+     mo = InternalDate.match(resp)
+@@ -1390,9 +1391,14 @@
+ 
+ def Time2Internaldate(date_time):
+ 
+-    """Convert 'date_time' to IMAP4 INTERNALDATE representation.
++    """Convert date_time to IMAP4 INTERNALDATE representation.
+ 
+-    Return string in form: '"DD-Mmm-YYYY HH:MM:SS +HHMM"'
++    Return string in form: '"DD-Mmm-YYYY HH:MM:SS +HHMM"'.  The
++    date_time argument can be a number (int or float) represening
++    seconds since epoch (as returned by time.time()), a 9-tuple
++    representing local time (as returned by time.localtime()), or a
++    double-quoted string.  In the last case, it is assumed to already
++    be in the correct format.
+     """
+ 
+     if isinstance(date_time, (int, float)):
+--- a/Lib/distutils/tests/test_install_lib.py
++++ b/Lib/distutils/tests/test_install_lib.py
+@@ -7,6 +7,7 @@
+ from distutils.extension import Extension
+ from distutils.tests import support
+ from distutils.errors import DistutilsOptionError
++from test.test_support import run_unittest
+ 
+ class InstallLibTestCase(support.TempdirManager,
+                          support.LoggingSilencer,
+@@ -103,4 +104,4 @@
+     return unittest.makeSuite(InstallLibTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_msvc9compiler.py
++++ b/Lib/distutils/tests/test_msvc9compiler.py
+@@ -5,6 +5,7 @@
+ 
+ from distutils.errors import DistutilsPlatformError
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ _MANIFEST = """\
+ <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
+@@ -137,4 +138,4 @@
+     return unittest.makeSuite(msvc9compilerTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_install_data.py
++++ b/Lib/distutils/tests/test_install_data.py
+@@ -6,6 +6,7 @@
+ 
+ from distutils.command.install_data import install_data
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ class InstallDataTestCase(support.TempdirManager,
+                           support.LoggingSilencer,
+@@ -73,4 +74,4 @@
+     return unittest.makeSuite(InstallDataTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_build.py
++++ b/Lib/distutils/tests/test_build.py
+@@ -2,6 +2,7 @@
+ import unittest
+ import os
+ import sys
++from test.test_support import run_unittest
+ 
+ from distutils.command.build import build
+ from distutils.tests import support
+@@ -51,4 +52,4 @@
+     return unittest.makeSuite(BuildTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/__init__.py
++++ b/Lib/distutils/tests/__init__.py
+@@ -15,9 +15,10 @@
+ import os
+ import sys
+ import unittest
++from test.test_support import run_unittest
+ 
+ 
+-here = os.path.dirname(__file__)
++here = os.path.dirname(__file__) or os.curdir
+ 
+ 
+ def test_suite():
+@@ -32,4 +33,4 @@
+ 
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_install_headers.py
++++ b/Lib/distutils/tests/test_install_headers.py
+@@ -6,6 +6,7 @@
+ 
+ from distutils.command.install_headers import install_headers
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ class InstallHeadersTestCase(support.TempdirManager,
+                              support.LoggingSilencer,
+@@ -37,4 +38,4 @@
+     return unittest.makeSuite(InstallHeadersTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_dist.py
++++ b/Lib/distutils/tests/test_dist.py
+@@ -11,7 +11,7 @@
+ from distutils.dist import Distribution, fix_help_options, DistributionMetadata
+ from distutils.cmd import Command
+ import distutils.dist
+-from test.test_support import TESTFN, captured_stdout
++from test.test_support import TESTFN, captured_stdout, run_unittest
+ from distutils.tests import support
+ 
+ class test_dist(Command):
+@@ -433,4 +433,4 @@
+     return suite
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_dep_util.py
++++ b/Lib/distutils/tests/test_dep_util.py
+@@ -6,6 +6,7 @@
+ from distutils.dep_util import newer, newer_pairwise, newer_group
+ from distutils.errors import DistutilsFileError
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ class DepUtilTestCase(support.TempdirManager, unittest.TestCase):
+ 
+@@ -77,4 +78,4 @@
+     return unittest.makeSuite(DepUtilTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_versionpredicate.py
++++ b/Lib/distutils/tests/test_versionpredicate.py
+@@ -4,6 +4,10 @@
+ 
+ import distutils.versionpredicate
+ import doctest
++from test.test_support import run_unittest
+ 
+ def test_suite():
+     return doctest.DocTestSuite(distutils.versionpredicate)
++
++if __name__ == '__main__':
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_dir_util.py
++++ b/Lib/distutils/tests/test_dir_util.py
+@@ -10,6 +10,7 @@
+ 
+ from distutils import log
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ class DirUtilTestCase(support.TempdirManager, unittest.TestCase):
+ 
+@@ -112,4 +113,4 @@
+     return unittest.makeSuite(DirUtilTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_install_scripts.py
++++ b/Lib/distutils/tests/test_install_scripts.py
+@@ -7,6 +7,7 @@
+ from distutils.core import Distribution
+ 
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ 
+ class InstallScriptsTestCase(support.TempdirManager,
+@@ -78,4 +79,4 @@
+     return unittest.makeSuite(InstallScriptsTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_archive_util.py
++++ b/Lib/distutils/tests/test_archive_util.py
+@@ -12,7 +12,7 @@
+                                     ARCHIVE_FORMATS)
+ from distutils.spawn import find_executable, spawn
+ from distutils.tests import support
+-from test.test_support import check_warnings
++from test.test_support import check_warnings, run_unittest
+ 
+ try:
+     import grp
+@@ -281,4 +281,4 @@
+     return unittest.makeSuite(ArchiveUtilTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_unixccompiler.py
++++ b/Lib/distutils/tests/test_unixccompiler.py
+@@ -1,6 +1,7 @@
+ """Tests for distutils.unixccompiler."""
+ import sys
+ import unittest
++from test.test_support import run_unittest
+ 
+ from distutils import sysconfig
+ from distutils.unixccompiler import UnixCCompiler
+@@ -126,4 +127,4 @@
+     return unittest.makeSuite(UnixCCompilerTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_clean.py
++++ b/Lib/distutils/tests/test_clean.py
+@@ -6,6 +6,7 @@
+ 
+ from distutils.command.clean import clean
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ class cleanTestCase(support.TempdirManager,
+                     support.LoggingSilencer,
+@@ -47,4 +48,4 @@
+     return unittest.makeSuite(cleanTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_upload.py
++++ b/Lib/distutils/tests/test_upload.py
+@@ -1,14 +1,13 @@
+-"""Tests for distutils.command.upload."""
+ # -*- encoding: utf8 -*-
+-import sys
++"""Tests for distutils.command.upload."""
+ import os
+ import unittest
++from test.test_support import run_unittest
+ 
+ from distutils.command import upload as upload_mod
+ from distutils.command.upload import upload
+ from distutils.core import Distribution
+ 
+-from distutils.tests import support
+ from distutils.tests.test_config import PYPIRC, PyPIRCCommandTestCase
+ 
+ PYPIRC_LONG_PASSWORD = """\
+@@ -129,4 +128,4 @@
+     return unittest.makeSuite(uploadTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_register.py
++++ b/Lib/distutils/tests/test_register.py
+@@ -7,7 +7,7 @@
+ import urllib2
+ import warnings
+ 
+-from test.test_support import check_warnings
++from test.test_support import check_warnings, run_unittest
+ 
+ from distutils.command import register as register_module
+ from distutils.command.register import register
+@@ -258,4 +258,4 @@
+     return unittest.makeSuite(RegisterTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_config_cmd.py
++++ b/Lib/distutils/tests/test_config_cmd.py
+@@ -2,6 +2,7 @@
+ import unittest
+ import os
+ import sys
++from test.test_support import run_unittest
+ 
+ from distutils.command.config import dump_file, config
+ from distutils.tests import support
+@@ -86,4 +87,4 @@
+     return unittest.makeSuite(ConfigTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_core.py
++++ b/Lib/distutils/tests/test_core.py
+@@ -6,7 +6,7 @@
+ import shutil
+ import sys
+ import test.test_support
+-from test.test_support import captured_stdout
++from test.test_support import captured_stdout, run_unittest
+ import unittest
+ from distutils.tests import support
+ 
+@@ -105,4 +105,4 @@
+     return unittest.makeSuite(CoreTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_cmd.py
++++ b/Lib/distutils/tests/test_cmd.py
+@@ -99,7 +99,7 @@
+ 
+     def test_ensure_dirname(self):
+         cmd = self.cmd
+-        cmd.option1 = os.path.dirname(__file__)
++        cmd.option1 = os.path.dirname(__file__) or os.curdir
+         cmd.ensure_dirname('option1')
+         cmd.option2 = 'xxx'
+         self.assertRaises(DistutilsOptionError, cmd.ensure_dirname, 'option2')
+--- a/Lib/distutils/tests/test_config.py
++++ b/Lib/distutils/tests/test_config.py
+@@ -11,6 +11,7 @@
+ from distutils.log import WARN
+ 
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ PYPIRC = """\
+ [distutils]
+@@ -119,4 +120,4 @@
+     return unittest.makeSuite(PyPIRCCommandTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_build_scripts.py
++++ b/Lib/distutils/tests/test_build_scripts.py
+@@ -8,6 +8,7 @@
+ import sysconfig
+ 
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ 
+ class BuildScriptsTestCase(support.TempdirManager,
+@@ -108,4 +109,4 @@
+     return unittest.makeSuite(BuildScriptsTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_install.py
++++ b/Lib/distutils/tests/test_install.py
+@@ -3,6 +3,8 @@
+ import os
+ import unittest
+ 
++from test.test_support import run_unittest
++
+ from distutils.command.install import install
+ from distutils.core import Distribution
+ 
+@@ -52,4 +54,4 @@
+     return unittest.makeSuite(InstallTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_build_py.py
++++ b/Lib/distutils/tests/test_build_py.py
+@@ -10,6 +10,7 @@
+ from distutils.errors import DistutilsFileError
+ 
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ 
+ class BuildPyTestCase(support.TempdirManager,
+@@ -123,4 +124,4 @@
+     return unittest.makeSuite(BuildPyTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_filelist.py
++++ b/Lib/distutils/tests/test_filelist.py
+@@ -1,7 +1,7 @@
+ """Tests for distutils.filelist."""
+ from os.path import join
+ import unittest
+-from test.test_support import captured_stdout
++from test.test_support import captured_stdout, run_unittest
+ 
+ from distutils.filelist import glob_to_re, FileList
+ from distutils import debug
+@@ -82,4 +82,4 @@
+     return unittest.makeSuite(FileListTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_file_util.py
++++ b/Lib/distutils/tests/test_file_util.py
+@@ -6,6 +6,7 @@
+ from distutils.file_util import move_file, write_file, copy_file
+ from distutils import log
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ class FileUtilTestCase(support.TempdirManager, unittest.TestCase):
+ 
+@@ -77,4 +78,4 @@
+     return unittest.makeSuite(FileUtilTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_check.py
++++ b/Lib/distutils/tests/test_check.py
+@@ -1,5 +1,6 @@
+ """Tests for distutils.command.check."""
+ import unittest
++from test.test_support import run_unittest
+ 
+ from distutils.command.check import check, HAS_DOCUTILS
+ from distutils.tests import support
+@@ -95,4 +96,4 @@
+     return unittest.makeSuite(CheckTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_bdist_msi.py
++++ b/Lib/distutils/tests/test_bdist_msi.py
+@@ -11,7 +11,7 @@
+                        support.LoggingSilencer,
+                        unittest.TestCase):
+ 
+-    def test_minial(self):
++    def test_minimal(self):
+         # minimal test XXX need more tests
+         from distutils.command.bdist_msi import bdist_msi
+         pkg_pth, dist = self.create_dist()
+--- a/Lib/distutils/tests/test_util.py
++++ b/Lib/distutils/tests/test_util.py
+@@ -1,6 +1,7 @@
+ """Tests for distutils.util."""
+ import sys
+ import unittest
++from test.test_support import run_unittest
+ 
+ from distutils.errors import DistutilsPlatformError, DistutilsByteCompileError
+ from distutils.util import byte_compile
+@@ -21,4 +22,4 @@
+     return unittest.makeSuite(UtilTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_text_file.py
++++ b/Lib/distutils/tests/test_text_file.py
+@@ -3,6 +3,7 @@
+ import unittest
+ from distutils.text_file import TextFile
+ from distutils.tests import support
++from test.test_support import run_unittest
+ 
+ TEST_DATA = """# test file
+ 
+@@ -103,4 +104,4 @@
+     return unittest.makeSuite(TextFileTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_version.py
++++ b/Lib/distutils/tests/test_version.py
+@@ -2,6 +2,7 @@
+ import unittest
+ from distutils.version import LooseVersion
+ from distutils.version import StrictVersion
++from test.test_support import run_unittest
+ 
+ class VersionTestCase(unittest.TestCase):
+ 
+@@ -67,4 +68,4 @@
+     return unittest.makeSuite(VersionTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_sdist.py
++++ b/Lib/distutils/tests/test_sdist.py
+@@ -24,11 +24,9 @@
+ import tempfile
+ import warnings
+ 
+-from test.test_support import check_warnings
+-from test.test_support import captured_stdout
++from test.test_support import captured_stdout, check_warnings, run_unittest
+ 
+-from distutils.command.sdist import sdist
+-from distutils.command.sdist import show_formats
++from distutils.command.sdist import sdist, show_formats
+ from distutils.core import Distribution
+ from distutils.tests.test_config import PyPIRCCommandTestCase
+ from distutils.errors import DistutilsExecError, DistutilsOptionError
+@@ -426,4 +424,4 @@
+     return unittest.makeSuite(SDistTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_build_clib.py
++++ b/Lib/distutils/tests/test_build_clib.py
+@@ -3,6 +3,8 @@
+ import os
+ import sys
+ 
++from test.test_support import run_unittest
++
+ from distutils.command.build_clib import build_clib
+ from distutils.errors import DistutilsSetupError
+ from distutils.tests import support
+@@ -140,4 +142,4 @@
+     return unittest.makeSuite(BuildCLibTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/tests/test_spawn.py
++++ b/Lib/distutils/tests/test_spawn.py
+@@ -2,7 +2,7 @@
+ import unittest
+ import os
+ import time
+-from test.test_support import captured_stdout
++from test.test_support import captured_stdout, run_unittest
+ 
+ from distutils.spawn import _nt_quote_args
+ from distutils.spawn import spawn, find_executable
+@@ -57,4 +57,4 @@
+     return unittest.makeSuite(SpawnTestCase)
+ 
+ if __name__ == "__main__":
+-    unittest.main(defaultTest="test_suite")
++    run_unittest(test_suite())
+--- a/Lib/distutils/archive_util.py
++++ b/Lib/distutils/archive_util.py
+@@ -121,7 +121,7 @@
+ def make_zipfile(base_name, base_dir, verbose=0, dry_run=0):
+     """Create a zip file from all the files under 'base_dir'.
+ 
+-    The output zip file will be named 'base_dir' + ".zip".  Uses either the
++    The output zip file will be named 'base_name' + ".zip".  Uses either the
+     "zipfile" Python module (if available) or the InfoZIP "zip" utility
+     (if installed and found on the default search path).  If neither tool is
+     available, raises DistutilsExecError.  Returns the name of the output zip
+--- a/Lib/distutils/command/build_ext.py
++++ b/Lib/distutils/command/build_ext.py
+@@ -207,7 +207,7 @@
+ 
+             elif MSVC_VERSION == 8:
+                 self.library_dirs.append(os.path.join(sys.exec_prefix,
+-                                         'PC', 'VS8.0', 'win32release'))
++                                         'PC', 'VS8.0'))
+             elif MSVC_VERSION == 7:
+                 self.library_dirs.append(os.path.join(sys.exec_prefix,
+                                          'PC', 'VS7.1'))
+--- a/Lib/distutils/command/upload.py
++++ b/Lib/distutils/command/upload.py
+@@ -176,6 +176,9 @@
+             result = urlopen(request)
+             status = result.getcode()
+             reason = result.msg
++            if self.show_response:
++                msg = '\n'.join(('-' * 75, r.read(), '-' * 75))
++                self.announce(msg, log.INFO)
+         except socket.error, e:
+             self.announce(str(e), log.ERROR)
+             return
+@@ -189,6 +192,3 @@
+         else:
+             self.announce('Upload failed (%s): %s' % (status, reason),
+                           log.ERROR)
+-        if self.show_response:
+-            msg = '\n'.join(('-' * 75, r.read(), '-' * 75))
+-            self.announce(msg, log.INFO)
+--- a/Lib/netrc.py
++++ b/Lib/netrc.py
+@@ -34,11 +34,15 @@
+     def _parse(self, file, fp):
+         lexer = shlex.shlex(fp)
+         lexer.wordchars += r"""!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"""
++        lexer.commenters = lexer.commenters.replace('#', '')
+         while 1:
+             # Look for a machine, default, or macdef top-level keyword
+             toplevel = tt = lexer.get_token()
+             if not tt:
+                 break
++            elif tt[0] == '#':
++                fp.readline();
++                continue;
+             elif tt == 'machine':
+                 entryname = lexer.get_token()
+             elif tt == 'default':
+--- a/Lib/logging/handlers.py
++++ b/Lib/logging/handlers.py
+@@ -125,6 +125,7 @@
+         """
+         if self.stream:
+             self.stream.close()
++            self.stream = None
+         if self.backupCount > 0:
+             for i in range(self.backupCount - 1, 0, -1):
+                 sfn = "%s.%d" % (self.baseFilename, i)
+@@ -324,6 +325,7 @@
+         """
+         if self.stream:
+             self.stream.close()
++            self.stream = None
+         # get the time that this sequence started at and make it a TimeTuple
+         t = self.rolloverAt - self.interval
+         if self.utc:
+--- a/Lib/BaseHTTPServer.py
++++ b/Lib/BaseHTTPServer.py
+@@ -310,7 +310,13 @@
+ 
+         """
+         try:
+-            self.raw_requestline = self.rfile.readline()
++            self.raw_requestline = self.rfile.readline(65537)
++            if len(self.raw_requestline) > 65536:
++                self.requestline = ''
++                self.request_version = ''
++                self.command = ''
++                self.send_error(414)
++                return
+             if not self.raw_requestline:
+                 self.close_connection = 1
+                 return
+--- a/Lib/shutil.py
++++ b/Lib/shutil.py
+@@ -336,7 +336,7 @@
+     archive that is being built. If not provided, the current owner and group
+     will be used.
+ 
+-    The output tar file will be named 'base_dir' +  ".tar", possibly plus
++    The output tar file will be named 'base_name' +  ".tar", possibly plus
+     the appropriate compression extension (".gz", or ".bz2").
+ 
+     Returns the output filename.
+@@ -406,7 +406,7 @@
+ def _make_zipfile(base_name, base_dir, verbose=0, dry_run=0, logger=None):
+     """Create a zip file from all the files under 'base_dir'.
+ 
+-    The output zip file will be named 'base_dir' + ".zip".  Uses either the
++    The output zip file will be named 'base_name' + ".zip".  Uses either the
+     "zipfile" Python module (if available) or the InfoZIP "zip" utility
+     (if installed and found on the default search path).  If neither tool is
+     available, raises ExecError.  Returns the name of the output zip
+--- a/Lib/numbers.py
++++ b/Lib/numbers.py
+@@ -63,7 +63,7 @@
+ 
+     @abstractproperty
+     def imag(self):
+-        """Retrieve the real component of this number.
++        """Retrieve the imaginary component of this number.
+ 
+         This should subclass Real.
+         """
+--- a/Lib/collections.py
++++ b/Lib/collections.py
+@@ -43,7 +43,7 @@
+ ### OrderedDict
+ ################################################################################
+ 
+-class OrderedDict(dict, MutableMapping):
++class OrderedDict(dict):
+     'Dictionary that remembers insertion order'
+     # An inherited dict maps keys to values.
+     # The inherited dict provides __getitem__, __len__, __contains__, and get.
+@@ -71,7 +71,7 @@
+             NEXT = 1
+             root[PREV] = root[NEXT] = root
+             self.__map = {}
+-        self.update(*args, **kwds)
++        self.__update(*args, **kwds)
+ 
+     def __setitem__(self, key, value, PREV=0, NEXT=1, dict_setitem=dict.__setitem__):
+         'od.__setitem__(i, y) <==> od[i]=y'
+@@ -134,9 +134,7 @@
+             pass
+         dict.clear(self)
+ 
+-    setdefault = MutableMapping.setdefault
+-    update = MutableMapping.update
+-    pop = MutableMapping.pop
++    update = __update = MutableMapping.update
+     keys = MutableMapping.keys
+     values = MutableMapping.values
+     items = MutableMapping.items
+@@ -157,6 +155,24 @@
+         "od.viewitems() -> a set-like object providing a view on od's items"
+         return ItemsView(self)
+ 
++    __marker = object()
++
++    def pop(self, key, default=__marker):
++        if key in self:
++            result = self[key]
++            del self[key]
++            return result
++        if default is self.__marker:
++            raise KeyError(key)
++        return default
++
++    def setdefault(self, key, default=None):
++        'od.setdefault(k[,d]) -> od.get(k,d), also set od[k]=d if k not in od'
++        if key in self:
++            return self[key]
++        self[key] = default
++        return default
++
+     def popitem(self, last=True):
+         '''od.popitem() -> (k, v), return and remove a (key, value) pair.
+         Pairs are returned in LIFO order if last is true or FIFO order if false.
+@@ -328,16 +344,16 @@
+     or multiset.  Elements are stored as dictionary keys and their counts
+     are stored as dictionary values.
+ 
+-    >>> c = Counter('abracadabra')      # count elements from a string
++    >>> c = Counter('abcdeabcdabcaba')  # count elements from a string
+ 
+     >>> c.most_common(3)                # three most common elements
+-    [('a', 5), ('r', 2), ('b', 2)]
++    [('a', 5), ('b', 4), ('c', 3)]
+     >>> sorted(c)                       # list all unique elements
+-    ['a', 'b', 'c', 'd', 'r']
++    ['a', 'b', 'c', 'd', 'e']
+     >>> ''.join(sorted(c.elements()))   # list elements with repetitions
+-    'aaaaabbcdrr'
++    'aaaaabbbbcccdde'
+     >>> sum(c.values())                 # total of all counts
+-    11
++    15
+ 
+     >>> c['a']                          # count of letter 'a'
+     5
+@@ -345,8 +361,8 @@
+     ...     c[elem] += 1                # by adding 1 to each element's count
+     >>> c['a']                          # now there are seven 'a'
+     7
+-    >>> del c['r']                      # remove all 'r'
+-    >>> c['r']                          # now there are zero 'r'
++    >>> del c['b']                      # remove all 'b'
++    >>> c['b']                          # now there are zero 'b'
+     0
+ 
+     >>> d = Counter('simsalabim')       # make another counter
+@@ -385,6 +401,7 @@
+         >>> c = Counter(a=4, b=2)                   # a new counter from keyword args
+ 
+         '''
++        super(Counter, self).__init__()
+         self.update(iterable, **kwds)
+ 
+     def __missing__(self, key):
+@@ -396,8 +413,8 @@
+         '''List the n most common elements and their counts from the most
+         common to the least.  If n is None, then list all element counts.
+ 
+-        >>> Counter('abracadabra').most_common(3)
+-        [('a', 5), ('r', 2), ('b', 2)]
++        >>> Counter('abcdeabcdabcaba').most_common(3)
++        [('a', 5), ('b', 4), ('c', 3)]
+ 
+         '''
+         # Emulate Bag.sortedByCount from Smalltalk
+@@ -463,7 +480,7 @@
+                     for elem, count in iterable.iteritems():
+                         self[elem] = self_get(elem, 0) + count
+                 else:
+-                    dict.update(self, iterable) # fast path when counter is empty
++                    super(Counter, self).update(iterable) # fast path when counter is empty
+             else:
+                 self_get = self.get
+                 for elem in iterable:
+@@ -502,10 +519,13 @@
+         'Like dict.copy() but returns a Counter instance instead of a dict.'
+         return Counter(self)
+ 
++    def __reduce__(self):
++        return self.__class__, (dict(self),)
++
+     def __delitem__(self, elem):
+         'Like dict.__delitem__() but does not raise KeyError for missing values.'
+         if elem in self:
+-            dict.__delitem__(self, elem)
++            super(Counter, self).__delitem__(elem)
+ 
+     def __repr__(self):
+         if not self:
+--- a/Lib/ctypes/test/test_callbacks.py
++++ b/Lib/ctypes/test/test_callbacks.py
+@@ -206,6 +206,42 @@
+ 
+             windll.user32.EnumWindows(EnumWindowsCallbackFunc, 0)
+ 
++    def test_callback_register_int(self):
++        # Issue #8275: buggy handling of callback args under Win64
++        # NOTE: should be run on release builds as well
++        dll = CDLL(_ctypes_test.__file__)
++        CALLBACK = CFUNCTYPE(c_int, c_int, c_int, c_int, c_int, c_int)
++        # All this function does is call the callback with its args squared
++        func = dll._testfunc_cbk_reg_int
++        func.argtypes = (c_int, c_int, c_int, c_int, c_int, CALLBACK)
++        func.restype = c_int
++
++        def callback(a, b, c, d, e):
++            return a + b + c + d + e
++
++        result = func(2, 3, 4, 5, 6, CALLBACK(callback))
++        self.assertEqual(result, callback(2*2, 3*3, 4*4, 5*5, 6*6))
++
++    def test_callback_register_double(self):
++        # Issue #8275: buggy handling of callback args under Win64
++        # NOTE: should be run on release builds as well
++        dll = CDLL(_ctypes_test.__file__)
++        CALLBACK = CFUNCTYPE(c_double, c_double, c_double, c_double,
++                             c_double, c_double)
++        # All this function does is call the callback with its args squared
++        func = dll._testfunc_cbk_reg_double
++        func.argtypes = (c_double, c_double, c_double,
++                         c_double, c_double, CALLBACK)
++        func.restype = c_double
++
++        def callback(a, b, c, d, e):
++            return a + b + c + d + e
++
++        result = func(1.1, 2.2, 3.3, 4.4, 5.5, CALLBACK(callback))
++        self.assertEqual(result,
++                         callback(1.1*1.1, 2.2*2.2, 3.3*3.3, 4.4*4.4, 5.5*5.5))
++
++
+ ################################################################
+ 
+ if __name__ == '__main__':
+--- a/Lib/webbrowser.py
++++ b/Lib/webbrowser.py
+@@ -285,12 +285,10 @@
+     """Launcher class for Mozilla/Netscape browsers."""
+ 
+     raise_opts = ["-noraise", "-raise"]
+-
+     remote_args = ['-remote', 'openURL(%s%action)']
+     remote_action = ""
+     remote_action_newwin = ",new-window"
+     remote_action_newtab = ",new-tab"
+-
+     background = True
+ 
+ Netscape = Mozilla
+@@ -303,15 +301,13 @@
+     remote_args = ['%action', '%s']
+     remote_action = "-n"
+     remote_action_newwin = "-w"
+-
+     background = True
+ 
+ 
+ class Opera(UnixBrowser):
+     "Launcher class for Opera browser."
+ 
+-    raise_opts = ["", "-raise"]
+-
++    raise_opts = ["-noraise", ""]
+     remote_args = ['-remote', 'openURL(%s%action)']
+     remote_action = ""
+     remote_action_newwin = ",new-window"
+--- a/Lib/compileall.py
++++ b/Lib/compileall.py
+@@ -9,7 +9,6 @@
+ packages -- for now, you'll have to deal with packages separately.)
+ 
+ See module py_compile for details of the actual byte-compilation.
+-
+ """
+ import os
+ import sys
+@@ -31,7 +30,6 @@
+                directory name that will show up in error messages)
+     force:     if 1, force compilation, even if timestamps are up-to-date
+     quiet:     if 1, be quiet during compilation
+-
+     """
+     if not quiet:
+         print 'Listing', dir, '...'
+@@ -61,15 +59,16 @@
+     return success
+ 
+ def compile_file(fullname, ddir=None, force=0, rx=None, quiet=0):
+-    """Byte-compile file.
+-    file:      the file to byte-compile
++    """Byte-compile one file.
++
++    Arguments (only fullname is required):
++
++    fullname:  the file to byte-compile
+     ddir:      if given, purported directory name (this is the
+                directory name that will show up in error messages)
+     force:     if 1, force compilation, even if timestamps are up-to-date
+     quiet:     if 1, be quiet during compilation
+-
+     """
+-
+     success = 1
+     name = os.path.basename(fullname)
+     if ddir is not None:
+@@ -120,7 +119,6 @@
+     maxlevels:   max recursion level (default 0)
+     force: as for compile_dir() (default 0)
+     quiet: as for compile_dir() (default 0)
+-
+     """
+     success = 1
+     for dir in sys.path:
+--- a/Lib/ast.py
++++ b/Lib/ast.py
+@@ -29,12 +29,12 @@
+ from _ast import __version__
+ 
+ 
+-def parse(expr, filename='<unknown>', mode='exec'):
++def parse(source, filename='<unknown>', mode='exec'):
+     """
+-    Parse an expression into an AST node.
+-    Equivalent to compile(expr, filename, mode, PyCF_ONLY_AST).
++    Parse the source into an AST node.
++    Equivalent to compile(source, filename, mode, PyCF_ONLY_AST).
+     """
+-    return compile(expr, filename, mode, PyCF_ONLY_AST)
++    return compile(source, filename, mode, PyCF_ONLY_AST)
+ 
+ 
+ def literal_eval(node_or_string):
+@@ -152,8 +152,6 @@
+     Increment the line number of each node in the tree starting at *node* by *n*.
+     This is useful to "move code" to a different location in a file.
+     """
+-    if 'lineno' in node._attributes:
+-        node.lineno = getattr(node, 'lineno', 0) + n
+     for child in walk(node):
+         if 'lineno' in child._attributes:
+             child.lineno = getattr(child, 'lineno', 0) + n
+@@ -204,9 +202,9 @@
+ 
+ def walk(node):
+     """
+-    Recursively yield all child nodes of *node*, in no specified order.  This is
+-    useful if you only want to modify nodes in place and don't care about the
+-    context.
++    Recursively yield all descendant nodes in the tree starting at *node*
++    (including *node* itself), in no specified order.  This is useful if you
++    only want to modify nodes in place and don't care about the context.
+     """
+     from collections import deque
+     todo = deque([node])
+--- a/Lib/Cookie.py
++++ b/Lib/Cookie.py
+@@ -258,6 +258,11 @@
+     '\033' : '\\033',  '\034' : '\\034',  '\035' : '\\035',
+     '\036' : '\\036',  '\037' : '\\037',
+ 
++    # Because of the way browsers really handle cookies (as opposed
++    # to what the RFC says) we also encode , and ;
++
++    ',' : '\\054', ';' : '\\073',
++
+     '"' : '\\"',       '\\' : '\\\\',
+ 
+     '\177' : '\\177',  '\200' : '\\200',  '\201' : '\\201',
+--- a/Lib/pydoc.py
++++ b/Lib/pydoc.py
+@@ -1718,8 +1718,9 @@
+             return ''
+         return '<pydoc.Helper instance>'
+ 
+-    def __call__(self, request=None):
+-        if request is not None:
++    _GoInteractive = object()
++    def __call__(self, request=_GoInteractive):
++        if request is not self._GoInteractive:
+             self.help(request)
+         else:
+             self.intro()
+--- a/Lib/_pyio.py
++++ b/Lib/_pyio.py
+@@ -678,7 +678,7 @@
+     """
+ 
+     def __init__(self, raw):
+-        self.raw = raw
++        self._raw = raw
+ 
+     ### Positioning ###
+ 
+@@ -722,8 +722,8 @@
+         if self.raw is None:
+             raise ValueError("raw stream already detached")
+         self.flush()
+-        raw = self.raw
+-        self.raw = None
++        raw = self._raw
++        self._raw = None
+         return raw
+ 
+     ### Inquiries ###
+@@ -738,6 +738,10 @@
+         return self.raw.writable()
+ 
+     @property
++    def raw(self):
++        return self._raw
++
++    @property
+     def closed(self):
+         return self.raw.closed
+ 
+@@ -1456,7 +1460,7 @@
+             if not isinstance(errors, basestring):
+                 raise ValueError("invalid errors: %r" % errors)
+ 
+-        self.buffer = buffer
++        self._buffer = buffer
+         self._line_buffering = line_buffering
+         self._encoding = encoding
+         self._errors = errors
+@@ -1511,6 +1515,10 @@
+     def line_buffering(self):
+         return self._line_buffering
+ 
++    @property
++    def buffer(self):
++        return self._buffer
++
+     def seekable(self):
+         return self._seekable
+ 
+@@ -1724,8 +1732,8 @@
+         if self.buffer is None:
+             raise ValueError("buffer is already detached")
+         self.flush()
+-        buffer = self.buffer
+-        self.buffer = None
++        buffer = self._buffer
++        self._buffer = None
+         return buffer
+ 
+     def seek(self, cookie, whence=0):
+--- a/Lib/sysconfig.py
++++ b/Lib/sysconfig.py
+@@ -271,7 +271,7 @@
+ def _get_makefile_filename():
+     if _PYTHON_BUILD:
+         return os.path.join(_PROJECT_BASE, "Makefile")
+-    return os.path.join(get_path('stdlib'), "config", "Makefile")
++    return os.path.join(get_path('platstdlib'), "config", "Makefile")
+ 
+ 
+ def _init_posix(vars):
+--- a/Lib/telnetlib.py
++++ b/Lib/telnetlib.py
+@@ -236,7 +236,7 @@
+ 
+         """
+         if self.debuglevel > 0:
+-            print 'Telnet(%s,%d):' % (self.host, self.port),
++            print 'Telnet(%s,%s):' % (self.host, self.port),
+             if args:
+                 print msg % args
+             else:
+--- a/Lib/lib2to3/tests/test_util.py
++++ b/Lib/lib2to3/tests/test_util.py
+@@ -568,8 +568,8 @@
+ 
+     def test_from_import(self):
+         node = parse('bar()')
+-        fixer_util.touch_import("cgi", "escape", node)
+-        self.assertEqual(str(node), 'from cgi import escape\nbar()\n\n')
++        fixer_util.touch_import("html", "escape", node)
++        self.assertEqual(str(node), 'from html import escape\nbar()\n\n')
+ 
+     def test_name_import(self):
+         node = parse('bar()')
+--- a/Lib/lib2to3/tests/test_refactor.py
++++ b/Lib/lib2to3/tests/test_refactor.py
+@@ -223,6 +223,7 @@
+                 "hi.py",
+                 ".dumb",
+                 ".after.py",
++                "notpy.npy",
+                 "sappy"]
+         expected = ["hi.py"]
+         check(tree, expected)
+--- a/Lib/lib2to3/main.py
++++ b/Lib/lib2to3/main.py
+@@ -101,7 +101,7 @@
+     parser.add_option("-j", "--processes", action="store", default=1,
+                       type="int", help="Run 2to3 concurrently")
+     parser.add_option("-x", "--nofix", action="append", default=[],
+-                      help="Prevent a fixer from being run.")
++                      help="Prevent a transformation from being run")
+     parser.add_option("-l", "--list-fixes", action="store_true",
+                       help="List available transformations")
+     parser.add_option("-p", "--print-function", action="store_true",
+@@ -113,7 +113,7 @@
+     parser.add_option("-w", "--write", action="store_true",
+                       help="Write back modified files")
+     parser.add_option("-n", "--nobackups", action="store_true", default=False,
+-                      help="Don't write backups for modified files.")
++                      help="Don't write backups for modified files")
+ 
+     # Parse command line arguments
+     refactor_stdin = False
+--- a/Lib/lib2to3/refactor.py
++++ b/Lib/lib2to3/refactor.py
+@@ -302,13 +302,14 @@
+ 
+         Files and subdirectories starting with '.' are skipped.
+         """
++        py_ext = os.extsep + "py"
+         for dirpath, dirnames, filenames in os.walk(dir_name):
+             self.log_debug("Descending into %s", dirpath)
+             dirnames.sort()
+             filenames.sort()
+             for name in filenames:
+-                if not name.startswith(".") and \
+-                        os.path.splitext(name)[1].endswith("py"):
++                if (not name.startswith(".") and
++                    os.path.splitext(name)[1] == py_ext):
+                     fullname = os.path.join(dirpath, name)
+                     self.refactor_file(fullname, write, doctests_only)
+             # Modify dirnames in-place to remove subdirs with leading dots
+--- a/Lib/lib2to3/fixes/fix_urllib.py
++++ b/Lib/lib2to3/fixes/fix_urllib.py
+@@ -12,7 +12,7 @@
+ 
+ MAPPING = {"urllib":  [
+                 ("urllib.request",
+-                    ["URLOpener", "FancyURLOpener", "urlretrieve",
++                    ["URLopener", "FancyURLopener", "urlretrieve",
+                      "_urlopener", "urlopen", "urlcleanup",
+                      "pathname2url", "url2pathname"]),
+                 ("urllib.parse",
+--- a/Lib/bdb.py
++++ b/Lib/bdb.py
+@@ -250,6 +250,12 @@
+             list.append(lineno)
+         bp = Breakpoint(filename, lineno, temporary, cond, funcname)
+ 
++    def _prune_breaks(self, filename, lineno):
++        if (filename, lineno) not in Breakpoint.bplist:
++            self.breaks[filename].remove(lineno)
++        if not self.breaks[filename]:
++            del self.breaks[filename]
++
+     def clear_break(self, filename, lineno):
+         filename = self.canonic(filename)
+         if not filename in self.breaks:
+@@ -261,10 +267,7 @@
+         # pair, then remove the breaks entry
+         for bp in Breakpoint.bplist[filename, lineno][:]:
+             bp.deleteMe()
+-        if (filename, lineno) not in Breakpoint.bplist:
+-            self.breaks[filename].remove(lineno)
+-        if not self.breaks[filename]:
+-            del self.breaks[filename]
++        self._prune_breaks(filename, lineno)
+ 
+     def clear_bpbynumber(self, arg):
+         try:
+@@ -277,7 +280,8 @@
+             return 'Breakpoint number (%d) out of range' % number
+         if not bp:
+             return 'Breakpoint (%d) already deleted' % number
+-        self.clear_break(bp.file, bp.line)
++        bp.deleteMe()
++        self._prune_breaks(bp.file, bp.line)
+ 
+     def clear_all_file_breaks(self, filename):
+         filename = self.canonic(filename)
+--- a/Lib/mailbox.py
++++ b/Lib/mailbox.py
+@@ -253,8 +253,11 @@
+         tmp_file = self._create_tmp()
+         try:
+             self._dump_message(message, tmp_file)
+-        finally:
+-            _sync_close(tmp_file)
++        except BaseException:
++            tmp_file.close()
++            os.remove(tmp_file.name)
++            raise
++        _sync_close(tmp_file)
+         if isinstance(message, MaildirMessage):
+             subdir = message.get_subdir()
+             suffix = self.colon + message.get_info()
+@@ -700,9 +703,14 @@
+     def _append_message(self, message):
+         """Append message to mailbox and return (start, stop) offsets."""
+         self._file.seek(0, 2)
+-        self._pre_message_hook(self._file)
+-        offsets = self._install_message(message)
+-        self._post_message_hook(self._file)
++        before = self._file.tell()
++        try:
++            self._pre_message_hook(self._file)
++            offsets = self._install_message(message)
++            self._post_message_hook(self._file)
++        except BaseException:
++            self._file.truncate(before)
++            raise
+         self._file.flush()
+         self._file_length = self._file.tell()  # Record current length of mailbox
+         return offsets
+@@ -868,18 +876,29 @@
+             new_key = max(keys) + 1
+         new_path = os.path.join(self._path, str(new_key))
+         f = _create_carefully(new_path)
++        closed = False
+         try:
+             if self._locked:
+                 _lock_file(f)
+             try:
+-                self._dump_message(message, f)
++                try:
++                    self._dump_message(message, f)
++                except BaseException:
++                    # Unlock and close so it can be deleted on Windows
++                    if self._locked:
++                        _unlock_file(f)
++                    _sync_close(f)
++                    closed = True
++                    os.remove(new_path)
++                    raise
+                 if isinstance(message, MHMessage):
+                     self._dump_sequences(message, new_key)
+             finally:
+                 if self._locked:
+                     _unlock_file(f)
+         finally:
+-            _sync_close(f)
++            if not closed:
++                _sync_close(f)
+         return new_key
+ 
+     def remove(self, key):
+--- a/Lib/email/header.py
++++ b/Lib/email/header.py
+@@ -47,6 +47,10 @@
+ # For use with .match()
+ fcre = re.compile(r'[\041-\176]+:$')
+ 
++# Find a header embeded in a putative header value.  Used to check for
++# header injection attack.
++_embeded_header = re.compile(r'\n[^ \t]+:')
++
+ 
+ 
+ # Helpers
+@@ -403,7 +407,11 @@
+             newchunks += self._split(s, charset, targetlen, splitchars)
+             lastchunk, lastcharset = newchunks[-1]
+             lastlen = lastcharset.encoded_header_len(lastchunk)
+-        return self._encode_chunks(newchunks, maxlinelen)
++        value = self._encode_chunks(newchunks, maxlinelen)
++        if _embeded_header.search(value):
++            raise HeaderParseError("header value appears to contain "
++                "an embedded header: {!r}".format(value))
++        return value
+ 
+ 
+ 
+--- a/Lib/email/test/test_email.py
++++ b/Lib/email/test/test_email.py
+@@ -179,6 +179,17 @@
+         self.assertRaises(Errors.HeaderParseError,
+                           msg.set_boundary, 'BOUNDARY')
+ 
++    def test_make_boundary(self):
++        msg = MIMEMultipart('form-data')
++        # Note that when the boundary gets created is an implementation
++        # detail and might change.
++        self.assertEqual(msg.items()[0][1], 'multipart/form-data')
++        # Trigger creation of boundary
++        msg.as_string()
++        self.assertEqual(msg.items()[0][1][:33],
++                        'multipart/form-data; boundary="==')
++        # XXX: there ought to be tests of the uniqueness of the boundary, too.
++
+     def test_message_rfc822_only(self):
+         # Issue 7970: message/rfc822 not in multipart parsed by
+         # HeaderParser caused an exception when flattened.
+@@ -542,6 +553,17 @@
+         msg.set_charset(u'us-ascii')
+         self.assertEqual('us-ascii', msg.get_content_charset())
+ 
++    # Issue 5871: reject an attempt to embed a header inside a header value
++    # (header injection attack).
++    def test_embeded_header_via_Header_rejected(self):
++        msg = Message()
++        msg['Dummy'] = Header('dummy\nX-Injected-Header: test')
++        self.assertRaises(Errors.HeaderParseError, msg.as_string)
++
++    def test_embeded_header_via_string_rejected(self):
++        msg = Message()
++        msg['Dummy'] = 'dummy\nX-Injected-Header: test'
++        self.assertRaises(Errors.HeaderParseError, msg.as_string)
+ 
+ 
+ # Test the email.Encoders module
+@@ -3113,6 +3135,28 @@
+         s = 'Subject: =?EUC-KR?B?CSixpLDtKSC/7Liuvsax4iC6uLmwMcijIKHaILzSwd/H0SC8+LCjwLsgv7W/+Mj3I ?='
+         raises(Errors.HeaderParseError, decode_header, s)
+ 
++    # Issue 1078919
++    def test_ascii_add_header(self):
++        msg = Message()
++        msg.add_header('Content-Disposition', 'attachment',
++                       filename='bud.gif')
++        self.assertEqual('attachment; filename="bud.gif"',
++            msg['Content-Disposition'])
++
++    def test_nonascii_add_header_via_triple(self):
++        msg = Message()
++        msg.add_header('Content-Disposition', 'attachment',
++            filename=('iso-8859-1', '', 'Fu\xdfballer.ppt'))
++        self.assertEqual(
++            'attachment; filename*="iso-8859-1\'\'Fu%DFballer.ppt"',
++            msg['Content-Disposition'])
++
++    def test_encode_unaliased_charset(self):
++        # Issue 1379416: when the charset has no output conversion,
++        # output was accidentally getting coerced to unicode.
++        res = Header('abc','iso-8859-2').encode()
++        self.assertEqual(res, '=?iso-8859-2?q?abc?=')
++        self.assertIsInstance(res, str)
+ 
+ 
+ # Test RFC 2231 header parameters (en/de)coding
+--- a/Lib/email/charset.py
++++ b/Lib/email/charset.py
+@@ -209,7 +209,7 @@
+                 input_charset = unicode(input_charset, 'ascii')
+         except UnicodeError:
+             raise errors.CharsetError(input_charset)
+-        input_charset = input_charset.lower()
++        input_charset = input_charset.lower().encode('ascii')
+         # Set the input charset after filtering through the aliases and/or codecs
+         if not (input_charset in ALIASES or input_charset in CHARSETS):
+             try:
+--- a/Lib/email/message.py
++++ b/Lib/email/message.py
+@@ -38,7 +38,9 @@
+ def _formatparam(param, value=None, quote=True):
+     """Convenience function to format and return a key=value pair.
+ 
+-    This will quote the value if needed or if quote is true.
++    This will quote the value if needed or if quote is true.  If value is a
++    three tuple (charset, language, value), it will be encoded according
++    to RFC2231 rules.
+     """
+     if value is not None and len(value) > 0:
+         # A tuple is used for RFC 2231 encoded parameter values where items
+@@ -97,7 +99,7 @@
+     objects, otherwise it is a string.
+ 
+     Message objects implement part of the `mapping' interface, which assumes
+-    there is exactly one occurrance of the header per message.  Some headers
++    there is exactly one occurrence of the header per message.  Some headers
+     do in fact appear multiple times (e.g. Received) and for those headers,
+     you must use the explicit API to set or get all the headers.  Not all of
+     the mapping methods are implemented.
+@@ -286,7 +288,7 @@
+         Return None if the header is missing instead of raising an exception.
+ 
+         Note that if the header appeared multiple times, exactly which
+-        occurrance gets returned is undefined.  Use get_all() to get all
++        occurrence gets returned is undefined.  Use get_all() to get all
+         the values matching a header field name.
+         """
+         return self.get(name)
+@@ -389,7 +391,10 @@
+         name is the header field to add.  keyword arguments can be used to set
+         additional parameters for the header field, with underscores converted
+         to dashes.  Normally the parameter will be added as key="value" unless
+-        value is None, in which case only the key will be added.
++        value is None, in which case only the key will be added.  If a
++        parameter value contains non-ASCII characters it must be specified as a
++        three-tuple of (charset, language, value), in which case it will be
++        encoded according to RFC2231 rules.
+ 
+         Example:
+ 
+--- a/Lib/email/generator.py
++++ b/Lib/email/generator.py
+@@ -202,18 +202,13 @@
+             g = self.clone(s)
+             g.flatten(part, unixfrom=False)
+             msgtexts.append(s.getvalue())
+-        # Now make sure the boundary we've selected doesn't appear in any of
+-        # the message texts.
+-        alltext = NL.join(msgtexts)
+         # BAW: What about boundaries that are wrapped in double-quotes?
+-        boundary = msg.get_boundary(failobj=_make_boundary(alltext))
+-        # If we had to calculate a new boundary because the body text
+-        # contained that string, set the new boundary.  We don't do it
+-        # unconditionally because, while set_boundary() preserves order, it
+-        # doesn't preserve newlines/continuations in headers.  This is no big
+-        # deal in practice, but turns out to be inconvenient for the unittest
+-        # suite.
+-        if msg.get_boundary() != boundary:
++        boundary = msg.get_boundary()
++        if not boundary:
++            # Create a boundary that doesn't appear in any of the
++            # message texts.
++            alltext = NL.join(msgtexts)
++            boundary = _make_boundary(alltext)
+             msg.set_boundary(boundary)
+         # If there's a preamble, write it out, with a trailing CRLF
+         if msg.preamble is not None:
+@@ -292,7 +287,7 @@
+ _FMT = '[Non-text (%(type)s) part of message omitted, filename %(filename)s]'
+ 
+ class DecodedGenerator(Generator):
+-    """Generator a text representation of a message.
++    """Generates a text representation of a message.
+ 
+     Like the Generator base class, except that non-text parts are substituted
+     with a format string representing the part.
+--- a/Lib/argparse.py
++++ b/Lib/argparse.py
+@@ -1080,7 +1080,7 @@
+             parser = self._name_parser_map[parser_name]
+         except KeyError:
+             tup = parser_name, ', '.join(self._name_parser_map)
+-            msg = _('unknown parser %r (choices: %s)' % tup)
++            msg = _('unknown parser %r (choices: %s)') % tup
+             raise ArgumentError(self, msg)
+ 
+         # parse all the remaining options into the namespace
+@@ -1109,7 +1109,7 @@
+             the builtin open() function.
+     """
+ 
+-    def __init__(self, mode='r', bufsize=None):
++    def __init__(self, mode='r', bufsize=-1):
+         self._mode = mode
+         self._bufsize = bufsize
+ 
+@@ -1121,18 +1121,19 @@
+             elif 'w' in self._mode:
+                 return _sys.stdout
+             else:
+-                msg = _('argument "-" with mode %r' % self._mode)
++                msg = _('argument "-" with mode %r') % self._mode
+                 raise ValueError(msg)
+ 
+         # all other arguments are used as file names
+-        if self._bufsize:
++        try:
+             return open(string, self._mode, self._bufsize)
+-        else:
+-            return open(string, self._mode)
++        except IOError as e:
++            message = _("can't open '%s': %s")
++            raise ArgumentTypeError(message % (string, e))
+ 
+     def __repr__(self):
+-        args = [self._mode, self._bufsize]
+-        args_str = ', '.join([repr(arg) for arg in args if arg is not None])
++        args = self._mode, self._bufsize
++        args_str = ', '.join(repr(arg) for arg in args if arg != -1)
+         return '%s(%s)' % (type(self).__name__, args_str)
+ 
+ # ===========================
+@@ -1481,6 +1482,7 @@
+         self._defaults = container._defaults
+         self._has_negative_number_optionals = \
+             container._has_negative_number_optionals
++        self._mutually_exclusive_groups = container._mutually_exclusive_groups
+ 
+     def _add_action(self, action):
+         action = super(_ArgumentGroup, self)._add_action(action)
+--- a/Lib/httplib.py
++++ b/Lib/httplib.py
+@@ -212,6 +212,9 @@
+ # maximal amount of data to read at one time in _safe_read
+ MAXAMOUNT = 1048576
+ 
++# maximal line length when calling readline().
++_MAXLINE = 65536
++
+ class HTTPMessage(mimetools.Message):
+ 
+     def addheader(self, key, value):
+@@ -274,7 +277,9 @@
+                 except IOError:
+                     startofline = tell = None
+                     self.seekable = 0
+-            line = self.fp.readline()
++            line = self.fp.readline(_MAXLINE + 1)
++            if len(line) > _MAXLINE:
++                raise LineTooLong("header line")
+             if not line:
+                 self.status = 'EOF in headers'
+                 break
+@@ -404,7 +409,10 @@
+                 break
+             # skip the header from the 100 response
+             while True:
+-                skip = self.fp.readline().strip()
++                skip = self.fp.readline(_MAXLINE + 1)
++                if len(skip) > _MAXLINE:
++                    raise LineTooLong("header line")
++                skip = skip.strip()
+                 if not skip:
+                     break
+                 if self.debuglevel > 0:
+@@ -563,7 +571,9 @@
+         value = []
+         while True:
+             if chunk_left is None:
+-                line = self.fp.readline()
++                line = self.fp.readline(_MAXLINE + 1)
++                if len(line) > _MAXLINE:
++                    raise LineTooLong("chunk size")
+                 i = line.find(';')
+                 if i >= 0:
+                     line = line[:i] # strip chunk-extensions
+@@ -598,7 +608,9 @@
+         # read and discard trailer up to the CRLF terminator
+         ### note: we shouldn't have any trailers!
+         while True:
+-            line = self.fp.readline()
++            line = self.fp.readline(_MAXLINE + 1)
++            if len(line) > _MAXLINE:
++                raise LineTooLong("trailer line")
+             if not line:
+                 # a vanishingly small number of sites EOF without
+                 # sending the trailer
+@@ -730,7 +742,9 @@
+             raise socket.error("Tunnel connection failed: %d %s" % (code,
+                                                                     message.strip()))
+         while True:
+-            line = response.fp.readline()
++            line = response.fp.readline(_MAXLINE + 1)
++            if len(line) > _MAXLINE:
++                raise LineTooLong("header line")
+             if line == '\r\n': break
+ 
+ 
+@@ -1233,6 +1247,11 @@
+         self.args = line,
+         self.line = line
+ 
++class LineTooLong(HTTPException):
++    def __init__(self, line_type):
++        HTTPException.__init__(self, "got more than %d bytes when reading %s"
++                                     % (_MAXLINE, line_type))
++
+ # for backwards compatibility
+ error = HTTPException
+ 
+--- a/Lib/urllib2.py
++++ b/Lib/urllib2.py
+@@ -299,8 +299,9 @@
+     def __init__(self):
+         client_version = "Python-urllib/%s" % __version__
+         self.addheaders = [('User-agent', client_version)]
+-        # manage the individual handlers
++        # self.handlers is retained only for backward compatibility
+         self.handlers = []
++        # manage the individual handlers
+         self.handle_open = {}
+         self.handle_error = {}
+         self.process_response = {}
+@@ -350,8 +351,6 @@
+             added = True
+ 
+         if added:
+-            # the handlers must work in an specific order, the order
+-            # is specified in a Handler attribute
+             bisect.insort(self.handlers, handler)
+             handler.add_parent(self)
+ 
+--- a/Lib/ConfigParser.py
++++ b/Lib/ConfigParser.py
+@@ -545,6 +545,38 @@
+                 if isinstance(val, list):
+                     options[name] = '\n'.join(val)
+ 
++import UserDict as _UserDict
++
++class _Chainmap(_UserDict.DictMixin):
++    """Combine multiple mappings for successive lookups.
++
++    For example, to emulate Python's normal lookup sequence:
++
++        import __builtin__
++        pylookup = _Chainmap(locals(), globals(), vars(__builtin__))
++    """
++
++    def __init__(self, *maps):
++        self._maps = maps
++
++    def __getitem__(self, key):
++        for mapping in self._maps:
++            try:
++                return mapping[key]
++            except KeyError:
++                pass
++        raise KeyError(key)
++
++    def keys(self):
++        result = []
++        seen = set()
++        for mapping in self_maps:
++            for key in mapping:
++                if key not in seen:
++                    result.append(key)
++                    seen.add(key)
++        return result
++
+ class ConfigParser(RawConfigParser):
+ 
+     def get(self, section, option, raw=False, vars=None):
+@@ -559,16 +591,18 @@
+ 
+         The section DEFAULT is special.
+         """
+-        d = self._defaults.copy()
++        sectiondict = {}
+         try:
+-            d.update(self._sections[section])
++            sectiondict = self._sections[section]
+         except KeyError:
+             if section != DEFAULTSECT:
+                 raise NoSectionError(section)
+         # Update with the entry specific variables
++        vardict = {}
+         if vars:
+             for key, value in vars.items():
+-                d[self.optionxform(key)] = value
++                vardict[self.optionxform(key)] = value
++        d = _Chainmap(vardict, sectiondict, self._defaults)
+         option = self.optionxform(option)
+         try:
+             value = d[option]
+--- a/Lib/subprocess.py
++++ b/Lib/subprocess.py
+@@ -1051,14 +1051,17 @@
+                     errread, errwrite)
+ 
+ 
+-        def _set_cloexec_flag(self, fd):
++        def _set_cloexec_flag(self, fd, cloexec=True):
+             try:
+                 cloexec_flag = fcntl.FD_CLOEXEC
+             except AttributeError:
+                 cloexec_flag = 1
+ 
+             old = fcntl.fcntl(fd, fcntl.F_GETFD)
+-            fcntl.fcntl(fd, fcntl.F_SETFD, old | cloexec_flag)
++            if cloexec:
++                fcntl.fcntl(fd, fcntl.F_SETFD, old | cloexec_flag)
++            else:
++                fcntl.fcntl(fd, fcntl.F_SETFD, old & ~cloexec_flag)
+ 
+ 
+         def _close_fds(self, but):
+@@ -1128,21 +1131,25 @@
+                             os.close(errpipe_read)
+ 
+                             # Dup fds for child
+-                            if p2cread is not None:
+-                                os.dup2(p2cread, 0)
+-                            if c2pwrite is not None:
+-                                os.dup2(c2pwrite, 1)
+-                            if errwrite is not None:
+-                                os.dup2(errwrite, 2)
+-
+-                            # Close pipe fds.  Make sure we don't close the same
+-                            # fd more than once, or standard fds.
+-                            if p2cread is not None and p2cread not in (0,):
+-                                os.close(p2cread)
+-                            if c2pwrite is not None and c2pwrite not in (p2cread, 1):
+-                                os.close(c2pwrite)
+-                            if errwrite is not None and errwrite not in (p2cread, c2pwrite, 2):
+-                                os.close(errwrite)
++                            def _dup2(a, b):
++                                # dup2() removes the CLOEXEC flag but
++                                # we must do it ourselves if dup2()
++                                # would be a no-op (issue #10806).
++                                if a == b:
++                                    self._set_cloexec_flag(a, False)
++                                elif a is not None:
++                                    os.dup2(a, b)
++                            _dup2(p2cread, 0)
++                            _dup2(c2pwrite, 1)
++                            _dup2(errwrite, 2)
++
++                            # Close pipe fds.  Make sure we don't close the
++                            # same fd more than once, or standard fds.
++                            closed = { None }
++                            for fd in [p2cread, c2pwrite, errwrite]:
++                                if fd not in closed and fd > 2:
++                                    os.close(fd)
++                                    closed.add(fd)
+ 
+                             # Close all other fds, if asked for
+                             if close_fds:
+@@ -1194,7 +1201,11 @@
+                 os.close(errpipe_read)
+ 
+             if data != "":
+-                _eintr_retry_call(os.waitpid, self.pid, 0)
++                try:
++                    _eintr_retry_call(os.waitpid, self.pid, 0)
++                except OSError as e:
++                    if e.errno != errno.ECHILD:
++                        raise
+                 child_exception = pickle.loads(data)
+                 for fd in (p2cwrite, c2pread, errread):
+                     if fd is not None:
+@@ -1240,7 +1251,15 @@
+             """Wait for child process to terminate.  Returns returncode
+             attribute."""
+             if self.returncode is None:
+-                pid, sts = _eintr_retry_call(os.waitpid, self.pid, 0)
++                try:
++                    pid, sts = _eintr_retry_call(os.waitpid, self.pid, 0)
++                except OSError as e:
++                    if e.errno != errno.ECHILD:
++                        raise
++                    # This happens if SIGCLD is set to be ignored or waiting
++                    # for child processes has otherwise been disabled for our
++                    # process.  This child is dead, we can't get the status.
++                    sts = 0
+                 self._handle_exitstatus(sts)
+             return self.returncode
+ 
+--- a/Lib/test/test_csv.py
++++ b/Lib/test/test_csv.py
+@@ -326,22 +326,17 @@
+         expected_dialects = csv.list_dialects() + [name]
+         expected_dialects.sort()
+         csv.register_dialect(name, myexceltsv)
+-        try:
+-            self.assertTrue(csv.get_dialect(name).delimiter, '\t')
+-            got_dialects = csv.list_dialects()
+-            got_dialects.sort()
+-            self.assertEqual(expected_dialects, got_dialects)
+-        finally:
+-            csv.unregister_dialect(name)
++        self.addCleanup(csv.unregister_dialect, name)
++        self.assertEqual(csv.get_dialect(name).delimiter, '\t')
++        got_dialects = sorted(csv.list_dialects())
++        self.assertEqual(expected_dialects, got_dialects)
+ 
+     def test_register_kwargs(self):
+         name = 'fedcba'
+         csv.register_dialect(name, delimiter=';')
+-        try:
+-            self.assertTrue(csv.get_dialect(name).delimiter, '\t')
+-            self.assertTrue(list(csv.reader('X;Y;Z', name)), ['X', 'Y', 'Z'])
+-        finally:
+-            csv.unregister_dialect(name)
++        self.addCleanup(csv.unregister_dialect, name)
++        self.assertEqual(csv.get_dialect(name).delimiter, ';')
++        self.assertEqual([['X', 'Y', 'Z']], list(csv.reader(['X;Y;Z'], name)))
+ 
+     def test_incomplete_dialect(self):
+         class myexceltsv(csv.Dialect):
+--- a/Lib/test/regrtest.py
++++ b/Lib/test/regrtest.py
+@@ -28,10 +28,12 @@
+ -W/--verbose3   -- re-run failed tests in verbose mode immediately
+ -q/--quiet      -- no output unless one or more tests fail
+ -S/--slow       -- print the slowest 10 tests
++   --header     -- print header with interpreter info
+ 
+ Selecting tests
+ 
+ -r/--random     -- randomize test execution order (see below)
++   --randseed   -- pass a random seed to reproduce a previous random run
+ -f/--fromfile   -- read names of tests to run from a file (see below)
+ -x/--exclude    -- arguments are tests to *exclude*
+ -s/--single     -- single step through a set of tests (see below)
+@@ -227,7 +229,8 @@
+          exclude=False, single=False, randomize=False, fromfile=None,
+          findleaks=False, use_resources=None, trace=False, coverdir='coverage',
+          runleaks=False, huntrleaks=False, verbose2=False, print_slow=False,
+-         random_seed=None, use_mp=None, verbose3=False, forever=False):
++         random_seed=None, use_mp=None, verbose3=False, forever=False,
++         header=False):
+     """Execute a test suite.
+ 
+     This also parses command-line options and modifies its behavior
+@@ -258,7 +261,7 @@
+              'exclude', 'single', 'slow', 'random', 'fromfile', 'findleaks',
+              'use=', 'threshold=', 'trace', 'coverdir=', 'nocoverdir',
+              'runleaks', 'huntrleaks=', 'memlimit=', 'randseed=',
+-             'multiprocess=', 'slaveargs=', 'forever'])
++             'multiprocess=', 'slaveargs=', 'forever', 'header'])
+     except getopt.error, msg:
+         usage(2, msg)
+ 
+@@ -342,6 +345,8 @@
+             forever = True
+         elif o in ('-j', '--multiprocess'):
+             use_mp = int(a)
++        elif o == '--header':
++            header = True
+         elif o == '--slaveargs':
+             args, kwargs = json.loads(a)
+             try:
+@@ -415,13 +420,14 @@
+         args = []
+ 
+     # For a partial run, we do not need to clutter the output.
+-    if verbose or not (quiet or single or tests or args):
++    if verbose or header or not (quiet or single or tests or args):
+         # Print basic platform information
+         print "==", platform.python_implementation(), \
+                     " ".join(sys.version.split())
+         print "==  ", platform.platform(aliased=True), \
+                       "%s-endian" % sys.byteorder
+         print "==  ", os.getcwd()
++        print "Testing with flags:", sys.flags
+ 
+     alltests = findtests(testdir, stdtests, nottests)
+     selected = tests or args or alltests
+@@ -484,7 +490,7 @@
+         def tests_and_args():
+             for test in tests:
+                 args_tuple = (
+-                    (test, verbose, quiet, testdir),
++                    (test, verbose, quiet),
+                     dict(huntrleaks=huntrleaks, use_resources=use_resources)
+                 )
+                 yield (test, args_tuple)
+@@ -551,16 +557,15 @@
+             if trace:
+                 # If we're tracing code coverage, then we don't exit with status
+                 # if on a false return value from main.
+-                tracer.runctx('runtest(test, verbose, quiet, testdir)',
++                tracer.runctx('runtest(test, verbose, quiet)',
+                               globals=globals(), locals=vars())
+             else:
+                 try:
+-                    result = runtest(test, verbose, quiet,
+-                                     testdir, huntrleaks)
++                    result = runtest(test, verbose, quiet, huntrleaks)
+                     accumulate_result(test, result)
+                     if verbose3 and result[0] == FAILED:
+                         print "Re-running test %r in verbose mode" % test
+-                        runtest(test, True, quiet, testdir, huntrleaks)
++                        runtest(test, True, quiet, huntrleaks)
+                 except KeyboardInterrupt:
+                     interrupted = True
+                     break
+@@ -630,8 +635,7 @@
+             sys.stdout.flush()
+             try:
+                 test_support.verbose = True
+-                ok = runtest(test, True, quiet, testdir,
+-                             huntrleaks)
++                ok = runtest(test, True, quiet, huntrleaks)
+             except KeyboardInterrupt:
+                 # print a newline separate from the ^C
+                 print
+@@ -687,14 +691,13 @@
+     return stdtests + sorted(tests)
+ 
+ def runtest(test, verbose, quiet,
+-            testdir=None, huntrleaks=False, use_resources=None):
++            huntrleaks=False, use_resources=None):
+     """Run a single test.
+ 
+     test -- the name of the test
+     verbose -- if true, print more messages
+     quiet -- if true, don't print 'skipped' messages (probably redundant)
+     test_times -- a list of (time, test_name) pairs
+-    testdir -- test directory
+     huntrleaks -- run multiple times to test for leaks; requires a debug
+                   build; a triple corresponding to -R's three arguments
+     Returns one of the test result constants:
+@@ -710,8 +713,7 @@
+     if use_resources is not None:
+         test_support.use_resources = use_resources
+     try:
+-        return runtest_inner(test, verbose, quiet,
+-                             testdir, huntrleaks)
++        return runtest_inner(test, verbose, quiet, huntrleaks)
+     finally:
+         cleanup_test_droppings(test, verbose)
+ 
+@@ -844,10 +846,8 @@
+         return False
+ 
+ 
+-def runtest_inner(test, verbose, quiet,
+-                  testdir=None, huntrleaks=False):
++def runtest_inner(test, verbose, quiet, huntrleaks=False):
+     test_support.unload(test)
+-    testdir = findtestdir(testdir)
+     if verbose:
+         capture_stdout = None
+     else:
+@@ -894,16 +894,16 @@
+     except KeyboardInterrupt:
+         raise
+     except test_support.TestFailed, msg:
+-        print "test", test, "failed --", msg
+-        sys.stdout.flush()
++        print >>sys.stderr, "test", test, "failed --", msg
++        sys.stderr.flush()
+         return FAILED, test_time
+     except:
+         type, value = sys.exc_info()[:2]
+-        print "test", test, "crashed --", str(type) + ":", value
+-        sys.stdout.flush()
++        print >>sys.stderr, "test", test, "crashed --", str(type) + ":", value
++        sys.stderr.flush()
+         if verbose:
+-            traceback.print_exc(file=sys.stdout)
+-            sys.stdout.flush()
++            traceback.print_exc(file=sys.stderr)
++            sys.stderr.flush()
+         return FAILED, test_time
+     else:
+         if refleak:
+--- a/Lib/test/test_tuple.py
++++ b/Lib/test/test_tuple.py
+@@ -6,7 +6,7 @@
+     type2test = tuple
+ 
+     def test_constructors(self):
+-        super(TupleTest, self).test_len()
++        super(TupleTest, self).test_constructors()
+         # calling built-in types without argument must return empty
+         self.assertEqual(tuple(), ())
+         t0_3 = (0, 1, 2, 3)
+--- a/Lib/test/script_helper.py
++++ b/Lib/test/script_helper.py
+@@ -3,6 +3,7 @@
+ 
+ import sys
+ import os
++import re
+ import os.path
+ import tempfile
+ import subprocess
+@@ -11,6 +12,8 @@
+ import shutil
+ import zipfile
+ 
++from test.test_support import strip_python_stderr
++
+ # Executing the interpreter in a subprocess
+ def _assert_python(expected_success, *args, **env_vars):
+     cmd_line = [sys.executable]
+@@ -31,6 +34,7 @@
+         p.stdout.close()
+         p.stderr.close()
+     rc = p.returncode
++    err =  strip_python_stderr(err)
+     if (rc and expected_success) or (not rc and not expected_success):
+         raise AssertionError(
+             "Process return code is %d, "
+--- a/Lib/test/test_io.py
++++ b/Lib/test/test_io.py
+@@ -701,6 +701,13 @@
+         b.close()
+         self.assertRaises(ValueError, b.flush)
+ 
++    def test_readonly_attributes(self):
++        raw = self.MockRawIO()
++        buf = self.tp(raw)
++        x = self.MockRawIO()
++        with self.assertRaises((AttributeError, TypeError)):
++            buf.raw = x
++
+ 
+ class BufferedReaderTest(unittest.TestCase, CommonBufferedTests):
+     read_mode = "rb"
+@@ -2211,6 +2218,12 @@
+         txt.close()
+         self.assertRaises(ValueError, txt.flush)
+ 
++    def test_readonly_attributes(self):
++        txt = self.TextIOWrapper(self.BytesIO(self.testdata), encoding="ascii")
++        buf = self.BytesIO(self.testdata)
++        with self.assertRaises((AttributeError, TypeError)):
++            txt.buffer = buf
++
+ class CTextIOWrapperTest(TextIOWrapperTest):
+ 
+     def test_initialization(self):
+@@ -2561,12 +2574,50 @@
+     def test_interrupted_write_text(self):
+         self.check_interrupted_write("xy", b"xy", mode="w", encoding="ascii")
+ 
++    def check_reentrant_write(self, data, **fdopen_kwargs):
++        def on_alarm(*args):
++            # Will be called reentrantly from the same thread
++            wio.write(data)
++            1/0
++        signal.signal(signal.SIGALRM, on_alarm)
++        r, w = os.pipe()
++        wio = self.io.open(w, **fdopen_kwargs)
++        try:
++            signal.alarm(1)
++            # Either the reentrant call to wio.write() fails with RuntimeError,
++            # or the signal handler raises ZeroDivisionError.
++            with self.assertRaises((ZeroDivisionError, RuntimeError)) as cm:
++                while 1:
++                    for i in range(100):
++                        wio.write(data)
++                        wio.flush()
++                    # Make sure the buffer doesn't fill up and block further writes
++                    os.read(r, len(data) * 100)
++            exc = cm.exception
++            if isinstance(exc, RuntimeError):
++                self.assertTrue(str(exc).startswith("reentrant call"), str(exc))
++        finally:
++            wio.close()
++            os.close(r)
++
++    def test_reentrant_write_buffered(self):
++        self.check_reentrant_write(b"xy", mode="wb")
++
++    def test_reentrant_write_text(self):
++        self.check_reentrant_write("xy", mode="w", encoding="ascii")
++
++
+ class CSignalsTest(SignalsTest):
+     io = io
+ 
+ class PySignalsTest(SignalsTest):
+     io = pyio
+ 
++    # Handling reentrancy issues would slow down _pyio even more, so the
++    # tests are disabled.
++    test_reentrant_write_buffered = None
++    test_reentrant_write_text = None
++
+ 
+ def test_main():
+     tests = (CIOTest, PyIOTest,
+--- a/Lib/test/test_asyncore.py
++++ b/Lib/test/test_asyncore.py
+@@ -398,7 +398,8 @@
+ class FileWrapperTest(unittest.TestCase):
+     def setUp(self):
+         self.d = "It's not dead, it's sleeping!"
+-        file(TESTFN, 'w').write(self.d)
++        with file(TESTFN, 'w') as h:
++            h.write(self.d)
+ 
+     def tearDown(self):
+         unlink(TESTFN)
+--- /dev/null
++++ b/Lib/test/subprocessdata/sigchild_ignore.py
+@@ -0,0 +1,6 @@
++import signal, subprocess, sys
++# On Linux this causes os.waitpid to fail with OSError as the OS has already
++# reaped our child process.  The wait() passing the OSError on to the caller
++# and causing us to exit with an error is what we are testing against.
++signal.signal(signal.SIGCHLD, signal.SIG_IGN)
++subprocess.Popen([sys.executable, '-c', 'print("albatross")']).wait()
+--- a/Lib/test/test_descr.py
++++ b/Lib/test/test_descr.py
+@@ -4553,6 +4553,17 @@
+ 
+         self.assertRaises(AttributeError, getattr, EvilGetattribute(), "attr")
+ 
++    def test_abstractmethods(self):
++        # type pretends not to have __abstractmethods__.
++        self.assertRaises(AttributeError, getattr, type, "__abstractmethods__")
++        class meta(type):
++            pass
++        self.assertRaises(AttributeError, getattr, meta, "__abstractmethods__")
++        class X(object):
++            pass
++        with self.assertRaises(AttributeError):
++            del X.__abstractmethods__
++
+ 
+ class DictProxyTests(unittest.TestCase):
+     def setUp(self):
+--- a/Lib/test/test_ssl.py
++++ b/Lib/test/test_ssl.py
+@@ -297,9 +297,9 @@
+         if ssl.OPENSSL_VERSION_INFO < (0, 9, 8, 0, 15):
+             self.skipTest("SHA256 not available on %r" % ssl.OPENSSL_VERSION)
+         # NOTE: https://sha256.tbs-internet.com is another possible test host
+-        remote = ("sha2.hboeck.de", 443)
++        remote = ("sha256.tbs-internet.com", 443)
+         sha256_cert = os.path.join(os.path.dirname(__file__), "sha256.pem")
+-        with test_support.transient_internet("sha2.hboeck.de"):
++        with test_support.transient_internet("sha256.tbs-internet.com"):
+             s = ssl.wrap_socket(socket.socket(socket.AF_INET),
+                                 cert_reqs=ssl.CERT_REQUIRED,
+                                 ca_certs=sha256_cert,)
+--- a/Lib/test/test_pep277.py
++++ b/Lib/test/test_pep277.py
+@@ -5,22 +5,17 @@
+ from test import test_support
+ 
+ filenames = [
+-    'abc',
+-    u'ascii',
+-    u'Gr\xfc\xdf-Gott',
+-    u'\u0393\u03b5\u03b9\u03ac-\u03c3\u03b1\u03c2',
+-    u'\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435',
+-    u'\u306b\u307d\u3093',
+-    u'\u05d4\u05e9\u05e7\u05e6\u05e5\u05e1',
+-    u'\u66e8\u66e9\u66eb',
+-    u'\u66e8\u05e9\u3093\u0434\u0393\xdf',
++    '1_abc',
++    u'2_ascii',
++    u'3_Gr\xfc\xdf-Gott',
++    u'4_\u0393\u03b5\u03b9\u03ac-\u03c3\u03b1\u03c2',
++    u'5_\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435',
++    u'6_\u306b\u307d\u3093',
++    u'7_\u05d4\u05e9\u05e7\u05e6\u05e5\u05e1',
++    u'8_\u66e8\u66e9\u66eb',
++    u'9_\u66e8\u05e9\u3093\u0434\u0393\xdf',
+     # Specific code points: fn, NFC(fn) and NFKC(fn) all differents
+-    u'\u1fee\u1ffd',
+-    # Specific code points: NFC(fn), NFD(fn), NFKC(fn) and NFKD(fn) all differents
+-    u'\u0385\u03d3\u03d4',
+-    u'\u00a8\u0301\u03d2\u0301\u03d2\u0308',    # == NFD(u'\u0385\u03d3\u03d4')
+-    u'\u0020\u0308\u0301\u038e\u03ab',          # == NFKC(u'\u0385\u03d3\u03d4')
+-    u'\u1e9b\u1fc1\u1fcd\u1fce\u1fcf\u1fdd\u1fde\u1fdf\u1fed',
++    u'10_\u1fee\u1ffd',
+     ]
+ 
+ # Mac OS X decomposes Unicode names, using Normal Form D.
+@@ -31,13 +26,19 @@
+ # U+2FAFF are not decomposed."
+ if sys.platform != 'darwin':
+     filenames.extend([
++        # Specific code points: NFC(fn), NFD(fn), NFKC(fn) and NFKD(fn) all differents
++        u'11_\u0385\u03d3\u03d4',
++        u'12_\u00a8\u0301\u03d2\u0301\u03d2\u0308',    # == NFD(u'\u0385\u03d3\u03d4')
++        u'13_\u0020\u0308\u0301\u038e\u03ab',          # == NFKC(u'\u0385\u03d3\u03d4')
++        u'14_\u1e9b\u1fc1\u1fcd\u1fce\u1fcf\u1fdd\u1fde\u1fdf\u1fed',
++
+         # Specific code points: fn, NFC(fn) and NFKC(fn) all differents
+-        u'\u1fee\u1ffd\ufad1',
+-        u'\u2000\u2000\u2000A',
+-        u'\u2001\u2001\u2001A',
+-        u'\u2003\u2003\u2003A', # == NFC(u'\u2001\u2001\u2001A')
+-        u'\u0020\u0020\u0020A', # u'\u0020' == u' ' == NFKC(u'\u2000') ==
+-                                #   NFKC(u'\u2001') == NFKC(u'\u2003')
++        u'15_\u1fee\u1ffd\ufad1',
++        u'16_\u2000\u2000\u2000A',
++        u'17_\u2001\u2001\u2001A',
++        u'18_\u2003\u2003\u2003A', # == NFC(u'\u2001\u2001\u2001A')
++        u'19_\u0020\u0020\u0020A', # u'\u0020' == u' ' == NFKC(u'\u2000') ==
++                                   #   NFKC(u'\u2001') == NFKC(u'\u2003')
+ ])
+ 
+ 
+@@ -121,19 +122,18 @@
+             f.close()
+             os.stat(name)
+ 
++    # Skip the test on darwin, because darwin does normalize the filename to
++    # NFD (a variant of Unicode NFD form). Normalize the filename to NFC, NFKC,
++    # NFKD in Python is useless, because darwin will normalize it later and so
++    # open(), os.stat(), etc. don't raise any exception.
++    @unittest.skipIf(sys.platform == 'darwin', 'irrevelant test on Mac OS X')
+     def test_normalize(self):
+         files = set(f for f in self.files if isinstance(f, unicode))
+         others = set()
+         for nf in set(['NFC', 'NFD', 'NFKC', 'NFKD']):
+             others |= set(normalize(nf, file) for file in files)
+         others -= files
+-        if sys.platform == 'darwin':
+-            files = set(normalize('NFD', file) for file in files)
+         for name in others:
+-            if sys.platform == 'darwin' and normalize('NFD', name) in files:
+-                # Mac OS X decomposes Unicode names.  See comment above.
+-                os.stat(name)
+-                continue
+             self._apply_failure(open, name, IOError)
+             self._apply_failure(os.stat, name, OSError)
+             self._apply_failure(os.chdir, name, OSError)
+@@ -142,15 +142,15 @@
+             # listdir may append a wildcard to the filename, so dont check
+             self._apply_failure(os.listdir, name, OSError, False)
+ 
++    # Skip the test on darwin, because darwin uses a normalization different
++    # than Python NFD normalization: filenames are different even if we use
++    # Python NFD normalization.
++    @unittest.skipIf(sys.platform == 'darwin', 'irrevelant test on Mac OS X')
+     def test_listdir(self):
+         sf0 = set(self.files)
+         f1 = os.listdir(test_support.TESTFN)
+         f2 = os.listdir(unicode(test_support.TESTFN,
+                                 sys.getfilesystemencoding()))
+-        if sys.platform == 'darwin':
+-            # Mac OS X decomposes Unicode names.  See comment above.
+-            sf0 = set(normalize('NFD', unicode(f)) for f in self.files)
+-            f2 = [normalize('NFD', unicode(f)) for f in f2]
+         sf2 = set(os.path.join(unicode(test_support.TESTFN), f) for f in f2)
+         self.assertEqual(sf0, sf2)
+         self.assertEqual(len(f1), len(f2))
+--- a/Lib/test/test_site.py
++++ b/Lib/test/test_site.py
+@@ -6,9 +6,11 @@
+ """
+ import unittest
+ from test.test_support import run_unittest, TESTFN, EnvironmentVarGuard
++from test.test_support import captured_output
+ import __builtin__
+ import os
+ import sys
++import re
+ import encodings
+ import subprocess
+ import sysconfig
+@@ -94,6 +96,58 @@
+         finally:
+             pth_file.cleanup()
+ 
++    def make_pth(self, contents, pth_dir='.', pth_name=TESTFN):
++        # Create a .pth file and return its (abspath, basename).
++        pth_dir = os.path.abspath(pth_dir)
++        pth_basename = pth_name + '.pth'
++        pth_fn = os.path.join(pth_dir, pth_basename)
++        pth_file = open(pth_fn, 'w')
++        self.addCleanup(lambda: os.remove(pth_fn))
++        pth_file.write(contents)
++        pth_file.close()
++        return pth_dir, pth_basename
++
++    def test_addpackage_import_bad_syntax(self):
++        # Issue 10642
++        pth_dir, pth_fn = self.make_pth("import bad)syntax\n")
++        with captured_output("stderr") as err_out:
++            site.addpackage(pth_dir, pth_fn, set())
++        self.assertRegexpMatches(err_out.getvalue(), "line 1")
++        self.assertRegexpMatches(err_out.getvalue(),
++            re.escape(os.path.join(pth_dir, pth_fn)))
++        # XXX: the previous two should be independent checks so that the
++        # order doesn't matter.  The next three could be a single check
++        # but my regex foo isn't good enough to write it.
++        self.assertRegexpMatches(err_out.getvalue(), 'Traceback')
++        self.assertRegexpMatches(err_out.getvalue(), r'import bad\)syntax')
++        self.assertRegexpMatches(err_out.getvalue(), 'SyntaxError')
++
++    def test_addpackage_import_bad_exec(self):
++        # Issue 10642
++        pth_dir, pth_fn = self.make_pth("randompath\nimport nosuchmodule\n")
++        with captured_output("stderr") as err_out:
++            site.addpackage(pth_dir, pth_fn, set())
++        self.assertRegexpMatches(err_out.getvalue(), "line 2")
++        self.assertRegexpMatches(err_out.getvalue(),
++            re.escape(os.path.join(pth_dir, pth_fn)))
++        # XXX: ditto previous XXX comment.
++        self.assertRegexpMatches(err_out.getvalue(), 'Traceback')
++        self.assertRegexpMatches(err_out.getvalue(), 'ImportError')
++
++    @unittest.skipIf(sys.platform == "win32", "Windows does not raise an "
++                      "error for file paths containing null characters")
++    def test_addpackage_import_bad_pth_file(self):
++        # Issue 5258
++        pth_dir, pth_fn = self.make_pth("abc\x00def\n")
++        with captured_output("stderr") as err_out:
++            site.addpackage(pth_dir, pth_fn, set())
++        self.assertRegexpMatches(err_out.getvalue(), "line 1")
++        self.assertRegexpMatches(err_out.getvalue(),
++            re.escape(os.path.join(pth_dir, pth_fn)))
++        # XXX: ditto previous XXX comment.
++        self.assertRegexpMatches(err_out.getvalue(), 'Traceback')
++        self.assertRegexpMatches(err_out.getvalue(), 'TypeError')
++
+     def test_addsitedir(self):
+         # Same tests for test_addpackage since addsitedir() essentially just
+         # calls addpackage() for every .pth file in the directory
+@@ -111,13 +165,17 @@
+         usersite = site.USER_SITE
+         self.assertIn(usersite, sys.path)
+ 
++        env = os.environ.copy()
+         rc = subprocess.call([sys.executable, '-c',
+-            'import sys; sys.exit(%r in sys.path)' % usersite])
++            'import sys; sys.exit(%r in sys.path)' % usersite],
++            env=env)
+         self.assertEqual(rc, 1, "%r is not in sys.path (sys.exit returned %r)"
+                 % (usersite, rc))
+ 
++        env = os.environ.copy()
+         rc = subprocess.call([sys.executable, '-s', '-c',
+-            'import sys; sys.exit(%r in sys.path)' % usersite])
++            'import sys; sys.exit(%r in sys.path)' % usersite],
++            env=env)
+         self.assertEqual(rc, 0)
+ 
+         env = os.environ.copy()
+--- a/Lib/test/test_itertools.py
++++ b/Lib/test/test_itertools.py
+@@ -778,6 +778,11 @@
+         self.assertRaises(ValueError, islice, xrange(10), 1, 'a', 1)
+         self.assertEqual(len(list(islice(count(), 1, 10, maxsize))), 1)
+ 
++        # Issue #10323:  Less islice in a predictable state
++        c = count()
++        self.assertEqual(list(islice(c, 1, 3, 50)), [1])
++        self.assertEqual(next(c), 3)
++
+     def test_takewhile(self):
+         data = [1, 3, 5, 20, 2, 4, 6, 8]
+         underten = lambda x: x<10
+--- a/Lib/test/test_float.py
++++ b/Lib/test/test_float.py
+@@ -162,6 +162,26 @@
+         self.assertEqual((a, copysign(1.0, a)), (b, copysign(1.0, b)))
+ 
+     @requires_IEEE_754
++    def test_float_mod(self):
++        # Check behaviour of % operator for IEEE 754 special cases.
++        # In particular, check signs of zeros.
++        mod = operator.mod
++
++        self.assertEqualAndEqualSign(mod(-1.0, 1.0), 0.0)
++        self.assertEqualAndEqualSign(mod(-1e-100, 1.0), 1.0)
++        self.assertEqualAndEqualSign(mod(-0.0, 1.0), 0.0)
++        self.assertEqualAndEqualSign(mod(0.0, 1.0), 0.0)
++        self.assertEqualAndEqualSign(mod(1e-100, 1.0), 1e-100)
++        self.assertEqualAndEqualSign(mod(1.0, 1.0), 0.0)
++
++        self.assertEqualAndEqualSign(mod(-1.0, -1.0), -0.0)
++        self.assertEqualAndEqualSign(mod(-1e-100, -1.0), -1e-100)
++        self.assertEqualAndEqualSign(mod(-0.0, -1.0), -0.0)
++        self.assertEqualAndEqualSign(mod(0.0, -1.0), -0.0)
++        self.assertEqualAndEqualSign(mod(1e-100, -1.0), -1.0)
++        self.assertEqualAndEqualSign(mod(1.0, -1.0), -0.0)
++
++    @requires_IEEE_754
+     def test_float_pow(self):
+         # test builtin pow and ** operator for IEEE 754 special cases.
+         # Special cases taken from section F.9.4.4 of the C99 specification
+--- a/Lib/test/test_os.py
++++ b/Lib/test/test_os.py
+@@ -80,16 +80,18 @@
+     def test_tempnam(self):
+         if not hasattr(os, "tempnam"):
+             return
+-        warnings.filterwarnings("ignore", "tempnam", RuntimeWarning,
+-                                r"test_os$")
+-        self.check_tempfile(os.tempnam())
+-
+-        name = os.tempnam(test_support.TESTFN)
+-        self.check_tempfile(name)
+-
+-        name = os.tempnam(test_support.TESTFN, "pfx")
+-        self.assertTrue(os.path.basename(name)[:3] == "pfx")
+-        self.check_tempfile(name)
++        with warnings.catch_warnings():
++            warnings.filterwarnings("ignore", "tempnam", RuntimeWarning,
++                                    r"test_os$")
++            warnings.filterwarnings("ignore", "tempnam", DeprecationWarning)
++            self.check_tempfile(os.tempnam())
++
++            name = os.tempnam(test_support.TESTFN)
++            self.check_tempfile(name)
++
++            name = os.tempnam(test_support.TESTFN, "pfx")
++            self.assertTrue(os.path.basename(name)[:3] == "pfx")
++            self.check_tempfile(name)
+ 
+     def test_tmpfile(self):
+         if not hasattr(os, "tmpfile"):
+@@ -108,63 +110,69 @@
+         # test that a subsequent call to os.tmpfile() raises the same error. If
+         # it doesn't, assume we're on XP or below and the user running the test
+         # has administrative privileges, and proceed with the test as normal.
+-        if sys.platform == 'win32':
+-            name = '\\python_test_os_test_tmpfile.txt'
+-            if os.path.exists(name):
+-                os.remove(name)
+-            try:
+-                fp = open(name, 'w')
+-            except IOError, first:
+-                # open() failed, assert tmpfile() fails in the same way.
+-                # Although open() raises an IOError and os.tmpfile() raises an
+-                # OSError(), 'args' will be (13, 'Permission denied') in both
+-                # cases.
++        with warnings.catch_warnings():
++            warnings.filterwarnings("ignore", "tmpfile", DeprecationWarning)
++
++            if sys.platform == 'win32':
++                name = '\\python_test_os_test_tmpfile.txt'
++                if os.path.exists(name):
++                    os.remove(name)
+                 try:
+-                    fp = os.tmpfile()
+-                except OSError, second:
+-                    self.assertEqual(first.args, second.args)
++                    fp = open(name, 'w')
++                except IOError, first:
++                    # open() failed, assert tmpfile() fails in the same way.
++                    # Although open() raises an IOError and os.tmpfile() raises an
++                    # OSError(), 'args' will be (13, 'Permission denied') in both
++                    # cases.
++                    try:
++                        fp = os.tmpfile()
++                    except OSError, second:
++                        self.assertEqual(first.args, second.args)
++                    else:
++                        self.fail("expected os.tmpfile() to raise OSError")
++                    return
+                 else:
+-                    self.fail("expected os.tmpfile() to raise OSError")
+-                return
+-            else:
+-                # open() worked, therefore, tmpfile() should work.  Close our
+-                # dummy file and proceed with the test as normal.
+-                fp.close()
+-                os.remove(name)
+-
+-        fp = os.tmpfile()
+-        fp.write("foobar")
+-        fp.seek(0,0)
+-        s = fp.read()
+-        fp.close()
+-        self.assertTrue(s == "foobar")
++                    # open() worked, therefore, tmpfile() should work.  Close our
++                    # dummy file and proceed with the test as normal.
++                    fp.close()
++                    os.remove(name)
++
++            fp = os.tmpfile()
++            fp.write("foobar")
++            fp.seek(0,0)
++            s = fp.read()
++            fp.close()
++            self.assertTrue(s == "foobar")
+ 
+     def test_tmpnam(self):
+         if not hasattr(os, "tmpnam"):
+             return
+-        warnings.filterwarnings("ignore", "tmpnam", RuntimeWarning,
+-                                r"test_os$")
+-        name = os.tmpnam()
+-        if sys.platform in ("win32",):
+-            # The Windows tmpnam() seems useless.  From the MS docs:
+-            #
+-            #     The character string that tmpnam creates consists of
+-            #     the path prefix, defined by the entry P_tmpdir in the
+-            #     file STDIO.H, followed by a sequence consisting of the
+-            #     digit characters '0' through '9'; the numerical value
+-            #     of this string is in the range 1 - 65,535.  Changing the
+-            #     definitions of L_tmpnam or P_tmpdir in STDIO.H does not
+-            #     change the operation of tmpnam.
+-            #
+-            # The really bizarre part is that, at least under MSVC6,
+-            # P_tmpdir is "\\".  That is, the path returned refers to
+-            # the root of the current drive.  That's a terrible place to
+-            # put temp files, and, depending on privileges, the user
+-            # may not even be able to open a file in the root directory.
+-            self.assertFalse(os.path.exists(name),
+-                        "file already exists for temporary file")
+-        else:
+-            self.check_tempfile(name)
++        with warnings.catch_warnings():
++            warnings.filterwarnings("ignore", "tmpnam", RuntimeWarning,
++                                    r"test_os$")
++            warnings.filterwarnings("ignore", "tmpnam", DeprecationWarning)
++
++            name = os.tmpnam()
++            if sys.platform in ("win32",):
++                # The Windows tmpnam() seems useless.  From the MS docs:
++                #
++                #     The character string that tmpnam creates consists of
++                #     the path prefix, defined by the entry P_tmpdir in the
++                #     file STDIO.H, followed by a sequence consisting of the
++                #     digit characters '0' through '9'; the numerical value
++                #     of this string is in the range 1 - 65,535.  Changing the
++                #     definitions of L_tmpnam or P_tmpdir in STDIO.H does not
++                #     change the operation of tmpnam.
++                #
++                # The really bizarre part is that, at least under MSVC6,
++                # P_tmpdir is "\\".  That is, the path returned refers to
++                # the root of the current drive.  That's a terrible place to
++                # put temp files, and, depending on privileges, the user
++                # may not even be able to open a file in the root directory.
++                self.assertFalse(os.path.exists(name),
++                            "file already exists for temporary file")
++            else:
++                self.check_tempfile(name)
+ 
+ # Test attributes on return values from os.*stat* family.
+ class StatAttributeTests(unittest.TestCase):
+@@ -314,6 +322,11 @@
+                 os.utime(self.fname, (t1, t1))
+                 self.assertEqual(os.stat(self.fname).st_mtime, t1)
+ 
++            def test_large_time(self):
++                t1 = 5000000000 # some day in 2128
++                os.utime(self.fname, (t1, t1))
++                self.assertEqual(os.stat(self.fname).st_mtime, t1)
++
+         def test_1686475(self):
+             # Verify that an open file can be stat'ed
+             try:
+--- a/Lib/test/test_httplib.py
++++ b/Lib/test/test_httplib.py
+@@ -319,6 +319,35 @@
+         self.assertTrue(hasattr(resp,'fileno'),
+                 'HTTPResponse should expose a fileno attribute')
+ 
++    # Test lines overflowing the max line size (_MAXLINE in http.client)
++
++    def test_overflowing_status_line(self):
++        self.skipTest("disabled for HTTP 0.9 support")
++        body = "HTTP/1.1 200 Ok" + "k" * 65536 + "\r\n"
++        resp = httplib.HTTPResponse(FakeSocket(body))
++        self.assertRaises((httplib.LineTooLong, httplib.BadStatusLine), resp.begin)
++
++    def test_overflowing_header_line(self):
++        body = (
++            'HTTP/1.1 200 OK\r\n'
++            'X-Foo: bar' + 'r' * 65536 + '\r\n\r\n'
++        )
++        resp = httplib.HTTPResponse(FakeSocket(body))
++        self.assertRaises(httplib.LineTooLong, resp.begin)
++
++    def test_overflowing_chunked_line(self):
++        body = (
++            'HTTP/1.1 200 OK\r\n'
++            'Transfer-Encoding: chunked\r\n\r\n'
++            + '0' * 65536 + 'a\r\n'
++            'hello world\r\n'
++            '0\r\n'
++        )
++        resp = httplib.HTTPResponse(FakeSocket(body))
++        resp.begin()
++        self.assertRaises(httplib.LineTooLong, resp.read)
++
++
+ class OfflineTest(TestCase):
+     def test_responses(self):
+         self.assertEqual(httplib.responses[httplib.NOT_FOUND], "Not Found")
+--- a/Lib/test/test_abc.py
++++ b/Lib/test/test_abc.py
+@@ -70,13 +70,6 @@
+         self.assertFalse(issubclass(OldstyleClass, A))
+         self.assertFalse(issubclass(A, OldstyleClass))
+ 
+-    def test_type_has_no_abstractmethods(self):
+-        # type pretends not to have __abstractmethods__.
+-        self.assertRaises(AttributeError, getattr, type, "__abstractmethods__")
+-        class meta(type):
+-            pass
+-        self.assertRaises(AttributeError, getattr, meta, "__abstractmethods__")
+-
+     def test_isinstance_class(self):
+         class A:
+             __metaclass__ = abc.ABCMeta
+--- a/Lib/test/test_mmap.py
++++ b/Lib/test/test_mmap.py
+@@ -1,6 +1,6 @@
+-from test.test_support import TESTFN, run_unittest, import_module
++from test.test_support import TESTFN, run_unittest, import_module, unlink, requires
+ import unittest
+-import os, re, itertools, socket
++import os, re, itertools, socket, sys
+ 
+ mmap = import_module('mmap')
+ 
+@@ -326,6 +326,36 @@
+             mf.close()
+             f.close()
+ 
++    def test_length_0_offset(self):
++        # Issue #10916: test mapping of remainder of file by passing 0 for
++        # map length with an offset doesn't cause a segfault.
++        if not hasattr(os, "stat"):
++            self.skipTest("needs os.stat")
++        # NOTE: allocation granularity is currently 65536 under Win64,
++        # and therefore the minimum offset alignment.
++        with open(TESTFN, "wb") as f:
++            f.write((65536 * 2) * b'm') # Arbitrary character
++
++        with open(TESTFN, "rb") as f:
++            mf = mmap.mmap(f.fileno(), 0, offset=65536, access=mmap.ACCESS_READ)
++            try:
++                self.assertRaises(IndexError, mf.__getitem__, 80000)
++            finally:
++                mf.close()
++
++    def test_length_0_large_offset(self):
++        # Issue #10959: test mapping of a file by passing 0 for
++        # map length with a large offset doesn't cause a segfault.
++        if not hasattr(os, "stat"):
++            self.skipTest("needs os.stat")
++
++        with open(TESTFN, "wb") as f:
++            f.write(115699 * b'm') # Arbitrary character
++
++        with open(TESTFN, "w+b") as f:
++            self.assertRaises(ValueError, mmap.mmap, f.fileno(), 0,
++                              offset=2147418112)
++
+     def test_move(self):
+         # make move works everywhere (64-bit format problem earlier)
+         f = open(TESTFN, 'w+')
+@@ -597,8 +627,63 @@
+             finally:
+                 s.close()
+ 
++
++class LargeMmapTests(unittest.TestCase):
++
++    def setUp(self):
++        unlink(TESTFN)
++
++    def tearDown(self):
++        unlink(TESTFN)
++
++    def _working_largefile(self):
++        # Only run if the current filesystem supports large files.
++        f = open(TESTFN, 'wb', buffering=0)
++        try:
++            f.seek(0x80000001)
++            f.write(b'x')
++            f.flush()
++        except (IOError, OverflowError):
++            raise unittest.SkipTest("filesystem does not have largefile support")
++        finally:
++            f.close()
++            unlink(TESTFN)
++
++    def test_large_offset(self):
++        if sys.platform[:3] == 'win' or sys.platform == 'darwin':
++            requires('largefile',
++                'test requires %s bytes and a long time to run' % str(0x180000000))
++        self._working_largefile()
++        with open(TESTFN, 'wb') as f:
++            f.seek(0x14FFFFFFF)
++            f.write(b" ")
++
++        with open(TESTFN, 'rb') as f:
++            m = mmap.mmap(f.fileno(), 0, offset=0x140000000, access=mmap.ACCESS_READ)
++            try:
++                self.assertEqual(m[0xFFFFFFF], b" ")
++            finally:
++                m.close()
++
++    def test_large_filesize(self):
++        if sys.platform[:3] == 'win' or sys.platform == 'darwin':
++            requires('largefile',
++                'test requires %s bytes and a long time to run' % str(0x180000000))
++        self._working_largefile()
++        with open(TESTFN, 'wb') as f:
++            f.seek(0x17FFFFFFF)
++            f.write(b" ")
++
++        with open(TESTFN, 'rb') as f:
++            m = mmap.mmap(f.fileno(), 0x10000, access=mmap.ACCESS_READ)
++            try:
++                self.assertEqual(m.size(), 0x180000000)
++            finally:
++                m.close()
++
++
+ def test_main():
+-    run_unittest(MmapTests)
++    run_unittest(MmapTests, LargeMmapTests)
+ 
+ if __name__ == '__main__':
+     test_main()
+--- a/Lib/test/sha256.pem
++++ b/Lib/test/sha256.pem
+@@ -1,33 +1,129 @@
++# Certificate chain for https://sha256.tbs-internet.com
++ 0 s:/C=FR/postalCode=14000/ST=Calvados/L=CAEN/street=22 rue de Bretagne/O=TBS INTERNET/OU=0002 440443810/OU=sha-256 production/CN=sha256.tbs-internet.com
++   i:/C=FR/ST=Calvados/L=Caen/O=TBS INTERNET/OU=Terms and Conditions: http://www.tbs-internet.com/CA/repository/OU=TBS INTERNET CA/CN=TBS X509 CA SGC
+ -----BEGIN CERTIFICATE-----
+-MIIFxzCCA6+gAwIBAgIJALnlnf5uzTkIMA0GCSqGSIb3DQEBCwUAMEsxCzAJBgNV
+-BAYTAkRFMRcwFQYDVQQKEw5zY2hva29rZWtzLm9yZzEjMCEGCSqGSIb3DQEJARYU
+-aGFubm9Ac2Nob2tva2Vrcy5vcmcwHhcNMTAwMTI3MDAyMTI1WhcNMjAwMTI1MDAy
+-MTI1WjBLMQswCQYDVQQGEwJERTEXMBUGA1UEChMOc2Nob2tva2Vrcy5vcmcxIzAh
+-BgkqhkiG9w0BCQEWFGhhbm5vQHNjaG9rb2tla3Mub3JnMIICIjANBgkqhkiG9w0B
+-AQEFAAOCAg8AMIICCgKCAgEApJ4ODPwEooMW35dQPlBqdvcfkEvjhcsA7jmJfFqN
+-e/1T34zT44X9+KnMBSG2InacbD7eyFgjfaENFsZ87YkEBDIFZ/SHotLJZORQ8PUj
+-YoxPG4mjKN+yL2WthNcYbRyJreTbbDroNMuw6tkTSxeSXyYFQrKMCUfErVbZa/d5
+-RvfFVk+Au9dVUFhed/Stn5cv+a0ffvpyA7ygihm1kMFICbvPeI0846tmC2Ph7rM5
+-pYQyNBDOVpULODTk5Wu6jiiJJygvJWCZ1FdpsdBs5aKWHWdRhX++quGuflTTjH5d
+-qaIka4op9H7XksYphTDXmV+qHnva5jbPogwutDQcVsGBQcJaLmQqhsQK13bf4khE
+-iWJvfBLfHn8OOpY25ZwwuigJIwifNCxQeeT1FrLmyuYNhz2phPpzx065kqSUSR+A
+-Iw8DPE6e65UqMDKqZnID3dQeiQaFrHEV+Ibo0U/tD0YSBw5p33TMh0Es33IBWMac
+-m7x4hIFWdhl8W522u6qOrTswY3s8vB7blNWqMc9n7oWH8ybFf7EgKeDVtEN9AyBE
+-0WotXIEZWI+WvDbU1ACJXau9sQhYP/eerg7Zwr3iGUy4IQ5oUJibnjtcE+z8zmDN
+-pE6YcMCLJyLjXiQ3iHG9mNXzw7wPnslTbEEEukrfSlHGgW8Dm+VrNyW0JUM1bntx
+-vbMCAwEAAaOBrTCBqjAdBgNVHQ4EFgQUCedv7pDTuXtCxm4HTw9hUtrTvsowewYD
+-VR0jBHQwcoAUCedv7pDTuXtCxm4HTw9hUtrTvsqhT6RNMEsxCzAJBgNVBAYTAkRF
+-MRcwFQYDVQQKEw5zY2hva29rZWtzLm9yZzEjMCEGCSqGSIb3DQEJARYUaGFubm9A
+-c2Nob2tva2Vrcy5vcmeCCQC55Z3+bs05CDAMBgNVHRMEBTADAQH/MA0GCSqGSIb3
+-DQEBCwUAA4ICAQBHKAxA7WA/MEFjet03K8ouzEOr6Jrk2fZOuRhoDZ+9gr4FtaJB
+-P3Hh5D00kuSOvDnwsvCohxeNd1KTMAwVmVoH+NZkHERn3UXniUENlp18koI1ehlr
+-CZbXbzzE9Te9BelliSFA63q0cq0yJN1x9GyabU34XkAouCAmOqfSpKNZWZHGBHPF
+-bbYnZrHEMcsye6vKeTOcg1GqUHGrQM2WK0QaOwnCQv2RblI9VN+SeRoUJ44qTXdW
+-TwIYStsIPesacNcAQTStnHgKqIPx4zCwdx5xo8zONbXJfocqwyFqiAofvb9dN1nW
+-g1noVBcXB+oRBZW5CjFw87U88itq39i9+BWl835DWLBW2pVmx1QTLGv0RNgs/xVx
+-mWnjH4nNHvrjn6pRmqHZTk/SS0Hkl2qtDsynVxIl8EiMTfWSU3DBTuD2J/RSzuOE
+-eKtAbaoXkXE31jCl4FEZLITIZd8UkXacb9rN304tAK92L76JOAV+xOZxFRipmvx4
+-+A9qQXgLhtP4VaDajb44V/kCKPSA0Vm3apehke9Wl8dDtagfos1e6MxSu3EVLXRF
+-SP2U777V77pdMSd0f/7cerKn5FjrxW1v1FaP1oIGniMk4qQNTgA/jvvhjybsPlVA
+-jsfnhWGbh1voJa0RQcMiRMsxpw2P1KNOEu37W2eq/vFghVztZJQUmb5iNw==
++MIIGXTCCBUWgAwIBAgIRAMmag+ygSAdxZsbyzYjhuW0wDQYJKoZIhvcNAQELBQAw
++gcQxCzAJBgNVBAYTAkZSMREwDwYDVQQIEwhDYWx2YWRvczENMAsGA1UEBxMEQ2Fl
++bjEVMBMGA1UEChMMVEJTIElOVEVSTkVUMUgwRgYDVQQLEz9UZXJtcyBhbmQgQ29u
++ZGl0aW9uczogaHR0cDovL3d3dy50YnMtaW50ZXJuZXQuY29tL0NBL3JlcG9zaXRv
++cnkxGDAWBgNVBAsTD1RCUyBJTlRFUk5FVCBDQTEYMBYGA1UEAxMPVEJTIFg1MDkg
++Q0EgU0dDMB4XDTEwMDIxODAwMDAwMFoXDTEyMDIxOTIzNTk1OVowgcsxCzAJBgNV
++BAYTAkZSMQ4wDAYDVQQREwUxNDAwMDERMA8GA1UECBMIQ2FsdmFkb3MxDTALBgNV
++BAcTBENBRU4xGzAZBgNVBAkTEjIyIHJ1ZSBkZSBCcmV0YWduZTEVMBMGA1UEChMM
++VEJTIElOVEVSTkVUMRcwFQYDVQQLEw4wMDAyIDQ0MDQ0MzgxMDEbMBkGA1UECxMS
++c2hhLTI1NiBwcm9kdWN0aW9uMSAwHgYDVQQDExdzaGEyNTYudGJzLWludGVybmV0
++LmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKbuM8VT7f0nntwu
++N3F7v9KIBlhKNAxqCrziOXU5iqUt8HrQB3DtHbdmII+CpVUlwlmepsx6G+srEZ9a
++MIGAy0nxi5aLb7watkyIdPjJTMvTUBQ/+RPWzt5JtYbbY9BlJ+yci0dctP74f4NU
++ISLtlrEjUbf2gTohLrcE01TfmOF6PDEbB5PKDi38cB3NzKfizWfrOaJW6Q1C1qOJ
++y4/4jkUREX1UFUIxzx7v62VfjXSGlcjGpBX1fvtABQOSLeE0a6gciDZs1REqroFf
++5eXtqYphpTa14Z83ITXMfgg5Nze1VtMnzI9Qx4blYBw4dgQVEuIsYr7FDBOITDzc
++VEVXZx0CAwEAAaOCAj8wggI7MB8GA1UdIwQYMBaAFAdEdoWTKLx/bXjSCuv6TEvf
++2YIfMB0GA1UdDgQWBBSJKI/AYVI9RQNY0QPIqc8ej2QivTAOBgNVHQ8BAf8EBAMC
++BaAwDAYDVR0TAQH/BAIwADA0BgNVHSUELTArBggrBgEFBQcDAQYIKwYBBQUHAwIG
++CisGAQQBgjcKAwMGCWCGSAGG+EIEATBMBgNVHSAERTBDMEEGCysGAQQBgOU3AgQB
++MDIwMAYIKwYBBQUHAgEWJGh0dHBzOi8vd3d3LnRicy1pbnRlcm5ldC5jb20vQ0Ev
++Q1BTNDBtBgNVHR8EZjBkMDKgMKAuhixodHRwOi8vY3JsLnRicy1pbnRlcm5ldC5j
++b20vVEJTWDUwOUNBU0dDLmNybDAuoCygKoYoaHR0cDovL2NybC50YnMteDUwOS5j
++b20vVEJTWDUwOUNBU0dDLmNybDCBpgYIKwYBBQUHAQEEgZkwgZYwOAYIKwYBBQUH
++MAKGLGh0dHA6Ly9jcnQudGJzLWludGVybmV0LmNvbS9UQlNYNTA5Q0FTR0MuY3J0
++MDQGCCsGAQUFBzAChihodHRwOi8vY3J0LnRicy14NTA5LmNvbS9UQlNYNTA5Q0FT
++R0MuY3J0MCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC50YnMteDUwOS5jb20wPwYD
++VR0RBDgwNoIXc2hhMjU2LnRicy1pbnRlcm5ldC5jb22CG3d3dy5zaGEyNTYudGJz
++LWludGVybmV0LmNvbTANBgkqhkiG9w0BAQsFAAOCAQEAA5NL0D4QSqhErhlkdPmz
++XtiMvdGL+ZehM4coTRIpasM/Agt36Rc0NzCvnQwKE+wkngg1Gy2qe7Q0E/ziqBtB
++fZYzdVgu1zdiL4kTaf+wFKYAFGsFbyeEmXysy+CMwaNoF2vpSjCU1UD56bEnTX/W
++fxVZYxtBQUpnu2wOsm8cDZuZRv9XrYgAhGj9Tt6F0aVHSDGn59uwShG1+BVF/uju
++SCyPTTjL1oc7YElJUzR/x4mQJYvtQI8gDIDAGEOs7v3R/gKa5EMfbUQUI4C84UbI
++Yz09Jdnws/MkC/Hm1BZEqk89u7Hvfv+oHqEb0XaUo0TDfsxE0M1sMdnLb91QNQBm
++UQ==
++-----END CERTIFICATE-----
++ 1 s:/C=FR/ST=Calvados/L=Caen/O=TBS INTERNET/OU=Terms and Conditions: http://www.tbs-internet.com/CA/repository/OU=TBS INTERNET CA/CN=TBS X509 CA SGC
++   i:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root
++-----BEGIN CERTIFICATE-----
++MIIFVjCCBD6gAwIBAgIQXpDZ0ETJMV02WTx3GTnhhTANBgkqhkiG9w0BAQUFADBv
++MQswCQYDVQQGEwJTRTEUMBIGA1UEChMLQWRkVHJ1c3QgQUIxJjAkBgNVBAsTHUFk
++ZFRydXN0IEV4dGVybmFsIFRUUCBOZXR3b3JrMSIwIAYDVQQDExlBZGRUcnVzdCBF
++eHRlcm5hbCBDQSBSb290MB4XDTA1MTIwMTAwMDAwMFoXDTE5MDYyNDE5MDYzMFow
++gcQxCzAJBgNVBAYTAkZSMREwDwYDVQQIEwhDYWx2YWRvczENMAsGA1UEBxMEQ2Fl
++bjEVMBMGA1UEChMMVEJTIElOVEVSTkVUMUgwRgYDVQQLEz9UZXJtcyBhbmQgQ29u
++ZGl0aW9uczogaHR0cDovL3d3dy50YnMtaW50ZXJuZXQuY29tL0NBL3JlcG9zaXRv
++cnkxGDAWBgNVBAsTD1RCUyBJTlRFUk5FVCBDQTEYMBYGA1UEAxMPVEJTIFg1MDkg
++Q0EgU0dDMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsgOkO3f7wzN6
++rOjg45tR5vjBfzK7qmV9IBxb/QW9EEXxG+E7FNhZqQLtwGBKoSsHTnQqV75wWMk0
++9tinWvftBkSpj5sTi/8cbzJfUvTSVYh3Qxv6AVVjMMH/ruLjE6y+4PoaPs8WoYAQ
++ts5R4Z1g8c/WnTepLst2x0/Wv7GmuoQi+gXvHU6YrBiu7XkeYhzc95QdviWSJRDk
++owhb5K43qhcvjRmBfO/paGlCliDGZp8mHwrI21mwobWpVjTxZRwYO3bd4+TGcI4G
++Ie5wmHwE8F7SK1tgSqbBacKjDa93j7txKkfz/Yd2n7TGqOXiHPsJpG655vrKtnXk
++9vs1zoDeJQIDAQABo4IBljCCAZIwHQYDVR0OBBYEFAdEdoWTKLx/bXjSCuv6TEvf
++2YIfMA4GA1UdDwEB/wQEAwIBBjASBgNVHRMBAf8ECDAGAQH/AgEAMCAGA1UdJQQZ
++MBcGCisGAQQBgjcKAwMGCWCGSAGG+EIEATAYBgNVHSAEETAPMA0GCysGAQQBgOU3
++AgQBMHsGA1UdHwR0MHIwOKA2oDSGMmh0dHA6Ly9jcmwuY29tb2RvY2EuY29tL0Fk
++ZFRydXN0RXh0ZXJuYWxDQVJvb3QuY3JsMDagNKAyhjBodHRwOi8vY3JsLmNvbW9k
++by5uZXQvQWRkVHJ1c3RFeHRlcm5hbENBUm9vdC5jcmwwgYAGCCsGAQUFBwEBBHQw
++cjA4BggrBgEFBQcwAoYsaHR0cDovL2NydC5jb21vZG9jYS5jb20vQWRkVHJ1c3RV
++VE5TR0NDQS5jcnQwNgYIKwYBBQUHMAKGKmh0dHA6Ly9jcnQuY29tb2RvLm5ldC9B
++ZGRUcnVzdFVUTlNHQ0NBLmNydDARBglghkgBhvhCAQEEBAMCAgQwDQYJKoZIhvcN
++AQEFBQADggEBAK2zEzs+jcIrVK9oDkdDZNvhuBYTdCfpxfFs+OAujW0bIfJAy232
++euVsnJm6u/+OrqKudD2tad2BbejLLXhMZViaCmK7D9nrXHx4te5EP8rL19SUVqLY
++1pTnv5dhNgEgvA7n5lIzDSYs7yRLsr7HJsYPr6SeYSuZizyX1SNz7ooJ32/F3X98
++RB0Mlc/E0OyOrkQ9/y5IrnpnaSora8CnUrV5XNOg+kyCz9edCyx4D5wXYcwZPVWz
++8aDqquESrezPyjtfi4WRO4s/VD3HLZvOxzMrWAVYCDG9FxaOhF0QGuuG1F7F3GKV
++v6prNyCl016kRl2j1UT+a7gLd8fA25A4C9E=
++-----END CERTIFICATE-----
++ 2 s:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root
++   i:/C=US/ST=UT/L=Salt Lake City/O=The USERTRUST Network/OU=http://www.usertrust.com/CN=UTN - DATACorp SGC
++-----BEGIN CERTIFICATE-----
++MIIEZjCCA06gAwIBAgIQUSYKkxzif5zDpV954HKugjANBgkqhkiG9w0BAQUFADCB
++kzELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAlVUMRcwFQYDVQQHEw5TYWx0IExha2Ug
++Q2l0eTEeMBwGA1UEChMVVGhlIFVTRVJUUlVTVCBOZXR3b3JrMSEwHwYDVQQLExho
++dHRwOi8vd3d3LnVzZXJ0cnVzdC5jb20xGzAZBgNVBAMTElVUTiAtIERBVEFDb3Jw
++IFNHQzAeFw0wNTA2MDcwODA5MTBaFw0xOTA2MjQxOTA2MzBaMG8xCzAJBgNVBAYT
++AlNFMRQwEgYDVQQKEwtBZGRUcnVzdCBBQjEmMCQGA1UECxMdQWRkVHJ1c3QgRXh0
++ZXJuYWwgVFRQIE5ldHdvcmsxIjAgBgNVBAMTGUFkZFRydXN0IEV4dGVybmFsIENB
++IFJvb3QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC39xoz5vIABC05
++4E5b7R+8bA/Ntfojts7emxEzl6QpTH2Tn71KvJPtAxrjj8/lbVBa1pcplFqAsEl6
++2y6V/bjKvzc4LR4+kUGtcFbH8E8/6DKedMrIkFTpxl8PeJ2aQDwOrGGqXhSPnoeh
++alDc15pOrwWzpnGUnHGzUGAKxxOdOAeGAqjpqGkmGJCrTLBPI6s6T4TY386f4Wlv
++u9dC12tE5Met7m1BX3JacQg3s3llpFmglDf3AC8NwpJy2tA4ctsUqEXEXSp9t7TW
++xO6szRNEt8kr3UMAJfphuWlqWCMRt6czj1Z1WfXNKddGtworZbbTQm8Vsrh7++/p
++XVPVNFonAgMBAAGjgdgwgdUwHwYDVR0jBBgwFoAUUzLRs89/+uDxoF2FTpLSnkUd
++tE8wHQYDVR0OBBYEFK29mHo0tCb3+sQmVO8DveAky1QaMA4GA1UdDwEB/wQEAwIB
++BjAPBgNVHRMBAf8EBTADAQH/MBEGCWCGSAGG+EIBAQQEAwIBAjAgBgNVHSUEGTAX
++BgorBgEEAYI3CgMDBglghkgBhvhCBAEwPQYDVR0fBDYwNDAyoDCgLoYsaHR0cDov
++L2NybC51c2VydHJ1c3QuY29tL1VUTi1EQVRBQ29ycFNHQy5jcmwwDQYJKoZIhvcN
++AQEFBQADggEBAMbuUxdoFLJRIh6QWA2U/b3xcOWGLcM2MY9USEbnLQg3vGwKYOEO
++rVE04BKT6b64q7gmtOmWPSiPrmQH/uAB7MXjkesYoPF1ftsK5p+R26+udd8jkWjd
++FwBaS/9kbHDrARrQkNnHptZt9hPk/7XJ0h4qy7ElQyZ42TCbTg0evmnv3+r+LbPM
+++bDdtRTKkdSytaX7ARmjR3mfnYyVhzT4HziS2jamEfpr62vp3EV4FTkG101B5CHI
++3C+H0be/SGB1pWLLJN47YaApIKa+xWycxOkKaSLvkTr6Jq/RW0GnOuL4OAdCq8Fb
+++M5tug8EPzI0rNwEKNdwMBQmBsTkm5jVz3g=
++-----END CERTIFICATE-----
++ 3 s:/C=US/ST=UT/L=Salt Lake City/O=The USERTRUST Network/OU=http://www.usertrust.com/CN=UTN - DATACorp SGC
++   i:/C=US/ST=UT/L=Salt Lake City/O=The USERTRUST Network/OU=http://www.usertrust.com/CN=UTN - DATACorp SGC
++-----BEGIN CERTIFICATE-----
++MIIEXjCCA0agAwIBAgIQRL4Mi1AAIbQR0ypoBqmtaTANBgkqhkiG9w0BAQUFADCB
++kzELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAlVUMRcwFQYDVQQHEw5TYWx0IExha2Ug
++Q2l0eTEeMBwGA1UEChMVVGhlIFVTRVJUUlVTVCBOZXR3b3JrMSEwHwYDVQQLExho
++dHRwOi8vd3d3LnVzZXJ0cnVzdC5jb20xGzAZBgNVBAMTElVUTiAtIERBVEFDb3Jw
++IFNHQzAeFw05OTA2MjQxODU3MjFaFw0xOTA2MjQxOTA2MzBaMIGTMQswCQYDVQQG
++EwJVUzELMAkGA1UECBMCVVQxFzAVBgNVBAcTDlNhbHQgTGFrZSBDaXR5MR4wHAYD
++VQQKExVUaGUgVVNFUlRSVVNUIE5ldHdvcmsxITAfBgNVBAsTGGh0dHA6Ly93d3cu
++dXNlcnRydXN0LmNvbTEbMBkGA1UEAxMSVVROIC0gREFUQUNvcnAgU0dDMIIBIjAN
++BgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3+5YEKIrblXEjr8uRgnn4AgPLit6
++E5Qbvfa2gI5lBZMAHryv4g+OGQ0SR+ysraP6LnD43m77VkIVni5c7yPeIbkFdicZ
++D0/Ww5y0vpQZY/KmEQrrU0icvvIpOxboGqBMpsn0GFlowHDyUwDAXlCCpVZvNvlK
++4ESGoE1O1kduSUrLZ9emxAW5jh70/P/N5zbgnAVssjMiFdC04MwXwLLA9P4yPykq
++lXvY8qdOD1R8oQ2AswkDwf9c3V6aPryuvEeKaq5xyh+xKrhfQgUL7EYw0XILyulW
++bfXv33i+Ybqypa4ETLyorGkVl73v67SMvzX41MPRKA5cOp9wGDMgd8SirwIDAQAB
++o4GrMIGoMAsGA1UdDwQEAwIBxjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBRT
++MtGzz3/64PGgXYVOktKeRR20TzA9BgNVHR8ENjA0MDKgMKAuhixodHRwOi8vY3Js
++LnVzZXJ0cnVzdC5jb20vVVROLURBVEFDb3JwU0dDLmNybDAqBgNVHSUEIzAhBggr
++BgEFBQcDAQYKKwYBBAGCNwoDAwYJYIZIAYb4QgQBMA0GCSqGSIb3DQEBBQUAA4IB
++AQAnNZcAiosovcYzMB4p/OL31ZjUQLtgyr+rFywJNn9Q+kHcrpY6CiM+iVnJowft
++Gzet/Hy+UUla3joKVAgWRcKZsYfNjGjgaQPpxE6YsjuMFrMOoAyYUJuTqXAJyCyj
++j98C5OBxOvG0I3KgqgHf35g+FFCgMSa9KOlaMCZ1+XtgHI3zzVAmbQQnmt/VDUVH
++KWss5nbZqSl9Mt3JNjy9rjXxEZ4du5A/EkdOjtd+D2JzHVImOBwYSf0wdJrE5SIv
++2MCN7ZF6TACPcn9d2t0bi0Vr591pl6jFVkwPDPafepE39peC4N1xaf92P2BNPM/3
++mfnGV/TJVTl4uix5yaaIK/QI
+ -----END CERTIFICATE-----
+--- a/Lib/test/test_pdb.py
++++ b/Lib/test/test_pdb.py
+@@ -54,6 +54,108 @@
+     (Pdb) continue
+     """
+ 
++def test_pdb_breakpoint_commands():
++    """Test basic commands related to breakpoints.
++
++    >>> def test_function():
++    ...     import pdb; pdb.Pdb().set_trace()
++    ...     print(1)
++    ...     print(2)
++    ...     print(3)
++    ...     print(4)
++
++    First, need to clear bdb state that might be left over from previous tests.
++    Otherwise, the new breakpoints might get assigned different numbers.
++
++    >>> from bdb import Breakpoint
++    >>> Breakpoint.next = 1
++    >>> Breakpoint.bplist = {}
++    >>> Breakpoint.bpbynumber = [None]
++
++    Now test the breakpoint commands.  NORMALIZE_WHITESPACE is needed because
++    the breakpoint list outputs a tab for the "stop only" and "ignore next"
++    lines, which we don't want to put in here.
++
++    >>> with PdbTestInput([  # doctest: +NORMALIZE_WHITESPACE
++    ...     'break 3',
++    ...     'disable 1',
++    ...     'ignore 1 10',
++    ...     'condition 1 1 < 2',
++    ...     'break 4',
++    ...     'break 4',
++    ...     'break',
++    ...     'clear 3',
++    ...     'break',
++    ...     'condition 1',
++    ...     'enable 1',
++    ...     'clear 1',
++    ...     'commands 2',
++    ...     'print 42',
++    ...     'end',
++    ...     'continue',  # will stop at breakpoint 2 (line 4)
++    ...     'clear',     # clear all!
++    ...     'y',
++    ...     'tbreak 5',
++    ...     'continue',  # will stop at temporary breakpoint
++    ...     'break',     # make sure breakpoint is gone
++    ...     'continue',
++    ... ]):
++    ...    test_function()
++    > <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>(3)test_function()
++    -> print(1)
++    (Pdb) break 3
++    Breakpoint 1 at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:3
++    (Pdb) disable 1
++    (Pdb) ignore 1 10
++    Will ignore next 10 crossings of breakpoint 1.
++    (Pdb) condition 1 1 < 2
++    (Pdb) break 4
++    Breakpoint 2 at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:4
++    (Pdb) break 4
++    Breakpoint 3 at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:4
++    (Pdb) break
++    Num Type         Disp Enb   Where
++    1   breakpoint   keep no    at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:3
++            stop only if 1 < 2
++            ignore next 10 hits
++    2   breakpoint   keep yes   at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:4
++    3   breakpoint   keep yes   at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:4
++    (Pdb) clear 3
++    Deleted breakpoint 3
++    (Pdb) break
++    Num Type         Disp Enb   Where
++    1   breakpoint   keep no    at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:3
++            stop only if 1 < 2
++            ignore next 10 hits
++    2   breakpoint   keep yes   at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:4
++    (Pdb) condition 1
++    Breakpoint 1 is now unconditional.
++    (Pdb) enable 1
++    (Pdb) clear 1
++    Deleted breakpoint 1
++    (Pdb) commands 2
++    (com) print 42
++    (com) end
++    (Pdb) continue
++    1
++    42
++    > <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>(4)test_function()
++    -> print(2)
++    (Pdb) clear
++    Clear all breaks? y
++    (Pdb) tbreak 5
++    Breakpoint 4 at <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>:5
++    (Pdb) continue
++    2
++    Deleted breakpoint 4
++    > <doctest test.test_pdb.test_pdb_breakpoint_commands[0]>(5)test_function()
++    -> print(3)
++    (Pdb) break
++    (Pdb) continue
++    3
++    4
++    """
++
+ 
+ def test_pdb_skip_modules():
+     """This illustrates the simple case of module skipping.
+@@ -138,6 +240,14 @@
+     ...     print(3)
+     ...     print(4)
+ 
++    First, need to clear bdb state that might be left over from previous tests.
++    Otherwise, the new breakpoints might get assigned different numbers.
++
++    >>> from bdb import Breakpoint
++    >>> Breakpoint.next = 1
++    >>> Breakpoint.bplist = {}
++    >>> Breakpoint.bpbynumber = [None]
++
+     >>> with PdbTestInput([
+     ...     'next',
+     ...     'break 7',
+--- a/Lib/test/test_unicodedata.py
++++ b/Lib/test/test_unicodedata.py
+@@ -188,9 +188,22 @@
+ 
+     def test_pr29(self):
+         # http://www.unicode.org/review/pr-29.html
+-        for text in (u"\u0b47\u0300\u0b3e", u"\u1100\u0300\u1161"):
++        # See issues #1054943 and #10254.
++        composed = (u"\u0b47\u0300\u0b3e", u"\u1100\u0300\u1161",
++                    u'Li\u030dt-s\u1e73\u0301',
++                    u'\u092e\u093e\u0930\u094d\u0915 \u091c\u093c'
++                    + u'\u0941\u0915\u0947\u0930\u092c\u0930\u094d\u0917',
++                    u'\u0915\u093f\u0930\u094d\u0917\u093f\u091c\u093c'
++                    + 'u\u0938\u094d\u0924\u093e\u0928')
++        for text in composed:
+             self.assertEqual(self.db.normalize('NFC', text), text)
+ 
++    def test_issue10254(self):
++        # Crash reported in #10254
++        a = u'C\u0338' * 20  + u'C\u0327'
++        b = u'C\u0338' * 20  + u'\xC7'
++        self.assertEqual(self.db.normalize('NFC', a), b)
++
+     def test_east_asian_width(self):
+         eaw = self.db.east_asian_width
+         self.assertRaises(TypeError, eaw, 'a')
+--- a/Lib/test/test_bz2.py
++++ b/Lib/test/test_bz2.py
+@@ -85,7 +85,7 @@
+                 if not str:
+                     break
+                 text += str
+-            self.assertEqual(text, text)
++            self.assertEqual(text, self.TEXT)
+ 
+     def testRead100(self):
+         # "Test BZ2File.read(100)"
+--- a/Lib/test/test_deque.py
++++ b/Lib/test/test_deque.py
+@@ -137,6 +137,15 @@
+         m.d = d
+         self.assertRaises(RuntimeError, d.count, 3)
+ 
++        # test issue11004
++        # block advance failed after rotation aligned elements on right side of block
++        d = deque([None]*16)
++        for i in range(len(d)):
++            d.rotate(-1)
++        d.rotate(1)
++        self.assertEqual(d.count(1), 0)
++        self.assertEqual(d.count(None), 16)
++
+     def test_comparisons(self):
+         d = deque('xabc'); d.popleft()
+         for e in [d, deque('abc'), deque('ab'), deque(), list(d)]:
+--- a/Lib/test/test_memoryview.py
++++ b/Lib/test/test_memoryview.py
+@@ -9,6 +9,7 @@
+ import weakref
+ import array
+ from test import test_support
++import io
+ 
+ 
+ class AbstractMemoryTests:
+@@ -230,6 +231,16 @@
+             gc.collect()
+             self.assertTrue(wr() is None, wr())
+ 
++    def test_writable_readonly(self):
++        # Issue #10451: memoryview incorrectly exposes a readonly
++        # buffer as writable causing a segfault if using mmap
++        tp = self.ro_type
++        if tp is None:
++            return
++        b = tp(self._source)
++        m = self._view(b)
++        i = io.BytesIO(b'ZZZZ')
++        self.assertRaises(TypeError, i.readinto, m)
+ 
+ # Variations on source objects for the buffer: bytes-like objects, then arrays
+ # with itemsize > 1.
+--- a/Lib/test/test_calendar.py
++++ b/Lib/test/test_calendar.py
+@@ -394,12 +394,62 @@
+         self.check_weeks(1995, 12, (2, 7, 7, 7, 7, 1))
+ 
+ 
++class MonthRangeTestCase(unittest.TestCase):
++    def test_january(self):
++        # Tests valid lower boundary case.
++        self.assertEqual(calendar.monthrange(2004,1), (3,31))
++
++    def test_february_leap(self):
++        # Tests February during leap year.
++        self.assertEqual(calendar.monthrange(2004,2), (6,29))
++
++    def test_february_nonleap(self):
++        # Tests February in non-leap year.
++        self.assertEqual(calendar.monthrange(2010,2), (0,28))
++
++    def test_december(self):
++        # Tests valid upper boundary case.
++        self.assertEqual(calendar.monthrange(2004,12), (2,31))
++
++    def test_zeroth_month(self):
++        # Tests low invalid boundary case.
++        with self.assertRaises(calendar.IllegalMonthError):
++            calendar.monthrange(2004, 0)
++
++    def test_thirteenth_month(self):
++        # Tests high invalid boundary case.
++        with self.assertRaises(calendar.IllegalMonthError):
++            calendar.monthrange(2004, 13)
++
++class LeapdaysTestCase(unittest.TestCase):
++    def test_no_range(self):
++        # test when no range i.e. two identical years as args
++        self.assertEqual(calendar.leapdays(2010,2010), 0)
++
++    def test_no_leapdays(self):
++        # test when no leap years in range
++        self.assertEqual(calendar.leapdays(2010,2011), 0)
++
++    def test_no_leapdays_upper_boundary(self):
++        # test no leap years in range, when upper boundary is a leap year
++        self.assertEqual(calendar.leapdays(2010,2012), 0)
++
++    def test_one_leapday_lower_boundary(self):
++        # test when one leap year in range, lower boundary is leap year
++        self.assertEqual(calendar.leapdays(2012,2013), 1)
++
++    def test_several_leapyears_in_range(self):
++        self.assertEqual(calendar.leapdays(1997,2020), 5)
++
++
+ def test_main():
+     test_support.run_unittest(
+         OutputTestCase,
+         CalendarTestCase,
+         MondayTestCase,
+-        SundayTestCase
++        SundayTestCase,
++        MonthRangeTestCase,
++        LeapdaysTestCase,
+     )
+ 
+ 
+--- a/Lib/test/test_htmlparser.py
++++ b/Lib/test/test_htmlparser.py
+@@ -320,6 +320,11 @@
+             ("endtag", "p"),
+         ])
+ 
++    def test_unescape_function(self):
++        parser = HTMLParser.HTMLParser()
++        self.assertEqual(parser.unescape('&#bad;'),'&#bad;')
++        self.assertEqual(parser.unescape('&#0038;'),'&')
++
+ 
+ def test_main():
+     test_support.run_unittest(HTMLParserTestCase)
+--- a/Lib/test/test_httpservers.py
++++ b/Lib/test/test_httpservers.py
+@@ -31,7 +31,7 @@
+         # don't write log messages to stderr
+         pass
+ 
+-class SocketlessRequestHandler(BaseHTTPRequestHandler):
++class SocketlessRequestHandler(SimpleHTTPRequestHandler):
+     def __init__(self):
+         self.get_called = False
+         self.protocol_version = "HTTP/1.1"
+@@ -41,13 +41,12 @@
+         self.send_response(200)
+         self.send_header('Content-Type', 'text/html')
+         self.end_headers()
+-        self.wfile.write('<html><body>Data</body></html>\r\n')
++        self.wfile.write(b'<html><body>Data</body></html>\r\n')
+ 
+     def log_message(self, format, *args):
+         pass
+ 
+ 
+-
+ class TestServerThread(threading.Thread):
+     def __init__(self, test_object, request_handler):
+         threading.Thread.__init__(self)
+@@ -144,6 +143,13 @@
+         self.verify_get_called()
+         self.assertEqual(result[-1], '<html><body>Data</body></html>\r\n')
+ 
++    def test_request_length(self):
++        # Issue #10714: huge request lines are discarded, to avoid Denial
++        # of Service attacks.
++        result = self.send_typical_request(b'GET ' + b'x' * 65537)
++        self.assertEqual(result[0], b'HTTP/1.1 414 Request-URI Too Long\r\n')
++        self.assertFalse(self.handler.get_called)
++
+ 
+ class BaseHTTPServerTestCase(BaseTestCase):
+     class request_handler(NoLogRequestHandler, BaseHTTPRequestHandler):
+@@ -484,10 +490,34 @@
+                 (res.read(), res.getheader('Content-type'), res.status))
+         self.assertEqual(os.environ['SERVER_SOFTWARE'], signature)
+ 
++
++class SimpleHTTPRequestHandlerTestCase(unittest.TestCase):
++    """ Test url parsing """
++    def setUp(self):
++        self.translated = os.getcwd()
++        self.translated = os.path.join(self.translated, 'filename')
++        self.handler = SocketlessRequestHandler()
++
++    def test_query_arguments(self):
++        path = self.handler.translate_path('/filename')
++        self.assertEqual(path, self.translated)
++        path = self.handler.translate_path('/filename?foo=bar')
++        self.assertEqual(path, self.translated)
++        path = self.handler.translate_path('/filename?a=b&spam=eggs#zot')
++        self.assertEqual(path, self.translated)
++
++    def test_start_with_double_slash(self):
++        path = self.handler.translate_path('//filename')
++        self.assertEqual(path, self.translated)
++        path = self.handler.translate_path('//filename?foo=bar')
++        self.assertEqual(path, self.translated)
++
++
+ def test_main(verbose=None):
+     try:
+         cwd = os.getcwd()
+         test_support.run_unittest(BaseHTTPRequestHandlerTestCase,
++                                  SimpleHTTPRequestHandlerTestCase,
+                                   BaseHTTPServerTestCase,
+                                   SimpleHTTPServerTestCase,
+                                   CGIHTTPServerTestCase
+--- a/Lib/test/test_wsgiref.py
++++ b/Lib/test/test_wsgiref.py
+@@ -306,6 +306,10 @@
+         self.checkReqURI("http://127.0.0.1/spam", SCRIPT_NAME="/spam")
+         self.checkReqURI("http://127.0.0.1/spammity/spam",
+             SCRIPT_NAME="/spammity", PATH_INFO="/spam")
++        self.checkReqURI("http://127.0.0.1/spammity/spam;ham",
++            SCRIPT_NAME="/spammity", PATH_INFO="/spam;ham")
++        self.checkReqURI("http://127.0.0.1/spammity/spam;cookie=1234,5678",
++            SCRIPT_NAME="/spammity", PATH_INFO="/spam;cookie=1234,5678")
+         self.checkReqURI("http://127.0.0.1/spammity/spam?say=ni",
+             SCRIPT_NAME="/spammity", PATH_INFO="/spam",QUERY_STRING="say=ni")
+         self.checkReqURI("http://127.0.0.1/spammity/spam", 0,
+@@ -477,6 +481,11 @@
+             s('200 OK',[])(e['wsgi.url_scheme'])
+             return []
+ 
++        def trivial_app4(e,s):
++            # Simulate a response to a HEAD request
++            s('200 OK',[('Content-Length', '12345')])
++            return []
++
+         h = TestHandler()
+         h.run(trivial_app1)
+         self.assertEqual(h.stdout.getvalue(),
+@@ -493,10 +502,12 @@
+             "http")
+ 
+ 
+-
+-
+-
+-
++        h = TestHandler()
++        h.run(trivial_app4)
++        self.assertEqual(h.stdout.getvalue(),
++            b'Status: 200 OK\r\n'
++            b'Content-Length: 12345\r\n'
++            b'\r\n')
+ 
+     def testBasicErrorOutput(self):
+ 
+--- a/Lib/test/test_ttk_guionly.py
++++ b/Lib/test/test_ttk_guionly.py
+@@ -29,8 +29,12 @@
+             test_support.use_resources.append('gui')
+ 
+     with test_support.DirsOnSysPath(lib_tk_test):
+-        test_support.run_unittest(
+-            *runtktests.get_tests(text=False, packages=['test_ttk']))
++        from test_ttk.support import get_tk_root
++        try:
++            test_support.run_unittest(
++                *runtktests.get_tests(text=False, packages=['test_ttk']))
++        finally:
++            get_tk_root().destroy()
+ 
+ if __name__ == '__main__':
+     test_main(enable_gui=True)
+--- a/Lib/test/test_normalization.py
++++ b/Lib/test/test_normalization.py
+@@ -53,9 +53,6 @@
+             if line.startswith("@Part"):
+                 part = line.split()[0]
+                 continue
+-            if part == "@Part3":
+-                # XXX we don't support PRI #29 yet, so skip these tests for now
+-                continue
+             try:
+                 c1,c2,c3,c4,c5 = [unistr(x) for x in line.split(';')[:-1]]
+             except RangeError:
+--- a/Lib/test/test_subprocess.py
++++ b/Lib/test/test_subprocess.py
+@@ -778,6 +778,68 @@
+         self.assertStderrEqual(stderr, '')
+         self.assertEqual(p.wait(), -signal.SIGTERM)
+ 
++    def check_close_std_fds(self, fds):
++        # Issue #9905: test that subprocess pipes still work properly with
++        # some standard fds closed
++        stdin = 0
++        newfds = []
++        for a in fds:
++            b = os.dup(a)
++            newfds.append(b)
++            if a == 0:
++                stdin = b
++        try:
++            for fd in fds:
++                os.close(fd)
++            out, err = subprocess.Popen([sys.executable, "-c",
++                              'import sys;'
++                              'sys.stdout.write("apple");'
++                              'sys.stdout.flush();'
++                              'sys.stderr.write("orange")'],
++                       stdin=stdin,
++                       stdout=subprocess.PIPE,
++                       stderr=subprocess.PIPE).communicate()
++            err = test_support.strip_python_stderr(err)
++            self.assertEqual((out, err), (b'apple', b'orange'))
++        finally:
++            for b, a in zip(newfds, fds):
++                os.dup2(b, a)
++            for b in newfds:
++                os.close(b)
++
++    def test_close_fd_0(self):
++        self.check_close_std_fds([0])
++
++    def test_close_fd_1(self):
++        self.check_close_std_fds([1])
++
++    def test_close_fd_2(self):
++        self.check_close_std_fds([2])
++
++    def test_close_fds_0_1(self):
++        self.check_close_std_fds([0, 1])
++
++    def test_close_fds_0_2(self):
++        self.check_close_std_fds([0, 2])
++
++    def test_close_fds_1_2(self):
++        self.check_close_std_fds([1, 2])
++
++    def test_close_fds_0_1_2(self):
++        # Issue #10806: test that subprocess pipes still work properly with
++        # all standard fds closed.
++        self.check_close_std_fds([0, 1, 2])
++
++    def test_wait_when_sigchild_ignored(self):
++        # NOTE: sigchild_ignore.py may not be an effective test on all OSes.
++        sigchild_ignore = test_support.findfile("sigchild_ignore.py",
++                                                subdir="subprocessdata")
++        p = subprocess.Popen([sys.executable, sigchild_ignore],
++                             stdout=subprocess.PIPE, stderr=subprocess.PIPE)
++        stdout, stderr = p.communicate()
++        self.assertEqual(0, p.returncode, "sigchild_ignore.py exited"
++                         " non-zero with this error:\n%s" % stderr)
++
+ 
+ @unittest.skipUnless(mswindows, "Windows specific tests")
+ class Win32ProcessTestCase(BaseTestCase):
+--- a/Lib/test/test_import.py
++++ b/Lib/test/test_import.py
+@@ -8,7 +8,8 @@
+ import unittest
+ from test.test_support import (unlink, TESTFN, unload, run_unittest, rmtree,
+                                is_jython, check_warnings, EnvironmentVarGuard)
+-
++import textwrap
++from test import script_helper
+ 
+ def remove_files(name):
+     for f in (name + os.extsep + "py",
+@@ -253,6 +254,17 @@
+         self.assertEqual("Import by filename is not supported.",
+                          c.exception.args[0])
+ 
++    def test_import_in_del_does_not_crash(self):
++        # Issue 4236
++        testfn = script_helper.make_script('', TESTFN, textwrap.dedent("""\
++            import sys
++            class C:
++               def __del__(self):
++                  import imp
++            sys.argv.insert(0, C())
++            """))
++        script_helper.assert_python_ok(testfn)
++
+ 
+ class PycRewritingTests(unittest.TestCase):
+     # Test that the `co_filename` attribute on code objects always points
+--- a/Lib/test/test_netrc.py
++++ b/Lib/test/test_netrc.py
+@@ -3,7 +3,13 @@
+ from test import test_support
+ 
+ TEST_NETRC = """
++
++ #this is a comment
++#this is a comment
++# this is a comment
++
+ machine foo login log1 password pass1 account acct1
++machine bar login log1 password pass# account acct1
+ 
+ macdef macro1
+ line1
+@@ -28,18 +34,21 @@
+         fp = open(temp_filename, mode)
+         fp.write(TEST_NETRC)
+         fp.close()
+-        self.netrc = netrc.netrc(temp_filename)
++        self.nrc = netrc.netrc(temp_filename)
+ 
+     def tearDown (self):
+-        del self.netrc
+         os.unlink(temp_filename)
+ 
+     def test_case_1(self):
+-        self.assertTrue(self.netrc.macros == {'macro1':['line1\n', 'line2\n'],
+-                                           'macro2':['line3\n', 'line4\n']}
+-                                           )
+-        self.assertTrue(self.netrc.hosts['foo'] == ('log1', 'acct1', 'pass1'))
+-        self.assertTrue(self.netrc.hosts['default'] == ('log2', None, 'pass2'))
++        self.assertEqual(self.nrc.hosts['foo'], ('log1', 'acct1', 'pass1'))
++        self.assertEqual(self.nrc.hosts['default'], ('log2', None, 'pass2'))
++
++    def test_macros(self):
++        self.assertEqual(self.nrc.macros, {'macro1':['line1\n', 'line2\n'],
++                                           'macro2':['line3\n', 'line4\n']})
++
++    def test_parses_passwords_with_hash_character(self):
++        self.assertEqual(self.nrc.hosts['bar'], ('log1', 'acct1', 'pass#'))
+ 
+ def test_main():
+     test_support.run_unittest(NetrcTestCase)
+--- a/Lib/test/test_gettext.py
++++ b/Lib/test/test_gettext.py
+@@ -64,15 +64,13 @@
+     def setUp(self):
+         if not os.path.isdir(LOCALEDIR):
+             os.makedirs(LOCALEDIR)
+-        fp = open(MOFILE, 'wb')
+-        fp.write(base64.decodestring(GNU_MO_DATA))
+-        fp.close()
+-        fp = open(UMOFILE, 'wb')
+-        fp.write(base64.decodestring(UMO_DATA))
+-        fp.close()
+-        fp = open(MMOFILE, 'wb')
+-        fp.write(base64.decodestring(MMO_DATA))
+-        fp.close()
++        with open(MOFILE, 'wb') as fp:
++            fp.write(base64.decodestring(GNU_MO_DATA))
++        with open(UMOFILE, 'wb') as fp:
++            fp.write(base64.decodestring(UMO_DATA))
++        with open(MMOFILE, 'wb') as fp:
++            fp.write(base64.decodestring(MMO_DATA))
++
+         self.env = test_support.EnvironmentVarGuard()
+         self.env['LANGUAGE'] = 'xx'
+         gettext._translations.clear()
+@@ -135,9 +133,8 @@
+     def test_the_alternative_interface(self):
+         eq = self.assertEqual
+         # test the alternative interface
+-        fp = open(self.mofile, 'rb')
+-        t = gettext.GNUTranslations(fp)
+-        fp.close()
++        with open(self.mofile, 'rb') as fp:
++            t = gettext.GNUTranslations(fp)
+         # Install the translation object
+         t.install()
+         eq(_('nudge nudge'), 'wink wink')
+@@ -227,9 +224,8 @@
+ 
+     def test_plural_forms2(self):
+         eq = self.assertEqual
+-        fp = open(self.mofile, 'rb')
+-        t = gettext.GNUTranslations(fp)
+-        fp.close()
++        with open(self.mofile, 'rb') as fp:
++            t = gettext.GNUTranslations(fp)
+         x = t.ngettext('There is %s file', 'There are %s files', 1)
+         eq(x, 'Hay %s fichero')
+         x = t.ngettext('There is %s file', 'There are %s files', 2)
+@@ -299,11 +295,8 @@
+ class UnicodeTranslationsTest(GettextBaseTest):
+     def setUp(self):
+         GettextBaseTest.setUp(self)
+-        fp = open(UMOFILE, 'rb')
+-        try:
++        with open(UMOFILE, 'rb') as fp:
+             self.t = gettext.GNUTranslations(fp)
+-        finally:
+-            fp.close()
+         self._ = self.t.ugettext
+ 
+     def test_unicode_msgid(self):
+@@ -319,15 +312,12 @@
+ class WeirdMetadataTest(GettextBaseTest):
+     def setUp(self):
+         GettextBaseTest.setUp(self)
+-        fp = open(MMOFILE, 'rb')
+-        try:
++        with open(MMOFILE, 'rb') as fp:
+             try:
+                 self.t = gettext.GNUTranslations(fp)
+             except:
+                 self.tearDown()
+                 raise
+-        finally:
+-            fp.close()
+ 
+     def test_weird_metadata(self):
+         info = self.t.info()
+--- a/Lib/test/test_time.py
++++ b/Lib/test/test_time.py
+@@ -114,10 +114,20 @@
+     def test_asctime(self):
+         time.asctime(time.gmtime(self.t))
+         self.assertRaises(TypeError, time.asctime, 0)
++        self.assertRaises(TypeError, time.asctime, ())
++        # XXX: Posix compiant asctime should refuse to convert
++        # year > 9999, but Linux implementation does not.
++        # self.assertRaises(ValueError, time.asctime,
++        #                  (12345, 1, 0, 0, 0, 0, 0, 0, 0))
++        # XXX: For now, just make sure we don't have a crash:
++        try:
++            time.asctime((12345, 1, 1, 0, 0, 0, 0, 1, 0))
++        except ValueError:
++            pass
+ 
++    @unittest.skipIf(not hasattr(time, "tzset"),
++        "time module has no attribute tzset")
+     def test_tzset(self):
+-        if not hasattr(time, "tzset"):
+-            return # Can't test this; don't want the test suite to fail
+ 
+         from os import environ
+ 
+@@ -213,6 +223,17 @@
+         t1 = time.mktime(lt1)
+         self.assertTrue(0 <= (t1-t0) < 0.2)
+ 
++    def test_mktime(self):
++        # Issue #1726687
++        for t in (-2, -1, 0, 1):
++            try:
++                tt = time.localtime(t)
++            except (OverflowError, ValueError):
++                pass
++            else:
++                self.assertEqual(time.mktime(tt), t)
++
++
+ def test_main():
+     test_support.run_unittest(TimeTestCase)
+ 
+--- a/Lib/test/test_posix.py
++++ b/Lib/test/test_posix.py
+@@ -38,11 +38,13 @@
+                              "getpid", "getpgrp", "getppid", "getuid",
+                            ]
+ 
+-        for name in NO_ARG_FUNCTIONS:
+-            posix_func = getattr(posix, name, None)
+-            if posix_func is not None:
+-                posix_func()
+-                self.assertRaises(TypeError, posix_func, 1)
++        with warnings.catch_warnings():
++            warnings.filterwarnings("ignore", "", DeprecationWarning)
++            for name in NO_ARG_FUNCTIONS:
++                posix_func = getattr(posix, name, None)
++                if posix_func is not None:
++                    posix_func()
++                    self.assertRaises(TypeError, posix_func, 1)
+ 
+     if hasattr(posix, 'getresuid'):
+         def test_getresuid(self):
+@@ -290,14 +292,18 @@
+ 
+     def test_tempnam(self):
+         if hasattr(posix, 'tempnam'):
+-            self.assertTrue(posix.tempnam())
+-            self.assertTrue(posix.tempnam(os.curdir))
+-            self.assertTrue(posix.tempnam(os.curdir, 'blah'))
++            with warnings.catch_warnings():
++                warnings.filterwarnings("ignore", "tempnam", DeprecationWarning)
++                self.assertTrue(posix.tempnam())
++                self.assertTrue(posix.tempnam(os.curdir))
++                self.assertTrue(posix.tempnam(os.curdir, 'blah'))
+ 
+     def test_tmpfile(self):
+         if hasattr(posix, 'tmpfile'):
+-            fp = posix.tmpfile()
+-            fp.close()
++            with warnings.catch_warnings():
++                warnings.filterwarnings("ignore", "tmpfile", DeprecationWarning)
++                fp = posix.tmpfile()
++                fp.close()
+ 
+     def test_utime(self):
+         if hasattr(posix, 'utime'):
+@@ -364,6 +370,7 @@
+                 os.chdir(curdir)
+                 shutil.rmtree(base_path)
+ 
++    @unittest.skipUnless(hasattr(os, 'getegid'), "test needs os.getegid()")
+     def test_getgroups(self):
+         with os.popen('id -G') as idg:
+             groups = idg.read().strip()
+@@ -373,9 +380,11 @@
+ 
+         # 'id -G' and 'os.getgroups()' should return the same
+         # groups, ignoring order and duplicates.
++        # #10822 - it is implementation defined whether posix.getgroups()
++        # includes the effective gid so we include it anyway, since id -G does
+         self.assertEqual(
+                 set([int(x) for x in groups.split()]),
+-                set(posix.getgroups()))
++                set(posix.getgroups() + [posix.getegid()]))
+ 
+ class PosixGroupsTester(unittest.TestCase):
+ 
+--- a/Lib/test/test_argparse.py
++++ b/Lib/test/test_argparse.py
+@@ -4,6 +4,7 @@
+ import inspect
+ import os
+ import shutil
++import stat
+ import sys
+ import textwrap
+ import tempfile
+@@ -46,14 +47,13 @@
+ 
+     def tearDown(self):
+         os.chdir(self.old_dir)
+-        while True:
+-            try:
+-                shutil.rmtree(self.temp_dir)
+-            except WindowsError:
+-                continue
+-            else:
+-                break
++        shutil.rmtree(self.temp_dir, True)
+ 
++    def create_readonly_file(self, filename):
++        file_path = os.path.join(self.temp_dir, filename)
++        with open(file_path, 'w') as file:
++            file.write(filename)
++        os.chmod(file_path, stat.S_IREAD)
+ 
+ class Sig(object):
+ 
+@@ -1451,17 +1451,19 @@
+             file = open(os.path.join(self.temp_dir, file_name), 'w')
+             file.write(file_name)
+             file.close()
++        self.create_readonly_file('readonly')
+ 
+     argument_signatures = [
+         Sig('-x', type=argparse.FileType()),
+         Sig('spam', type=argparse.FileType('r')),
+     ]
+-    failures = ['-x', '-x bar']
++    failures = ['-x', '-x bar', 'non-existent-file.txt']
+     successes = [
+         ('foo', NS(x=None, spam=RFile('foo'))),
+         ('-x foo bar', NS(x=RFile('foo'), spam=RFile('bar'))),
+         ('bar -x foo', NS(x=RFile('foo'), spam=RFile('bar'))),
+         ('-x - -', NS(x=sys.stdin, spam=sys.stdin)),
++        ('readonly', NS(x=None, spam=RFile('readonly'))),
+     ]
+ 
+ 
+@@ -1510,11 +1512,16 @@
+ class TestFileTypeW(TempDirMixin, ParserTestCase):
+     """Test the FileType option/argument type for writing files"""
+ 
++    def setUp(self):
++        super(TestFileTypeW, self).setUp()
++        self.create_readonly_file('readonly')
++
+     argument_signatures = [
+         Sig('-x', type=argparse.FileType('w')),
+         Sig('spam', type=argparse.FileType('w')),
+     ]
+     failures = ['-x', '-x bar']
++    failures = ['-x', '-x bar', 'readonly']
+     successes = [
+         ('foo', NS(x=None, spam=WFile('foo'))),
+         ('-x foo bar', NS(x=WFile('foo'), spam=WFile('bar'))),
+@@ -2498,6 +2505,46 @@
+         '''
+ 
+ 
++class TestMutuallyExclusiveInGroup(MEMixin, TestCase):
++
++    def get_parser(self, required=None):
++        parser = ErrorRaisingArgumentParser(prog='PROG')
++        titled_group = parser.add_argument_group(
++            title='Titled group', description='Group description')
++        mutex_group = \
++            titled_group.add_mutually_exclusive_group(required=required)
++        mutex_group.add_argument('--bar', help='bar help')
++        mutex_group.add_argument('--baz', help='baz help')
++        return parser
++
++    failures = ['--bar X --baz Y', '--baz X --bar Y']
++    successes = [
++        ('--bar X', NS(bar='X', baz=None)),
++        ('--baz Y', NS(bar=None, baz='Y')),
++    ]
++    successes_when_not_required = [
++        ('', NS(bar=None, baz=None)),
++    ]
++
++    usage_when_not_required = '''\
++        usage: PROG [-h] [--bar BAR | --baz BAZ]
++        '''
++    usage_when_required = '''\
++        usage: PROG [-h] (--bar BAR | --baz BAZ)
++        '''
++    help = '''\
++
++        optional arguments:
++          -h, --help  show this help message and exit
++
++        Titled group:
++          Group description
++
++          --bar BAR   bar help
++          --baz BAZ   baz help
++        '''
++
++
+ class TestMutuallyExclusiveOptionalsAndPositionalsMixed(MEMixin, TestCase):
+ 
+     def get_parser(self, required):
+@@ -4270,7 +4317,7 @@
+ # ArgumentTypeError tests
+ # =======================
+ 
+-class TestArgumentError(TestCase):
++class TestArgumentTypeError(TestCase):
+ 
+     def test_argument_type_error(self):
+ 
+--- a/Lib/test/test_grp.py
++++ b/Lib/test/test_grp.py
+@@ -33,12 +33,16 @@
+             e2 = grp.getgrgid(e.gr_gid)
+             self.check_value(e2)
+             self.assertEqual(e2.gr_gid, e.gr_gid)
+-            e2 = grp.getgrnam(e.gr_name)
++            name = e.gr_name
++            if name.startswith('+') or name.startswith('-'):
++                # NIS-related entry
++                continue
++            e2 = grp.getgrnam(name)
+             self.check_value(e2)
+             # There are instances where getgrall() returns group names in
+             # lowercase while getgrgid() returns proper casing.
+             # Discovered on Ubuntu 5.04 (custom).
+-            self.assertEqual(e2.gr_name.lower(), e.gr_name.lower())
++            self.assertEqual(e2.gr_name.lower(), name.lower())
+ 
+     def test_errors(self):
+         self.assertRaises(TypeError, grp.getgrgid)
+--- a/Lib/test/test_urlparse.py
++++ b/Lib/test/test_urlparse.py
+@@ -295,6 +295,9 @@
+         #self.checkJoin(RFC3986_BASE, 'http:g','http:g') # strict parser
+         self.checkJoin(RFC3986_BASE, 'http:g','http://a/b/c/g') # relaxed parser
+ 
++        # Test for issue9721
++        self.checkJoin('http://a/b/c/de', ';x','http://a/b/c/;x')
++
+     def test_urljoins(self):
+         self.checkJoin(SIMPLE_BASE, 'g:h','g:h')
+         self.checkJoin(SIMPLE_BASE, 'http:g','http://a/b/c/g')
+--- a/Lib/test/test_zipfile.py
++++ b/Lib/test/test_zipfile.py
+@@ -956,7 +956,7 @@
+         zipf.close()
+         try:
+             zipf = zipfile.ZipFile(TESTFN, mode="r")
+-        except zipfile.BadZipFile:
++        except zipfile.BadZipfile:
+             self.fail("Unable to create empty ZIP file in 'w' mode")
+ 
+         zipf = zipfile.ZipFile(TESTFN, mode="a")
+--- a/Lib/test/test_cookie.py
++++ b/Lib/test/test_cookie.py
+@@ -72,6 +72,14 @@
+         self.assertEqual(C['Customer']['expires'],
+                          'Wed, 01-Jan-98 00:00:00 GMT')
+ 
++    def test_extended_encode(self):
++        # Issue 9824: some browsers don't follow the standard; we now
++        # encode , and ; to keep them from tripping up.
++        C = Cookie.SimpleCookie()
++        C['val'] = "some,funky;stuff"
++        self.assertEqual(C.output(['val']),
++            'Set-Cookie: val="some\\054funky\\073stuff"')
++
+     def test_quoted_meta(self):
+         # Try cookie with quoted meta-data
+         C = Cookie.SimpleCookie()
+--- a/Lib/test/test_urllib2.py
++++ b/Lib/test/test_urllib2.py
+@@ -748,7 +748,7 @@
+             else:
+                 self.assertTrue(o.req is req)
+                 self.assertEqual(req.type, "ftp")
+-            self.assertEqual(req.type is "ftp", ftp)
++            self.assertEqual(req.type == "ftp", ftp)
+ 
+     def test_http(self):
+ 
+--- a/Lib/test/test_threading.py
++++ b/Lib/test/test_threading.py
+@@ -10,6 +10,8 @@
+ import time
+ import unittest
+ import weakref
++import os
++import subprocess
+ 
+ from test import lock_tests
+ 
+@@ -275,7 +277,6 @@
+                 print("test_finalize_with_runnning_thread can't import ctypes")
+             return  # can't do anything
+ 
+-        import subprocess
+         rc = subprocess.call([sys.executable, "-c", """if 1:
+             import ctypes, sys, time, thread
+ 
+@@ -306,7 +307,6 @@
+     def test_finalize_with_trace(self):
+         # Issue1733757
+         # Avoid a deadlock when sys.settrace steps into threading._shutdown
+-        import subprocess
+         p = subprocess.Popen([sys.executable, "-c", """if 1:
+             import sys, threading
+ 
+@@ -341,7 +341,6 @@
+     def test_join_nondaemon_on_shutdown(self):
+         # Issue 1722344
+         # Raising SystemExit skipped threading._shutdown
+-        import subprocess
+         p = subprocess.Popen([sys.executable, "-c", """if 1:
+                 import threading
+                 from time import sleep
+@@ -428,7 +427,6 @@
+                 print 'end of thread'
+         \n""" + script
+ 
+-        import subprocess
+         p = subprocess.Popen([sys.executable, "-c", script], stdout=subprocess.PIPE)
+         rc = p.wait()
+         data = p.stdout.read().replace('\r', '')
+@@ -500,6 +498,152 @@
+             """
+         self._run_and_join(script)
+ 
++    def assertScriptHasOutput(self, script, expected_output):
++        p = subprocess.Popen([sys.executable, "-c", script],
++                             stdout=subprocess.PIPE)
++        rc = p.wait()
++        data = p.stdout.read().decode().replace('\r', '')
++        self.assertEqual(rc, 0, "Unexpected error")
++        self.assertEqual(data, expected_output)
++
++    @unittest.skipUnless(hasattr(os, 'fork'), "needs os.fork()")
++    def test_4_joining_across_fork_in_worker_thread(self):
++        # There used to be a possible deadlock when forking from a child
++        # thread.  See http://bugs.python.org/issue6643.
++
++        # Skip platforms with known problems forking from a worker thread.
++        # See http://bugs.python.org/issue3863.
++        if sys.platform in ('freebsd4', 'freebsd5', 'freebsd6', 'os2emx'):
++            raise unittest.SkipTest('due to known OS bugs on ' + sys.platform)
++
++        # The script takes the following steps:
++        # - The main thread in the parent process starts a new thread and then
++        #   tries to join it.
++        # - The join operation acquires the Lock inside the thread's _block
++        #   Condition.  (See threading.py:Thread.join().)
++        # - We stub out the acquire method on the condition to force it to wait
++        #   until the child thread forks.  (See LOCK ACQUIRED HERE)
++        # - The child thread forks.  (See LOCK HELD and WORKER THREAD FORKS
++        #   HERE)
++        # - The main thread of the parent process enters Condition.wait(),
++        #   which releases the lock on the child thread.
++        # - The child process returns.  Without the necessary fix, when the
++        #   main thread of the child process (which used to be the child thread
++        #   in the parent process) attempts to exit, it will try to acquire the
++        #   lock in the Thread._block Condition object and hang, because the
++        #   lock was held across the fork.
++
++        script = """if 1:
++            import os, time, threading
++
++            finish_join = False
++            start_fork = False
++
++            def worker():
++                # Wait until this thread's lock is acquired before forking to
++                # create the deadlock.
++                global finish_join
++                while not start_fork:
++                    time.sleep(0.01)
++                # LOCK HELD: Main thread holds lock across this call.
++                childpid = os.fork()
++                finish_join = True
++                if childpid != 0:
++                    # Parent process just waits for child.
++                    os.waitpid(childpid, 0)
++                # Child process should just return.
++
++            w = threading.Thread(target=worker)
++
++            # Stub out the private condition variable's lock acquire method.
++            # This acquires the lock and then waits until the child has forked
++            # before returning, which will release the lock soon after.  If
++            # someone else tries to fix this test case by acquiring this lock
++            # before forking instead of reseting it, the test case will
++            # deadlock when it shouldn't.
++            condition = w._block
++            orig_acquire = condition.acquire
++            call_count_lock = threading.Lock()
++            call_count = 0
++            def my_acquire():
++                global call_count
++                global start_fork
++                orig_acquire()  # LOCK ACQUIRED HERE
++                start_fork = True
++                if call_count == 0:
++                    while not finish_join:
++                        time.sleep(0.01)  # WORKER THREAD FORKS HERE
++                with call_count_lock:
++                    call_count += 1
++            condition.acquire = my_acquire
++
++            w.start()
++            w.join()
++            print('end of main')
++            """
++        self.assertScriptHasOutput(script, "end of main\n")
++
++    @unittest.skipUnless(hasattr(os, 'fork'), "needs os.fork()")
++    def test_5_clear_waiter_locks_to_avoid_crash(self):
++        # Check that a spawned thread that forks doesn't segfault on certain
++        # platforms, namely OS X.  This used to happen if there was a waiter
++        # lock in the thread's condition variable's waiters list.  Even though
++        # we know the lock will be held across the fork, it is not safe to
++        # release locks held across forks on all platforms, so releasing the
++        # waiter lock caused a segfault on OS X.  Furthermore, since locks on
++        # OS X are (as of this writing) implemented with a mutex + condition
++        # variable instead of a semaphore, while we know that the Python-level
++        # lock will be acquired, we can't know if the internal mutex will be
++        # acquired at the time of the fork.
++
++        # Skip platforms with known problems forking from a worker thread.
++        # See http://bugs.python.org/issue3863.
++        if sys.platform in ('freebsd4', 'freebsd5', 'freebsd6', 'os2emx'):
++            raise unittest.SkipTest('due to known OS bugs on ' + sys.platform)
++        script = """if True:
++            import os, time, threading
++
++            start_fork = False
++
++            def worker():
++                # Wait until the main thread has attempted to join this thread
++                # before continuing.
++                while not start_fork:
++                    time.sleep(0.01)
++                childpid = os.fork()
++                if childpid != 0:
++                    # Parent process just waits for child.
++                    (cpid, rc) = os.waitpid(childpid, 0)
++                    assert cpid == childpid
++                    assert rc == 0
++                    print('end of worker thread')
++                else:
++                    # Child process should just return.
++                    pass
++
++            w = threading.Thread(target=worker)
++
++            # Stub out the private condition variable's _release_save method.
++            # This releases the condition's lock and flips the global that
++            # causes the worker to fork.  At this point, the problematic waiter
++            # lock has been acquired once by the waiter and has been put onto
++            # the waiters list.
++            condition = w._block
++            orig_release_save = condition._release_save
++            def my_release_save():
++                global start_fork
++                orig_release_save()
++                # Waiter lock held here, condition lock released.
++                start_fork = True
++            condition._release_save = my_release_save
++
++            w.start()
++            w.join()
++            print('end of main thread')
++            """
++        output = "end of worker thread\nend of main thread\n"
++        self.assertScriptHasOutput(script, output)
++
+ 
+ class ThreadingExceptionTests(BaseTestCase):
+     # A RuntimeError should be raised if Thread.start() is called
+--- a/Lib/test/test_support.py
++++ b/Lib/test/test_support.py
+@@ -757,6 +757,7 @@
+     default_errnos = [
+         ('ECONNREFUSED', 111),
+         ('ECONNRESET', 104),
++        ('EHOSTUNREACH', 113),
+         ('ENETUNREACH', 101),
+         ('ETIMEDOUT', 110),
+     ]
+@@ -1219,3 +1220,13 @@
+         if v > 0:
+             args.append('-' + opt * v)
+     return args
++
++def strip_python_stderr(stderr):
++    """Strip the stderr of a Python process from potential debug output
++    emitted by the interpreter.
++
++    This will typically be run on the result of the communicate() method
++    of a subprocess.Popen object.
++    """
++    stderr = re.sub(br"\[\d+ refs\]\r?\n?$", b"", stderr).strip()
++    return stderr
+--- a/Lib/test/test_collections.py
++++ b/Lib/test/test_collections.py
+@@ -355,8 +355,19 @@
+         for x in samples:
+             self.assertIsInstance(x, Iterator)
+             self.assertTrue(issubclass(type(x), Iterator), repr(type(x)))
+-        self.validate_abstract_methods(Iterator, 'next')
+-        self.validate_isinstance(Iterator, 'next')
++        self.validate_abstract_methods(Iterator, 'next', '__iter__')
++
++        # Issue 10565
++        class NextOnly:
++            def __next__(self):
++                yield 1
++                raise StopIteration
++        self.assertNotIsInstance(NextOnly(), Iterator)
++        class NextOnlyNew(object):
++            def __next__(self):
++                yield 1
++                raise StopIteration
++        self.assertNotIsInstance(NextOnlyNew(), Iterator)
+ 
+     def test_Sized(self):
+         non_samples = [None, 42, 3.14, 1j,
+@@ -801,6 +812,10 @@
+         self.assertEqual(list(d.items()),
+             [('a', 1), ('b', 2), ('c', 3), ('d', 4), ('e', 5), ('f', 6), ('g', 7)])
+ 
++    def test_abc(self):
++        self.assertIsInstance(OrderedDict(), MutableMapping)
++        self.assertTrue(issubclass(OrderedDict, MutableMapping))
++
+     def test_clear(self):
+         pairs = [('c', 1), ('b', 2), ('a', 3), ('d', 4), ('e', 5), ('f', 6)]
+         shuffle(pairs)
+@@ -862,6 +877,17 @@
+         self.assertEqual(len(od), 0)
+         self.assertEqual(od.pop(k, 12345), 12345)
+ 
++        # make sure pop still works when __missing__ is defined
++        class Missing(OrderedDict):
++            def __missing__(self, key):
++                return 0
++        m = Missing(a=1)
++        self.assertEqual(m.pop('b', 5), 5)
++        self.assertEqual(m.pop('a', 6), 1)
++        self.assertEqual(m.pop('a', 6), 6)
++        with self.assertRaises(KeyError):
++            m.pop('a')
++
+     def test_equality(self):
+         pairs = [('c', 1), ('b', 2), ('a', 3), ('d', 4), ('e', 5), ('f', 6)]
+         shuffle(pairs)
+@@ -945,6 +971,12 @@
+         # make sure 'x' is added to the end
+         self.assertEqual(list(od.items())[-1], ('x', 10))
+ 
++        # make sure setdefault still works when __missing__ is defined
++        class Missing(OrderedDict):
++            def __missing__(self, key):
++                return 0
++        self.assertEqual(Missing().setdefault(5, 9), 9)
++
+     def test_reinsert(self):
+         # Given insert a, insert b, delete a, re-insert a,
+         # verify that a is now later than b.
+@@ -962,6 +994,13 @@
+         self.assertEqual(list(od.viewvalues()),  [None for k in s])
+         self.assertEqual(list(od.viewitems()),  [(k, None) for k in s])
+ 
++    def test_override_update(self):
++        # Verify that subclasses can override update() without breaking __init__()
++        class MyOD(OrderedDict):
++            def update(self, *args, **kwds):
++                raise Exception()
++        items = [('a', 1), ('c', 3), ('b', 2)]
++        self.assertEqual(list(MyOD(items).items()), items)
+ 
+ class GeneralMappingTests(mapping_tests.BasicTestMappingProtocol):
+     type2test = OrderedDict
+--- a/Lib/test/test_ast.py
++++ b/Lib/test/test_ast.py
+@@ -264,6 +264,14 @@
+             'op=Add(), right=Num(n=1, lineno=4, col_offset=4), lineno=4, '
+             'col_offset=0))'
+         )
++        # issue10869: do not increment lineno of root twice
++        src = ast.parse('1 + 1', mode='eval')
++        self.assertEqual(ast.increment_lineno(src.body, n=3), src.body)
++        self.assertEqual(ast.dump(src, include_attributes=True),
++            'Expression(body=BinOp(left=Num(n=1, lineno=4, col_offset=0), '
++            'op=Add(), right=Num(n=1, lineno=4, col_offset=4), lineno=4, '
++            'col_offset=0))'
++        )
+ 
+     def test_iter_fields(self):
+         node = ast.parse('foo()', mode='eval')
+--- a/Lib/urlparse.py
++++ b/Lib/urlparse.py
+@@ -256,14 +256,9 @@
+     if path[:1] == '/':
+         return urlunparse((scheme, netloc, path,
+                            params, query, fragment))
+-    if not path:
++    if not path and not params:
+         path = bpath
+-        if not params:
+-            params = bparams
+-        else:
+-            path = path[:-1]
+-            return urlunparse((scheme, netloc, path,
+-                                params, query, fragment))
++        params = bparams
+         if not query:
+             query = bquery
+         return urlunparse((scheme, netloc, path,
+--- a/Lib/HTMLParser.py
++++ b/Lib/HTMLParser.py
+@@ -367,13 +367,16 @@
+             return s
+         def replaceEntities(s):
+             s = s.groups()[0]
+-            if s[0] == "#":
+-                s = s[1:]
+-                if s[0] in ['x','X']:
+-                    c = int(s[1:], 16)
+-                else:
+-                    c = int(s)
+-                return unichr(c)
++            try:
++                if s[0] == "#":
++                    s = s[1:]
++                    if s[0] in ['x','X']:
++                        c = int(s[1:], 16)
++                    else:
++                        c = int(s)
++                    return unichr(c)
++            except ValueError:
++                return '&#'+s+';'
+             else:
+                 # Cannot use name2codepoint directly, because HTMLParser supports apos,
+                 # which is not part of HTML 4
+--- a/Makefile.pre.in
++++ b/Makefile.pre.in
+@@ -536,9 +536,12 @@
+ 	$(MAINCC) -c $(PY_CFLAGS) -o $@ $(srcdir)/Modules/python.c
+ 
+ 
+-$(GRAMMAR_H) $(GRAMMAR_C): $(PGEN) $(GRAMMAR_INPUT)
++# Use a stamp file to prevent make -j invoking pgen twice
++$(GRAMMAR_H) $(GRAMMAR_C): Parser/pgen.stamp
++Parser/pgen.stamp: $(PGEN) $(GRAMMAR_INPUT)
+ 		-@$(INSTALL) -d Include
+-		-$(PGEN) $(GRAMMAR_INPUT) $(GRAMMAR_H) $(GRAMMAR_C)
++		$(PGEN) $(GRAMMAR_INPUT) $(GRAMMAR_H) $(GRAMMAR_C)
++		-touch Parser/pgen.stamp
+ 
+ $(PGEN):	$(PGENOBJS)
+ 		$(CC) $(OPT) $(LDFLAGS) $(PGENOBJS) $(LIBS) -o $(PGEN)
+@@ -1184,7 +1187,7 @@
+ 
+ clobber: clean profile-removal
+ 	-rm -f $(BUILDPYTHON) $(PGEN) $(LIBRARY) $(LDLIBRARY) $(DLLLIBRARY) \
+-		tags TAGS \
++		tags TAGS Parser/pgen.stamp \
+ 		config.cache config.log pyconfig.h Modules/config.c
+ 	-rm -rf build platform
+ 	-rm -rf $(PYTHONFRAMEWORKDIR)
+--- a/Modules/_ssl.c
++++ b/Modules/_ssl.c
+@@ -1046,10 +1046,10 @@
+     char *cipher_protocol;
+ 
+     if (self->ssl == NULL)
+-        return Py_None;
++        Py_RETURN_NONE;
+     current = SSL_get_current_cipher(self->ssl);
+     if (current == NULL)
+-        return Py_None;
++        Py_RETURN_NONE;
+ 
+     retval = PyTuple_New(3);
+     if (retval == NULL)
+@@ -1057,6 +1057,7 @@
+ 
+     cipher_name = (char *) SSL_CIPHER_get_name(current);
+     if (cipher_name == NULL) {
++        Py_INCREF(Py_None);
+         PyTuple_SET_ITEM(retval, 0, Py_None);
+     } else {
+         v = PyString_FromString(cipher_name);
+@@ -1066,6 +1067,7 @@
+     }
+     cipher_protocol = SSL_CIPHER_get_version(current);
+     if (cipher_protocol == NULL) {
++        Py_INCREF(Py_None);
+         PyTuple_SET_ITEM(retval, 1, Py_None);
+     } else {
+         v = PyString_FromString(cipher_protocol);
+--- a/Modules/_ctypes/libffi_msvc/ffi.c
++++ b/Modules/_ctypes/libffi_msvc/ffi.c
+@@ -380,7 +380,7 @@
+   short bytes;
+   char *tramp;
+ #ifdef _WIN64
+-  int mask;
++  int mask = 0;
+ #endif
+   FFI_ASSERT (cif->abi == FFI_SYSV);
+   
+--- a/Modules/_ctypes/_ctypes_test.c
++++ b/Modules/_ctypes/_ctypes_test.c
+@@ -25,6 +25,20 @@
+ 
+ /* some functions handy for testing */
+ 
++EXPORT(int)
++_testfunc_cbk_reg_int(int a, int b, int c, int d, int e,
++                      int (*func)(int, int, int, int, int))
++{
++    return func(a*a, b*b, c*c, d*d, e*e);
++}
++
++EXPORT(double)
++_testfunc_cbk_reg_double(double a, double b, double c, double d, double e,
++                         double (*func)(double, double, double, double, double))
++{
++    return func(a*a, b*b, c*c, d*d, e*e);
++}
++
+ EXPORT(void)testfunc_array(int values[4])
+ {
+     printf("testfunc_array %d %d %d %d\n",
+--- a/Modules/_io/bufferedio.c
++++ b/Modules/_io/bufferedio.c
+@@ -224,6 +224,7 @@
+ 
+ #ifdef WITH_THREAD
+     PyThread_type_lock lock;
++    volatile long owner;
+ #endif
+ 
+     Py_ssize_t buffer_size;
+@@ -259,17 +260,39 @@
+ /* These macros protect the buffered object against concurrent operations. */
+ 
+ #ifdef WITH_THREAD
+-#define ENTER_BUFFERED(self) \
+-    if (!PyThread_acquire_lock(self->lock, 0)) { \
+-        Py_BEGIN_ALLOW_THREADS \
+-        PyThread_acquire_lock(self->lock, 1); \
+-        Py_END_ALLOW_THREADS \
++
++static int
++_enter_buffered_busy(buffered *self)
++{
++    if (self->owner == PyThread_get_thread_ident()) {
++        PyObject *r = PyObject_Repr((PyObject *) self);
++        if (r != NULL) {
++            PyErr_Format(PyExc_RuntimeError,
++                         "reentrant call inside %s",
++                         PyString_AS_STRING(r));
++            Py_DECREF(r);
++        }
++        return 0;
+     }
++    Py_BEGIN_ALLOW_THREADS
++    PyThread_acquire_lock(self->lock, 1);
++    Py_END_ALLOW_THREADS
++    return 1;
++}
++
++#define ENTER_BUFFERED(self) \
++    ( (PyThread_acquire_lock(self->lock, 0) ? \
++       1 : _enter_buffered_busy(self)) \
++     && (self->owner = PyThread_get_thread_ident(), 1) )
+ 
+ #define LEAVE_BUFFERED(self) \
+-    PyThread_release_lock(self->lock);
++    do { \
++        self->owner = 0; \
++        PyThread_release_lock(self->lock); \
++    } while(0);
++
+ #else
+-#define ENTER_BUFFERED(self)
++#define ENTER_BUFFERED(self) 1
+ #define LEAVE_BUFFERED(self)
+ #endif
+ 
+@@ -425,7 +448,8 @@
+     int r;
+ 
+     CHECK_INITIALIZED(self)
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        return NULL;
+ 
+     r = buffered_closed(self);
+     if (r < 0)
+@@ -438,7 +462,8 @@
+     /* flush() will most probably re-take the lock, so drop it first */
+     LEAVE_BUFFERED(self)
+     res = PyObject_CallMethodObjArgs((PyObject *)self, _PyIO_str_flush, NULL);
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        return NULL;
+     if (res == NULL) {
+         goto end;
+     }
+@@ -643,6 +668,7 @@
+         PyErr_SetString(PyExc_RuntimeError, "can't allocate read lock");
+         return -1;
+     }
++    self->owner = 0;
+ #endif
+     /* Find out whether buffer_size is a power of 2 */
+     /* XXX is this optimization useful? */
+@@ -669,7 +695,8 @@
+     CHECK_INITIALIZED(self)
+     CHECK_CLOSED(self, "flush of closed file")
+ 
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        return NULL;
+     res = _bufferedwriter_flush_unlocked(self, 0);
+     if (res != NULL && self->readable) {
+         /* Rewind the raw stream so that its position corresponds to
+@@ -696,7 +723,8 @@
+         return NULL;
+     }
+ 
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        return NULL;
+ 
+     if (self->writable) {
+         res = _bufferedwriter_flush_unlocked(self, 1);
+@@ -731,7 +759,8 @@
+ 
+     if (n == -1) {
+         /* The number of bytes is unspecified, read until the end of stream */
+-        ENTER_BUFFERED(self)
++        if (!ENTER_BUFFERED(self))
++            return NULL;
+         res = _bufferedreader_read_all(self);
+         LEAVE_BUFFERED(self)
+     }
+@@ -739,7 +768,8 @@
+         res = _bufferedreader_read_fast(self, n);
+         if (res == Py_None) {
+             Py_DECREF(res);
+-            ENTER_BUFFERED(self)
++            if (!ENTER_BUFFERED(self))
++                return NULL;
+             res = _bufferedreader_read_generic(self, n);
+             LEAVE_BUFFERED(self)
+         }
+@@ -767,7 +797,8 @@
+     if (n == 0)
+         return PyBytes_FromStringAndSize(NULL, 0);
+ 
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        return NULL;
+     
+     if (self->writable) {
+         res = _bufferedwriter_flush_unlocked(self, 1);
+@@ -823,7 +854,8 @@
+     
+     /* TODO: use raw.readinto() instead! */
+     if (self->writable) {
+-        ENTER_BUFFERED(self)
++        if (!ENTER_BUFFERED(self))
++            return NULL;
+         res = _bufferedwriter_flush_unlocked(self, 0);
+         LEAVE_BUFFERED(self)
+         if (res == NULL)
+@@ -867,7 +899,8 @@
+         goto end_unlocked;
+     }
+ 
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        goto end_unlocked;
+ 
+     /* Now we try to get some more from the raw stream */
+     if (self->writable) {
+@@ -1017,7 +1050,8 @@
+         }
+     }
+ 
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        return NULL;
+ 
+     /* Fallback: invoke raw seek() method and clear buffer */
+     if (self->writable) {
+@@ -1055,7 +1089,8 @@
+         return NULL;
+     }
+ 
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self))
++        return NULL;
+ 
+     if (self->writable) {
+         res = _bufferedwriter_flush_unlocked(self, 0);
+@@ -1478,7 +1513,7 @@
+ };
+ 
+ static PyMemberDef bufferedreader_members[] = {
+-    {"raw", T_OBJECT, offsetof(buffered, raw), 0},
++    {"raw", T_OBJECT, offsetof(buffered, raw), READONLY},
+     {NULL}
+ };
+ 
+@@ -1715,7 +1750,10 @@
+         return NULL;
+     }
+ 
+-    ENTER_BUFFERED(self)
++    if (!ENTER_BUFFERED(self)) {
++        PyBuffer_Release(&buf);
++        return NULL;
++    }
+ 
+     /* Fast path: the data to write can be fully buffered. */
+     if (!VALID_READ_BUFFER(self) && !VALID_WRITE_BUFFER(self)) {
+@@ -1858,7 +1896,7 @@
+ };
+ 
+ static PyMemberDef bufferedwriter_members[] = {
+-    {"raw", T_OBJECT, offsetof(buffered, raw), 0},
++    {"raw", T_OBJECT, offsetof(buffered, raw), READONLY},
+     {NULL}
+ };
+ 
+@@ -2248,7 +2286,7 @@
+ };
+ 
+ static PyMemberDef bufferedrandom_members[] = {
+-    {"raw", T_OBJECT, offsetof(buffered, raw), 0},
++    {"raw", T_OBJECT, offsetof(buffered, raw), READONLY},
+     {NULL}
+ };
+ 
+--- a/Modules/mmapmodule.c
++++ b/Modules/mmapmodule.c
+@@ -90,7 +90,11 @@
+     char *      data;
+     size_t      size;
+     size_t      pos;    /* relative to offset */
+-    size_t      offset;
++#ifdef MS_WINDOWS
++    PY_LONG_LONG offset;
++#else
++    off_t       offset;
++#endif
+ 
+ #ifdef MS_WINDOWS
+     HANDLE      map_handle;
+@@ -124,7 +128,8 @@
+     if (m_obj->fd >= 0)
+         (void) close(m_obj->fd);
+     if (m_obj->data!=NULL) {
+-        msync(m_obj->data, m_obj->size, MS_SYNC);
++        if (m_obj->access != ACCESS_READ && m_obj->access != ACCESS_COPY)
++            msync(m_obj->data, m_obj->size, MS_SYNC);
+         munmap(m_obj->data, m_obj->size);
+     }
+ #endif /* UNIX */
+@@ -423,7 +428,11 @@
+             PyErr_SetFromErrno(mmap_module_error);
+             return NULL;
+         }
+-        return PyInt_FromSsize_t(buf.st_size);
++#ifdef HAVE_LARGEFILE_SUPPORT
++        return PyLong_FromLongLong(buf.st_size);
++#else
++        return PyInt_FromLong(buf.st_size);
++#endif
+     }
+ #endif /* UNIX */
+ }
+@@ -457,17 +466,10 @@
+         CloseHandle(self->map_handle);
+         self->map_handle = NULL;
+         /* Move to the desired EOF position */
+-#if SIZEOF_SIZE_T > 4
+         newSizeHigh = (DWORD)((self->offset + new_size) >> 32);
+         newSizeLow = (DWORD)((self->offset + new_size) & 0xFFFFFFFF);
+         off_hi = (DWORD)(self->offset >> 32);
+         off_lo = (DWORD)(self->offset & 0xFFFFFFFF);
+-#else
+-        newSizeHigh = 0;
+-        newSizeLow = (DWORD)(self->offset + new_size);
+-        off_hi = 0;
+-        off_lo = (DWORD)self->offset;
+-#endif
+         SetFilePointer(self->file_handle,
+                        newSizeLow, &newSizeHigh, FILE_BEGIN);
+         /* Change the size of the file */
+@@ -559,6 +561,10 @@
+         PyErr_SetString(PyExc_ValueError, "flush values out of range");
+         return NULL;
+     }
++
++    if (self->access == ACCESS_READ || self->access == ACCESS_COPY)
++        return PyLong_FromLong(0);
++
+ #ifdef MS_WINDOWS
+     return PyInt_FromLong((long) FlushViewOfFile(self->data+offset, size));
+ #elif defined(UNIX)
+@@ -1094,6 +1100,12 @@
+ }
+ 
+ #ifdef UNIX
++#ifdef HAVE_LARGEFILE_SUPPORT
++#define _Py_PARSE_OFF_T "L"
++#else
++#define _Py_PARSE_OFF_T "l"
++#endif
++
+ static PyObject *
+ new_mmap_object(PyTypeObject *type, PyObject *args, PyObject *kwdict)
+ {
+@@ -1101,8 +1113,9 @@
+     struct stat st;
+ #endif
+     mmap_object *m_obj;
+-    PyObject *map_size_obj = NULL, *offset_obj = NULL;
+-    Py_ssize_t map_size, offset;
++    PyObject *map_size_obj = NULL;
++    Py_ssize_t map_size;
++    off_t offset = 0;
+     int fd, flags = MAP_SHARED, prot = PROT_WRITE | PROT_READ;
+     int devzero = -1;
+     int access = (int)ACCESS_DEFAULT;
+@@ -1110,16 +1123,18 @@
+                                      "flags", "prot",
+                                      "access", "offset", NULL};
+ 
+-    if (!PyArg_ParseTupleAndKeywords(args, kwdict, "iO|iiiO", keywords,
++    if (!PyArg_ParseTupleAndKeywords(args, kwdict, "iO|iii" _Py_PARSE_OFF_T, keywords,
+                                      &fd, &map_size_obj, &flags, &prot,
+-                                     &access, &offset_obj))
++                                     &access, &offset))
+         return NULL;
+     map_size = _GetMapSize(map_size_obj, "size");
+     if (map_size < 0)
+         return NULL;
+-    offset = _GetMapSize(offset_obj, "offset");
+-    if (offset < 0)
++    if (offset < 0) {
++        PyErr_SetString(PyExc_OverflowError,
++            "memory mapped offset must be positive");
+         return NULL;
++    }
+ 
+     if ((access != (int)ACCESS_DEFAULT) &&
+         ((flags != MAP_SHARED) || (prot != (PROT_WRITE | PROT_READ))))
+@@ -1159,8 +1174,19 @@
+ #  endif
+     if (fd != -1 && fstat(fd, &st) == 0 && S_ISREG(st.st_mode)) {
+         if (map_size == 0) {
+-            map_size = st.st_size;
+-        } else if ((size_t)offset + (size_t)map_size > st.st_size) {
++            if (offset >= st.st_size) {
++                PyErr_SetString(PyExc_ValueError,
++                                "mmap offset is greater than file size");
++                return NULL;
++            }
++            off_t calc_size = st.st_size - offset;
++            map_size = calc_size;
++            if (map_size != calc_size) {
++                PyErr_SetString(PyExc_ValueError,
++                                 "mmap length is too large");
++                 return NULL;
++             }
++        } else if (offset + (size_t)map_size > st.st_size) {
+             PyErr_SetString(PyExc_ValueError,
+                             "mmap length is greater than file size");
+             return NULL;
+@@ -1220,12 +1246,19 @@
+ #endif /* UNIX */
+ 
+ #ifdef MS_WINDOWS
++
++/* A note on sizes and offsets: while the actual map size must hold in a
++   Py_ssize_t, both the total file size and the start offset can be longer
++   than a Py_ssize_t, so we use PY_LONG_LONG which is always 64-bit.
++*/
++
+ static PyObject *
+ new_mmap_object(PyTypeObject *type, PyObject *args, PyObject *kwdict)
+ {
+     mmap_object *m_obj;
+-    PyObject *map_size_obj = NULL, *offset_obj = NULL;
+-    Py_ssize_t map_size, offset;
++    PyObject *map_size_obj = NULL;
++    Py_ssize_t map_size;
++    PY_LONG_LONG offset = 0, size;
+     DWORD off_hi;       /* upper 32 bits of offset */
+     DWORD off_lo;       /* lower 32 bits of offset */
+     DWORD size_hi;      /* upper 32 bits of size */
+@@ -1240,9 +1273,9 @@
+                                       "tagname",
+                                       "access", "offset", NULL };
+ 
+-    if (!PyArg_ParseTupleAndKeywords(args, kwdict, "iO|ziO", keywords,
++    if (!PyArg_ParseTupleAndKeywords(args, kwdict, "iO|ziL", keywords,
+                                      &fileno, &map_size_obj,
+-                                     &tagname, &access, &offset_obj)) {
++                                     &tagname, &access, &offset)) {
+         return NULL;
+     }
+ 
+@@ -1267,9 +1300,11 @@
+     map_size = _GetMapSize(map_size_obj, "size");
+     if (map_size < 0)
+         return NULL;
+-    offset = _GetMapSize(offset_obj, "offset");
+-    if (offset < 0)
++    if (offset < 0) {
++        PyErr_SetString(PyExc_OverflowError,
++            "memory mapped offset must be positive");
+         return NULL;
++    }
+ 
+     /* assume -1 and 0 both mean invalid filedescriptor
+        to 'anonymously' map memory.
+@@ -1332,21 +1367,26 @@
+                 return PyErr_SetFromWindowsErr(dwErr);
+             }
+ 
+-#if SIZEOF_SIZE_T > 4
+-            m_obj->size = (((size_t)high)<<32) + low;
+-#else
+-            if (high)
+-                /* File is too large to map completely */
+-                m_obj->size = (size_t)-1;
++            size = (((PY_LONG_LONG) high) << 32) + low;
++            if (offset >= size) {
++                PyErr_SetString(PyExc_ValueError,
++                                "mmap offset is greater than file size");
++                Py_DECREF(m_obj);
++                return NULL;
++            }
++            if (offset - size > PY_SSIZE_T_MAX)
++                /* Map area too large to fit in memory */
++                m_obj->size = (Py_ssize_t) -1;
+             else
+-                m_obj->size = low;
+-#endif
++                m_obj->size = (Py_ssize_t) (size - offset);
+         } else {
+             m_obj->size = map_size;
++            size = offset + map_size;
+         }
+     }
+     else {
+         m_obj->size = map_size;
++        size = offset + map_size;
+     }
+ 
+     /* set the initial position */
+@@ -1366,22 +1406,10 @@
+         m_obj->tagname = NULL;
+ 
+     m_obj->access = (access_mode)access;
+-    /* DWORD is a 4-byte int.  If we're on a box where size_t consumes
+-     * more than 4 bytes, we need to break it apart.  Else (size_t
+-     * consumes 4 bytes), C doesn't define what happens if we shift
+-     * right by 32, so we need different code.
+-     */
+-#if SIZEOF_SIZE_T > 4
+-    size_hi = (DWORD)((offset + m_obj->size) >> 32);
+-    size_lo = (DWORD)((offset + m_obj->size) & 0xFFFFFFFF);
++    size_hi = (DWORD)(size >> 32);
++    size_lo = (DWORD)(size & 0xFFFFFFFF);
+     off_hi = (DWORD)(offset >> 32);
+     off_lo = (DWORD)(offset & 0xFFFFFFFF);
+-#else
+-    size_hi = 0;
+-    size_lo = (DWORD)(offset + m_obj->size);
+-    off_hi = 0;
+-    off_lo = (DWORD)offset;
+-#endif
+     /* For files, it would be sufficient to pass 0 as size.
+        For anonymous maps, we have to pass the size explicitly. */
+     m_obj->map_handle = CreateFileMapping(m_obj->file_handle,
+--- a/Modules/unicodedata.c
++++ b/Modules/unicodedata.c
+@@ -682,10 +682,14 @@
+       comb = 0;
+       while (i1 < end) {
+           int comb1 = _getrecord_ex(*i1)->combining;
+-          if (comb && (comb1 == 0 || comb == comb1)) {
+-              /* Character is blocked. */
+-              i1++;
+-              continue;
++          if (comb) {
++              if (comb1 == 0)
++                  break;
++              if (comb >= comb1) {
++                  /* Character is blocked. */
++                  i1++;
++                  continue;
++              }
+           }
+           l = find_nfc_index(self, nfc_last, *i1);
+           /* *i1 cannot be combined with *i. If *i1
+@@ -709,6 +713,7 @@
+           /* Replace the original character. */
+           *i = code;
+           /* Mark the second character unused. */
++          assert(cskipped < 20);
+           skipped[cskipped++] = i1;
+           i1++;
+           f = find_nfc_index(self, nfc_first, *i);
+--- a/Modules/readline.c
++++ b/Modules/readline.c
+@@ -865,6 +865,14 @@
+         Py_FatalError("not enough memory to save locale");
+ #endif
+ 
++#ifdef __APPLE__
++    /* the libedit readline emulation resets key bindings etc 
++     * when calling rl_initialize.  So call it upfront
++     */
++    if (using_libedit_emulation)
++        rl_initialize();
++#endif /* __APPLE__ */
++
+     using_history();
+ 
+     rl_readline_name = "python";
+@@ -896,8 +904,13 @@
+      * XXX: A bug in the readline-2.2 library causes a memory leak
+      * inside this function.  Nothing we can do about it.
+      */
+-    rl_initialize();
+-
++#ifdef __APPLE__
++    if (using_libedit_emulation)
++	rl_read_init_file(NULL);
++    else
++#endif /* __APPLE__ */
++        rl_initialize();
++    
+     RESTORE_LOCALE(saved_locale)
+ }
+ 
+--- a/Modules/timemodule.c
++++ b/Modules/timemodule.c
+@@ -572,6 +572,10 @@
+     } else if (!gettmarg(tup, &buf))
+         return NULL;
+     p = asctime(&buf);
++    if (p == NULL) {
++        PyErr_SetString(PyExc_ValueError, "invalid time");
++        return NULL;
++    }
+     if (p[24] == '\n')
+         p[24] = '\0';
+     return PyString_FromString(p);
+@@ -628,8 +632,11 @@
+     time_t tt;
+     if (!gettmarg(tup, &buf))
+         return NULL;
++    buf.tm_wday = -1;  /* sentinel; original value ignored */
+     tt = mktime(&buf);
+-    if (tt == (time_t)(-1)) {
++    /* Return value of -1 does not necessarily mean an error, but tm_wday
++     * cannot remain set to -1 if mktime succedded. */
++    if (tt == (time_t)(-1) && buf.tm_wday == -1) {
+         PyErr_SetString(PyExc_OverflowError,
+                         "mktime argument out of range");
+         return NULL;
+@@ -667,7 +674,7 @@
+ }
+ 
+ PyDoc_STRVAR(tzset_doc,
+-"tzset(zone)\n\
++"tzset()\n\
+ \n\
+ Initialize, or reinitialize, the local timezone to the value stored in\n\
+ os.environ['TZ']. The TZ environment variable should be specified in\n\
+--- a/Modules/_collectionsmodule.c
++++ b/Modules/_collectionsmodule.c
+@@ -485,7 +485,8 @@
+         /* Advance left block/index pair */
+         leftindex++;
+         if (leftindex == BLOCKLEN) {
+-            assert (leftblock->rightlink != NULL);
++            if (leftblock->rightlink == NULL)
++                break;
+             leftblock = leftblock->rightlink;
+             leftindex = 0;
+         }
+@@ -493,7 +494,8 @@
+         /* Step backwards with the right block/index pair */
+         rightindex--;
+         if (rightindex == -1) {
+-            assert (rightblock->leftlink != NULL);
++            if (rightblock->leftlink == NULL)
++                break;
+             rightblock = rightblock->leftlink;
+             rightindex = BLOCKLEN - 1;
+         }
+@@ -509,7 +511,7 @@
+ {
+     block *leftblock = deque->leftblock;
+     Py_ssize_t leftindex = deque->leftindex;
+-    Py_ssize_t n = (deque->len);
++    Py_ssize_t n = deque->len;
+     Py_ssize_t i;
+     Py_ssize_t count = 0;
+     PyObject *item;
+@@ -533,7 +535,8 @@
+         /* Advance left block/index pair */
+         leftindex++;
+         if (leftindex == BLOCKLEN) {
+-            assert (leftblock->rightlink != NULL);
++            if (leftblock->rightlink == NULL)  /* can occur when i==n-1 */
++                break;
+             leftblock = leftblock->rightlink;
+             leftindex = 0;
+         }
+--- a/Modules/itertoolsmodule.c
++++ b/Modules/itertoolsmodule.c
+@@ -1215,6 +1215,7 @@
+ {
+     PyObject *item;
+     PyObject *it = lz->it;
++    Py_ssize_t stop = lz->stop;
+     Py_ssize_t oldnext;
+     PyObject *(*iternext)(PyObject *);
+ 
+@@ -1226,7 +1227,7 @@
+         Py_DECREF(item);
+         lz->cnt++;
+     }
+-    if (lz->stop != -1 && lz->cnt >= lz->stop)
++    if (stop != -1 && lz->cnt >= stop)
+         return NULL;
+     item = iternext(it);
+     if (item == NULL)
+@@ -1234,8 +1235,8 @@
+     lz->cnt++;
+     oldnext = lz->next;
+     lz->next += lz->step;
+-    if (lz->next < oldnext)     /* Check for overflow */
+-        lz->next = lz->stop;
++    if (lz->next < oldnext || (stop != -1 && lz->next > stop))
++        lz->next = stop;
+     return item;
+ }
+ 
+--- a/Modules/grpmodule.c
++++ b/Modules/grpmodule.c
+@@ -158,7 +158,9 @@
+ name is not valid, raise KeyError."},
+     {"getgrall",	grp_getgrall,	METH_NOARGS,
+      "getgrall() -> list of tuples\n\
+-Return a list of all available group entries, in arbitrary order."},
++Return a list of all available group entries, in arbitrary order.\n\
++An entry whose name starts with '+' or '-' represents an instruction\n\
++to use YP/NIS and may not be accessible via getgrnam or getgrgid."},
+     {NULL,		NULL}		/* sentinel */
+ };
+ 
+--- a/Modules/_json.c
++++ b/Modules/_json.c
+@@ -1732,7 +1732,7 @@
+     if (s->object_hook == NULL)
+         goto bail;
+     s->pairs_hook = PyObject_GetAttrString(ctx, "object_pairs_hook");
+-    if (s->object_hook == NULL)
++    if (s->pairs_hook == NULL)
+         goto bail;
+     s->parse_float = PyObject_GetAttrString(ctx, "parse_float");
+     if (s->parse_float == NULL)
+--- a/Modules/posixmodule.c
++++ b/Modules/posixmodule.c
+@@ -340,6 +340,8 @@
+ 
+ /* choose the appropriate stat and fstat functions and return structs */
+ #undef STAT
++#undef FSTAT
++#undef STRUCT_STAT
+ #if defined(MS_WIN64) || defined(MS_WINDOWS)
+ #       define STAT win32_stat
+ #       define FSTAT win32_fstat
+@@ -858,18 +860,18 @@
+     int st_gid;
+     int st_rdev;
+     __int64 st_size;
+-    int st_atime;
++    time_t st_atime;
+     int st_atime_nsec;
+-    int st_mtime;
++    time_t st_mtime;
+     int st_mtime_nsec;
+-    int st_ctime;
++    time_t st_ctime;
+     int st_ctime_nsec;
+ };
+ 
+ static __int64 secs_between_epochs = 11644473600; /* Seconds between 1.1.1601 and 1.1.1970 */
+ 
+ static void
+-FILE_TIME_to_time_t_nsec(FILETIME *in_ptr, int *time_out, int* nsec_out)
++FILE_TIME_to_time_t_nsec(FILETIME *in_ptr, time_t *time_out, int* nsec_out)
+ {
+     /* XXX endianness. Shouldn't matter, as all Windows implementations are little-endian */
+     /* Cannot simply cast and dereference in_ptr,
+@@ -877,12 +879,11 @@
+     __int64 in;
+     memcpy(&in, in_ptr, sizeof(in));
+     *nsec_out = (int)(in % 10000000) * 100; /* FILETIME is in units of 100 nsec. */
+-    /* XXX Win32 supports time stamps past 2038; we currently don't */
+-    *time_out = Py_SAFE_DOWNCAST((in / 10000000) - secs_between_epochs, __int64, int);
++    *time_out = Py_SAFE_DOWNCAST((in / 10000000) - secs_between_epochs, __int64, time_t);
+ }
+ 
+ static void
+-time_t_to_FILE_TIME(int time_in, int nsec_in, FILETIME *out_ptr)
++time_t_to_FILE_TIME(time_t time_in, int nsec_in, FILETIME *out_ptr)
+ {
+     /* XXX endianness */
+     __int64 out;
+@@ -2727,15 +2728,19 @@
+ #endif /* HAVE_UNAME */
+ 
+ static int
+-extract_time(PyObject *t, long* sec, long* usec)
++extract_time(PyObject *t, time_t* sec, long* usec)
+ {
+-    long intval;
++    time_t intval;
+     if (PyFloat_Check(t)) {
+         double tval = PyFloat_AsDouble(t);
+-        PyObject *intobj = Py_TYPE(t)->tp_as_number->nb_int(t);
++        PyObject *intobj = PyNumber_Long(t);
+         if (!intobj)
+             return -1;
++#if SIZEOF_TIME_T > SIZEOF_LONG
++        intval = PyInt_AsUnsignedLongLongMask(intobj);
++#else
+         intval = PyInt_AsLong(intobj);
++#endif
+         Py_DECREF(intobj);
+         if (intval == -1 && PyErr_Occurred())
+             return -1;
+@@ -2747,7 +2752,11 @@
+             *usec = 0;
+         return 0;
+     }
++#if SIZEOF_TIME_T > SIZEOF_LONG
++    intval = PyInt_AsUnsignedLongLongMask(t);
++#else
+     intval = PyInt_AsLong(t);
++#endif
+     if (intval == -1 && PyErr_Occurred())
+         return -1;
+     *sec = intval;
+@@ -2770,7 +2779,8 @@
+     wchar_t *wpath = NULL;
+     char *apath = NULL;
+     HANDLE hFile;
+-    long atimesec, mtimesec, ausec, musec;
++    time_t atimesec, mtimesec;
++    long ausec, musec;
+     FILETIME atime, mtime;
+     PyObject *result = NULL;
+ 
+@@ -2835,6 +2845,7 @@
+            something is wrong with the file, when it also
+            could be the time stamp that gives a problem. */
+         win32_error("utime", NULL);
++        goto done;
+     }
+     Py_INCREF(Py_None);
+     result = Py_None;
+@@ -2844,7 +2855,8 @@
+ #else /* MS_WINDOWS */
+ 
+     char *path = NULL;
+-    long atime, mtime, ausec, musec;
++    time_t atime, mtime;
++    long ausec, musec;
+     int res;
+     PyObject* arg;
+ 
+@@ -7295,13 +7307,17 @@
+                    "tempnam is a potential security risk to your program") < 0)
+         return NULL;
+ 
++    if (PyErr_WarnPy3k("tempnam has been removed in 3.x; "
++                       "use the tempfile module", 1) < 0)
++        return NULL;
++
+ #ifdef MS_WINDOWS
+     name = _tempnam(dir, pfx);
+ #else
+     name = tempnam(dir, pfx);
+ #endif
+     if (name == NULL)
+-    return PyErr_NoMemory();
++        return PyErr_NoMemory();
+     result = PyString_FromString(name);
+     free(name);
+     return result;
+@@ -7319,9 +7335,13 @@
+ {
+     FILE *fp;
+ 
++    if (PyErr_WarnPy3k("tmpfile has been removed in 3.x; "
++                       "use the tempfile module", 1) < 0)
++        return NULL;
++
+     fp = tmpfile();
+     if (fp == NULL)
+-    return posix_error();
++        return posix_error();
+     return PyFile_FromFile(fp, "<tmpfile>", "w+b", fclose);
+ }
+ #endif
+@@ -7342,22 +7362,26 @@
+                    "tmpnam is a potential security risk to your program") < 0)
+         return NULL;
+ 
++    if (PyErr_WarnPy3k("tmpnam has been removed in 3.x; "
++                       "use the tempfile module", 1) < 0)
++        return NULL;
++
+ #ifdef USE_TMPNAM_R
+     name = tmpnam_r(buffer);
+ #else
+     name = tmpnam(buffer);
+ #endif
+     if (name == NULL) {
+-    PyObject *err = Py_BuildValue("is", 0,
++        PyObject *err = Py_BuildValue("is", 0,
+ #ifdef USE_TMPNAM_R
+-                                  "unexpected NULL from tmpnam_r"
++                                      "unexpected NULL from tmpnam_r"
+ #else
+-                                  "unexpected NULL from tmpnam"
++                                      "unexpected NULL from tmpnam"
+ #endif
+-                                  );
+-    PyErr_SetObject(PyExc_OSError, err);
+-    Py_XDECREF(err);
+-    return NULL;
++                                      );
++        PyErr_SetObject(PyExc_OSError, err);
++        Py_XDECREF(err);
++        return NULL;
+     }
+     return PyString_FromString(buffer);
+ }
--- python2.7-2.7.1.orig/debian/patches/distutils-install-layout.diff
+++ python2.7-2.7.1/debian/patches/distutils-install-layout.diff
@@ -0,0 +1,331 @@
+# DP: distutils: Add an option --install-layout=deb, which
+# DP: - installs into $prefix/dist-packages instead of $prefix/site-packages.
+# DP: - doesn't encode the python version into the egg name.
+
+--- a/Doc/install/index.rst
++++ b/Doc/install/index.rst
+@@ -237,6 +237,8 @@
+ +-----------------+-----------------------------------------------------+--------------------------------------------------+-------+
+ | Platform        | Standard installation location                      | Default value                                    | Notes |
+ +=================+=====================================================+==================================================+=======+
++| Debian/Ubuntu   | :file:`{prefix}/lib/python{X.Y}/dist-packages`      | :file:`/usr/local/lib/python{X.Y}/dist-packages` | \(0)  |
+++-----------------+-----------------------------------------------------+--------------------------------------------------+-------+
+ | Unix (pure)     | :file:`{prefix}/lib/python{X.Y}/site-packages`      | :file:`/usr/local/lib/python{X.Y}/site-packages` | \(1)  |
+ +-----------------+-----------------------------------------------------+--------------------------------------------------+-------+
+ | Unix (non-pure) | :file:`{exec-prefix}/lib/python{X.Y}/site-packages` | :file:`/usr/local/lib/python{X.Y}/site-packages` | \(1)  |
+@@ -246,6 +248,14 @@
+ 
+ Notes:
+ 
++(0)
++   Starting with Python-2.6 Debian/Ubuntu uses for the Python which comes within
++   the Linux distribution a non-default name for the installation directory. This
++   is to avoid overwriting of the python modules which come with the distribution,
++   which unfortunately is the upstream behaviour of the installation tools. The
++   non-default name in :file:`/usr/local` is used not to overwrite a local python
++   installation (defaulting to :file:`/usr/local`).
++
+ (1)
+    Most Linux distributions include Python as a standard part of the system, so
+    :file:`{prefix}` and :file:`{exec-prefix}` are usually both :file:`/usr` on
+@@ -367,6 +377,15 @@
+ 
+    /usr/bin/python setup.py install --prefix=/usr/local
+ 
++Starting with Python-2.6 Debian/Ubuntu does use
++:file:`/usr/lib/python{X.Y}/dist-packages` and
++:file:`/usr/local/lib/python{X.Y}/dist-packages` for the installation
++of python modules included in the Linux distribution.  To overwrite
++the name of the site directory, explicitely use the :option:`--prefix`
++option, however make sure that the installation path is included in
++``sys.path``.  For packaging of python modules for Debian/Ubuntu, use
++the new ``setup.py install`` option :option:`--install-layout=deb`.
++
+ Another possibility is a network filesystem where the name used to write to a
+ remote directory is different from the name used to read it: for example, the
+ Python interpreter accessed as :file:`/usr/local/bin/python` might search for
+@@ -605,6 +624,17 @@
+ import them, this directory must be added to ``sys.path``.  There are several
+ different ways to add the directory.
+ 
++On Debian/Ubuntu, starting with Python-2.6 the convention for system
++installed packages is to put then in the
++:file:`/usr/lib/python{X.Y}/dist-packages/` directory, and for locally
++installed packages is to put them in the
++:file:`/usr/lib/python{X.Y}/dist-packages/` directory.  To share the
++locally installed packages for the system provided Python with the
++locally installed packages of a local python installation, make
++:file:`/usr/lib/python{X.Y}/dist-packages/` a symbolic link to the
++:file:`{...}/site-packages/` directory of your local python
++installation.
++
+ The most convenient way is to add a path configuration file to a directory
+ that's already on Python's path, usually to the :file:`.../site-packages/`
+ directory.  Path configuration files have an extension of :file:`.pth`, and each
+--- a/Lib/distutils/command/install.py
++++ b/Lib/distutils/command/install.py
+@@ -47,6 +47,20 @@
+         'scripts': '$base/bin',
+         'data'   : '$base',
+         },
++    'unix_local': {
++        'purelib': '$base/local/lib/python$py_version_short/dist-packages',
++        'platlib': '$platbase/local/lib/python$py_version_short/dist-packages',
++        'headers': '$base/local/include/python$py_version_short/$dist_name',
++        'scripts': '$base/local/bin',
++        'data'   : '$base/local',
++        },
++    'deb_system': {
++        'purelib': '$base/lib/python$py_version_short/dist-packages',
++        'platlib': '$platbase/lib/python$py_version_short/dist-packages',
++        'headers': '$base/include/python$py_version_short/$dist_name',
++        'scripts': '$base/bin',
++        'data'   : '$base',
++        },
+     'unix_home': {
+         'purelib': '$base/lib/python',
+         'platlib': '$base/lib/python',
+@@ -154,6 +168,9 @@
+ 
+         ('record=', None,
+          "filename in which to record list of installed files"),
++
++        ('install-layout=', None,
++         "installation layout to choose (known values: deb, unix)"),
+         ]
+ 
+     boolean_options = ['compile', 'force', 'skip-build', 'user']
+@@ -168,6 +185,7 @@
+         self.exec_prefix = None
+         self.home = None
+         self.user = 0
++        self.prefix_option = None
+ 
+         # These select only the installation base; it's up to the user to
+         # specify the installation scheme (currently, that means supplying
+@@ -189,6 +207,9 @@
+         self.install_userbase = USER_BASE
+         self.install_usersite = USER_SITE
+ 
++        # enable custom installation, known values: deb
++        self.install_layout = None
++        
+         self.compile = None
+         self.optimize = None
+ 
+@@ -421,6 +442,7 @@
+             self.install_base = self.install_platbase = self.home
+             self.select_scheme("unix_home")
+         else:
++            self.prefix_option = self.prefix
+             if self.prefix is None:
+                 if self.exec_prefix is not None:
+                     raise DistutilsOptionError, \
+@@ -435,7 +457,23 @@
+ 
+             self.install_base = self.prefix
+             self.install_platbase = self.exec_prefix
+-            self.select_scheme("unix_prefix")
++            if self.install_layout:
++                if self.install_layout.lower() in ['deb']:
++                    self.select_scheme("deb_system")
++                elif self.install_layout.lower() in ['posix', 'unix']:
++                    self.select_scheme("unix_prefix")
++                else:
++                    raise DistutilsOptionError(
++                        "unknown value for --install-layout")
++            elif (self.prefix_option and os.path.normpath(self.prefix) != '/usr/local') \
++                    or 'PYTHONUSERBASE' in os.environ \
++                    or 'real_prefix' in sys.__dict__:
++                self.select_scheme("unix_prefix")
++            else:
++                if os.path.normpath(self.prefix) == '/usr/local':
++                    self.select_scheme("deb_system")
++                else:
++                    self.select_scheme("unix_local")
+ 
+     # finalize_unix ()
+ 
+--- a/Lib/distutils/command/install_egg_info.py
++++ b/Lib/distutils/command/install_egg_info.py
+@@ -14,18 +14,37 @@
+     description = "Install package's PKG-INFO metadata as an .egg-info file"
+     user_options = [
+         ('install-dir=', 'd', "directory to install to"),
++        ('install-layout', None, "custom installation layout"),
+     ]
+ 
+     def initialize_options(self):
+         self.install_dir = None
++        self.install_layout = None
++        self.prefix_option = None
+ 
+     def finalize_options(self):
+         self.set_undefined_options('install_lib',('install_dir','install_dir'))
+-        basename = "%s-%s-py%s.egg-info" % (
+-            to_filename(safe_name(self.distribution.get_name())),
+-            to_filename(safe_version(self.distribution.get_version())),
+-            sys.version[:3]
+-        )
++        self.set_undefined_options('install',('install_layout','install_layout'))
++        self.set_undefined_options('install',('prefix_option','prefix_option'))
++        if self.install_layout:
++            basename = "%s-%s.egg-info" % (
++                to_filename(safe_name(self.distribution.get_name())),
++                to_filename(safe_version(self.distribution.get_version()))
++                )
++            if not self.install_layout.lower() in ['deb']:
++                raise DistutilsOptionError(
++                    "unknown value for --install-layout")
++        elif self.prefix_option or 'real_prefix' in sys.__dict__:
++            basename = "%s-%s-py%s.egg-info" % (
++                to_filename(safe_name(self.distribution.get_name())),
++                to_filename(safe_version(self.distribution.get_version())),
++                sys.version[:3]
++                )
++        else:
++            basename = "%s-%s.egg-info" % (
++                to_filename(safe_name(self.distribution.get_name())),
++                to_filename(safe_version(self.distribution.get_version()))
++                )
+         self.target = os.path.join(self.install_dir, basename)
+         self.outputs = [self.target]
+ 
+--- a/Lib/distutils/sysconfig.py
++++ b/Lib/distutils/sysconfig.py
+@@ -110,6 +110,7 @@
+     If 'prefix' is supplied, use it instead of sys.prefix or
+     sys.exec_prefix -- i.e., ignore 'plat_specific'.
+     """
++    is_default_prefix = not prefix or os.path.normpath(prefix) in ('/usr', '/usr/local')
+     if prefix is None:
+         prefix = plat_specific and EXEC_PREFIX or PREFIX
+ 
+@@ -118,6 +119,8 @@
+                                  "lib", "python" + get_python_version())
+         if standard_lib:
+             return libpython
++        elif is_default_prefix and 'PYTHONUSERBASE' not in os.environ and 'real_prefix' not in sys.__dict__:
++            return os.path.join(libpython, "dist-packages")
+         else:
+             return os.path.join(libpython, "site-packages")
+ 
+--- a/Lib/site.py
++++ b/Lib/site.py
+@@ -285,6 +285,13 @@
+ 
+     if ENABLE_USER_SITE and os.path.isdir(user_site):
+         addsitedir(user_site, known_paths)
++    if ENABLE_USER_SITE:
++        for dist_libdir in ("local/lib", "lib"):
++            user_site = os.path.join(USER_BASE, dist_libdir,
++                                     "python" + sys.version[:3],
++                                     "dist-packages")
++            if os.path.isdir(user_site):
++                addsitedir(user_site, known_paths)
+     return known_paths
+ 
+ def getsitepackages():
+--- a/Lib/sysconfig.py
++++ b/Lib/sysconfig.py
+@@ -16,6 +16,26 @@
+         'scripts': '{base}/bin',
+         'data': '{base}',
+         },
++    'posix_local': {
++        'stdlib': '{base}/local/lib/python{py_version_short}',
++        'platstdlib': '{platbase}/local/lib/python{py_version_short}',
++        'purelib': '{base}/local/lib/python{py_version_short}/dist-packages',
++        'platlib': '{platbase}/local/lib/python{py_version_short}/dist-packages',
++        'include': '{base}/local/include/python{py_version_short}',
++        'platinclude': '{platbase}/local/include/python{py_version_short}',
++        'scripts': '{base}/local/bin',
++        'data': '{base}/local',
++        },
++    'deb_system': {
++        'stdlib': '{base}/lib/python{py_version_short}',
++        'platstdlib': '{platbase}/lib/python{py_version_short}',
++        'purelib': '{base}/lib/python{py_version_short}/dist-packages',
++        'platlib': '{platbase}/lib/python{py_version_short}/dist-packages',
++        'include': '{base}/include/python{py_version_short}',
++        'platinclude': '{platbase}/include/python{py_version_short}',
++        'scripts': '{base}/bin',
++        'data': '{base}',
++        },
+     'posix_home': {
+         'stdlib': '{base}/lib/python',
+         'platstdlib': '{base}/lib/python',
+@@ -125,7 +145,7 @@
+ _PYTHON_BUILD = is_python_build()
+ 
+ if _PYTHON_BUILD:
+-    for scheme in ('posix_prefix', 'posix_home'):
++    for scheme in ('posix_prefix', 'posix_local', 'deb_system', 'posix_home'):
+         _INSTALL_SCHEMES[scheme]['include'] = '{projectbase}/Include'
+         _INSTALL_SCHEMES[scheme]['platinclude'] = '{srcdir}'
+ 
+@@ -159,8 +179,11 @@
+ 
+ def _get_default_scheme():
+     if os.name == 'posix':
+-        # the default scheme for posix is posix_prefix
+-        return 'posix_prefix'
++        # the default scheme for posix on Debian/Ubuntu is posix_local
++        # FIXME: return dist-packages/posix_prefix only for
++        #   is_default_prefix and 'PYTHONUSERBASE' not in os.environ and 'real_prefix' not in sys.__dict__
++        # is_default_prefix = not prefix or os.path.normpath(prefix) in ('/usr', '/usr/local')
++        return 'posix_local'
+     return os.name
+ 
+ def _getuserbase():
+@@ -271,7 +294,7 @@
+ def _get_makefile_filename():
+     if _PYTHON_BUILD:
+         return os.path.join(_PROJECT_BASE, "Makefile")
+-    return os.path.join(get_path('platstdlib'), "config", "Makefile")
++    return os.path.join(get_path('platstdlib').replace("/usr/local","/usr",1), "config", "Makefile")
+ 
+ 
+ def _init_posix(vars):
+@@ -371,7 +394,7 @@
+         else:
+             inc_dir = _PROJECT_BASE
+     else:
+-        inc_dir = get_path('platinclude')
++        inc_dir = get_path('platinclude').replace("/usr/local","/usr",1)
+     return os.path.join(inc_dir, 'pyconfig.h')
+ 
+ def get_scheme_names():
+--- a/Lib/test/test_import.py
++++ b/Lib/test/test_import.py
+@@ -245,7 +245,7 @@
+         with check_warnings(('', ImportWarning)):
+             # Just a random non-package directory we always expect to be
+             # somewhere in sys.path...
+-            self.assertRaises(ImportError, __import__, "site-packages")
++            self.assertRaises(ImportError, __import__, "dist-packages")
+ 
+     def test_import_by_filename(self):
+         path = os.path.abspath(TESTFN)
+--- a/Lib/test/test_site.py
++++ b/Lib/test/test_site.py
+@@ -229,7 +229,7 @@
+         elif os.sep == '/':
+             self.assertEqual(len(dirs), 2)
+             wanted = os.path.join('xoxo', 'lib', 'python' + sys.version[:3],
+-                                  'site-packages')
++                                  'dist-packages')
+             self.assertEqual(dirs[0], wanted)
+             wanted = os.path.join('xoxo', 'lib', 'site-python')
+             self.assertEqual(dirs[1], wanted)
+--- a/Lib/test/test_sysconfig.py
++++ b/Lib/test/test_sysconfig.py
+@@ -236,7 +236,7 @@
+ 
+     def test_get_scheme_names(self):
+         wanted = ('nt', 'nt_user', 'os2', 'os2_home', 'osx_framework_user',
+-                  'posix_home', 'posix_prefix', 'posix_user')
++                  'posix_home', 'posix_prefix', 'posix_local', 'deb_system', 'posix_user')
+         self.assertEqual(get_scheme_names(), wanted)
+ 
+     def test_symlink(self):
--- python2.7-2.7.1.orig/debian/patches/libre.diff
+++ python2.7-2.7.1/debian/patches/libre.diff
@@ -0,0 +1,9 @@
+--- Doc/lib/libre.tex~	2003-07-25 09:29:22.000000000 +0200
++++ Doc/lib/libre.tex	2003-07-25 09:30:58.000000000 +0200
+@@ -919,5 +919,5 @@
+ Starting with Python 2.3, simple uses of the \regexp{*?} pattern are
+ special-cased to avoid recursion.  Thus, the above regular expression
+ can avoid recursion by being recast as
+-\regexp{Begin [a-zA-Z0-9_ ]*?end}.  As a further benefit, such regular
++`Begin [a-zA-Z0-9_ ]*?end'.  As a further benefit, such regular
+ expressions will run faster than their recursive equivalents.
--- python2.7-2.7.1.orig/debian/patches/plat-linux2_hppa.diff
+++ python2.7-2.7.1/debian/patches/plat-linux2_hppa.diff
@@ -0,0 +1,72 @@
+Index: Lib/plat-linux2/IN.py
+===================================================================
+--- ./Lib/plat-linux2/IN.py	(Revision 77754)
++++ ./Lib/plat-linux2/IN.py	(Arbeitskopie)
+@@ -442,37 +442,37 @@
+ SIOCGPGRP = 0x8904
+ SIOCATMARK = 0x8905
+ SIOCGSTAMP = 0x8906
+-SOL_SOCKET = 1
+-SO_DEBUG = 1
+-SO_REUSEADDR = 2
+-SO_TYPE = 3
+-SO_ERROR = 4
+-SO_DONTROUTE = 5
+-SO_BROADCAST = 6
+-SO_SNDBUF = 7
+-SO_RCVBUF = 8
+-SO_KEEPALIVE = 9
+-SO_OOBINLINE = 10
+-SO_NO_CHECK = 11
+-SO_PRIORITY = 12
+-SO_LINGER = 13
+-SO_BSDCOMPAT = 14
+-SO_PASSCRED = 16
+-SO_PEERCRED = 17
+-SO_RCVLOWAT = 18
+-SO_SNDLOWAT = 19
+-SO_RCVTIMEO = 20
+-SO_SNDTIMEO = 21
+-SO_SECURITY_AUTHENTICATION = 22
+-SO_SECURITY_ENCRYPTION_TRANSPORT = 23
+-SO_SECURITY_ENCRYPTION_NETWORK = 24
+-SO_BINDTODEVICE = 25
+-SO_ATTACH_FILTER = 26
+-SO_DETACH_FILTER = 27
+-SO_PEERNAME = 28
+-SO_TIMESTAMP = 29
++SOL_SOCKET = 0xffff
++SO_DEBUG = 0x0001
++SO_REUSEADDR = 0x0004
++SO_TYPE = 0x1008
++SO_ERROR = 0x1007
++SO_DONTROUTE = 0x0010
++SO_BROADCAST = 0x0020
++SO_SNDBUF = 0x1001
++SO_RCVBUF = 0x1002
++SO_KEEPALIVE = 0x0008
++SO_OOBINLINE = 0x0100
++SO_NO_CHECK = 0x400b
++SO_PRIORITY = 0x400c
++SO_LINGER = 0x0080
++SO_BSDCOMPAT = 0x400e
++SO_PASSCRED = 0x4010
++SO_PEERCRED = 0x4011
++SO_RCVLOWAT = 0x1004
++SO_SNDLOWAT = 0x1003
++SO_RCVTIMEO = 0x1006
++SO_SNDTIMEO = 0x1005
++SO_SECURITY_AUTHENTICATION = 0x4016
++SO_SECURITY_ENCRYPTION_TRANSPORT = 0x4017
++SO_SECURITY_ENCRYPTION_NETWORK = 0x4018
++SO_BINDTODEVICE = 0x4019
++SO_ATTACH_FILTER = 0x401a
++SO_DETACH_FILTER = 0x401b
++SO_PEERNAME = 0x2000
++SO_TIMESTAMP = 0x4012
+ SCM_TIMESTAMP = SO_TIMESTAMP
+-SO_ACCEPTCONN = 30
++SO_ACCEPTCONN = 0x401c
+ SOCK_STREAM = 1
+ SOCK_DGRAM = 2
+ SOCK_RAW = 3
--- python2.7-2.7.1.orig/debian/patches/enable-fpectl.diff
+++ python2.7-2.7.1/debian/patches/enable-fpectl.diff
@@ -0,0 +1,14 @@
+# DP: Enable the build of the fpectl module.
+
+--- a/setup.py
++++ b/setup.py
+@@ -1259,6 +1259,9 @@
+         else:
+             missing.append('_curses_panel')
+ 
++        #fpectl fpectlmodule.c ...
++        exts.append( Extension('fpectl', ['fpectlmodule.c']) )
++
+         # Andrew Kuchling's zlib module.  Note that some versions of zlib
+         # 1.1.3 have security problems.  See CERT Advisory CA-2002-07:
+         # http://www.cert.org/advisories/CA-2002-07.html
--- python2.7-2.7.1.orig/debian/patches/series.in
+++ python2.7-2.7.1/debian/patches/series.in
@@ -0,0 +1,52 @@
+autoconf-version.diff
+svn-updates.diff
+deb-setup.diff
+deb-locations.diff
+site-locations.diff
+distutils-install-layout.diff
+locale-module.diff
+distutils-link.diff
+distutils-sysconfig.diff
+test-sundry.diff
+tkinter-import.diff
+link-opt.diff
+debug-build.diff
+hotshot-import.diff
+profile-doc.diff
+webbrowser.diff
+linecache.diff
+doc-nodownload.diff
+profiled-build.diff
+no-zip-on-sys.path.diff
+platform-lsbrelease.diff
+bdist-wininst-notfound.diff
+setup-modules-ssl.diff
+makesetup-bashism.diff
+hurd-broken-poll.diff
+hurd-disable-nonworking-constants.diff
+enable-fpectl.diff
+make-pydoc-more-robust.diff
+statvfs-f_flag-constants.diff
+#if defined (arch_alpha)
+plat-linux2_alpha.diff
+#elif defined (arch_hppa)
+plat-linux2_hppa.diff
+#elif defined (arch_mips) || defined(arch_mipsel)
+plat-linux2_mips.diff
+#elif defined (arch_sparc) || defined (arch_sparc64)
+plat-linux2_sparc.diff
+#endif
+#if defined (BROKEN_UTIMES)
+disable-utimes.diff
+#endif
+#if defined (Ubuntu)
+langpack-gettext.diff
+#endif
+#if defined (arch_os_hurd)
+no-large-file-support.diff
+cthreads.diff
+#endif
+issue9012a.diff
+issue9054.diff
+link-system-expat.diff
+plat-gnukfreebsd.diff
--- python2.7-2.7.1.orig/debian/patches/locale-module.diff
+++ python2.7-2.7.1/debian/patches/locale-module.diff
@@ -0,0 +1,17 @@
+# DP:   * Lib/locale.py:
+# DP:     - Don't map 'utf8', 'utf-8' to 'utf', which is not a known encoding
+# DP:       for glibc.
+
+--- a/Lib/locale.py
++++ b/Lib/locale.py
+@@ -1512,8 +1512,8 @@
+     'uk_ua.iso88595':                       'uk_UA.ISO8859-5',
+     'uk_ua.koi8u':                          'uk_UA.KOI8-U',
+     'uk_ua.microsoftcp1251':                'uk_UA.CP1251',
+-    'univ':                                 'en_US.utf',
+-    'universal':                            'en_US.utf',
++    'univ':                                 'en_US.UTF-8',
++    'universal':                            'en_US.UTF-8',
+     'universal.utf8@ucs4':                  'en_US.UTF-8',
+     'ur':                                   'ur_PK.CP1256',
+     'ur_pk':                                'ur_PK.CP1256',
--- python2.7-2.7.1.orig/debian/patches/webbrowser.diff
+++ python2.7-2.7.1/debian/patches/webbrowser.diff
@@ -0,0 +1,27 @@
+# DP: Recognize other browsers: www-browser, x-www-browser, iceweasel, iceape.
+
+--- a/Lib/webbrowser.py
++++ b/Lib/webbrowser.py
+@@ -449,9 +449,13 @@
+     if "KDE_FULL_SESSION" in os.environ and _iscommand("kfmclient"):
+         register("kfmclient", Konqueror, Konqueror("kfmclient"))
+ 
++    if _iscommand("x-www-browser"):
++        register("x-www-browser", None, BackgroundBrowser("x-www-browser"))
++
+     # The Mozilla/Netscape browsers
+     for browser in ("mozilla-firefox", "firefox",
+                     "mozilla-firebird", "firebird",
++                    "iceweasel", "iceape",
+                     "seamonkey", "mozilla", "netscape"):
+         if _iscommand(browser):
+             register(browser, None, Mozilla(browser))
+@@ -489,6 +493,8 @@
+ 
+ # Also try console browsers
+ if os.environ.get("TERM"):
++    if _iscommand("www-browser"):
++        register("www-browser", None, GenericBrowser("www-browser"))
+     # The Links/elinks browsers <http://artax.karlin.mff.cuni.cz/~mikulas/links/>
+     if _iscommand("links"):
+         register("links", None, GenericBrowser("links"))
--- python2.7-2.7.1.orig/debian/patches/langpack-gettext.diff
+++ python2.7-2.7.1/debian/patches/langpack-gettext.diff
@@ -0,0 +1,34 @@
+# DP: Description: support alternative gettext tree in
+# DP: /usr/share/locale-langpack; if a file is present in both trees,
+# DP: prefer the newer one
+# DP: Upstream status: Ubuntu-Specific
+
+--- a/Lib/gettext.py
++++ b/Lib/gettext.py
+@@ -446,11 +446,26 @@
+         if lang == 'C':
+             break
+         mofile = os.path.join(localedir, lang, 'LC_MESSAGES', '%s.mo' % domain)
++        mofile_lp = os.path.join("/usr/share/locale-langpack", lang,
++                               'LC_MESSAGES', '%s.mo' % domain)
++
++	# first look into the standard locale dir, then into the 
++	# langpack locale dir
++
++	# standard mo file
+         if os.path.exists(mofile):
+             if all:
+                 result.append(mofile)
+             else:
+                 return mofile
++        
++	# langpack mofile -> use it
++        if os.path.exists(mofile_lp): 
++            if all:
++                result.append(mofile_lp)
++            else:
++                return mofile_lp
++
+     return result
+ 
+ 
--- python2.7-2.7.1.orig/debian/patches/plat-linux2_alpha.diff
+++ python2.7-2.7.1/debian/patches/plat-linux2_alpha.diff
@@ -0,0 +1,73 @@
+Index: Lib/plat-linux2/IN.py
+===================================================================
+--- ./Lib/plat-linux2/IN.py	(Revision 77754)
++++ ./Lib/plat-linux2/IN.py	(Arbeitskopie)
+@@ -436,43 +436,43 @@
+ # Included from asm/socket.h
+ 
+ # Included from asm/sockios.h
+-FIOSETOWN = 0x8901
+-SIOCSPGRP = 0x8902
+-FIOGETOWN = 0x8903
+-SIOCGPGRP = 0x8904
+-SIOCATMARK = 0x8905
++FIOSETOWN = 0x8004667c
++SIOCSPGRP = 0x80047308
++FIOGETOWN = 0x4004667b
++SIOCGPGRP = 0x40047309
++SIOCATMARK = 0x40047307
+ SIOCGSTAMP = 0x8906
+-SOL_SOCKET = 1
+-SO_DEBUG = 1
+-SO_REUSEADDR = 2
+-SO_TYPE = 3
+-SO_ERROR = 4
+-SO_DONTROUTE = 5
+-SO_BROADCAST = 6
+-SO_SNDBUF = 7
+-SO_RCVBUF = 8
+-SO_KEEPALIVE = 9
+-SO_OOBINLINE = 10
++SOL_SOCKET = 0xffff
++SO_DEBUG = 0x0001
++SO_REUSEADDR = 0x0004
++SO_TYPE = 0x1008
++SO_ERROR = 0x1007
++SO_DONTROUTE = 0x0010
++SO_BROADCAST = 0x0020
++SO_SNDBUF = 0x1001
++SO_RCVBUF = 0x1002
++SO_KEEPALIVE = 0x0008
++SO_OOBINLINE = 0x0100
+ SO_NO_CHECK = 11
+ SO_PRIORITY = 12
+-SO_LINGER = 13
++SO_LINGER = 0x0080
+ SO_BSDCOMPAT = 14
+ SO_PASSCRED = 16
+ SO_PEERCRED = 17
+-SO_RCVLOWAT = 18
+-SO_SNDLOWAT = 19
+-SO_RCVTIMEO = 20
+-SO_SNDTIMEO = 21
+-SO_SECURITY_AUTHENTICATION = 22
+-SO_SECURITY_ENCRYPTION_TRANSPORT = 23
+-SO_SECURITY_ENCRYPTION_NETWORK = 24
++SO_RCVLOWAT = 0x1010
++SO_SNDLOWAT = 0x1011
++SO_RCVTIMEO = 0x1012
++SO_SNDTIMEO = 0x1013
++SO_SECURITY_AUTHENTICATION = 19
++SO_SECURITY_ENCRYPTION_TRANSPORT = 20
++SO_SECURITY_ENCRYPTION_NETWORK = 21
+ SO_BINDTODEVICE = 25
+ SO_ATTACH_FILTER = 26
+ SO_DETACH_FILTER = 27
+ SO_PEERNAME = 28
+ SO_TIMESTAMP = 29
+ SCM_TIMESTAMP = SO_TIMESTAMP
+-SO_ACCEPTCONN = 30
++SO_ACCEPTCONN = 0x1014
+ SOCK_STREAM = 1
+ SOCK_DGRAM = 2
+ SOCK_RAW = 3
--- python2.7-2.7.1.orig/debian/patches/issue9012a.diff
+++ python2.7-2.7.1/debian/patches/issue9012a.diff
@@ -0,0 +1,13 @@
+# DP: Link _math.o only once to the static library.
+
+--- a/Modules/Setup.dist
++++ b/Modules/Setup.dist
+@@ -169,7 +169,7 @@
+ # Modules that should always be present (non UNIX dependent):
+ 
+ #array arraymodule.c	# array objects
+-#cmath cmathmodule.c _math.c # -lm # complex math library functions
++#cmath cmathmodule.c # -lm # complex math library functions
+ #math mathmodule.c _math.c # -lm # math library functions, e.g. sin()
+ #_struct _struct.c	# binary structure packing/unpacking
+ #time timemodule.c # -lm # time operations and variables
--- python2.7-2.7.1.orig/debian/patches/hurd-disable-nonworking-constants.diff
+++ python2.7-2.7.1/debian/patches/hurd-disable-nonworking-constants.diff
@@ -0,0 +1,34 @@
+# DP: Comment out constant exposed on the API which are not implemented on
+# DP: GNU/Hurd. They would not work at runtime anyway.
+
+--- a/Modules/posixmodule.c
++++ b/Modules/posixmodule.c
+@@ -9132,12 +9132,14 @@
+ #ifdef O_LARGEFILE
+     if (ins(d, "O_LARGEFILE", (long)O_LARGEFILE)) return -1;
+ #endif
++#ifndef __GNU__
+ #ifdef O_SHLOCK
+     if (ins(d, "O_SHLOCK", (long)O_SHLOCK)) return -1;
+ #endif
+ #ifdef O_EXLOCK
+     if (ins(d, "O_EXLOCK", (long)O_EXLOCK)) return -1;
+ #endif
++#endif
+ 
+ /* MS Windows */
+ #ifdef O_NOINHERIT
+--- a/Modules/socketmodule.c
++++ b/Modules/socketmodule.c
+@@ -4793,9 +4793,11 @@
+ #ifdef  SO_OOBINLINE
+     PyModule_AddIntConstant(m, "SO_OOBINLINE", SO_OOBINLINE);
+ #endif
++#ifndef __GNU__
+ #ifdef  SO_REUSEPORT
+     PyModule_AddIntConstant(m, "SO_REUSEPORT", SO_REUSEPORT);
+ #endif
++#endif
+ #ifdef  SO_SNDBUF
+     PyModule_AddIntConstant(m, "SO_SNDBUF", SO_SNDBUF);
+ #endif
--- python2.7-2.7.1.orig/debian/patches/deb-setup.diff
+++ python2.7-2.7.1/debian/patches/deb-setup.diff
@@ -0,0 +1,31 @@
+# DP: Don't include /usr/local/include and /usr/local/lib as gcc search paths
+# DP: Include /usr/include/<triplet> and /usr/lib/<triplet> as gcc search paths
+
+Index: python2.7-2.7.1/setup.py
+===================================================================
+--- python2.7-2.7.1.orig/setup.py
++++ python2.7-2.7.1/setup.py
+@@ -347,8 +347,12 @@
+ 
+     def detect_modules(self):
+         # Ensure that /usr/local is always used
+-        add_dir_to_list(self.compiler.library_dirs, '/usr/local/lib')
+-        add_dir_to_list(self.compiler.include_dirs, '/usr/local/include')
++        # On Debian /usr/local is always used, so we don't include it twice
++        #add_dir_to_list(self.compiler.library_dirs, '/usr/local/lib')
++        #add_dir_to_list(self.compiler.include_dirs, '/usr/local/include')
++        triplet = os.popen('dpkg-architecture -qDEB_HOST_MULTIARCH').readline()[:-1]
++        add_dir_to_list(self.compiler.library_dirs, '/usr/lib/%s' % triplet)
++        add_dir_to_list(self.compiler.include_dirs, '/usr/include/%s' % triplet)
+ 
+         # Add paths specified in the environment variables LDFLAGS and
+         # CPPFLAGS for header and library files.
+@@ -617,7 +617,7 @@
+                         break
+         # Issue 7384: If readline is already linked against curses,
+         # use the same library for the readline and curses modules.
+-        if 'curses' in readline_termcap_library:
++        if False and 'curses' in readline_termcap_library:
+             curses_library = readline_termcap_library
+         elif self.compiler.find_library_file(lib_dirs, 'ncursesw'):
+             curses_library = 'ncursesw'
--- python2.7-2.7.1.orig/debian/patches/hurd-broken-poll.diff
+++ python2.7-2.7.1/debian/patches/hurd-broken-poll.diff
@@ -0,0 +1,23 @@
+# DP: Fix build failure on hurd, working around poll() on systems
+# DP: on which it returns an error on invalid FDs.
+
+--- a/Modules/selectmodule.c
++++ b/Modules/selectmodule.c
+@@ -1743,7 +1743,7 @@
+ 
+ static PyMethodDef select_methods[] = {
+     {"select",          select_select,  METH_VARARGS,   select_doc},
+-#ifdef HAVE_POLL
++#if defined(HAVE_POLL) && !defined(HAVE_BROKEN_POLL)
+     {"poll",            select_poll,    METH_NOARGS,    poll_doc},
+ #endif /* HAVE_POLL */
+     {0,         0},     /* sentinel */
+@@ -1775,7 +1775,7 @@
+     PyModule_AddIntConstant(m, "PIPE_BUF", PIPE_BUF);
+ #endif
+ 
+-#if defined(HAVE_POLL)
++#if defined(HAVE_POLL) && !defined(HAVE_BROKEN_POLL)
+ #ifdef __APPLE__
+     if (select_have_broken_poll()) {
+         if (PyObject_DelAttrString(m, "poll") == -1) {
--- python2.7-2.7.1.orig/debian/patches/makesetup-bashism.diff
+++ python2.7-2.7.1/debian/patches/makesetup-bashism.diff
@@ -0,0 +1,13 @@
+# DP: Fix bashism in makesetup shell script
+
+--- a/Modules/makesetup
++++ b/Modules/makesetup
+@@ -281,7 +281,7 @@
+ 	-)	;;
+ 	*)	sedf="@sed.in.$$"
+ 		trap 'rm -f $sedf' 0 1 2 3
+-		echo "1i\\" >$sedf
++		printf "1i\\" >$sedf
+ 		str="# Generated automatically from $makepre by makesetup."
+ 		echo "$str" >>$sedf
+ 		echo "s%_MODOBJS_%$OBJS%" >>$sedf
--- python2.7-2.7.1.orig/debian/source/format
+++ python2.7-2.7.1/debian/source/format
@@ -0,0 +1 @@
+1.0
